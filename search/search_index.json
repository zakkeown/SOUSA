{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SOUSA: Synthetic Open Unified Snare Assessment","text":"<p>A synthetic dataset generator for all 40 PAS drum rudiments, designed to train machine learning models for drumming performance assessment.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>100K+ Samples - Comprehensive coverage of all PAS rudiments</li> <li>Multi-Soundfont Audio - Practice pad, marching snare, drum kits</li> <li>Audio Augmentation - Room acoustics, mic simulation, compression</li> <li>Hierarchical Labels - Stroke, measure, and exercise-level scores</li> <li>Profile-Based Splits - Proper train/val/test generalization</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from datasets import load_dataset\n\ndataset = load_dataset(\"zkeown/sousa\")\nsample = dataset[\"train\"][0]\nprint(f\"Rudiment: {sample['rudiment_slug']}\")\nprint(f\"Overall Score: {sample['overall_score']:.1f}\")\n</code></pre> <p>Get Started View on HuggingFace</p>"},{"location":"#what-is-sousa","title":"What is SOUSA?","text":"<p>SOUSA generates synthetic drum rudiment performances with realistic timing and velocity variations modeled from player skill profiles. Each sample includes:</p> <ul> <li>MIDI performance data with per-stroke timing and velocity</li> <li>Synthesized audio using multiple soundfonts (practice pad, marching snare, drum kits)</li> <li>Hierarchical labels at stroke, measure, and exercise levels</li> <li>Player profile metadata including skill tier and performance characteristics</li> </ul>"},{"location":"#dataset-overview","title":"Dataset Overview","text":"Component Description Rudiments All 40 PAS International Drum Rudiments Profiles 100 player profiles across 4 skill tiers Audio 44.1kHz FLAC, multiple soundfonts and augmentations Labels 0-100 scores for timing, velocity, balance, and more Splits Profile-based train/val/test (70/15/15)"},{"location":"#use-cases","title":"Use Cases","text":"<p>SOUSA is designed for:</p> <ul> <li>Performance Assessment - Train models to score drumming quality</li> <li>Skill Classification - Classify performances by skill level</li> <li>Rudiment Recognition - Identify which rudiment is being played</li> <li>Audio Understanding - General research on percussive audio</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li> <p> Installation</p> <p>Install SOUSA and its dependencies</p> <p> Installation Guide</p> </li> <li> <p> Quick Start</p> <p>Generate your first dataset in 5 minutes</p> <p> Quick Start</p> </li> <li> <p> Loading Data</p> <p>Access the dataset from HuggingFace or locally</p> <p> Loading Guide</p> </li> <li> <p> User Guide</p> <p>Detailed examples for ML tasks</p> <p> User Guide</p> </li> </ul>"},{"location":"#generation-presets","title":"Generation Presets","text":"Preset Profiles Tempos Augmentations Samples Storage small 10 3 1 ~1,200 ~1 GB medium 50 3 2 ~12,000 ~10 GB full 100 5 5 ~100,000 ~97 GB"},{"location":"#rudiments-covered","title":"Rudiments Covered","text":"<p>All 40 PAS International Drum Rudiments:</p> <ul> <li>Roll Rudiments (15): Single/Double/Triple Stroke Rolls, 5-17 Stroke Rolls</li> <li>Diddle Rudiments (5): Paradiddles and variants</li> <li>Flam Rudiments (12): Flam, Flam Accent, Flam Tap, Flamacue, etc.</li> <li>Drag Rudiments (8): Drags, Drag Taps, Ratamacue variants</li> </ul>"},{"location":"#license","title":"License","text":"<p>SOUSA is released under the MIT License.</p>"},{"location":"LIMITATIONS/","title":"Dataset Limitations","text":"<p>This document explicitly describes the known limitations and potential biases of the SOUSA dataset. Understanding these limitations is critical for appropriate use in ML research.</p>"},{"location":"LIMITATIONS/#synthetic-data-characteristics","title":"Synthetic Data Characteristics","text":""},{"location":"LIMITATIONS/#self-referential-labels","title":"Self-Referential Labels","text":"<p>SOUSA labels are derived from the same parameters used to generate the data. This creates a circular relationship:</p> <pre><code>PlayerProfile parameters -&gt; Generate timing/velocity errors -&gt; Compute scores from errors\n</code></pre> <p>Implications</p> <ul> <li>Models may learn the generation function rather than \"drumming quality\"</li> <li>High accuracy on SOUSA may not transfer to real-world assessment</li> <li>Labels are mathematically consistent but not validated against human perception</li> </ul> <p>Recommendation</p> <p>Treat SOUSA as a pretraining or development dataset. Validate models on real human performances before deployment.</p>"},{"location":"LIMITATIONS/#well-behaved-error-distribution","title":"Well-Behaved Error Distribution","text":"<p>Timing and velocity errors are sampled from Gaussian distributions with skill-tier-dependent parameters:</p> Dimension Beginner Professional Timing std (ms) ~50 ~7 Velocity std ~0.12 ~0.07 <p>What this captures:</p> <ul> <li>Gradual skill progression</li> <li>Correlated improvement across dimensions</li> <li>Realistic variance within skill tiers</li> </ul> <p>What this misses:</p> <ul> <li>Catastrophic failures (wrong sticking patterns, skipped notes)</li> <li>Tempo collapse under difficulty</li> <li>Fatigue effects over long exercises</li> <li>Cognitive errors (playing wrong rudiment)</li> <li>Recovery patterns after mistakes</li> </ul> <p>Implication</p> <p>Models trained on SOUSA may not handle out-of-distribution failures that occur in real practice sessions.</p>"},{"location":"LIMITATIONS/#instrument-limitations","title":"Instrument Limitations","text":""},{"location":"LIMITATIONS/#single-instrument","title":"Single Instrument","text":"<p>SOUSA generates snare drum only (MIDI note 38, General MIDI acoustic snare).</p> <p>Not included:</p> <ul> <li>Kick drum patterns</li> <li>Hi-hat/cymbal interplay</li> <li>Tom fills</li> <li>Full drum kit coordination</li> <li>Marching tenor (quads) or bass drum parts</li> </ul> <p>Implication</p> <p>Models are specialized for snare-only assessment and will not generalize to full kit drumming.</p>"},{"location":"LIMITATIONS/#soundfont-dependency","title":"Soundfont Dependency","text":"<p>Audio is synthesized using SF2 soundfonts, not recorded from physical instruments.</p> Soundfont Character <code>generalu</code> General MIDI standard <code>marching</code> Marching snare character <code>mtpowerd</code> Modern processed sound <code>douglasn</code> Natural acoustic character <code>fluidr3</code> FluidR3 GM standard <p>Implications:</p> <ul> <li>Timbral variety is limited to these 5 soundfonts</li> <li>Synthesized transients may differ from real drum recordings</li> <li>No stick type variation, head tuning, or snare wire adjustments</li> <li>Models may overfit to synthesis artifacts</li> </ul>"},{"location":"LIMITATIONS/#label-quality","title":"Label Quality","text":""},{"location":"LIMITATIONS/#perceptual-score-scaling-v02","title":"Perceptual Score Scaling (v0.2+)","text":"<p>Scores now use sigmoid scaling that better matches human perception:</p> <pre><code># Old linear scaling (v0.1):\ntiming_accuracy = 100 - (mean_abs_error_ms * 2)  # 0ms = 100, 50ms = 0\n\n# New sigmoid scaling (v0.2+):\ntiming_accuracy = 100 * sigmoid((25 - mean_abs_error) / 10)\n# &lt;10ms -&gt; 92-100 (imperceptible)\n# 25ms -&gt; 50 (noticeable)\n# &gt;50ms -&gt; 0-8 (clearly audible)\n</code></pre> <p>Version Compatibility</p> <p>If using pre-v0.2 datasets, scores will differ slightly. Regenerate for consistency.</p>"},{"location":"LIMITATIONS/#skill-tier-overlap-classification-ceiling","title":"Skill Tier Overlap (Classification Ceiling)","text":"<p>Due to realistic skill distributions, adjacent tiers have significant score overlap:</p> Adjacent Tiers Score Overlap beginner &lt;-&gt; intermediate ~67% intermediate &lt;-&gt; advanced ~83% advanced &lt;-&gt; professional ~83% <p>Implications:</p> <ul> <li>4-class skill tier classification has an inherent accuracy ceiling due to label noise</li> <li>A sample with score=50 could legitimately be beginner, intermediate, or advanced</li> <li>Models will plateau at ~70-80% accuracy regardless of capacity</li> </ul> <p>Mitigations provided:</p> <ol> <li> <p><code>tier_confidence</code> (0-1): Indicates how central a sample is to its tier's distribution. Filter low-confidence samples for cleaner training.</p> </li> <li> <p><code>skill_tier_binary</code> (novice/skilled): 2-class alternative with less overlap:</p> <ul> <li>novice = beginner + intermediate</li> <li>skilled = advanced + professional</li> </ul> </li> </ol> <p>Recommendation</p> <p>For classification, use <code>skill_tier_binary</code> or filter by <code>tier_confidence &gt; 0.5</code>. For assessment, use regression on <code>overall_score</code>.</p>"},{"location":"LIMITATIONS/#score-correlations-redundancy","title":"Score Correlations (Redundancy)","text":"<p>Several scores are highly correlated (r &gt; 0.85):</p> <pre><code>timing_accuracy &lt;-&gt; timing_consistency: r = 0.89\noverall_score &lt;-&gt; timing_consistency: r = 0.89\noverall_score &lt;-&gt; timing_accuracy: r = 0.88\n</code></pre> <p>Implications:</p> <ul> <li>Using all scores as separate targets provides no additional learning signal</li> <li>Multi-task models should use orthogonal targets</li> </ul> <p>Recommended minimal score set:</p> <ol> <li><code>overall_score</code> - General quality (captures correlated cluster)</li> <li><code>tempo_stability</code> - Independent signal about rushing/dragging</li> </ol>"},{"location":"LIMITATIONS/#hand-balance-ceiling-effect","title":"Hand Balance Ceiling Effect","text":"<p>The <code>hand_balance</code> score has a ceiling effect (mean=88, most samples near 100):</p> Metric Value Mean 87.7 Std 11.2 Range [35.3, 100.0] <p>Cause: v0.1 measured only velocity ratio, which is nearly always high.</p> <p>v0.2 fix: <code>hand_balance</code> now combines velocity (50%) + timing (50%) for better discrimination.</p> <p>Recommendation</p> <p>For pre-v0.2 datasets, exclude <code>hand_balance</code> from ML targets.</p>"},{"location":"LIMITATIONS/#no-human-validation","title":"No Human Validation","text":"<p>Scores are computed from mathematical formulas, not human ratings.</p> <p>Not validated:</p> <ul> <li>Perceptual relevance of scoring thresholds</li> <li>Whether a score of 75 \"sounds\" better than 65 to human listeners</li> <li>Inter-rater reliability with music instructors</li> <li>Cultural or stylistic scoring preferences</li> </ul> <p>Recommendation</p> <p>Do not interpret score outputs as equivalent to instructor feedback without external validation.</p>"},{"location":"LIMITATIONS/#rudiment-specific-score-availability","title":"Rudiment-Specific Score Availability","text":"<p>Some scores are only computed for applicable rudiments:</p> Score Available When <code>flam_quality</code> Rudiment contains flams <code>diddle_quality</code> Rudiment contains diddles <code>roll_sustain</code> Rudiment is a roll type <p>Implication</p> <p>Null values exist in the dataset. Handle appropriately in training (masking, separate heads, etc.).</p>"},{"location":"LIMITATIONS/#domain-gap-considerations","title":"Domain Gap Considerations","text":""},{"location":"LIMITATIONS/#synthetic-vs-real-recordings","title":"Synthetic vs. Real Recordings","text":"<p>Real drum recordings include factors not present in SOUSA:</p> Factor SOUSA Real World Bleed from other instruments No Yes Room acoustics Simulated IR Physical space Microphone characteristics Modeled Actual hardware Performance context Isolated Musical setting Player psychology None Nerves, fatigue, musicality <p>Implication: Models trained on SOUSA may struggle with:</p> <ul> <li>Multi-instrument mixes</li> <li>Unusual room characteristics</li> <li>Low-quality or phone recordings not matching augmentation presets</li> <li>Real performance variability</li> </ul>"},{"location":"LIMITATIONS/#augmentation-coverage","title":"Augmentation Coverage","text":"<p>SOUSA includes 10 augmentation presets ranging from clean studio to lo-fi:</p> <pre><code>clean_studio -&gt; practice_room -&gt; concert_hall -&gt; gym -&gt; lo_fi\n</code></pre> <p>Not covered:</p> <ul> <li>Extreme clipping or distortion</li> <li>Heavy compression artifacts (broadcast limiting)</li> <li>Pitch shifting or time stretching</li> <li>Real-world microphone failures</li> <li>Environmental noise beyond included profiles</li> </ul>"},{"location":"LIMITATIONS/#statistical-considerations","title":"Statistical Considerations","text":""},{"location":"LIMITATIONS/#skill-tier-distribution-class-imbalance","title":"Skill Tier Distribution &amp; Class Imbalance","text":"<p>Default generation uses:</p> Tier Proportion Imbalance Professional 8% 4.26x underrepresented Beginner 26% - Advanced 32% - Intermediate 34% majority class <p>Class imbalance ratio: 4.26:1 (intermediate vs professional)</p> <p>Implications:</p> <ul> <li>Models trained without class weights will be biased toward intermediate predictions</li> <li>Accuracy alone is misleading; use balanced accuracy</li> <li>Professional tier predictions will have lower recall</li> </ul> <p>Mitigations provided:</p> <ol> <li>Class weights are enabled by default in <code>skill_classification.py</code></li> <li>Balanced accuracy is used for early stopping and model selection</li> <li>Per-class metrics are reported in evaluation</li> </ol> <p>Recommendation</p> <p>Always use class weights for skill tier classification. Report balanced accuracy, not just accuracy.</p>"},{"location":"LIMITATIONS/#profile-based-splits","title":"Profile-Based Splits","text":"<p>Train/val/test splits are by player profile, not by sample:</p> <ul> <li>All samples from a profile stay in the same split</li> <li>Prevents data leakage from player-specific patterns</li> <li>May make generalization harder (testing on \"new players\")</li> </ul>"},{"location":"LIMITATIONS/#recommended-use-cases","title":"Recommended Use Cases","text":""},{"location":"LIMITATIONS/#appropriate-uses","title":"Appropriate Uses","text":"Use Case Why It Works Pretraining Initialize models before fine-tuning on real data Architecture development Compare model architectures on controlled data Ablation studies Isolate effects of audio augmentation, skill tiers, etc. Educational tools Build practice aids where exact calibration is less critical Baseline establishment Provide reproducible benchmarks for the research community"},{"location":"LIMITATIONS/#use-with-caution","title":"Use With Caution","text":"Use Case Concern Production assessment Validate on real performances before deployment Certification/grading Scores are not calibrated to educational standards Cross-instrument transfer Models will not generalize to non-snare instruments"},{"location":"LIMITATIONS/#not-recommended","title":"Not Recommended","text":"<p>Avoid These Uses</p> <ul> <li>Direct deployment without real-world validation</li> <li>Claims of human-equivalent assessment without instructor calibration studies</li> <li>Full drum kit assessment (snare only)</li> </ul>"},{"location":"LIMITATIONS/#future-work","title":"Future Work","text":"<p>Potential improvements to address these limitations:</p> <ol> <li>Human validation study: Collect instructor ratings on a subset for calibration</li> <li>Failure mode injection: Add catastrophic errors (wrong patterns, tempo collapse)</li> <li>Real recording subset: Include a small set of actual recordings for domain gap measurement</li> <li>Extended instrument support: Marching percussion, full kit patterns</li> <li>Longitudinal profiles: Model player improvement over time</li> </ol>"},{"location":"LIMITATIONS/#citation","title":"Citation","text":"<p>If you use SOUSA in research, please cite:</p> <pre><code>@dataset{sousa2024,\n  title={SOUSA: Synthetic Open Unified Snare Assessment Dataset},\n  author={...},\n  year={2024},\n  url={https://huggingface.co/datasets/zkeown/sousa}\n}\n</code></pre> <p>Last updated: January 2026 (v0.2 - added tier_confidence, perceptual scoring, class weights)</p>"},{"location":"api/","title":"API Reference","text":"<p>The SOUSA (Synthetic Open Unified Snare Assessment) package is organized into several modules that handle different aspects of synthetic drum rudiment dataset generation.</p>"},{"location":"api/#module-structure","title":"Module Structure","text":"<p>The <code>dataset_gen</code> package follows this hierarchical structure:</p> <pre><code>dataset_gen/\n\u251c\u2500\u2500 rudiments/        # Rudiment definitions and loading\n\u251c\u2500\u2500 profiles/         # Player profile generation\n\u251c\u2500\u2500 midi_gen/         # MIDI performance generation\n\u251c\u2500\u2500 audio_synth/      # Audio synthesis via FluidSynth\n\u251c\u2500\u2500 audio_aug/        # Audio augmentation chain\n\u251c\u2500\u2500 labels/           # Hierarchical label computation\n\u251c\u2500\u2500 pipeline/         # Dataset generation orchestration\n\u2514\u2500\u2500 validation/       # Dataset validation and analysis\n</code></pre>"},{"location":"api/#module-overview","title":"Module Overview","text":""},{"location":"api/#rudiments","title":"Rudiments","text":"<p>Handles loading and parsing of the 40 PAS (Percussive Arts Society) drum rudiment definitions from YAML files. Provides schema classes for representing strokes, sticking patterns, and complete rudiment specifications.</p>"},{"location":"api/#profiles","title":"Profiles","text":"<p>Generates player profiles with skill-tier-based archetypes. Each profile represents a virtual drummer with correlated execution dimensions covering timing accuracy, dynamics control, and hand balance.</p>"},{"location":"api/#midi-generation","title":"MIDI Generation","text":"<p>Generates MIDI performances from rudiment definitions and player profiles. Applies realistic timing deviations, velocity variations, and articulation-specific processing for flams, diddles, and rolls.</p>"},{"location":"api/#audio-synthesis","title":"Audio Synthesis","text":"<p>FluidSynth wrapper for rendering MIDI performances to audio. Supports multiple soundfonts for different drum sounds (practice pad, marching snare, drum kits).</p>"},{"location":"api/#audio-augmentation","title":"Audio Augmentation","text":"<p>Comprehensive audio augmentation pipeline including room simulation (convolution reverb), microphone modeling, recording chain simulation (preamp, compression, EQ), and degradation effects (noise, bit reduction).</p>"},{"location":"api/#labels","title":"Labels","text":"<p>Computes hierarchical labels at three levels:</p> <ul> <li>Stroke-level: Individual timing and velocity measurements</li> <li>Measure-level: Aggregate statistics per measure</li> <li>Exercise-level: Overall performance scores (0-100 scale)</li> </ul>"},{"location":"api/#pipeline","title":"Pipeline","text":"<p>Orchestrates the complete dataset generation pipeline from profiles to stored samples. Handles parallel processing, checkpointing, and Parquet/audio file storage.</p>"},{"location":"api/#validation","title":"Validation","text":"<p>Dataset validation and statistical analysis tools. Verifies label correctness, data integrity, and skill tier ordering. Generates comprehensive validation reports.</p>"},{"location":"api/#quick-start","title":"Quick Start","text":"<pre><code>from dataset_gen.pipeline.generate import generate_dataset\n\n# Generate a small dataset\nsplits = generate_dataset(\n    output_dir=\"output/dataset\",\n    num_profiles=10,\n    soundfont_path=\"data/soundfonts/snare.sf2\",\n    seed=42,\n)\n</code></pre>"},{"location":"api/#key-types","title":"Key Types","text":"<p>The most commonly used types across the package:</p> <ul> <li><code>Rudiment</code> - Complete rudiment definition from YAML</li> <li><code>StickingPattern</code> - Stroke sequence for a rudiment</li> <li><code>PlayerProfile</code> - Virtual drummer characteristics</li> <li><code>SkillTier</code> - Skill level enum (beginner/intermediate/advanced/professional)</li> <li><code>Sample</code> - Complete sample with all hierarchical labels</li> <li><code>GeneratedPerformance</code> - MIDI performance with stroke events</li> </ul>"},{"location":"api/audio-aug/","title":"Audio Augmentation Module","text":"<p>The audio augmentation module provides a comprehensive pipeline for adding realistic recording characteristics to synthesized audio. This increases dataset diversity and helps models generalize to real-world recording conditions.</p> <p>The augmentation chain includes:</p> <ul> <li>Room simulation: Convolution reverb with impulse responses</li> <li>Microphone modeling: Frequency response curves and positioning effects</li> <li>Recording chain: Preamp saturation, compression, and EQ</li> <li>Degradation: Noise injection, bit depth reduction, sample rate artifacts</li> </ul>"},{"location":"api/audio-aug/#recording-chain","title":"Recording Chain","text":"<p>Simulates analog recording chain including preamp coloration, dynamics compression, and master EQ.</p> <p>Recording chain simulation (preamp, compression, EQ).</p> <p>This module simulates the analog recording chain including preamp coloration, compression, and master EQ.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.PreampType","title":"PreampType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Types of preamp character.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.PreampConfig","title":"PreampConfig  <code>dataclass</code>","text":"<pre><code>PreampConfig(preamp_type: PreampType = CLEAN, gain_db: float = 0.0, drive: float = 0.0, output_gain_db: float = 0.0)\n</code></pre> <p>Configuration for preamp simulation.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.CompressorConfig","title":"CompressorConfig  <code>dataclass</code>","text":"<pre><code>CompressorConfig(enabled: bool = True, threshold_db: float = -12.0, ratio: float = 4.0, attack_ms: float = 10.0, release_ms: float = 100.0, knee_db: float = 6.0, makeup_gain_db: float = 0.0)\n</code></pre> <p>Configuration for dynamics compression.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.EQConfig","title":"EQConfig  <code>dataclass</code>","text":"<pre><code>EQConfig(enabled: bool = True, highpass_freq: float = 40.0, highpass_enabled: bool = True, lowpass_freq: float = 18000.0, lowpass_enabled: bool = True, low_shelf: tuple[float, float] = (100.0, 0.0), high_shelf: tuple[float, float] = (8000.0, 0.0))\n</code></pre> <p>Configuration for master EQ.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.ChainConfig","title":"ChainConfig  <code>dataclass</code>","text":"<pre><code>ChainConfig(preamp: PreampConfig | None = None, compressor: CompressorConfig | None = None, eq: EQConfig | None = None)\n</code></pre> <p>Full recording chain configuration.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.RecordingChain","title":"RecordingChain","text":"<pre><code>RecordingChain(config: ChainConfig | None = None, sample_rate: int = 44100)\n</code></pre> <p>Simulate a recording chain with preamp, compression, and EQ.</p> <p>Processing order: Input -&gt; Preamp -&gt; Compressor -&gt; EQ -&gt; Output</p> <p>Initialize recording chain.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>ChainConfig | None</code> <p>Chain configuration</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> Source code in <code>dataset_gen/audio_aug/chain.py</code> <pre><code>def __init__(\n    self,\n    config: ChainConfig | None = None,\n    sample_rate: int = 44100,\n):\n    \"\"\"\n    Initialize recording chain.\n\n    Args:\n        config: Chain configuration\n        sample_rate: Audio sample rate\n    \"\"\"\n    self.config = config or ChainConfig()\n    self.sample_rate = sample_rate\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.RecordingChain.process","title":"process","text":"<pre><code>process(audio: ndarray, config: ChainConfig | None = None) -&gt; ndarray\n</code></pre> <p>Process audio through the recording chain.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio (shape: [samples] or [samples, channels])</p> required <code>config</code> <code>ChainConfig | None</code> <p>Optional override configuration</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Processed audio</p> Source code in <code>dataset_gen/audio_aug/chain.py</code> <pre><code>def process(\n    self,\n    audio: np.ndarray,\n    config: ChainConfig | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Process audio through the recording chain.\n\n    Args:\n        audio: Input audio (shape: [samples] or [samples, channels])\n        config: Optional override configuration\n\n    Returns:\n        Processed audio\n    \"\"\"\n    cfg = config or self.config\n\n    # Handle mono/stereo\n    if audio.ndim == 1:\n        audio = audio.reshape(-1, 1)\n        was_mono = True\n    else:\n        was_mono = False\n\n    output = audio.copy()\n\n    # Apply preamp\n    if cfg.preamp is not None:\n        output = self._apply_preamp(output, cfg.preamp)\n\n    # Apply compression\n    if cfg.compressor is not None and cfg.compressor.enabled:\n        output = self._apply_compression(output, cfg.compressor)\n\n    # Apply EQ\n    if cfg.eq is not None and cfg.eq.enabled:\n        output = self._apply_eq(output, cfg.eq)\n\n    # Prevent clipping\n    max_val = np.max(np.abs(output))\n    if max_val &gt; 1.0:\n        output = output / max_val * 0.99\n\n    if was_mono:\n        output = output.flatten()\n\n    return output\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.chain.apply_chain","title":"apply_chain","text":"<pre><code>apply_chain(audio: ndarray, preamp_type: PreampType = CLEAN, drive: float = 0.0, compression_ratio: float = 4.0, compression_threshold_db: float = -12.0, sample_rate: int = 44100) -&gt; ndarray\n</code></pre> <p>Convenience function to apply recording chain.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio array</p> required <code>preamp_type</code> <code>PreampType</code> <p>Type of preamp character</p> <code>CLEAN</code> <code>drive</code> <code>float</code> <p>Preamp drive/saturation (0-1)</p> <code>0.0</code> <code>compression_ratio</code> <code>float</code> <p>Compressor ratio</p> <code>4.0</code> <code>compression_threshold_db</code> <code>float</code> <p>Compressor threshold</p> <code>-12.0</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Processed audio</p> Source code in <code>dataset_gen/audio_aug/chain.py</code> <pre><code>def apply_chain(\n    audio: np.ndarray,\n    preamp_type: PreampType = PreampType.CLEAN,\n    drive: float = 0.0,\n    compression_ratio: float = 4.0,\n    compression_threshold_db: float = -12.0,\n    sample_rate: int = 44100,\n) -&gt; np.ndarray:\n    \"\"\"\n    Convenience function to apply recording chain.\n\n    Args:\n        audio: Input audio array\n        preamp_type: Type of preamp character\n        drive: Preamp drive/saturation (0-1)\n        compression_ratio: Compressor ratio\n        compression_threshold_db: Compressor threshold\n        sample_rate: Audio sample rate\n\n    Returns:\n        Processed audio\n    \"\"\"\n    config = ChainConfig(\n        preamp=PreampConfig(\n            preamp_type=preamp_type,\n            drive=drive,\n        ),\n        compressor=CompressorConfig(\n            ratio=compression_ratio,\n            threshold_db=compression_threshold_db,\n        ),\n    )\n\n    chain = RecordingChain(config, sample_rate)\n    return chain.process(audio)\n</code></pre>"},{"location":"api/audio-aug/#room-simulation","title":"Room Simulation","text":"<p>Applies realistic room acoustics using convolution reverb with impulse responses or synthetic reverb generation.</p> <p>Room simulation using convolution reverb.</p> <p>This module applies realistic room acoustics to audio using impulse responses (IRs) from various room types.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.RoomType","title":"RoomType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Types of rooms/spaces for acoustic simulation.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.RoomConfig","title":"RoomConfig  <code>dataclass</code>","text":"<pre><code>RoomConfig(room_type: RoomType = STUDIO, wet_dry_mix: float = 0.3, ir_path: Path | None = None, decay_time_sec: float = 0.5, early_reflection_delay_ms: float = 20.0, pre_delay_ms: float = 10.0, ir_trim_sec: float | None = None, ir_gain: float = 1.0)\n</code></pre> <p>Configuration for room simulation.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.RoomSimulator","title":"RoomSimulator","text":"<pre><code>RoomSimulator(config: RoomConfig | None = None, ir_directory: Path | str | None = None, sample_rate: int = 44100)\n</code></pre> <p>Apply room acoustics simulation to audio.</p> <p>Uses convolution reverb with impulse responses when available, or generates synthetic reverb based on room characteristics.</p> <p>Initialize room simulator.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>RoomConfig | None</code> <p>Room configuration</p> <code>None</code> <code>ir_directory</code> <code>Path | str | None</code> <p>Directory containing impulse response files</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> Source code in <code>dataset_gen/audio_aug/room.py</code> <pre><code>def __init__(\n    self,\n    config: RoomConfig | None = None,\n    ir_directory: Path | str | None = None,\n    sample_rate: int = 44100,\n):\n    \"\"\"\n    Initialize room simulator.\n\n    Args:\n        config: Room configuration\n        ir_directory: Directory containing impulse response files\n        sample_rate: Audio sample rate\n    \"\"\"\n    self.config = config or RoomConfig()\n    self.ir_directory = Path(ir_directory) if ir_directory else None\n    self.sample_rate = sample_rate\n\n    self._ir_cache: dict[str, np.ndarray] = {}\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.RoomSimulator.process","title":"process","text":"<pre><code>process(audio: ndarray, config: RoomConfig | None = None) -&gt; ndarray\n</code></pre> <p>Apply room simulation to audio.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio (shape: [samples] or [samples, channels])</p> required <code>config</code> <code>RoomConfig | None</code> <p>Optional override configuration</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Processed audio with room acoustics applied</p> Source code in <code>dataset_gen/audio_aug/room.py</code> <pre><code>def process(\n    self,\n    audio: np.ndarray,\n    config: RoomConfig | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Apply room simulation to audio.\n\n    Args:\n        audio: Input audio (shape: [samples] or [samples, channels])\n        config: Optional override configuration\n\n    Returns:\n        Processed audio with room acoustics applied\n    \"\"\"\n    cfg = config or self.config\n\n    # Handle mono/stereo\n    if audio.ndim == 1:\n        audio = audio.reshape(-1, 1)\n        was_mono = True\n    else:\n        was_mono = False\n\n    # Get or generate impulse response\n    ir = self._get_impulse_response(cfg)\n\n    # Apply convolution reverb\n    wet = self._convolve(audio, ir)\n\n    # Mix dry and wet signals\n    output = self._mix(audio, wet, cfg.wet_dry_mix)\n\n    if was_mono:\n        output = output.flatten()\n\n    return output\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.RoomSimulator.get_default_wet_dry","title":"get_default_wet_dry","text":"<pre><code>get_default_wet_dry(room_type: RoomType) -&gt; float\n</code></pre> <p>Get default wet/dry mix for a room type.</p> Source code in <code>dataset_gen/audio_aug/room.py</code> <pre><code>def get_default_wet_dry(self, room_type: RoomType) -&gt; float:\n    \"\"\"Get default wet/dry mix for a room type.\"\"\"\n    return ROOM_CHARACTERISTICS.get(\n        room_type,\n        ROOM_CHARACTERISTICS[RoomType.STUDIO],\n    )[\"wet_dry_default\"]\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.room.apply_room","title":"apply_room","text":"<pre><code>apply_room(audio: ndarray, room_type: RoomType = STUDIO, wet_dry_mix: float | None = None, sample_rate: int = 44100, ir_directory: Path | str | None = None) -&gt; ndarray\n</code></pre> <p>Convenience function to apply room simulation.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio array</p> required <code>room_type</code> <code>RoomType</code> <p>Type of room to simulate</p> <code>STUDIO</code> <code>wet_dry_mix</code> <code>float | None</code> <p>Wet/dry mix (None = use default for room type)</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> <code>ir_directory</code> <code>Path | str | None</code> <p>Directory containing IR files</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Audio with room acoustics applied</p> Source code in <code>dataset_gen/audio_aug/room.py</code> <pre><code>def apply_room(\n    audio: np.ndarray,\n    room_type: RoomType = RoomType.STUDIO,\n    wet_dry_mix: float | None = None,\n    sample_rate: int = 44100,\n    ir_directory: Path | str | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Convenience function to apply room simulation.\n\n    Args:\n        audio: Input audio array\n        room_type: Type of room to simulate\n        wet_dry_mix: Wet/dry mix (None = use default for room type)\n        sample_rate: Audio sample rate\n        ir_directory: Directory containing IR files\n\n    Returns:\n        Audio with room acoustics applied\n    \"\"\"\n    simulator = RoomSimulator(ir_directory=ir_directory, sample_rate=sample_rate)\n\n    if wet_dry_mix is None:\n        wet_dry_mix = simulator.get_default_wet_dry(room_type)\n\n    config = RoomConfig(\n        room_type=room_type,\n        wet_dry_mix=wet_dry_mix,\n    )\n\n    return simulator.process(audio, config)\n</code></pre>"},{"location":"api/audio-aug/#microphone-modeling","title":"Microphone Modeling","text":"<p>Simulates different microphone types, positions, and distances with characteristic frequency responses.</p> <p>Microphone simulation for realistic recording characteristics.</p> <p>This module simulates different microphone types, distances, and positions to add realistic recording characteristics.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.MicType","title":"MicType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Types of microphones with different frequency characteristics.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.MicPosition","title":"MicPosition","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Microphone position relative to sound source.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.MicConfig","title":"MicConfig  <code>dataclass</code>","text":"<pre><code>MicConfig(mic_type: MicType = CONDENSER, position: MicPosition = CENTER, distance_meters: float = 0.5, proximity_effect: bool = True, distance_rolloff: bool = True, self_noise_db: float = -80.0, output_gain: float = 1.0)\n</code></pre> <p>Configuration for microphone simulation.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.MicSimulator","title":"MicSimulator","text":"<pre><code>MicSimulator(config: MicConfig | None = None, sample_rate: int = 44100)\n</code></pre> <p>Simulate microphone characteristics on audio.</p> <p>Applies frequency response curves, proximity effect, distance-based filtering, and mic self-noise.</p> <p>Initialize microphone simulator.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>MicConfig | None</code> <p>Microphone configuration</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> Source code in <code>dataset_gen/audio_aug/mic.py</code> <pre><code>def __init__(\n    self,\n    config: MicConfig | None = None,\n    sample_rate: int = 44100,\n):\n    \"\"\"\n    Initialize microphone simulator.\n\n    Args:\n        config: Microphone configuration\n        sample_rate: Audio sample rate\n    \"\"\"\n    self.config = config or MicConfig()\n    self.sample_rate = sample_rate\n\n    # Pre-compute filter for default config\n    self._filter_cache: dict[str, tuple] = {}\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.MicSimulator.process","title":"process","text":"<pre><code>process(audio: ndarray, config: MicConfig | None = None) -&gt; ndarray\n</code></pre> <p>Apply microphone simulation to audio.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio (shape: [samples] or [samples, channels])</p> required <code>config</code> <code>MicConfig | None</code> <p>Optional override configuration</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Audio with microphone characteristics applied</p> Source code in <code>dataset_gen/audio_aug/mic.py</code> <pre><code>def process(\n    self,\n    audio: np.ndarray,\n    config: MicConfig | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Apply microphone simulation to audio.\n\n    Args:\n        audio: Input audio (shape: [samples] or [samples, channels])\n        config: Optional override configuration\n\n    Returns:\n        Audio with microphone characteristics applied\n    \"\"\"\n    cfg = config or self.config\n\n    # Handle mono/stereo\n    if audio.ndim == 1:\n        audio = audio.reshape(-1, 1)\n        was_mono = True\n    else:\n        was_mono = False\n\n    output = audio.copy()\n\n    # Apply mic type frequency response\n    output = self._apply_frequency_response(output, cfg.mic_type)\n\n    # Apply position-based filtering\n    output = self._apply_position_effect(output, cfg.position)\n\n    # Apply proximity effect for close mics\n    if cfg.proximity_effect and cfg.distance_meters &lt; 0.3:\n        output = self._apply_proximity_effect(output, cfg.distance_meters)\n\n    # Apply distance rolloff\n    if cfg.distance_rolloff:\n        output = self._apply_distance_rolloff(output, cfg.distance_meters)\n\n    # Add self-noise\n    if cfg.self_noise_db &gt; -100:\n        output = self._add_self_noise(output, cfg.self_noise_db)\n\n    # Apply output gain\n    output = output * cfg.output_gain\n\n    # Prevent clipping\n    max_val = np.max(np.abs(output))\n    if max_val &gt; 1.0:\n        output = output / max_val\n\n    if was_mono:\n        output = output.flatten()\n\n    return output\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.mic.apply_mic","title":"apply_mic","text":"<pre><code>apply_mic(audio: ndarray, mic_type: MicType = CONDENSER, position: MicPosition = CENTER, distance: float = 0.5, sample_rate: int = 44100) -&gt; ndarray\n</code></pre> <p>Convenience function to apply mic simulation.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio array</p> required <code>mic_type</code> <code>MicType</code> <p>Type of microphone</p> <code>CONDENSER</code> <code>position</code> <code>MicPosition</code> <p>Mic position relative to source</p> <code>CENTER</code> <code>distance</code> <code>float</code> <p>Distance in meters</p> <code>0.5</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Audio with mic characteristics applied</p> Source code in <code>dataset_gen/audio_aug/mic.py</code> <pre><code>def apply_mic(\n    audio: np.ndarray,\n    mic_type: MicType = MicType.CONDENSER,\n    position: MicPosition = MicPosition.CENTER,\n    distance: float = 0.5,\n    sample_rate: int = 44100,\n) -&gt; np.ndarray:\n    \"\"\"\n    Convenience function to apply mic simulation.\n\n    Args:\n        audio: Input audio array\n        mic_type: Type of microphone\n        position: Mic position relative to source\n        distance: Distance in meters\n        sample_rate: Audio sample rate\n\n    Returns:\n        Audio with mic characteristics applied\n    \"\"\"\n    config = MicConfig(\n        mic_type=mic_type,\n        position=position,\n        distance_meters=distance,\n    )\n\n    simulator = MicSimulator(config, sample_rate)\n    return simulator.process(audio)\n</code></pre>"},{"location":"api/audio-aug/#audio-degradation","title":"Audio Degradation","text":"<p>Adds various degradations including noise, bit depth reduction, sample rate artifacts, and tape-style effects.</p> <p>Audio degradation for simulating various recording conditions.</p> <p>This module adds realistic degradations including noise, bit depth reduction, sample rate artifacts, and more.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.NoiseType","title":"NoiseType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Types of background noise.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.NoiseConfig","title":"NoiseConfig  <code>dataclass</code>","text":"<pre><code>NoiseConfig(enabled: bool = True, noise_type: NoiseType = PINK, level_db: float = -40.0, noise_file: Path | None = None)\n</code></pre> <p>Configuration for noise injection.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.BitDepthConfig","title":"BitDepthConfig  <code>dataclass</code>","text":"<pre><code>BitDepthConfig(enabled: bool = False, bit_depth: int = 16, dither: bool = True)\n</code></pre> <p>Configuration for bit depth reduction.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.SampleRateConfig","title":"SampleRateConfig  <code>dataclass</code>","text":"<pre><code>SampleRateConfig(enabled: bool = False, target_rate: int = 22050, anti_alias: bool = True)\n</code></pre> <p>Configuration for sample rate degradation.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.DegradationConfig","title":"DegradationConfig  <code>dataclass</code>","text":"<pre><code>DegradationConfig(noise: NoiseConfig | None = None, bit_depth: BitDepthConfig | None = None, sample_rate: SampleRateConfig | None = None, dc_offset: float = 0.0, phase_shift: float = 0.0, wow_flutter: float = 0.0, dropout_probability: float = 0.0)\n</code></pre> <p>Full degradation configuration.</p>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.AudioDegrader","title":"AudioDegrader","text":"<pre><code>AudioDegrader(config: DegradationConfig | None = None, sample_rate: int = 44100, noise_directory: Path | str | None = None)\n</code></pre> <p>Apply various degradations to audio.</p> <p>Simulates imperfect recording conditions, equipment limitations, and transmission artifacts.</p> <p>Initialize audio degrader.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>DegradationConfig | None</code> <p>Degradation configuration</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> <code>noise_directory</code> <code>Path | str | None</code> <p>Directory containing noise profile files</p> <code>None</code> Source code in <code>dataset_gen/audio_aug/degradation.py</code> <pre><code>def __init__(\n    self,\n    config: DegradationConfig | None = None,\n    sample_rate: int = 44100,\n    noise_directory: Path | str | None = None,\n):\n    \"\"\"\n    Initialize audio degrader.\n\n    Args:\n        config: Degradation configuration\n        sample_rate: Audio sample rate\n        noise_directory: Directory containing noise profile files\n    \"\"\"\n    self.config = config or DegradationConfig()\n    self.sample_rate = sample_rate\n    self.noise_directory = Path(noise_directory) if noise_directory else None\n\n    self._noise_cache: dict[str, np.ndarray] = {}\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.AudioDegrader.process","title":"process","text":"<pre><code>process(audio: ndarray, config: DegradationConfig | None = None, seed: int | None = None) -&gt; ndarray\n</code></pre> <p>Apply degradations to audio.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio (shape: [samples] or [samples, channels])</p> required <code>config</code> <code>DegradationConfig | None</code> <p>Optional override configuration</p> <code>None</code> <code>seed</code> <code>int | None</code> <p>Random seed for reproducible degradations</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Degraded audio</p> Source code in <code>dataset_gen/audio_aug/degradation.py</code> <pre><code>def process(\n    self,\n    audio: np.ndarray,\n    config: DegradationConfig | None = None,\n    seed: int | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Apply degradations to audio.\n\n    Args:\n        audio: Input audio (shape: [samples] or [samples, channels])\n        config: Optional override configuration\n        seed: Random seed for reproducible degradations\n\n    Returns:\n        Degraded audio\n    \"\"\"\n    cfg = config or self.config\n    rng = np.random.default_rng(seed)\n\n    # Handle mono/stereo\n    if audio.ndim == 1:\n        audio = audio.reshape(-1, 1)\n        was_mono = True\n    else:\n        was_mono = False\n\n    output = audio.copy()\n\n    # Apply wow and flutter (before other processing)\n    if cfg.wow_flutter &gt; 0:\n        output = self._apply_wow_flutter(output, cfg.wow_flutter, rng)\n\n    # Apply dropouts\n    if cfg.dropout_probability &gt; 0:\n        output = self._apply_dropouts(output, cfg.dropout_probability, rng)\n\n    # Apply sample rate degradation\n    if cfg.sample_rate.enabled:\n        output = self._apply_sample_rate_degradation(output, cfg.sample_rate)\n\n    # Apply bit depth reduction\n    if cfg.bit_depth.enabled:\n        output = self._apply_bit_depth_reduction(output, cfg.bit_depth, rng)\n\n    # Add noise\n    if cfg.noise.enabled:\n        output = self._add_noise(output, cfg.noise, rng)\n\n    # Apply DC offset\n    if cfg.dc_offset != 0:\n        output = output + cfg.dc_offset\n\n    # Apply phase shift between channels\n    if cfg.phase_shift &gt; 0 and output.shape[1] &gt; 1:\n        output = self._apply_phase_shift(output, cfg.phase_shift)\n\n    # Clip to valid range\n    output = np.clip(output, -1.0, 1.0)\n\n    if was_mono:\n        output = output.flatten()\n\n    return output\n</code></pre>"},{"location":"api/audio-aug/#dataset_gen.audio_aug.degradation.add_noise","title":"add_noise","text":"<pre><code>add_noise(audio: ndarray, noise_type: NoiseType = PINK, level_db: float = -40.0, sample_rate: int = 44100, seed: int | None = None) -&gt; ndarray\n</code></pre> <p>Convenience function to add noise to audio.</p> <p>Parameters:</p> Name Type Description Default <code>audio</code> <code>ndarray</code> <p>Input audio array</p> required <code>noise_type</code> <code>NoiseType</code> <p>Type of noise to add</p> <code>PINK</code> <code>level_db</code> <code>float</code> <p>Noise level in dB relative to signal</p> <code>-40.0</code> <code>sample_rate</code> <code>int</code> <p>Audio sample rate</p> <code>44100</code> <code>seed</code> <code>int | None</code> <p>Random seed</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Audio with noise added</p> Source code in <code>dataset_gen/audio_aug/degradation.py</code> <pre><code>def add_noise(\n    audio: np.ndarray,\n    noise_type: NoiseType = NoiseType.PINK,\n    level_db: float = -40.0,\n    sample_rate: int = 44100,\n    seed: int | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Convenience function to add noise to audio.\n\n    Args:\n        audio: Input audio array\n        noise_type: Type of noise to add\n        level_db: Noise level in dB relative to signal\n        sample_rate: Audio sample rate\n        seed: Random seed\n\n    Returns:\n        Audio with noise added\n    \"\"\"\n    config = DegradationConfig(\n        noise=NoiseConfig(\n            enabled=True,\n            noise_type=noise_type,\n            level_db=level_db,\n        ),\n    )\n\n    degrader = AudioDegrader(config, sample_rate)\n    return degrader.process(audio, seed=seed)\n</code></pre>"},{"location":"api/audio-synth/","title":"Audio Synthesis Module","text":"<p>The audio synthesis module provides a FluidSynth wrapper for rendering MIDI performances to audio using SF2 soundfonts. It supports multiple soundfonts for different drum sounds (practice pad, marching snare, drum kits) and configurable synthesis parameters.</p> <p>Key features:</p> <ul> <li>Real-time MIDI event processing</li> <li>Support for multiple loaded soundfonts</li> <li>Configurable reverb and chorus effects</li> <li>Output to numpy arrays or audio files (WAV, FLAC)</li> </ul> <p>Note: This module requires FluidSynth to be installed on the system:</p> <pre><code># macOS\nbrew install fluid-synth &amp;&amp; pip install pyfluidsynth\n\n# Linux\napt install fluidsynth &amp;&amp; pip install pyfluidsynth\n</code></pre> <p>FluidSynth-based audio synthesizer for MIDI rendering.</p> <p>This module provides a wrapper around FluidSynth for converting MIDI performances to audio using various soundfonts.</p>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.SynthConfig","title":"SynthConfig  <code>dataclass</code>","text":"<pre><code>SynthConfig(sample_rate: int = 44100, channels: int = 2, gain: float = 0.5, reverb_enabled: bool = False, reverb_room_size: float = 0.2, reverb_damping: float = 0.5, reverb_width: float = 0.5, reverb_level: float = 0.5, chorus_enabled: bool = False, chorus_depth: float = 8.0, chorus_level: float = 2.0, chorus_nr: int = 3, chorus_speed: float = 0.3)\n</code></pre> <p>Configuration for audio synthesis.</p>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.SoundfontInfo","title":"SoundfontInfo  <code>dataclass</code>","text":"<pre><code>SoundfontInfo(path: Path, name: str, preset_count: int, sfont_id: int)\n</code></pre> <p>Information about a loaded soundfont.</p>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.AudioSynthesizer","title":"AudioSynthesizer","text":"<pre><code>AudioSynthesizer(soundfont_path: Path | str | None = None, config: SynthConfig | None = None)\n</code></pre> <p>Synthesize audio from MIDI using FluidSynth.</p> <p>This class wraps FluidSynth to provide easy MIDI-to-audio conversion with support for multiple soundfonts.</p> <p>Initialize the synthesizer.</p> <p>Parameters:</p> Name Type Description Default <code>soundfont_path</code> <code>Path | str | None</code> <p>Path to .sf2 soundfont file (optional, can load later)</p> <code>None</code> <code>config</code> <code>SynthConfig | None</code> <p>Synthesis configuration</p> <code>None</code> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def __init__(\n    self,\n    soundfont_path: Path | str | None = None,\n    config: SynthConfig | None = None,\n):\n    \"\"\"\n    Initialize the synthesizer.\n\n    Args:\n        soundfont_path: Path to .sf2 soundfont file (optional, can load later)\n        config: Synthesis configuration\n    \"\"\"\n    # Initialize attributes first to avoid __del__ errors\n    self.config = config or SynthConfig()\n    self._fs: \"fluidsynth.Synth | None\" = None\n    self._soundfonts: dict[str, SoundfontInfo] = {}\n    self._initialized = False\n\n    if not FLUIDSYNTH_AVAILABLE:\n        raise ImportError(\n            \"FluidSynth is not available. Install it with:\\n\"\n            \"  brew install fluid-synth &amp;&amp; pip install pyfluidsynth  (macOS)\\n\"\n            \"  apt install fluidsynth &amp;&amp; pip install pyfluidsynth    (Linux)\"\n        )\n\n    if soundfont_path:\n        self._init_synth()\n        self.load_soundfont(soundfont_path)\n</code></pre>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.AudioSynthesizer.load_soundfont","title":"load_soundfont","text":"<pre><code>load_soundfont(soundfont_path: Path | str, name: str | None = None) -&gt; str\n</code></pre> <p>Load a soundfont file.</p> <p>Parameters:</p> Name Type Description Default <code>soundfont_path</code> <code>Path | str</code> <p>Path to .sf2 file</p> required <code>name</code> <code>str | None</code> <p>Optional name for referencing this soundfont</p> <code>None</code> <p>Returns:</p> Type Description <code>str</code> <p>Name of the loaded soundfont</p> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def load_soundfont(\n    self,\n    soundfont_path: Path | str,\n    name: str | None = None,\n) -&gt; str:\n    \"\"\"\n    Load a soundfont file.\n\n    Args:\n        soundfont_path: Path to .sf2 file\n        name: Optional name for referencing this soundfont\n\n    Returns:\n        Name of the loaded soundfont\n    \"\"\"\n    self._init_synth()\n\n    path = Path(soundfont_path)\n    if not path.exists():\n        raise FileNotFoundError(f\"Soundfont not found: {path}\")\n\n    if name is None:\n        name = path.stem\n\n    sfont_id = self._fs.sfload(str(path))\n    if sfont_id == -1:\n        raise RuntimeError(f\"Failed to load soundfont: {path}\")\n\n    self._soundfonts[name] = SoundfontInfo(\n        path=path,\n        name=name,\n        preset_count=0,  # FluidSynth doesn't easily expose this\n        sfont_id=sfont_id,\n    )\n\n    return name\n</code></pre>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.AudioSynthesizer.render","title":"render","text":"<pre><code>render(midi_data: bytes | None = None, midi_path: Path | str | None = None, soundfont_name: str | None = None, duration_hint_sec: float | None = None) -&gt; ndarray\n</code></pre> <p>Render MIDI to audio samples.</p> <p>Parameters:</p> Name Type Description Default <code>midi_data</code> <code>bytes | None</code> <p>Raw MIDI bytes</p> <code>None</code> <code>midi_path</code> <code>Path | str | None</code> <p>Path to MIDI file (alternative to midi_data)</p> <code>None</code> <code>soundfont_name</code> <code>str | None</code> <p>Name of soundfont to use (uses first loaded if None)</p> <code>None</code> <code>duration_hint_sec</code> <code>float | None</code> <p>Approximate duration for buffer allocation</p> <code>None</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Audio samples as numpy array (shape: [samples, channels])</p> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def render(\n    self,\n    midi_data: bytes | None = None,\n    midi_path: Path | str | None = None,\n    soundfont_name: str | None = None,\n    duration_hint_sec: float | None = None,\n) -&gt; np.ndarray:\n    \"\"\"\n    Render MIDI to audio samples.\n\n    Args:\n        midi_data: Raw MIDI bytes\n        midi_path: Path to MIDI file (alternative to midi_data)\n        soundfont_name: Name of soundfont to use (uses first loaded if None)\n        duration_hint_sec: Approximate duration for buffer allocation\n\n    Returns:\n        Audio samples as numpy array (shape: [samples, channels])\n    \"\"\"\n    if midi_data is None and midi_path is None:\n        raise ValueError(\"Must provide either midi_data or midi_path\")\n\n    if not self._soundfonts:\n        raise RuntimeError(\"No soundfont loaded. Call load_soundfont() first.\")\n\n    self._init_synth()\n\n    # Get soundfont to use\n    if soundfont_name is None:\n        soundfont_name = next(iter(self._soundfonts.keys()))\n\n    if soundfont_name not in self._soundfonts:\n        raise KeyError(f\"Soundfont '{soundfont_name}' not loaded\")\n\n    sfont_info = self._soundfonts[soundfont_name]\n\n    # Write MIDI data to temp file if needed\n    if midi_data is not None:\n        with tempfile.NamedTemporaryFile(suffix=\".mid\", delete=False) as f:\n            f.write(midi_data)\n            midi_file = f.name\n        cleanup_midi = True\n    else:\n        midi_file = str(midi_path)\n        cleanup_midi = False\n\n    try:\n        # Parse MIDI to get events and duration\n        import mido\n\n        mid = mido.MidiFile(midi_file)\n        total_duration_sec = mid.length\n\n        if duration_hint_sec:\n            total_duration_sec = max(total_duration_sec, duration_hint_sec)\n\n        # Add padding for reverb tail\n        total_duration_sec += 0.5\n\n        # Calculate buffer size\n        num_samples = int(total_duration_sec * self.config.sample_rate)\n\n        # Reset synth state\n        self._fs.system_reset()\n\n        # Select the soundfont's first program on channel 9 (drums)\n        self._fs.program_select(9, sfont_info.sfont_id, 0, 0)\n\n        # Process MIDI events\n        samples_list = []\n        current_time = 0.0\n\n        for msg in mid:\n            # Advance time\n            if msg.time &gt; 0:\n                wait_samples = int(msg.time * self.config.sample_rate)\n                if wait_samples &gt; 0:\n                    chunk = self._fs.get_samples(wait_samples)\n                    # Reshape to stereo\n                    chunk = np.array(chunk).reshape(-1, 2)\n                    samples_list.append(chunk)\n                current_time += msg.time\n\n            # Process MIDI message\n            if msg.type == \"note_on\":\n                channel = msg.channel if hasattr(msg, \"channel\") else 9\n                self._fs.noteon(channel, msg.note, msg.velocity)\n            elif msg.type == \"note_off\":\n                channel = msg.channel if hasattr(msg, \"channel\") else 9\n                self._fs.noteoff(channel, msg.note)\n            elif msg.type == \"control_change\":\n                channel = msg.channel if hasattr(msg, \"channel\") else 9\n                self._fs.cc(channel, msg.control, msg.value)\n\n        # Render remaining samples (reverb tail)\n        remaining = num_samples - sum(len(s) for s in samples_list)\n        if remaining &gt; 0:\n            chunk = self._fs.get_samples(remaining)\n            chunk = np.array(chunk).reshape(-1, 2)\n            samples_list.append(chunk)\n\n        # Concatenate all samples\n        if samples_list:\n            audio = np.concatenate(samples_list, axis=0)\n        else:\n            audio = np.zeros((num_samples, 2), dtype=np.float32)\n\n        # Normalize to float32 [-1, 1]\n        # FluidSynth returns int16 samples\n        audio = audio.astype(np.float32) / 32768.0\n\n        return audio\n\n    finally:\n        if cleanup_midi:\n            Path(midi_file).unlink(missing_ok=True)\n</code></pre>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.AudioSynthesizer.render_to_file","title":"render_to_file","text":"<pre><code>render_to_file(output_path: Path | str, midi_data: bytes | None = None, midi_path: Path | str | None = None, soundfont_name: str | None = None, format: Literal['wav', 'flac'] = 'flac', subtype: str | None = None) -&gt; Path\n</code></pre> <p>Render MIDI to an audio file.</p> <p>Parameters:</p> Name Type Description Default <code>output_path</code> <code>Path | str</code> <p>Output file path</p> required <code>midi_data</code> <code>bytes | None</code> <p>Raw MIDI bytes</p> <code>None</code> <code>midi_path</code> <code>Path | str | None</code> <p>Path to MIDI file</p> <code>None</code> <code>soundfont_name</code> <code>str | None</code> <p>Soundfont to use</p> <code>None</code> <code>format</code> <code>Literal['wav', 'flac']</code> <p>Output format ('wav' or 'flac')</p> <code>'flac'</code> <code>subtype</code> <code>str | None</code> <p>Soundfile subtype (e.g., 'PCM_16', 'PCM_24')</p> <code>None</code> <p>Returns:</p> Type Description <code>Path</code> <p>Path to the output file</p> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def render_to_file(\n    self,\n    output_path: Path | str,\n    midi_data: bytes | None = None,\n    midi_path: Path | str | None = None,\n    soundfont_name: str | None = None,\n    format: Literal[\"wav\", \"flac\"] = \"flac\",\n    subtype: str | None = None,\n) -&gt; Path:\n    \"\"\"\n    Render MIDI to an audio file.\n\n    Args:\n        output_path: Output file path\n        midi_data: Raw MIDI bytes\n        midi_path: Path to MIDI file\n        soundfont_name: Soundfont to use\n        format: Output format ('wav' or 'flac')\n        subtype: Soundfile subtype (e.g., 'PCM_16', 'PCM_24')\n\n    Returns:\n        Path to the output file\n    \"\"\"\n    audio = self.render(\n        midi_data=midi_data,\n        midi_path=midi_path,\n        soundfont_name=soundfont_name,\n    )\n\n    output_path = Path(output_path)\n    output_path.parent.mkdir(parents=True, exist_ok=True)\n\n    # Default subtypes\n    if subtype is None:\n        subtype = \"PCM_24\" if format == \"flac\" else \"PCM_16\"\n\n    sf.write(\n        str(output_path),\n        audio,\n        self.config.sample_rate,\n        format=format.upper(),\n        subtype=subtype,\n    )\n\n    return output_path\n</code></pre>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.AudioSynthesizer.close","title":"close","text":"<pre><code>close() -&gt; None\n</code></pre> <p>Clean up FluidSynth resources.</p> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def close(self) -&gt; None:\n    \"\"\"Clean up FluidSynth resources.\"\"\"\n    if self._fs is not None:\n        self._fs.delete()\n        self._fs = None\n        self._initialized = False\n        self._soundfonts.clear()\n</code></pre>"},{"location":"api/audio-synth/#dataset_gen.audio_synth.synthesizer.render_midi_to_audio","title":"render_midi_to_audio","text":"<pre><code>render_midi_to_audio(midi_data: bytes | None = None, midi_path: Path | str | None = None, soundfont_path: Path | str | None = None, output_path: Path | str | None = None, sample_rate: int = 44100, format: Literal['wav', 'flac'] = 'flac') -&gt; ndarray | Path\n</code></pre> <p>Convenience function to render MIDI to audio.</p> <p>Parameters:</p> Name Type Description Default <code>midi_data</code> <code>bytes | None</code> <p>Raw MIDI bytes</p> <code>None</code> <code>midi_path</code> <code>Path | str | None</code> <p>Path to MIDI file</p> <code>None</code> <code>soundfont_path</code> <code>Path | str | None</code> <p>Path to soundfont (required)</p> <code>None</code> <code>output_path</code> <code>Path | str | None</code> <p>If provided, write to file and return path</p> <code>None</code> <code>sample_rate</code> <code>int</code> <p>Sample rate in Hz</p> <code>44100</code> <code>format</code> <code>Literal['wav', 'flac']</code> <p>Output format if writing to file</p> <code>'flac'</code> <p>Returns:</p> Type Description <code>ndarray | Path</code> <p>Audio samples as numpy array, or Path if output_path provided</p> Source code in <code>dataset_gen/audio_synth/synthesizer.py</code> <pre><code>def render_midi_to_audio(\n    midi_data: bytes | None = None,\n    midi_path: Path | str | None = None,\n    soundfont_path: Path | str | None = None,\n    output_path: Path | str | None = None,\n    sample_rate: int = 44100,\n    format: Literal[\"wav\", \"flac\"] = \"flac\",\n) -&gt; np.ndarray | Path:\n    \"\"\"\n    Convenience function to render MIDI to audio.\n\n    Args:\n        midi_data: Raw MIDI bytes\n        midi_path: Path to MIDI file\n        soundfont_path: Path to soundfont (required)\n        output_path: If provided, write to file and return path\n        sample_rate: Sample rate in Hz\n        format: Output format if writing to file\n\n    Returns:\n        Audio samples as numpy array, or Path if output_path provided\n    \"\"\"\n    if soundfont_path is None:\n        raise ValueError(\"soundfont_path is required\")\n\n    config = SynthConfig(sample_rate=sample_rate)\n\n    with AudioSynthesizer(soundfont_path, config) as synth:\n        if output_path:\n            return synth.render_to_file(\n                output_path,\n                midi_data=midi_data,\n                midi_path=midi_path,\n                format=format,\n            )\n        else:\n            return synth.render(\n                midi_data=midi_data,\n                midi_path=midi_path,\n            )\n</code></pre>"},{"location":"api/labels/","title":"Labels Module","text":"<p>The labels module computes hierarchical labels from generated performances at three levels:</p> <ol> <li>Stroke-level: Individual timing and velocity measurements for each stroke</li> <li>Measure-level: Aggregate statistics within each measure (timing consistency, hand balance)</li> <li>Exercise-level: Overall performance scores on a 0-100 scale</li> </ol> <p>Labels are designed for ML training with features like:</p> <ul> <li>Corrected timing errors for grace notes (relative to ideal flam spacing, not grid)</li> <li>Perceptual (sigmoid) scaling for timing accuracy scores</li> <li>Tier confidence scores indicating label ambiguity near skill tier boundaries</li> </ul>"},{"location":"api/labels/#schema","title":"Schema","text":"<p>Pydantic models defining the hierarchical label structure.</p> <p>Pydantic models for hierarchical label schema.</p> <p>Labels are computed at three levels: 1. Per-stroke: Individual timing and velocity measurements 2. Per-measure: Aggregate statistics within each measure 3. Per-exercise: Overall performance scores</p>"},{"location":"api/labels/#dataset_gen.labels.schema.StrokeLabel","title":"StrokeLabel","text":"<p>               Bases: <code>BaseModel</code></p> <p>Labels for a single stroke event.</p>"},{"location":"api/labels/#dataset_gen.labels.schema.MeasureLabel","title":"MeasureLabel","text":"<p>               Bases: <code>BaseModel</code></p> <p>Aggregate labels for a single measure.</p>"},{"location":"api/labels/#dataset_gen.labels.schema.ExerciseScores","title":"ExerciseScores","text":"<p>               Bases: <code>BaseModel</code></p> <p>Composite scores for the entire exercise/performance.</p>"},{"location":"api/labels/#dataset_gen.labels.schema.AudioAugmentation","title":"AudioAugmentation","text":"<p>               Bases: <code>BaseModel</code></p> <p>Parameters describing audio augmentation applied to the sample.</p>"},{"location":"api/labels/#dataset_gen.labels.schema.Sample","title":"Sample","text":"<p>               Bases: <code>BaseModel</code></p> <p>Complete sample with all hierarchical labels.</p> <p>This is the primary data structure for the dataset, containing everything needed for ML training.</p>"},{"location":"api/labels/#label-computation","title":"Label Computation","text":"<p>Functions for computing labels from stroke events and performances.</p> <p>Compute hierarchical labels from stroke events.</p> <p>This module transforms raw stroke events into the three-level label hierarchy used for ML training.</p>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_stroke_labels","title":"compute_stroke_labels","text":"<pre><code>compute_stroke_labels(events: list[StrokeEvent]) -&gt; list[StrokeLabel]\n</code></pre> <p>Convert stroke events to stroke labels.</p> <p>For grace notes, timing_error_ms is recomputed as deviation from ideal flam spacing (25-35ms), not grid deviation. This provides a meaningful timing quality metric for ornamental strokes.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events from MIDI generation</p> required <p>Returns:</p> Type Description <code>list[StrokeLabel]</code> <p>List of StrokeLabel objects</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_stroke_labels(events: list[StrokeEvent]) -&gt; list[StrokeLabel]:\n    \"\"\"\n    Convert stroke events to stroke labels.\n\n    For grace notes, timing_error_ms is recomputed as deviation from ideal\n    flam spacing (25-35ms), not grid deviation. This provides a meaningful\n    timing quality metric for ornamental strokes.\n\n    Args:\n        events: List of stroke events from MIDI generation\n\n    Returns:\n        List of StrokeLabel objects\n    \"\"\"\n    # Build index lookup for finding primary strokes\n    events_by_index = {e.index: e for e in events}\n\n    # Ideal flam spacing (center of acceptable range)\n    IDEAL_FLAM_SPACING_MS = 30.0\n\n    labels = []\n    for event in events:\n        # Compute grace-note-specific fields\n        flam_spacing_ms = None\n        timing_error = event.timing_error_ms\n        parent_index = event.parent_stroke_index\n\n        if event.is_grace_note and parent_index is not None:\n            primary = events_by_index.get(parent_index)\n            if primary is not None:\n                # Compute actual flam spacing (primary - grace)\n                flam_spacing_ms = primary.actual_time_ms - event.actual_time_ms\n\n                # Recompute timing_error as deviation from ideal spacing\n                # Positive = too wide (grace too early), Negative = too tight\n                timing_error = flam_spacing_ms - IDEAL_FLAM_SPACING_MS\n\n        label = StrokeLabel(\n            index=event.index,\n            hand=\"R\" if event.hand == Hand.RIGHT else \"L\",\n            stroke_type=event.stroke_type.value,\n            intended_time_ms=event.intended_time_ms,\n            actual_time_ms=event.actual_time_ms,\n            timing_error_ms=timing_error,\n            intended_velocity=event.intended_velocity,\n            actual_velocity=event.actual_velocity,\n            velocity_error=event.velocity_error,\n            is_grace_note=event.is_grace_note,\n            is_accent=event.stroke_type == StrokeType.ACCENT,\n            diddle_position=event.diddle_position,\n            flam_spacing_ms=flam_spacing_ms,\n            parent_stroke_index=parent_index,\n        )\n        labels.append(label)\n\n    # Compute buzz_count for primary buzz strokes\n    for label in labels:\n        if label.stroke_type == \"buzz\" and not label.is_grace_note:\n            sub_count = sum(1 for l in labels if l.parent_stroke_index == label.index)\n            label.buzz_count = 1 + sub_count  # primary + subs\n\n    return labels\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_measure_labels","title":"compute_measure_labels","text":"<pre><code>compute_measure_labels(stroke_labels: list[StrokeLabel], strokes_per_measure: int) -&gt; list[MeasureLabel]\n</code></pre> <p>Compute per-measure aggregate statistics.</p> <p>Parameters:</p> Name Type Description Default <code>stroke_labels</code> <code>list[StrokeLabel]</code> <p>List of stroke labels (with corrected timing for grace notes)</p> required <code>strokes_per_measure</code> <code>int</code> <p>Number of strokes in each measure</p> required <p>Returns:</p> Type Description <code>list[MeasureLabel]</code> <p>List of MeasureLabel objects</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_measure_labels(\n    stroke_labels: list[StrokeLabel],\n    strokes_per_measure: int,\n) -&gt; list[MeasureLabel]:\n    \"\"\"\n    Compute per-measure aggregate statistics.\n\n    Args:\n        stroke_labels: List of stroke labels (with corrected timing for grace notes)\n        strokes_per_measure: Number of strokes in each measure\n\n    Returns:\n        List of MeasureLabel objects\n    \"\"\"\n    if not stroke_labels:\n        return []\n\n    measures = []\n    n_measures = (len(stroke_labels) + strokes_per_measure - 1) // strokes_per_measure\n\n    for m in range(n_measures):\n        start_idx = m * strokes_per_measure\n        end_idx = min((m + 1) * strokes_per_measure, len(stroke_labels))\n        measure_strokes = stroke_labels[start_idx:end_idx]\n\n        if not measure_strokes:\n            continue\n\n        # Timing statistics (using corrected timing_error_ms from labels)\n        timing_errors = [s.timing_error_ms for s in measure_strokes]\n        timing_mean = np.mean(timing_errors)\n        timing_std = np.std(timing_errors)\n        timing_max = np.max(np.abs(timing_errors))\n\n        # Velocity statistics\n        velocities = [s.actual_velocity for s in measure_strokes]\n        vel_mean = np.mean(velocities)\n        vel_std = np.std(velocities)\n        vel_consistency = 1 - (vel_std / vel_mean) if vel_mean &gt; 0 else 0\n\n        # Hand balance within measure\n        left_strokes = [s for s in measure_strokes if s.hand == \"L\"]\n        right_strokes = [s for s in measure_strokes if s.hand == \"R\"]\n\n        lr_ratio = None\n        lr_timing_diff = None\n        if left_strokes and right_strokes:\n            left_vel = np.mean([s.actual_velocity for s in left_strokes])\n            right_vel = np.mean([s.actual_velocity for s in right_strokes])\n            lr_ratio = left_vel / right_vel if right_vel &gt; 0 else 1.0\n\n            left_timing = np.mean([s.timing_error_ms for s in left_strokes])\n            right_timing = np.mean([s.timing_error_ms for s in right_strokes])\n            lr_timing_diff = left_timing - right_timing\n\n        measure = MeasureLabel(\n            index=m,\n            stroke_start=start_idx,\n            stroke_end=end_idx,\n            timing_mean_error_ms=timing_mean,\n            timing_std_ms=timing_std,\n            timing_max_error_ms=timing_max,\n            velocity_mean=vel_mean,\n            velocity_std=vel_std,\n            velocity_consistency=vel_consistency,\n            lr_velocity_ratio=lr_ratio,\n            lr_timing_diff_ms=lr_timing_diff,\n        )\n        measures.append(measure)\n\n    return measures\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_exercise_scores","title":"compute_exercise_scores","text":"<pre><code>compute_exercise_scores(stroke_labels: list[StrokeLabel], events: list[StrokeEvent], rudiment: Rudiment) -&gt; ExerciseScores\n</code></pre> <p>Compute overall exercise scores from stroke labels and events.</p> <p>Uses stroke labels for timing metrics (corrected for grace notes) and events for rudiment-specific calculations that need full event data.</p> <p>Scores are normalized to 0-100 where 100 is perfect performance.</p> <p>Parameters:</p> Name Type Description Default <code>stroke_labels</code> <code>list[StrokeLabel]</code> <p>List of stroke labels (with corrected timing)</p> required <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events (for rudiment-specific calculations)</p> required <code>rudiment</code> <code>Rudiment</code> <p>The rudiment being performed</p> required <p>Returns:</p> Type Description <code>ExerciseScores</code> <p>ExerciseScores object</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_exercise_scores(\n    stroke_labels: list[StrokeLabel],\n    events: list[StrokeEvent],\n    rudiment: Rudiment,\n) -&gt; ExerciseScores:\n    \"\"\"\n    Compute overall exercise scores from stroke labels and events.\n\n    Uses stroke labels for timing metrics (corrected for grace notes)\n    and events for rudiment-specific calculations that need full event data.\n\n    Scores are normalized to 0-100 where 100 is perfect performance.\n\n    Args:\n        stroke_labels: List of stroke labels (with corrected timing)\n        events: List of stroke events (for rudiment-specific calculations)\n        rudiment: The rudiment being performed\n\n    Returns:\n        ExerciseScores object\n    \"\"\"\n    if not stroke_labels:\n        return _empty_scores()\n\n    # === TIMING SCORES (use corrected values from labels) ===\n    # Uses perceptual (sigmoid) scaling to match human perception:\n    # - Errors &lt;10ms are nearly imperceptible (high score)\n    # - Errors 20-30ms are noticeable but acceptable (medium score)\n    # - Errors &gt;50ms are clearly audible (low score)\n\n    timing_errors = np.array([s.timing_error_ms for s in stroke_labels])\n    timing_errors_abs = np.abs(timing_errors)\n\n    # Timing accuracy: sigmoid scaling (perceptual)\n    # Center at 25ms (50% score), steepness controlled by /10\n    mean_abs_error = np.mean(timing_errors_abs)\n    timing_accuracy = 100 * (1 / (1 + np.exp((mean_abs_error - 25) / 10)))\n\n    # Timing consistency: sigmoid scaling\n    # Center at 15ms std (50% score)\n    timing_std = np.std(timing_errors)\n    timing_consistency = 100 * (1 / (1 + np.exp((timing_std - 15) / 8)))\n\n    # Tempo stability: based on drift over time (for non-grace strokes only)\n    non_grace_labels = [s for s in stroke_labels if not s.is_grace_note]\n    if len(non_grace_labels) &gt; 1:\n        times = np.array([s.intended_time_ms for s in non_grace_labels])\n        errors = np.array([s.timing_error_ms for s in non_grace_labels])\n        slope = np.polyfit(times, errors, 1)[0] * 1000  # ms/second\n        tempo_stability = max(0, 100 - abs(slope) * 10)\n    else:\n        tempo_stability = 100\n\n    # Subdivision evenness: check inter-onset intervals\n    if len(stroke_labels) &gt; 1:\n        actual_times = np.array([s.actual_time_ms for s in stroke_labels])\n        intended_times = np.array([s.intended_time_ms for s in stroke_labels])\n        actual_ioi = np.diff(actual_times)\n        intended_ioi = np.diff(intended_times)\n        ioi_ratios = actual_ioi / np.maximum(intended_ioi, 1)\n        ioi_variance = np.std(ioi_ratios)\n        subdivision_evenness = max(0, 100 - ioi_variance * 100)\n    else:\n        subdivision_evenness = 100\n\n    # === DYNAMICS SCORES ===\n\n    velocities = np.array([s.actual_velocity for s in stroke_labels])\n\n    # Velocity control: consistency of dynamics\n    vel_std = np.std(velocities)\n    velocity_control = max(0, 100 - vel_std * 2)\n\n    # Accent differentiation\n    accent_strokes = [s for s in stroke_labels if s.is_accent]\n    tap_strokes = [s for s in stroke_labels if s.stroke_type in (\"tap\", \"buzz\")]\n\n    if accent_strokes and tap_strokes:\n        accent_vel = np.mean([s.actual_velocity for s in accent_strokes])\n        tap_vel = np.mean([s.actual_velocity for s in tap_strokes])\n        diff_db = (accent_vel - tap_vel) / 127 * 20  # Rough dB approximation\n        accent_differentiation = min(100, max(0, diff_db * 8))\n    else:\n        accent_differentiation = 80\n\n    # Accent accuracy: are accents on correct beats?\n    if accent_strokes:\n        correct_accents = sum(1 for s in accent_strokes if s.actual_velocity &gt; np.mean(velocities))\n        accent_accuracy = (correct_accents / len(accent_strokes)) * 100\n    else:\n        accent_accuracy = 100\n\n    # === HAND BALANCE SCORES ===\n    # Now incorporates BOTH velocity AND timing balance (50% each)\n    # This addresses the ceiling effect where velocity-only was nearly always high\n\n    left_strokes = [s for s in stroke_labels if s.hand == \"L\"]\n    right_strokes = [s for s in stroke_labels if s.hand == \"R\"]\n\n    if left_strokes and right_strokes:\n        # Velocity balance (0-100)\n        left_vel = np.mean([s.actual_velocity for s in left_strokes])\n        right_vel = np.mean([s.actual_velocity for s in right_strokes])\n        vel_ratio = min(left_vel, right_vel) / max(left_vel, right_vel)\n        velocity_balance = vel_ratio * 100\n\n        # Timing balance (0-100): combines symmetry AND absolute quality\n        left_timing_abs = np.mean([np.abs(s.timing_error_ms) for s in left_strokes])\n        right_timing_abs = np.mean([np.abs(s.timing_error_ms) for s in right_strokes])\n\n        # Symmetry factor: how similar are the hands?\n        max_timing = max(left_timing_abs, right_timing_abs, 1)\n        min_timing = min(left_timing_abs, right_timing_abs)\n        symmetry_factor = min_timing / max_timing\n\n        # Quality factor: sigmoid penalty for high absolute errors\n        avg_abs_error = (left_timing_abs + right_timing_abs) / 2\n        quality_factor = 100 / (1 + np.exp((avg_abs_error - 25) / 10))\n\n        # Combined: both symmetry and quality matter\n        timing_balance = 0.4 * (symmetry_factor * 100) + 0.6 * quality_factor\n\n        # Combined hand balance: 50% velocity, 50% timing\n        hand_balance = 0.5 * velocity_balance + 0.5 * timing_balance\n\n        # Weak hand index: which hand is weaker overall?\n        # 0 = left weaker, 100 = right weaker, 50 = balanced\n        total_timing = left_timing_abs + right_timing_abs\n        weak_hand_index = (left_timing_abs / total_timing * 100) if total_timing &gt; 0 else 50\n    else:\n        hand_balance = 100\n        weak_hand_index = 50\n\n    # === RUDIMENT-SPECIFIC SCORES (use events for these) ===\n\n    flam_quality = None\n    diddle_quality = None\n    roll_sustain = None\n\n    if rudiment.category == RudimentCategory.FLAM:\n        flam_quality = _compute_flam_quality(events)\n\n    if rudiment.category in (RudimentCategory.DIDDLE, RudimentCategory.ROLL):\n        diddle_quality = _compute_diddle_quality(events)\n\n    if rudiment.category == RudimentCategory.ROLL:\n        roll_sustain = _compute_roll_sustain(events)\n\n    # === DERIVED SCORES ===\n\n    groove_feel = compute_groove_feel_proxy(events)\n\n    # Overall score: weighted average of components\n    weights = {\n        \"timing_accuracy\": 0.2,\n        \"timing_consistency\": 0.15,\n        \"tempo_stability\": 0.1,\n        \"subdivision_evenness\": 0.1,\n        \"velocity_control\": 0.1,\n        \"accent_differentiation\": 0.1,\n        \"accent_accuracy\": 0.1,\n        \"hand_balance\": 0.15,\n    }\n    overall = sum(\n        weights[k] * v\n        for k, v in {\n            \"timing_accuracy\": timing_accuracy,\n            \"timing_consistency\": timing_consistency,\n            \"tempo_stability\": tempo_stability,\n            \"subdivision_evenness\": subdivision_evenness,\n            \"velocity_control\": velocity_control,\n            \"accent_differentiation\": accent_differentiation,\n            \"accent_accuracy\": accent_accuracy,\n            \"hand_balance\": hand_balance,\n        }.items()\n    )\n\n    return ExerciseScores(\n        timing_accuracy=timing_accuracy,\n        timing_consistency=timing_consistency,\n        tempo_stability=tempo_stability,\n        subdivision_evenness=subdivision_evenness,\n        velocity_control=velocity_control,\n        accent_differentiation=accent_differentiation,\n        accent_accuracy=accent_accuracy,\n        hand_balance=hand_balance,\n        weak_hand_index=weak_hand_index,\n        flam_quality=flam_quality,\n        diddle_quality=diddle_quality,\n        roll_sustain=roll_sustain,\n        groove_feel_proxy=groove_feel,\n        overall_score=overall,\n    )\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_tier_confidence","title":"compute_tier_confidence","text":"<pre><code>compute_tier_confidence(overall_score: float, skill_tier: str) -&gt; float\n</code></pre> <p>Compute confidence that the skill_tier label is unambiguous.</p> <p>Uses Gaussian likelihood based on expected score distributions per tier. Returns 0-1 where: - 1.0 = score is at the center of the tier's expected distribution - 0.0 = score is far from the tier's expected range (likely mislabeled)</p> <p>A sample near the boundary between tiers will have lower confidence, indicating potential label noise for classification tasks.</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_tier_confidence(overall_score: float, skill_tier: str) -&gt; float:\n    \"\"\"\n    Compute confidence that the skill_tier label is unambiguous.\n\n    Uses Gaussian likelihood based on expected score distributions per tier.\n    Returns 0-1 where:\n    - 1.0 = score is at the center of the tier's expected distribution\n    - 0.0 = score is far from the tier's expected range (likely mislabeled)\n\n    A sample near the boundary between tiers will have lower confidence,\n    indicating potential label noise for classification tasks.\n    \"\"\"\n    if skill_tier not in TIER_SCORE_DISTRIBUTIONS:\n        return 0.5  # Unknown tier\n\n    mean, std = TIER_SCORE_DISTRIBUTIONS[skill_tier]\n\n    # Gaussian likelihood (normalized to 0-1)\n    # At mean: confidence = 1.0\n    # At 2 std from mean: confidence \u2248 0.14\n    z_score = abs(overall_score - mean) / std\n    confidence = np.exp(-0.5 * z_score**2)\n\n    return float(confidence)\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_skill_tier_binary","title":"compute_skill_tier_binary","text":"<pre><code>compute_skill_tier_binary(skill_tier: str) -&gt; str\n</code></pre> <p>Convert 4-class skill tier to 2-class binary label.</p> <p>This alternative labeling reduces class overlap issues: - novice: beginner, intermediate - skilled: advanced, professional</p> <p>For use when 4-class classification ceiling is too low due to label noise.</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_skill_tier_binary(skill_tier: str) -&gt; str:\n    \"\"\"\n    Convert 4-class skill tier to 2-class binary label.\n\n    This alternative labeling reduces class overlap issues:\n    - novice: beginner, intermediate\n    - skilled: advanced, professional\n\n    For use when 4-class classification ceiling is too low due to label noise.\n    \"\"\"\n    if skill_tier in (\"beginner\", \"intermediate\"):\n        return \"novice\"\n    else:\n        return \"skilled\"\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.compute.compute_sample_labels","title":"compute_sample_labels","text":"<pre><code>compute_sample_labels(performance: GeneratedPerformance, rudiment: Rudiment, profile: PlayerProfile) -&gt; Sample\n</code></pre> <p>Compute all hierarchical labels for a generated performance.</p> <p>Parameters:</p> Name Type Description Default <code>performance</code> <code>GeneratedPerformance</code> <p>The generated MIDI performance</p> required <code>rudiment</code> <code>Rudiment</code> <p>The rudiment definition</p> required <code>profile</code> <code>PlayerProfile</code> <p>The player profile</p> required <p>Returns:</p> Type Description <code>Sample</code> <p>Complete Sample object with all labels</p> Source code in <code>dataset_gen/labels/compute.py</code> <pre><code>def compute_sample_labels(\n    performance: GeneratedPerformance,\n    rudiment: Rudiment,\n    profile: PlayerProfile,\n) -&gt; Sample:\n    \"\"\"\n    Compute all hierarchical labels for a generated performance.\n\n    Args:\n        performance: The generated MIDI performance\n        rudiment: The rudiment definition\n        profile: The player profile\n\n    Returns:\n        Complete Sample object with all labels\n    \"\"\"\n    stroke_labels = compute_stroke_labels(performance.strokes)\n\n    # Calculate strokes per measure from rudiment pattern\n    strokes_per_measure = len(rudiment.pattern.strokes)\n\n    # Use stroke_labels for aggregations (has corrected timing for grace notes)\n    measure_labels = compute_measure_labels(stroke_labels, strokes_per_measure)\n    exercise_scores = compute_exercise_scores(stroke_labels, performance.strokes, rudiment)\n\n    # Compute tier confidence based on how central the score is to the tier's distribution\n    skill_tier_str = profile.skill_tier.value\n    tier_confidence = compute_tier_confidence(exercise_scores.overall_score, skill_tier_str)\n    exercise_scores.tier_confidence = tier_confidence\n\n    # Compute binary skill tier (novice vs skilled)\n    skill_tier_binary = compute_skill_tier_binary(skill_tier_str)\n\n    return Sample(\n        sample_id=performance.id,\n        profile_id=profile.id,\n        rudiment_slug=rudiment.slug,\n        tempo_bpm=performance.tempo_bpm,\n        duration_sec=performance.duration_sec,\n        num_cycles=performance.num_cycles,\n        skill_tier=skill_tier_str,\n        skill_tier_binary=skill_tier_binary,\n        dominant_hand=profile.dominant_hand,\n        strokes=stroke_labels,\n        measures=measure_labels,\n        exercise_scores=exercise_scores,\n    )\n</code></pre>"},{"location":"api/labels/#groove-analysis","title":"Groove Analysis","text":"<p>Groove feel heuristic proxy computation that distinguishes intentional microtiming from sloppy playing.</p> <p>Groove feel heuristic proxy computation.</p> <p>Since \"groove\" is subjective and hard to define, we use computed proxies that capture aspects of intentional vs. sloppy microtiming.</p>"},{"location":"api/labels/#dataset_gen.labels.groove.GrooveMetrics","title":"GrooveMetrics  <code>dataclass</code>","text":"<pre><code>GrooveMetrics(pattern_consistency: float, swing_ratio: float | None, accent_timing_bias: float, groove_feel: float)\n</code></pre> <p>Detailed groove analysis metrics.</p>"},{"location":"api/labels/#dataset_gen.labels.groove.compute_groove_feel_proxy","title":"compute_groove_feel_proxy","text":"<pre><code>compute_groove_feel_proxy(events: list[StrokeEvent]) -&gt; float\n</code></pre> <p>Compute a groove feel proxy score.</p> <p>The proxy distinguishes between: - Intentional microtiming (groove): Consistent patterns of deviation - Sloppy playing: Random, inconsistent errors</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <p>Returns:</p> Type Description <code>float</code> <p>Score from 0 (sloppy) to 1 (good groove or perfectly accurate)</p> Source code in <code>dataset_gen/labels/groove.py</code> <pre><code>def compute_groove_feel_proxy(events: list[StrokeEvent]) -&gt; float:\n    \"\"\"\n    Compute a groove feel proxy score.\n\n    The proxy distinguishes between:\n    - Intentional microtiming (groove): Consistent patterns of deviation\n    - Sloppy playing: Random, inconsistent errors\n\n    Args:\n        events: List of stroke events\n\n    Returns:\n        Score from 0 (sloppy) to 1 (good groove or perfectly accurate)\n    \"\"\"\n    if len(events) &lt; 4:\n        return 0.5  # Not enough data\n\n    metrics = compute_groove_metrics(events)\n    return metrics.groove_feel\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.groove.compute_groove_metrics","title":"compute_groove_metrics","text":"<pre><code>compute_groove_metrics(events: list[StrokeEvent]) -&gt; GrooveMetrics\n</code></pre> <p>Compute detailed groove metrics.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <p>Returns:</p> Type Description <code>GrooveMetrics</code> <p>GrooveMetrics object with all computed values</p> Source code in <code>dataset_gen/labels/groove.py</code> <pre><code>def compute_groove_metrics(events: list[StrokeEvent]) -&gt; GrooveMetrics:\n    \"\"\"\n    Compute detailed groove metrics.\n\n    Args:\n        events: List of stroke events\n\n    Returns:\n        GrooveMetrics object with all computed values\n    \"\"\"\n    timing_errors = np.array([e.timing_error_ms for e in events])\n\n    # 1. PATTERN CONSISTENCY\n    # Use autocorrelation to detect systematic timing patterns\n    # High autocorrelation = consistent patterns (good groove or good timing)\n    # Low autocorrelation = random errors (sloppy)\n    pattern_consistency = _compute_autocorrelation(timing_errors)\n\n    # 2. SWING DETECTION\n    # Check for consistent push/pull on alternate notes\n    swing_ratio = _detect_swing(events)\n\n    # 3. ACCENT TIMING BIAS\n    # Check if accented notes consistently lead or lag\n    accent_bias = _compute_accent_timing_bias(events)\n\n    # 4. COMBINE INTO GROOVE FEEL\n    # High groove = either accurate OR consistently deviant\n    # Low groove = random, inconsistent errors\n\n    # Base score on timing accuracy\n    mean_abs_error = np.mean(np.abs(timing_errors))\n    accuracy_score = max(0, 1 - mean_abs_error / 50)  # 0-50ms -&gt; 1-0\n\n    # Boost for pattern consistency (intentional deviations)\n    consistency_boost = pattern_consistency * 0.3\n\n    # Small boost for detected swing\n    swing_boost = 0.1 if swing_ratio is not None and 0.55 &lt; swing_ratio &lt; 0.75 else 0\n\n    groove_feel = min(1.0, accuracy_score + consistency_boost + swing_boost)\n\n    return GrooveMetrics(\n        pattern_consistency=pattern_consistency,\n        swing_ratio=swing_ratio,\n        accent_timing_bias=accent_bias,\n        groove_feel=groove_feel,\n    )\n</code></pre>"},{"location":"api/labels/#dataset_gen.labels.groove.analyze_groove_quality","title":"analyze_groove_quality","text":"<pre><code>analyze_groove_quality(events: list[StrokeEvent]) -&gt; dict\n</code></pre> <p>Produce a detailed groove analysis for debugging/inspection.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Dictionary with detailed groove analysis</p> Source code in <code>dataset_gen/labels/groove.py</code> <pre><code>def analyze_groove_quality(events: list[StrokeEvent]) -&gt; dict:\n    \"\"\"\n    Produce a detailed groove analysis for debugging/inspection.\n\n    Args:\n        events: List of stroke events\n\n    Returns:\n        Dictionary with detailed groove analysis\n    \"\"\"\n    metrics = compute_groove_metrics(events)\n    timing_errors = np.array([e.timing_error_ms for e in events])\n\n    return {\n        \"groove_feel_proxy\": metrics.groove_feel,\n        \"pattern_consistency\": metrics.pattern_consistency,\n        \"swing_ratio\": metrics.swing_ratio,\n        \"accent_timing_bias_ms\": metrics.accent_timing_bias,\n        \"timing_stats\": {\n            \"mean_error_ms\": float(np.mean(timing_errors)),\n            \"std_error_ms\": float(np.std(timing_errors)),\n            \"max_error_ms\": float(np.max(np.abs(timing_errors))),\n        },\n        \"interpretation\": _interpret_groove(metrics),\n    }\n</code></pre>"},{"location":"api/midi-gen/","title":"MIDI Generation Module","text":"<p>The MIDI generation module creates synthetic drum performances from rudiment definitions and player profiles. It applies realistic timing deviations, velocity variations, and articulation-specific processing to produce varied but consistent performances.</p> <p>The generation process:</p> <ol> <li>Creates an ideal timing grid from the rudiment pattern</li> <li>Applies player-specific deviations based on profile dimensions</li> <li>Handles articulation-specific timing (flam spacing, diddle ratios)</li> <li>Converts stroke events to MIDI bytes</li> </ol>"},{"location":"api/midi-gen/#generator","title":"Generator","text":"<p>The main MIDI generation engine that transforms rudiments and profiles into performances.</p> <p>MIDI generation engine for synthetic drum performances.</p> <p>This module generates MIDI sequences from rudiment definitions and player profiles, applying realistic timing deviations, velocity variations, and articulations.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.StrokeEvent","title":"StrokeEvent  <code>dataclass</code>","text":"<pre><code>StrokeEvent(index: int, hand: Hand, stroke_type: StrokeType, intended_time_ms: float, actual_time_ms: float, intended_velocity: int, actual_velocity: int, is_grace_note: bool = False, parent_stroke_index: int | None = None, diddle_position: int | None = None)\n</code></pre> <p>A single stroke event with timing and velocity information.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.StrokeEvent.timing_error_ms","title":"timing_error_ms  <code>property</code>","text":"<pre><code>timing_error_ms: float\n</code></pre> <p>Deviation from intended timing.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.StrokeEvent.velocity_error","title":"velocity_error  <code>property</code>","text":"<pre><code>velocity_error: int\n</code></pre> <p>Deviation from intended velocity.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.GeneratedPerformance","title":"GeneratedPerformance  <code>dataclass</code>","text":"<pre><code>GeneratedPerformance(id: str = (lambda: str(uuid4()))(), rudiment_slug: str = '', profile_id: str = '', tempo_bpm: int = 120, duration_sec: float = 0.0, num_cycles: int = 1, strokes: list[StrokeEvent] = list(), midi_data: bytes | None = None)\n</code></pre> <p>Complete generated performance with all stroke events and metadata.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.GeneratedPerformance.to_midi_file","title":"to_midi_file","text":"<pre><code>to_midi_file(path: Path | str) -&gt; None\n</code></pre> <p>Write MIDI data to file.</p> Source code in <code>dataset_gen/midi_gen/generator.py</code> <pre><code>def to_midi_file(self, path: Path | str) -&gt; None:\n    \"\"\"Write MIDI data to file.\"\"\"\n    if self.midi_data is None:\n        raise ValueError(\"No MIDI data to write\")\n    Path(path).write_bytes(self.midi_data)\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.MIDIGenerator","title":"MIDIGenerator","text":"<pre><code>MIDIGenerator(seed: int | None = None, ticks_per_beat: int = 480)\n</code></pre> <p>Generate MIDI performances from rudiments and player profiles.</p> <p>The generator applies the player's execution dimensions to create realistic deviations in timing and velocity.</p> <p>Initialize the generator.</p> <p>Parameters:</p> Name Type Description Default <code>seed</code> <code>int | None</code> <p>Random seed for reproducibility</p> <code>None</code> <code>ticks_per_beat</code> <code>int</code> <p>MIDI resolution (PPQ)</p> <code>480</code> Source code in <code>dataset_gen/midi_gen/generator.py</code> <pre><code>def __init__(\n    self,\n    seed: int | None = None,\n    ticks_per_beat: int = 480,\n):\n    \"\"\"\n    Initialize the generator.\n\n    Args:\n        seed: Random seed for reproducibility\n        ticks_per_beat: MIDI resolution (PPQ)\n    \"\"\"\n    self.rng = np.random.default_rng(seed)\n    self.ticks_per_beat = ticks_per_beat\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.MIDIGenerator.generate","title":"generate","text":"<pre><code>generate(rudiment: Rudiment, profile: PlayerProfile, tempo_bpm: int = 120, num_cycles: int | None = None, target_duration_sec: float | None = None, include_midi: bool = True) -&gt; GeneratedPerformance\n</code></pre> <p>Generate a performance of a rudiment.</p> <p>Parameters:</p> Name Type Description Default <code>rudiment</code> <code>Rudiment</code> <p>The rudiment to perform</p> required <code>profile</code> <code>PlayerProfile</code> <p>The player profile defining execution characteristics</p> required <code>tempo_bpm</code> <code>int</code> <p>Tempo in BPM</p> <code>120</code> <code>num_cycles</code> <code>int | None</code> <p>How many times to repeat the rudiment pattern (if target_duration_sec not set)</p> <code>None</code> <code>target_duration_sec</code> <code>float | None</code> <p>Target duration in seconds (overrides num_cycles if set)</p> <code>None</code> <code>include_midi</code> <code>bool</code> <p>Whether to generate MIDI bytes</p> <code>True</code> <p>Returns:</p> Type Description <code>GeneratedPerformance</code> <p>GeneratedPerformance with stroke events and optional MIDI data</p> Source code in <code>dataset_gen/midi_gen/generator.py</code> <pre><code>def generate(\n    self,\n    rudiment: Rudiment,\n    profile: PlayerProfile,\n    tempo_bpm: int = 120,\n    num_cycles: int | None = None,\n    target_duration_sec: float | None = None,\n    include_midi: bool = True,\n) -&gt; GeneratedPerformance:\n    \"\"\"\n    Generate a performance of a rudiment.\n\n    Args:\n        rudiment: The rudiment to perform\n        profile: The player profile defining execution characteristics\n        tempo_bpm: Tempo in BPM\n        num_cycles: How many times to repeat the rudiment pattern (if target_duration_sec not set)\n        target_duration_sec: Target duration in seconds (overrides num_cycles if set)\n        include_midi: Whether to generate MIDI bytes\n\n    Returns:\n        GeneratedPerformance with stroke events and optional MIDI data\n    \"\"\"\n    # Calculate num_cycles from target duration if specified\n    if target_duration_sec is not None:\n        # Calculate how long one cycle takes at this tempo\n        cycle_duration = rudiment.duration_at_tempo(tempo_bpm, num_cycles=1)\n        # Calculate cycles needed (at least 1, round to nearest int)\n        num_cycles = max(1, round(target_duration_sec / cycle_duration))\n    elif num_cycles is None:\n        num_cycles = 4  # Default fallback\n\n    # Generate ideal timing grid\n    ideal_events = self._generate_ideal_events(rudiment, tempo_bpm, num_cycles)\n\n    # Apply player deviations\n    actual_events = self._apply_deviations(ideal_events, profile, rudiment, tempo_bpm)\n\n    # Calculate duration\n    if actual_events:\n        duration_sec = max(e.actual_time_ms for e in actual_events) / 1000.0 + 0.5\n    else:\n        duration_sec = 0.0\n\n    performance = GeneratedPerformance(\n        rudiment_slug=rudiment.slug,\n        profile_id=profile.id,\n        tempo_bpm=tempo_bpm,\n        duration_sec=duration_sec,\n        num_cycles=num_cycles,\n        strokes=actual_events,\n    )\n\n    if include_midi:\n        performance.midi_data = self._events_to_midi(actual_events, tempo_bpm)\n\n    return performance\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.generate_performance","title":"generate_performance","text":"<pre><code>generate_performance(rudiment: Rudiment, profile: PlayerProfile, tempo_bpm: int = 120, num_cycles: int | None = None, target_duration_sec: float | None = None, seed: int | None = None) -&gt; GeneratedPerformance\n</code></pre> <p>Convenience function to generate a single performance.</p> <p>Parameters:</p> Name Type Description Default <code>rudiment</code> <code>Rudiment</code> <p>The rudiment to perform</p> required <code>profile</code> <code>PlayerProfile</code> <p>Player profile</p> required <code>tempo_bpm</code> <code>int</code> <p>Tempo</p> <code>120</code> <code>num_cycles</code> <code>int | None</code> <p>Number of pattern repetitions (if target_duration_sec not set)</p> <code>None</code> <code>target_duration_sec</code> <code>float | None</code> <p>Target duration in seconds (overrides num_cycles)</p> <code>None</code> <code>seed</code> <code>int | None</code> <p>Random seed</p> <code>None</code> <p>Returns:</p> Type Description <code>GeneratedPerformance</code> <p>GeneratedPerformance</p> Source code in <code>dataset_gen/midi_gen/generator.py</code> <pre><code>def generate_performance(\n    rudiment: Rudiment,\n    profile: PlayerProfile,\n    tempo_bpm: int = 120,\n    num_cycles: int | None = None,\n    target_duration_sec: float | None = None,\n    seed: int | None = None,\n) -&gt; GeneratedPerformance:\n    \"\"\"\n    Convenience function to generate a single performance.\n\n    Args:\n        rudiment: The rudiment to perform\n        profile: Player profile\n        tempo_bpm: Tempo\n        num_cycles: Number of pattern repetitions (if target_duration_sec not set)\n        target_duration_sec: Target duration in seconds (overrides num_cycles)\n        seed: Random seed\n\n    Returns:\n        GeneratedPerformance\n    \"\"\"\n    generator = MIDIGenerator(seed=seed)\n    return generator.generate(\n        rudiment,\n        profile,\n        tempo_bpm,\n        num_cycles=num_cycles,\n        target_duration_sec=target_duration_sec,\n    )\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.generator.regenerate_midi","title":"regenerate_midi","text":"<pre><code>regenerate_midi(performance: GeneratedPerformance, ticks_per_beat: int = 480) -&gt; bytes\n</code></pre> <p>Regenerate MIDI data from a performance's stroke events.</p> <p>Use this after modifying stroke timings/velocities (e.g., via ArticulationEngine) to ensure MIDI matches the labels.</p> <p>Parameters:</p> Name Type Description Default <code>performance</code> <code>GeneratedPerformance</code> <p>Performance with (possibly modified) stroke events</p> required <code>ticks_per_beat</code> <code>int</code> <p>MIDI resolution</p> <code>480</code> <p>Returns:</p> Type Description <code>bytes</code> <p>New MIDI data as bytes</p> Source code in <code>dataset_gen/midi_gen/generator.py</code> <pre><code>def regenerate_midi(\n    performance: GeneratedPerformance,\n    ticks_per_beat: int = 480,\n) -&gt; bytes:\n    \"\"\"\n    Regenerate MIDI data from a performance's stroke events.\n\n    Use this after modifying stroke timings/velocities (e.g., via ArticulationEngine)\n    to ensure MIDI matches the labels.\n\n    Args:\n        performance: Performance with (possibly modified) stroke events\n        ticks_per_beat: MIDI resolution\n\n    Returns:\n        New MIDI data as bytes\n    \"\"\"\n    generator = MIDIGenerator(ticks_per_beat=ticks_per_beat)\n    return generator._events_to_midi(performance.strokes, performance.tempo_bpm)\n</code></pre>"},{"location":"api/midi-gen/#articulations","title":"Articulations","text":"<p>Articulation-specific processing for flams, drags, diddles, and rolls. Refines timing and velocity relationships based on rudiment type and player skill.</p> <p>Articulation-specific processing for different rudiment types.</p> <p>This module handles the nuances of flams, diddles, rolls, and buzzes, applying appropriate timing and velocity relationships.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.ArticulationParams","title":"ArticulationParams  <code>dataclass</code>","text":"<pre><code>ArticulationParams(flam_spacing_ms: float = 30.0, flam_spacing_variance: float = 0.1, flam_grace_velocity_ratio: float = 0.65, diddle_ratio: float = 1.0, diddle_ratio_variance: float = 0.05, diddle_velocity_decay: float = 0.95, roll_velocity_decay_per_stroke: float = 0.02, roll_acceleration_factor: float = 0.0, buzz_strokes_per_primary: int = 5, buzz_velocity_decay: float = 0.85)\n</code></pre> <p>Parameters for articulation processing.</p>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.ArticulationEngine","title":"ArticulationEngine","text":"<pre><code>ArticulationEngine(seed: int | None = None)\n</code></pre> <p>Process stroke events with rudiment-specific articulation rules.</p> <p>This engine refines the base timing and velocity deviations with articulation-specific relationships.</p> Source code in <code>dataset_gen/midi_gen/articulations.py</code> <pre><code>def __init__(self, seed: int | None = None):\n    self.rng = np.random.default_rng(seed)\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.ArticulationEngine.process","title":"process","text":"<pre><code>process(events: list[StrokeEvent], rudiment: Rudiment, profile: PlayerProfile) -&gt; list[StrokeEvent]\n</code></pre> <p>Apply articulation-specific processing to stroke events.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events to process</p> required <code>rudiment</code> <code>Rudiment</code> <p>The rudiment being performed</p> required <code>profile</code> <code>PlayerProfile</code> <p>Player profile with articulation parameters</p> required <p>Returns:</p> Type Description <code>list[StrokeEvent]</code> <p>Processed stroke events with refined timing/velocity</p> Source code in <code>dataset_gen/midi_gen/articulations.py</code> <pre><code>def process(\n    self,\n    events: list[StrokeEvent],\n    rudiment: Rudiment,\n    profile: PlayerProfile,\n) -&gt; list[StrokeEvent]:\n    \"\"\"\n    Apply articulation-specific processing to stroke events.\n\n    Args:\n        events: List of stroke events to process\n        rudiment: The rudiment being performed\n        profile: Player profile with articulation parameters\n\n    Returns:\n        Processed stroke events with refined timing/velocity\n    \"\"\"\n    dims = profile.dimensions.rudiment_specific\n\n    # Process based on rudiment category\n    if rudiment.category == RudimentCategory.FLAM:\n        events = self._process_flams(events, dims)\n    elif rudiment.category == RudimentCategory.DRAG:\n        events = self._process_drags(events, dims)\n\n    # Process diddles in all relevant rudiments\n    events = self._process_diddles(events, dims)\n\n    # Process rolls\n    if rudiment.category == RudimentCategory.ROLL:\n        events = self._process_rolls(events, dims, rudiment)\n\n    return events\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.apply_flam_spacing","title":"apply_flam_spacing","text":"<pre><code>apply_flam_spacing(events: list[StrokeEvent], spacing_ms: float, variance: float = 0.1, rng: Generator | None = None) -&gt; list[StrokeEvent]\n</code></pre> <p>Convenience function to apply flam spacing to events.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <code>spacing_ms</code> <code>float</code> <p>Target spacing between grace and primary</p> required <code>variance</code> <code>float</code> <p>Variance as proportion of spacing</p> <code>0.1</code> <code>rng</code> <code>Generator | None</code> <p>Random number generator</p> <code>None</code> <p>Returns:</p> Type Description <code>list[StrokeEvent]</code> <p>Modified events</p> Source code in <code>dataset_gen/midi_gen/articulations.py</code> <pre><code>def apply_flam_spacing(\n    events: list[StrokeEvent],\n    spacing_ms: float,\n    variance: float = 0.1,\n    rng: np.random.Generator | None = None,\n) -&gt; list[StrokeEvent]:\n    \"\"\"\n    Convenience function to apply flam spacing to events.\n\n    Args:\n        events: List of stroke events\n        spacing_ms: Target spacing between grace and primary\n        variance: Variance as proportion of spacing\n        rng: Random number generator\n\n    Returns:\n        Modified events\n    \"\"\"\n    if rng is None:\n        rng = np.random.default_rng()\n\n    for event in events:\n        if event.is_grace_note and event.parent_stroke_index is not None:\n            primary = next((e for e in events if e.index == event.parent_stroke_index), None)\n            if primary:\n                actual_spacing = max(5, rng.normal(spacing_ms, spacing_ms * variance))\n                event.actual_time_ms = primary.actual_time_ms - actual_spacing\n\n    return events\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.apply_diddle_timing","title":"apply_diddle_timing","text":"<pre><code>apply_diddle_timing(events: list[StrokeEvent], evenness: float = 1.0, variance: float = 0.05, rng: Generator | None = None) -&gt; list[StrokeEvent]\n</code></pre> <p>Convenience function to apply diddle timing adjustments.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <code>evenness</code> <code>float</code> <p>Target ratio between first and second stroke (1.0 = even)</p> <code>1.0</code> <code>variance</code> <code>float</code> <p>Variance in evenness</p> <code>0.05</code> <code>rng</code> <code>Generator | None</code> <p>Random number generator</p> <code>None</code> <p>Returns:</p> Type Description <code>list[StrokeEvent]</code> <p>Modified events</p> Source code in <code>dataset_gen/midi_gen/articulations.py</code> <pre><code>def apply_diddle_timing(\n    events: list[StrokeEvent],\n    evenness: float = 1.0,\n    variance: float = 0.05,\n    rng: np.random.Generator | None = None,\n) -&gt; list[StrokeEvent]:\n    \"\"\"\n    Convenience function to apply diddle timing adjustments.\n\n    Args:\n        events: List of stroke events\n        evenness: Target ratio between first and second stroke (1.0 = even)\n        variance: Variance in evenness\n        rng: Random number generator\n\n    Returns:\n        Modified events\n    \"\"\"\n    if rng is None:\n        rng = np.random.default_rng()\n\n    i = 0\n    while i &lt; len(events) - 1:\n        if (\n            events[i].stroke_type == StrokeType.DIDDLE\n            and events[i].diddle_position == 1\n            and events[i + 1].stroke_type == StrokeType.DIDDLE\n            and events[i + 1].diddle_position == 2\n        ):\n            first, second = events[i], events[i + 1]\n            gap = second.intended_time_ms - first.intended_time_ms\n            actual_ratio = max(0.5, min(1.5, rng.normal(evenness, variance)))\n            second.actual_time_ms = first.actual_time_ms + gap * actual_ratio\n            i += 2\n        else:\n            i += 1\n\n    return events\n</code></pre>"},{"location":"api/midi-gen/#dataset_gen.midi_gen.articulations.apply_roll_velocity_decay","title":"apply_roll_velocity_decay","text":"<pre><code>apply_roll_velocity_decay(events: list[StrokeEvent], decay_rate: float = 0.02) -&gt; list[StrokeEvent]\n</code></pre> <p>Apply velocity decay across a roll.</p> <p>Parameters:</p> Name Type Description Default <code>events</code> <code>list[StrokeEvent]</code> <p>List of stroke events</p> required <code>decay_rate</code> <code>float</code> <p>Decay per stroke (0.02 = 2% per stroke)</p> <code>0.02</code> <p>Returns:</p> Type Description <code>list[StrokeEvent]</code> <p>Modified events</p> Source code in <code>dataset_gen/midi_gen/articulations.py</code> <pre><code>def apply_roll_velocity_decay(\n    events: list[StrokeEvent],\n    decay_rate: float = 0.02,\n) -&gt; list[StrokeEvent]:\n    \"\"\"\n    Apply velocity decay across a roll.\n\n    Args:\n        events: List of stroke events\n        decay_rate: Decay per stroke (0.02 = 2% per stroke)\n\n    Returns:\n        Modified events\n    \"\"\"\n    for i, event in enumerate(events):\n        decay = 1.0 - (i * decay_rate)\n        decay = max(0.5, decay)\n        event.actual_velocity = int(np.clip(event.actual_velocity * decay, 1, 127))\n\n    return events\n</code></pre>"},{"location":"api/pipeline/","title":"Pipeline Module","text":"<p>The pipeline module orchestrates the complete dataset generation process, from player profiles to stored samples. It coordinates all components of the generation pipeline:</p> <ol> <li>Generate player profiles with correlated skill dimensions</li> <li>Generate MIDI performances with realistic timing/velocity</li> <li>Render audio via FluidSynth (multiple soundfonts)</li> <li>Apply audio augmentation (rooms, mics, compression, noise)</li> <li>Compute hierarchical labels (stroke, measure, exercise)</li> <li>Save to disk with profile-based train/val/test splits</li> </ol>"},{"location":"api/pipeline/#dataset-generator","title":"Dataset Generator","text":"<p>Main orchestration for dataset generation with configurable scale and augmentation options.</p> <p>SOUSA Dataset Generation Pipeline.</p> <p>Main orchestration for generating the Synthetic Open Unified Snare Assessment dataset: 1. Generate player profiles with correlated skill dimensions 2. Generate MIDI performances with realistic timing/velocity 3. Render audio via FluidSynth (multiple soundfonts) 4. Apply audio augmentation (rooms, mics, compression, noise) 5. Compute hierarchical labels (stroke, measure, exercise) 6. Save to disk with profile-based train/val/test splits</p>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.GenerationConfig","title":"GenerationConfig  <code>dataclass</code>","text":"<pre><code>GenerationConfig(output_dir: Path = (lambda: Path('output/dataset'))(), num_profiles: int = 100, samples_per_profile: int = 40, num_cycles_per_sample: int = 4, target_duration_sec: float | None = None, skill_distribution: dict[SkillTier, float] = (lambda: {BEGINNER: 0.25, INTERMEDIATE: 0.35, ADVANCED: 0.25, PROFESSIONAL: 0.15})(), tempo_range: tuple[int, int] = (60, 180), tempos_per_rudiment: int = 3, generate_audio: bool = True, soundfont_path: Path | None = None, soundfont_paths: list[Path] | None = None, sample_rate: int = 44100, audio_format: str = 'flac', apply_augmentation: bool = True, augmentation_presets: list[AugmentationPreset] | None = None, augmentations_per_sample: int = 1, train_ratio: float = 0.7, val_ratio: float = 0.15, test_ratio: float = 0.15, seed: int = 42, batch_size: int = 100, verbose: bool = True)\n</code></pre> <p>Configuration for dataset generation.</p>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.GenerationProgress","title":"GenerationProgress  <code>dataclass</code>","text":"<pre><code>GenerationProgress(total_samples: int = 0, completed_samples: int = 0, failed_samples: int = 0, current_profile: str = '', current_rudiment: str = '')\n</code></pre> <p>Track generation progress.</p>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.DatasetGenerator","title":"DatasetGenerator","text":"<pre><code>DatasetGenerator(config: GenerationConfig)\n</code></pre> <p>Generate complete synthetic drum rudiment dataset.</p> <p>Orchestrates the full pipeline from profiles to stored samples.</p> <p>Initialize generator.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>GenerationConfig</code> <p>Generation configuration</p> required Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def __init__(self, config: GenerationConfig):\n    \"\"\"\n    Initialize generator.\n\n    Args:\n        config: Generation configuration\n    \"\"\"\n    self.config = config\n    self.rng = np.random.default_rng(config.seed)\n\n    # Initialize components\n    self._midi_gen = MIDIGenerator(seed=config.seed)\n    self._articulation_engine = ArticulationEngine(seed=config.seed + 1)\n\n    # Audio synthesis (if available and configured)\n    self._synth: AudioSynthesizer | None = None\n    self._soundfont_names: list[str] = []\n    if config.generate_audio and config.soundfont_paths:\n        if SYNTH_AVAILABLE:\n            synth_config = SynthConfig(sample_rate=config.sample_rate)\n            self._synth = AudioSynthesizer(soundfont_path=None, config=synth_config)\n            # Load all soundfonts\n            for sf_path in config.soundfont_paths:\n                try:\n                    name = self._synth.load_soundfont(sf_path)\n                    self._soundfont_names.append(name)\n                    logger.info(f\"Loaded soundfont: {name}\")\n                except Exception as e:\n                    logger.warning(f\"Failed to load soundfont {sf_path}: {e}\")\n            if not self._soundfont_names:\n                logger.warning(\"No soundfonts loaded successfully\")\n                self._synth.close()\n                self._synth = None\n        else:\n            logger.warning(\"Audio synthesis not available (FluidSynth not installed)\")\n\n    # Augmentation pipeline\n    self._augmenter: AugmentationPipeline | None = None\n    if config.apply_augmentation:\n        self._augmenter = AugmentationPipeline(sample_rate=config.sample_rate)\n\n    # Storage\n    storage_config = StorageConfig(\n        output_dir=config.output_dir,\n        audio_format=config.audio_format,\n        sample_rate=config.sample_rate,\n    )\n    self._writer = DatasetWriter(storage_config)\n\n    # Progress tracking\n    self.progress = GenerationProgress()\n\n    # Profile numbering for readable filenames\n    self._profile_numbers: dict[str, int] = {}\n    self._profile_counter = 0\n\n    # Callbacks\n    self._progress_callback: Callable[[GenerationProgress], None] | None = None\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.DatasetGenerator.set_progress_callback","title":"set_progress_callback","text":"<pre><code>set_progress_callback(callback: Callable[[GenerationProgress], None]) -&gt; None\n</code></pre> <p>Set callback for progress updates.</p> Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def set_progress_callback(\n    self,\n    callback: Callable[[GenerationProgress], None],\n) -&gt; None:\n    \"\"\"Set callback for progress updates.\"\"\"\n    self._progress_callback = callback\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.DatasetGenerator.generate","title":"generate","text":"<pre><code>generate(rudiments: list[Rudiment] | None = None, rudiment_dir: Path | str | None = None) -&gt; SplitAssignment\n</code></pre> <p>Generate the complete dataset.</p> <p>Parameters:</p> Name Type Description Default <code>rudiments</code> <code>list[Rudiment] | None</code> <p>List of rudiments to use (optional)</p> <code>None</code> <code>rudiment_dir</code> <code>Path | str | None</code> <p>Directory containing rudiment YAML files (optional)</p> <code>None</code> <p>Returns:</p> Type Description <code>SplitAssignment</code> <p>SplitAssignment for the generated profiles</p> Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def generate(\n    self,\n    rudiments: list[Rudiment] | None = None,\n    rudiment_dir: Path | str | None = None,\n) -&gt; SplitAssignment:\n    \"\"\"\n    Generate the complete dataset.\n\n    Args:\n        rudiments: List of rudiments to use (optional)\n        rudiment_dir: Directory containing rudiment YAML files (optional)\n\n    Returns:\n        SplitAssignment for the generated profiles\n    \"\"\"\n    # Load rudiments\n    if rudiments is None:\n        if rudiment_dir:\n            rudiments_dict = load_all_rudiments(Path(rudiment_dir))\n        else:\n            # Try default location\n            default_dir = Path(__file__).parent.parent / \"rudiments\" / \"definitions\"\n            if default_dir.exists():\n                rudiments_dict = load_all_rudiments(default_dir)\n            else:\n                raise ValueError(\"No rudiments provided and default directory not found\")\n        # Convert dict to list (load_all_rudiments returns dict[slug, Rudiment])\n        rudiments = list(rudiments_dict.values())\n\n    logger.info(f\"Loaded {len(rudiments)} rudiments\")\n\n    # Generate profiles\n    profiles = self._generate_profiles()\n    logger.info(f\"Generated {len(profiles)} player profiles\")\n\n    # Generate splits\n    split_config = SplitConfig(\n        train_ratio=self.config.train_ratio,\n        val_ratio=self.config.val_ratio,\n        test_ratio=self.config.test_ratio,\n        seed=self.config.seed,\n    )\n    split_generator = SplitGenerator(split_config)\n    splits = split_generator.generate_splits(profiles)\n\n    # Save splits\n    split_generator.save_splits(\n        splits,\n        self.config.output_dir / \"splits.json\",\n    )\n\n    # Calculate total samples\n    self.progress.total_samples = (\n        len(profiles)\n        * len(rudiments)\n        * self.config.tempos_per_rudiment\n        * self.config.augmentations_per_sample\n    )\n\n    logger.info(f\"Generating {self.progress.total_samples} samples\")\n\n    # Generate samples\n    for profile in profiles:\n        self._generate_profile_samples(profile, rudiments, splits)\n\n    # Flush remaining samples\n    self._writer.flush()\n\n    logger.info(f\"Generation complete: {self.progress.completed_samples} samples\")\n\n    return splits\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.DatasetGenerator.generate_single","title":"generate_single","text":"<pre><code>generate_single(rudiment: Rudiment, profile: PlayerProfile | None = None, tempo: int = 120, preset: AugmentationPreset | None = None) -&gt; tuple[Sample, bytes | None, ndarray | None]\n</code></pre> <p>Generate a single sample for testing/inspection.</p> <p>Parameters:</p> Name Type Description Default <code>rudiment</code> <code>Rudiment</code> <p>Rudiment to perform</p> required <code>profile</code> <code>PlayerProfile | None</code> <p>Player profile (generated if None)</p> <code>None</code> <code>tempo</code> <code>int</code> <p>Tempo in BPM</p> <code>120</code> <code>preset</code> <code>AugmentationPreset | None</code> <p>Augmentation preset</p> <code>None</code> <p>Returns:</p> Type Description <code>tuple[Sample, bytes | None, ndarray | None]</code> <p>Tuple of (sample, midi_data, audio_data)</p> Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def generate_single(\n    self,\n    rudiment: Rudiment,\n    profile: PlayerProfile | None = None,\n    tempo: int = 120,\n    preset: AugmentationPreset | None = None,\n) -&gt; tuple[Sample, bytes | None, np.ndarray | None]:\n    \"\"\"\n    Generate a single sample for testing/inspection.\n\n    Args:\n        rudiment: Rudiment to perform\n        profile: Player profile (generated if None)\n        tempo: Tempo in BPM\n        preset: Augmentation preset\n\n    Returns:\n        Tuple of (sample, midi_data, audio_data)\n    \"\"\"\n    if profile is None:\n        profile = generate_profile(SkillTier.INTERMEDIATE, rng=self.rng)\n\n    # Generate MIDI\n    performance = self._midi_gen.generate(\n        rudiment=rudiment,\n        profile=profile,\n        tempo_bpm=tempo,\n        num_cycles=(\n            self.config.num_cycles_per_sample\n            if self.config.target_duration_sec is None\n            else None\n        ),\n        target_duration_sec=self.config.target_duration_sec,\n        include_midi=True,\n    )\n\n    # Apply articulations\n    performance.strokes = self._articulation_engine.process(\n        performance.strokes,\n        rudiment,\n        profile,\n    )\n\n    # Regenerate MIDI to match modified strokes\n    performance.midi_data = regenerate_midi(performance)\n\n    # Compute labels\n    sample = compute_sample_labels(performance, rudiment, profile)\n\n    # Render audio (use first soundfont if available)\n    audio_data = None\n    soundfont_name = self._soundfont_names[0] if self._soundfont_names else None\n    if self._synth is not None and performance.midi_data:\n        try:\n            audio_data = self._synth.render(\n                midi_data=performance.midi_data,\n                duration_hint_sec=performance.duration_sec,\n                soundfont_name=soundfont_name,\n            )\n\n            # Apply augmentation\n            if preset and self._augmenter:\n                aug_config = AugmentationConfig.from_preset(preset)\n                audio_data = self._augmenter.process(audio_data, aug_config)\n\n        except Exception as e:\n            logger.warning(f\"Audio generation failed: {e}\")\n\n    return sample, performance.midi_data, audio_data\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.DatasetGenerator.close","title":"close","text":"<pre><code>close() -&gt; None\n</code></pre> <p>Clean up resources.</p> Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def close(self) -&gt; None:\n    \"\"\"Clean up resources.\"\"\"\n    if self._synth:\n        self._synth.close()\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.generate.generate_dataset","title":"generate_dataset","text":"<pre><code>generate_dataset(output_dir: Path | str, num_profiles: int = 100, soundfont_path: Path | str | None = None, rudiment_dir: Path | str | None = None, seed: int = 42, verbose: bool = True) -&gt; SplitAssignment\n</code></pre> <p>Convenience function to generate a dataset.</p> <p>Parameters:</p> Name Type Description Default <code>output_dir</code> <code>Path | str</code> <p>Output directory for dataset</p> required <code>num_profiles</code> <code>int</code> <p>Number of player profiles to generate</p> <code>100</code> <code>soundfont_path</code> <code>Path | str | None</code> <p>Path to soundfont for audio synthesis</p> <code>None</code> <code>rudiment_dir</code> <code>Path | str | None</code> <p>Directory containing rudiment definitions</p> <code>None</code> <code>seed</code> <code>int</code> <p>Random seed</p> <code>42</code> <code>verbose</code> <code>bool</code> <p>Whether to log progress</p> <code>True</code> <p>Returns:</p> Type Description <code>SplitAssignment</code> <p>SplitAssignment for the generated profiles</p> Source code in <code>dataset_gen/pipeline/generate.py</code> <pre><code>def generate_dataset(\n    output_dir: Path | str,\n    num_profiles: int = 100,\n    soundfont_path: Path | str | None = None,\n    rudiment_dir: Path | str | None = None,\n    seed: int = 42,\n    verbose: bool = True,\n) -&gt; SplitAssignment:\n    \"\"\"\n    Convenience function to generate a dataset.\n\n    Args:\n        output_dir: Output directory for dataset\n        num_profiles: Number of player profiles to generate\n        soundfont_path: Path to soundfont for audio synthesis\n        rudiment_dir: Directory containing rudiment definitions\n        seed: Random seed\n        verbose: Whether to log progress\n\n    Returns:\n        SplitAssignment for the generated profiles\n    \"\"\"\n    config = GenerationConfig(\n        output_dir=Path(output_dir),\n        num_profiles=num_profiles,\n        soundfont_path=Path(soundfont_path) if soundfont_path else None,\n        seed=seed,\n        verbose=verbose,\n    )\n\n    if verbose:\n        logging.basicConfig(level=logging.INFO)\n\n    generator = DatasetGenerator(config)\n\n    try:\n        return generator.generate(rudiment_dir=rudiment_dir)\n    finally:\n        generator.close()\n</code></pre>"},{"location":"api/pipeline/#storage","title":"Storage","text":"<p>Utilities for writing samples to disk in efficient formats (Parquet for labels, FLAC for audio, MIDI files).</p> <p>Storage utilities for dataset persistence.</p> <p>This module handles writing samples to disk in efficient formats: - Parquet for labels (hierarchical, compressed) - FLAC for audio - Standard MIDI files</p>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.StorageConfig","title":"StorageConfig  <code>dataclass</code>","text":"<pre><code>StorageConfig(output_dir: Path, audio_format: Literal['flac', 'wav'] = 'flac', audio_subtype: str = 'PCM_24', sample_rate: int = 44100, midi_subdir: str = 'midi', audio_subdir: str = 'audio', labels_subdir: str = 'labels', compression: str = 'snappy', row_group_size: int = 1000, create_index: bool = True)\n</code></pre> <p>Configuration for dataset storage.</p>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.DatasetWriter","title":"DatasetWriter","text":"<pre><code>DatasetWriter(config: StorageConfig)\n</code></pre> <p>Write dataset samples to disk in organized format.</p> <p>Directory structure: output_dir/ \u251c\u2500\u2500 midi/ \u2502   \u2514\u2500\u2500 {rudiment_slug}/ \u2502       \u2514\u2500\u2500 {sample_id}.mid \u251c\u2500\u2500 audio/ \u2502   \u2514\u2500\u2500 {rudiment_slug}/ \u2502       \u2514\u2500\u2500 {sample_id}.flac \u251c\u2500\u2500 labels/ \u2502   \u251c\u2500\u2500 strokes.parquet \u2502   \u251c\u2500\u2500 measures.parquet \u2502   \u251c\u2500\u2500 exercises.parquet \u2502   \u2514\u2500\u2500 samples.parquet \u2514\u2500\u2500 index.json</p> <p>Initialize dataset writer.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>StorageConfig</code> <p>Storage configuration</p> required Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def __init__(self, config: StorageConfig):\n    \"\"\"\n    Initialize dataset writer.\n\n    Args:\n        config: Storage configuration\n    \"\"\"\n    self.config = config\n    self._setup_directories()\n\n    # Accumulators for batch writing\n    self._stroke_records: list[dict] = []\n    self._measure_records: list[dict] = []\n    self._exercise_records: list[dict] = []\n    self._sample_records: list[dict] = []\n\n    # Index tracking\n    self._sample_ids: list[str] = []\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.DatasetWriter.write_sample","title":"write_sample","text":"<pre><code>write_sample(sample: Sample, midi_data: bytes | None = None, audio_data: ndarray | None = None) -&gt; dict[str, Path]\n</code></pre> <p>Write a single sample to disk.</p> <p>Parameters:</p> Name Type Description Default <code>sample</code> <code>Sample</code> <p>Sample with labels</p> required <code>midi_data</code> <code>bytes | None</code> <p>Raw MIDI bytes (optional)</p> <code>None</code> <code>audio_data</code> <code>ndarray | None</code> <p>Audio samples as numpy array (optional)</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[str, Path]</code> <p>Dictionary of written file paths</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def write_sample(\n    self,\n    sample: Sample,\n    midi_data: bytes | None = None,\n    audio_data: np.ndarray | None = None,\n) -&gt; dict[str, Path]:\n    \"\"\"\n    Write a single sample to disk.\n\n    Args:\n        sample: Sample with labels\n        midi_data: Raw MIDI bytes (optional)\n        audio_data: Audio samples as numpy array (optional)\n\n    Returns:\n        Dictionary of written file paths\n    \"\"\"\n    paths = {}\n\n    # Write MIDI\n    if midi_data is not None:\n        midi_path = self._write_midi(sample.sample_id, sample.rudiment_slug, midi_data)\n        paths[\"midi\"] = midi_path\n        sample.midi_path = str(midi_path.relative_to(self.config.output_dir))\n\n    # Write audio\n    if audio_data is not None:\n        audio_path = self._write_audio(sample.sample_id, sample.rudiment_slug, audio_data)\n        paths[\"audio\"] = audio_path\n        sample.audio_path = str(audio_path.relative_to(self.config.output_dir))\n\n    # Accumulate label records\n    self._accumulate_labels(sample)\n    self._sample_ids.append(sample.sample_id)\n\n    return paths\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.DatasetWriter.flush","title":"flush","text":"<pre><code>flush() -&gt; dict[str, Path]\n</code></pre> <p>Write accumulated labels to Parquet files.</p> <p>Returns:</p> Type Description <code>dict[str, Path]</code> <p>Dictionary of written Parquet file paths</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def flush(self) -&gt; dict[str, Path]:\n    \"\"\"\n    Write accumulated labels to Parquet files.\n\n    Returns:\n        Dictionary of written Parquet file paths\n    \"\"\"\n    paths = {}\n    labels_dir = self.config.output_dir / self.config.labels_subdir\n\n    # Write strokes\n    if self._stroke_records:\n        strokes_path = labels_dir / \"strokes.parquet\"\n        self._write_parquet(self._stroke_records, strokes_path)\n        paths[\"strokes\"] = strokes_path\n        self._stroke_records = []\n\n    # Write measures\n    if self._measure_records:\n        measures_path = labels_dir / \"measures.parquet\"\n        self._write_parquet(self._measure_records, measures_path)\n        paths[\"measures\"] = measures_path\n        self._measure_records = []\n\n    # Write exercises\n    if self._exercise_records:\n        exercises_path = labels_dir / \"exercises.parquet\"\n        self._write_parquet(self._exercise_records, exercises_path)\n        paths[\"exercises\"] = exercises_path\n        self._exercise_records = []\n\n    # Write samples\n    if self._sample_records:\n        samples_path = labels_dir / \"samples.parquet\"\n        self._write_parquet(self._sample_records, samples_path)\n        paths[\"samples\"] = samples_path\n        self._sample_records = []\n\n    # Write index\n    if self.config.create_index:\n        index_path = self._write_index()\n        paths[\"index\"] = index_path\n\n    return paths\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.DatasetWriter.get_stats","title":"get_stats","text":"<pre><code>get_stats() -&gt; dict\n</code></pre> <p>Get statistics about accumulated data.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def get_stats(self) -&gt; dict:\n    \"\"\"Get statistics about accumulated data.\"\"\"\n    return {\n        \"samples_pending\": len(self._sample_records),\n        \"strokes_pending\": len(self._stroke_records),\n        \"measures_pending\": len(self._measure_records),\n        \"exercises_pending\": len(self._exercise_records),\n        \"total_samples_written\": len(self._sample_ids),\n    }\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader","title":"ParquetReader","text":"<pre><code>ParquetReader(dataset_dir: Path | str)\n</code></pre> <p>Read dataset from Parquet files.</p> <p>Initialize reader.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def __init__(self, dataset_dir: Path | str):\n    \"\"\"\n    Initialize reader.\n\n    Args:\n        dataset_dir: Path to dataset directory\n    \"\"\"\n    self.dataset_dir = Path(dataset_dir)\n    self.labels_dir = self.dataset_dir / \"labels\"\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.load_samples","title":"load_samples","text":"<pre><code>load_samples() -&gt; DataFrame\n</code></pre> <p>Load sample metadata.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def load_samples(self) -&gt; pd.DataFrame:\n    \"\"\"Load sample metadata.\"\"\"\n    return pd.read_parquet(self.labels_dir / \"samples.parquet\")\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.load_strokes","title":"load_strokes","text":"<pre><code>load_strokes(sample_ids: list[str] | None = None) -&gt; DataFrame\n</code></pre> <p>Load stroke-level labels, optionally filtered by sample IDs.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def load_strokes(self, sample_ids: list[str] | None = None) -&gt; pd.DataFrame:\n    \"\"\"Load stroke-level labels, optionally filtered by sample IDs.\"\"\"\n    df = pd.read_parquet(self.labels_dir / \"strokes.parquet\")\n    if sample_ids is not None:\n        df = df[df[\"sample_id\"].isin(sample_ids)]\n    return df\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.load_measures","title":"load_measures","text":"<pre><code>load_measures(sample_ids: list[str] | None = None) -&gt; DataFrame\n</code></pre> <p>Load measure-level labels, optionally filtered by sample IDs.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def load_measures(self, sample_ids: list[str] | None = None) -&gt; pd.DataFrame:\n    \"\"\"Load measure-level labels, optionally filtered by sample IDs.\"\"\"\n    df = pd.read_parquet(self.labels_dir / \"measures.parquet\")\n    if sample_ids is not None:\n        df = df[df[\"sample_id\"].isin(sample_ids)]\n    return df\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.load_exercises","title":"load_exercises","text":"<pre><code>load_exercises(sample_ids: list[str] | None = None) -&gt; DataFrame\n</code></pre> <p>Load exercise-level scores, optionally filtered by sample IDs.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def load_exercises(self, sample_ids: list[str] | None = None) -&gt; pd.DataFrame:\n    \"\"\"Load exercise-level scores, optionally filtered by sample IDs.\"\"\"\n    df = pd.read_parquet(self.labels_dir / \"exercises.parquet\")\n    if sample_ids is not None:\n        df = df[df[\"sample_id\"].isin(sample_ids)]\n    return df\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.load_index","title":"load_index","text":"<pre><code>load_index() -&gt; dict\n</code></pre> <p>Load dataset index.</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def load_index(self) -&gt; dict:\n    \"\"\"Load dataset index.\"\"\"\n    with open(self.dataset_dir / \"index.json\") as f:\n        return json.load(f)\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.ParquetReader.get_sample","title":"get_sample","text":"<pre><code>get_sample(sample_id: str) -&gt; dict\n</code></pre> <p>Load all data for a single sample.</p> <p>Returns:</p> Type Description <code>dict</code> <p>Dictionary with sample metadata, strokes, measures, and scores</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def get_sample(self, sample_id: str) -&gt; dict:\n    \"\"\"\n    Load all data for a single sample.\n\n    Returns:\n        Dictionary with sample metadata, strokes, measures, and scores\n    \"\"\"\n    samples = self.load_samples()\n    sample_row = samples[samples[\"sample_id\"] == sample_id].iloc[0]\n\n    return {\n        \"metadata\": sample_row.to_dict(),\n        \"strokes\": self.load_strokes([sample_id]).to_dict(orient=\"records\"),\n        \"measures\": self.load_measures([sample_id]).to_dict(orient=\"records\"),\n        \"scores\": self.load_exercises([sample_id]).iloc[0].to_dict(),\n    }\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.write_sample","title":"write_sample","text":"<pre><code>write_sample(sample: Sample, output_dir: Path | str, midi_data: bytes | None = None, audio_data: ndarray | None = None, audio_format: str = 'flac') -&gt; dict[str, Path]\n</code></pre> <p>Convenience function to write a single sample.</p> <p>Parameters:</p> Name Type Description Default <code>sample</code> <code>Sample</code> <p>Sample with labels</p> required <code>output_dir</code> <code>Path | str</code> <p>Output directory</p> required <code>midi_data</code> <code>bytes | None</code> <p>Raw MIDI bytes</p> <code>None</code> <code>audio_data</code> <code>ndarray | None</code> <p>Audio samples</p> <code>None</code> <code>audio_format</code> <code>str</code> <p>Output audio format</p> <code>'flac'</code> <p>Returns:</p> Type Description <code>dict[str, Path]</code> <p>Dictionary of written file paths</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def write_sample(\n    sample: Sample,\n    output_dir: Path | str,\n    midi_data: bytes | None = None,\n    audio_data: np.ndarray | None = None,\n    audio_format: str = \"flac\",\n) -&gt; dict[str, Path]:\n    \"\"\"\n    Convenience function to write a single sample.\n\n    Args:\n        sample: Sample with labels\n        output_dir: Output directory\n        midi_data: Raw MIDI bytes\n        audio_data: Audio samples\n        audio_format: Output audio format\n\n    Returns:\n        Dictionary of written file paths\n    \"\"\"\n    config = StorageConfig(\n        output_dir=Path(output_dir),\n        audio_format=audio_format,\n    )\n    writer = DatasetWriter(config)\n    paths = writer.write_sample(sample, midi_data, audio_data)\n    writer.flush()\n    return paths\n</code></pre>"},{"location":"api/pipeline/#dataset_gen.pipeline.storage.write_batch","title":"write_batch","text":"<pre><code>write_batch(samples: list[Sample], output_dir: Path | str, midi_data_list: list[bytes | None] | None = None, audio_data_list: list[ndarray | None] | None = None, audio_format: str = 'flac') -&gt; dict[str, Path]\n</code></pre> <p>Convenience function to write a batch of samples.</p> <p>Parameters:</p> Name Type Description Default <code>samples</code> <code>list[Sample]</code> <p>List of samples with labels</p> required <code>output_dir</code> <code>Path | str</code> <p>Output directory</p> required <code>midi_data_list</code> <code>list[bytes | None] | None</code> <p>List of MIDI bytes (parallel to samples)</p> <code>None</code> <code>audio_data_list</code> <code>list[ndarray | None] | None</code> <p>List of audio arrays (parallel to samples)</p> <code>None</code> <code>audio_format</code> <code>str</code> <p>Output audio format</p> <code>'flac'</code> <p>Returns:</p> Type Description <code>dict[str, Path]</code> <p>Dictionary of written Parquet file paths</p> Source code in <code>dataset_gen/pipeline/storage.py</code> <pre><code>def write_batch(\n    samples: list[Sample],\n    output_dir: Path | str,\n    midi_data_list: list[bytes | None] | None = None,\n    audio_data_list: list[np.ndarray | None] | None = None,\n    audio_format: str = \"flac\",\n) -&gt; dict[str, Path]:\n    \"\"\"\n    Convenience function to write a batch of samples.\n\n    Args:\n        samples: List of samples with labels\n        output_dir: Output directory\n        midi_data_list: List of MIDI bytes (parallel to samples)\n        audio_data_list: List of audio arrays (parallel to samples)\n        audio_format: Output audio format\n\n    Returns:\n        Dictionary of written Parquet file paths\n    \"\"\"\n    config = StorageConfig(\n        output_dir=Path(output_dir),\n        audio_format=audio_format,\n    )\n    writer = DatasetWriter(config)\n\n    if midi_data_list is None:\n        midi_data_list = [None] * len(samples)\n    if audio_data_list is None:\n        audio_data_list = [None] * len(samples)\n\n    for sample, midi, audio in zip(samples, midi_data_list, audio_data_list):\n        writer.write_sample(sample, midi, audio)\n\n    return writer.flush()\n</code></pre>"},{"location":"api/profiles/","title":"Profiles Module","text":"<p>The profiles module handles player profile generation with skill-tier-based archetypes. Each profile represents a unique \"virtual drummer\" with consistent execution characteristics that determine how they perform rudiments.</p> <p>Profiles capture execution dimensions across several categories:</p> <ul> <li>Timing: Accuracy, consistency, tempo drift, subdivision evenness</li> <li>Dynamics: Velocity mean/variance, accent differentiation and accuracy</li> <li>Hand Balance: Left/right velocity ratio, timing bias, consistency delta</li> <li>Rudiment-Specific: Flam spacing, diddle evenness, roll sustain, buzz consistency</li> </ul> <p>The archetype system generates profiles with realistic correlations between these dimensions based on skill tier (beginner through professional), drawing from music cognition literature for parameter ranges.</p> <p>Player profile definitions and archetype generators.</p> <p>Defines the execution dimensions that characterize drum performance quality and provides archetypes for different skill levels with realistic correlations.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.SkillTier","title":"SkillTier","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Broad skill categories for player profiles.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.PlayerProfile","title":"PlayerProfile","text":"<p>               Bases: <code>BaseModel</code></p> <p>Complete player profile for generating synthetic performances.</p> <p>Each profile represents a unique \"virtual drummer\" with consistent execution characteristics across multiple rudiments.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.PlayerProfile.get_tempo_penalty","title":"get_tempo_penalty","text":"<pre><code>get_tempo_penalty(tempo: int) -&gt; float\n</code></pre> <p>Calculate performance penalty for playing outside comfort range.</p> <p>Returns a multiplier (1.0 = no penalty, &gt;1.0 = worse performance).</p> Source code in <code>dataset_gen/profiles/archetypes.py</code> <pre><code>def get_tempo_penalty(self, tempo: int) -&gt; float:\n    \"\"\"\n    Calculate performance penalty for playing outside comfort range.\n\n    Returns a multiplier (1.0 = no penalty, &gt;1.0 = worse performance).\n    \"\"\"\n    low, high = self.tempo_comfort_range\n    if low &lt;= tempo &lt;= high:\n        return 1.0\n\n    # Linear penalty outside comfort zone\n    if tempo &lt; low:\n        return 1.0 + (low - tempo) * 0.01\n    else:\n        return 1.0 + (tempo - high) * 0.01\n</code></pre>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.PlayerProfile.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict\n</code></pre> <p>Serialize profile to dictionary for storage/transfer.</p> Source code in <code>dataset_gen/profiles/archetypes.py</code> <pre><code>def to_dict(self) -&gt; dict:\n    \"\"\"Serialize profile to dictionary for storage/transfer.\"\"\"\n    data = self.model_dump()\n    # Convert enum to string for JSON compatibility\n    data[\"skill_tier\"] = self.skill_tier.value\n    return data\n</code></pre>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.PlayerProfile.from_dict","title":"from_dict  <code>classmethod</code>","text":"<pre><code>from_dict(data: dict) -&gt; 'PlayerProfile'\n</code></pre> <p>Deserialize profile from dictionary.</p> Source code in <code>dataset_gen/profiles/archetypes.py</code> <pre><code>@classmethod\ndef from_dict(cls, data: dict) -&gt; \"PlayerProfile\":\n    \"\"\"Deserialize profile from dictionary.\"\"\"\n    # Convert string back to enum if needed\n    if isinstance(data.get(\"skill_tier\"), str):\n        data = data.copy()\n        data[\"skill_tier\"] = SkillTier(data[\"skill_tier\"])\n    return cls.model_validate(data)\n</code></pre>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.TimingDimensions","title":"TimingDimensions","text":"<p>               Bases: <code>BaseModel</code></p> <p>Timing-related execution dimensions.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.DynamicsDimensions","title":"DynamicsDimensions","text":"<p>               Bases: <code>BaseModel</code></p> <p>Dynamics-related execution dimensions.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.HandBalanceDimensions","title":"HandBalanceDimensions","text":"<p>               Bases: <code>BaseModel</code></p> <p>Hand balance execution dimensions.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.RudimentSpecificDimensions","title":"RudimentSpecificDimensions","text":"<p>               Bases: <code>BaseModel</code></p> <p>Rudiment-specific execution dimensions.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.ExecutionDimensions","title":"ExecutionDimensions","text":"<p>               Bases: <code>BaseModel</code></p> <p>Complete execution dimensions for a player profile.</p> <p>These capture all the measurable aspects of how a drummer executes rudiments.</p>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.generate_profile","title":"generate_profile","text":"<pre><code>generate_profile(skill_tier: SkillTier, rng: Generator | None = None, profile_id: str | None = None) -&gt; PlayerProfile\n</code></pre> <p>Generate a player profile for a given skill tier.</p> <p>Parameters:</p> Name Type Description Default <code>skill_tier</code> <code>SkillTier</code> <p>The skill level archetype to base the profile on</p> required <code>rng</code> <code>Generator | None</code> <p>Random number generator for reproducibility</p> <code>None</code> <code>profile_id</code> <code>str | None</code> <p>Optional specific ID for the profile</p> <code>None</code> <p>Returns:</p> Type Description <code>PlayerProfile</code> <p>A PlayerProfile with sampled execution dimensions</p> Source code in <code>dataset_gen/profiles/archetypes.py</code> <pre><code>def generate_profile(\n    skill_tier: SkillTier,\n    rng: np.random.Generator | None = None,\n    profile_id: str | None = None,\n) -&gt; PlayerProfile:\n    \"\"\"\n    Generate a player profile for a given skill tier.\n\n    Args:\n        skill_tier: The skill level archetype to base the profile on\n        rng: Random number generator for reproducibility\n        profile_id: Optional specific ID for the profile\n\n    Returns:\n        A PlayerProfile with sampled execution dimensions\n    \"\"\"\n    if rng is None:\n        rng = np.random.default_rng()\n\n    params = ARCHETYPE_PARAMS[skill_tier]\n\n    # Sample timing dimensions\n    timing = TimingDimensions(\n        timing_accuracy=_clamp(_sample_param(params[\"timing\"][\"timing_accuracy\"], rng), 0, 100),\n        timing_consistency=_clamp(_sample_param(params[\"timing\"][\"timing_consistency\"], rng), 0, 1),\n        tempo_drift=_clamp(_sample_param(params[\"timing\"][\"tempo_drift\"], rng), -0.5, 0.5),\n        subdivision_evenness=_clamp(\n            _sample_param(params[\"timing\"][\"subdivision_evenness\"], rng), 0, 1\n        ),\n    )\n\n    # Sample dynamics dimensions\n    dynamics = DynamicsDimensions(\n        velocity_mean=_clamp(_sample_param(params[\"dynamics\"][\"velocity_mean\"], rng), 30, 127),\n        velocity_variance=_clamp(\n            _sample_param(params[\"dynamics\"][\"velocity_variance\"], rng), 0, 0.5\n        ),\n        accent_differentiation=_clamp(\n            _sample_param(params[\"dynamics\"][\"accent_differentiation\"], rng), 0, 20\n        ),\n        accent_accuracy=_clamp(_sample_param(params[\"dynamics\"][\"accent_accuracy\"], rng), 0, 1),\n    )\n\n    # Sample hand balance dimensions\n    hand_balance = HandBalanceDimensions(\n        lr_velocity_ratio=_clamp(\n            _sample_param(params[\"hand_balance\"][\"lr_velocity_ratio\"], rng), 0.5, 1.0\n        ),\n        lr_timing_bias=_clamp(\n            _sample_param(params[\"hand_balance\"][\"lr_timing_bias\"], rng), -20, 20\n        ),\n        lr_consistency_delta=_clamp(\n            _sample_param(params[\"hand_balance\"][\"lr_consistency_delta\"], rng), 0, 0.3\n        ),\n    )\n\n    # Sample rudiment-specific dimensions\n    rudiment_specific = RudimentSpecificDimensions(\n        flam_spacing=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"flam_spacing\"], rng), 10, 80\n        ),\n        flam_spacing_variance=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"flam_spacing_variance\"], rng), 0, 0.5\n        ),\n        diddle_evenness=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"diddle_evenness\"], rng), 0.6, 1.4\n        ),\n        diddle_variance=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"diddle_variance\"], rng), 0, 0.3\n        ),\n        roll_sustain=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"roll_sustain\"], rng), 0, 0.5\n        ),\n        buzz_density_consistency=_clamp(\n            _sample_param(params[\"rudiment_specific\"][\"buzz_density_consistency\"], rng), 0, 1\n        ),\n    )\n\n    # Sample meta parameters\n    fatigue = _clamp(_sample_param(params[\"meta\"][\"fatigue_coefficient\"], rng), 0, 0.3)\n    tempo_range = params[\"meta\"][\"tempo_comfort_range\"][0]\n\n    # Determine dominant hand (90% right-handed)\n    dominant_hand = \"left\" if rng.random() &lt; 0.1 else \"right\"\n\n    return PlayerProfile(\n        id=profile_id or str(uuid4()),\n        skill_tier=skill_tier,\n        dimensions=ExecutionDimensions(\n            timing=timing,\n            dynamics=dynamics,\n            hand_balance=hand_balance,\n            rudiment_specific=rudiment_specific,\n        ),\n        dominant_hand=dominant_hand,\n        fatigue_coefficient=fatigue,\n        tempo_comfort_range=tempo_range,\n    )\n</code></pre>"},{"location":"api/profiles/#dataset_gen.profiles.archetypes.generate_profiles_batch","title":"generate_profiles_batch","text":"<pre><code>generate_profiles_batch(n_profiles: int, skill_distribution: dict[SkillTier, float] | None = None, seed: int | None = None) -&gt; list[PlayerProfile]\n</code></pre> <p>Generate a batch of player profiles with specified skill distribution.</p> <p>Parameters:</p> Name Type Description Default <code>n_profiles</code> <code>int</code> <p>Number of profiles to generate</p> required <code>skill_distribution</code> <code>dict[SkillTier, float] | None</code> <p>Dict mapping skill tiers to proportions (must sum to 1).                Defaults to uniform distribution.</p> <code>None</code> <code>seed</code> <code>int | None</code> <p>Random seed for reproducibility</p> <code>None</code> <p>Returns:</p> Type Description <code>list[PlayerProfile]</code> <p>List of PlayerProfile objects</p> Source code in <code>dataset_gen/profiles/archetypes.py</code> <pre><code>def generate_profiles_batch(\n    n_profiles: int,\n    skill_distribution: dict[SkillTier, float] | None = None,\n    seed: int | None = None,\n) -&gt; list[PlayerProfile]:\n    \"\"\"\n    Generate a batch of player profiles with specified skill distribution.\n\n    Args:\n        n_profiles: Number of profiles to generate\n        skill_distribution: Dict mapping skill tiers to proportions (must sum to 1).\n                           Defaults to uniform distribution.\n        seed: Random seed for reproducibility\n\n    Returns:\n        List of PlayerProfile objects\n    \"\"\"\n    rng = np.random.default_rng(seed)\n\n    if skill_distribution is None:\n        skill_distribution = {tier: 0.25 for tier in SkillTier}\n\n    # Normalize distribution\n    total = sum(skill_distribution.values())\n    skill_distribution = {k: v / total for k, v in skill_distribution.items()}\n\n    # Calculate counts per tier\n    tiers = list(skill_distribution.keys())\n    probs = [skill_distribution[t] for t in tiers]\n\n    # Use indices to avoid numpy string conversion of enum values\n    tier_indices = rng.choice(len(tiers), size=n_profiles, p=probs)\n\n    profiles = []\n    for idx in tier_indices:\n        profiles.append(generate_profile(tiers[idx], rng))\n\n    return profiles\n</code></pre>"},{"location":"api/rudiments/","title":"Rudiments Module","text":"<p>The rudiments module handles loading and parsing of PAS (Percussive Arts Society) drum rudiment definitions. It provides Pydantic models for representing the 40 standard drum rudiments with their sticking patterns, accent patterns, and articulation-specific parameters.</p> <p>Rudiment definitions are stored as YAML files in <code>dataset_gen/rudiments/definitions/</code> and specify:</p> <ul> <li>Stroke patterns with hand assignments (R/L)</li> <li>Articulation types (tap, accent, grace note, diddle, buzz)</li> <li>Tempo ranges and subdivisions</li> <li>Category classification (roll, diddle, flam, drag)</li> </ul>"},{"location":"api/rudiments/#schema-classes","title":"Schema Classes","text":"<p>Pydantic models for rudiment definitions.</p> <p>The schema captures all 40 PAS rudiments with their sticking patterns, accent patterns, and articulation-specific parameters.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Hand","title":"Hand","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Which hand plays the stroke.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.StrokeType","title":"StrokeType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Type of drum stroke.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Stroke","title":"Stroke","text":"<p>               Bases: <code>BaseModel</code></p> <p>A single stroke in a rudiment pattern.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Stroke.is_accented","title":"is_accented","text":"<pre><code>is_accented() -&gt; bool\n</code></pre> <p>Returns True if this is an accented stroke.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def is_accented(self) -&gt; bool:\n    \"\"\"Returns True if this is an accented stroke.\"\"\"\n    return self.stroke_type == StrokeType.ACCENT\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Stroke.is_grace_note","title":"is_grace_note","text":"<pre><code>is_grace_note() -&gt; bool\n</code></pre> <p>Returns True if this is a grace note.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def is_grace_note(self) -&gt; bool:\n    \"\"\"Returns True if this is a grace note.\"\"\"\n    return self.stroke_type == StrokeType.GRACE\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.StickingPattern","title":"StickingPattern","text":"<p>               Bases: <code>BaseModel</code></p> <p>A complete sticking pattern for a rudiment.</p> <p>Patterns are defined per beat grouping (e.g., one paradiddle cycle). The pattern repeats for the duration of the exercise.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.StickingPattern.stroke_count","title":"stroke_count","text":"<pre><code>stroke_count() -&gt; int\n</code></pre> <p>Total number of strokes in one cycle.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def stroke_count(self) -&gt; int:\n    \"\"\"Total number of strokes in one cycle.\"\"\"\n    return len(self.strokes)\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.StickingPattern.accent_positions","title":"accent_positions","text":"<pre><code>accent_positions() -&gt; list[int]\n</code></pre> <p>Indices of accented strokes.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def accent_positions(self) -&gt; list[int]:\n    \"\"\"Indices of accented strokes.\"\"\"\n    return [i for i, s in enumerate(self.strokes) if s.is_accented()]\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.StickingPattern.grace_note_positions","title":"grace_note_positions","text":"<pre><code>grace_note_positions() -&gt; list[int]\n</code></pre> <p>Indices of grace notes.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def grace_note_positions(self) -&gt; list[int]:\n    \"\"\"Indices of grace notes.\"\"\"\n    return [i for i, s in enumerate(self.strokes) if s.is_grace_note()]\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.RudimentCategory","title":"RudimentCategory","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>PAS rudiment categories.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.RudimentParams","title":"RudimentParams","text":"<p>               Bases: <code>BaseModel</code></p> <p>Rudiment-specific parameters that affect generation.</p> <p>Different rudiment types have different articulation requirements that affect how we generate timing and velocity.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Subdivision","title":"Subdivision","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Base subdivision for the rudiment.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Rudiment","title":"Rudiment","text":"<p>               Bases: <code>BaseModel</code></p> <p>Complete definition of a PAS drum rudiment.</p> <p>This captures everything needed to generate MIDI for the rudiment with appropriate timing, velocity, and articulation.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Rudiment.validate_slug","title":"validate_slug  <code>classmethod</code>","text":"<pre><code>validate_slug(v: str) -&gt; str\n</code></pre> <p>Ensure slug is URL-safe.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>@field_validator(\"slug\")\n@classmethod\ndef validate_slug(cls, v: str) -&gt; str:\n    \"\"\"Ensure slug is URL-safe.\"\"\"\n    import re\n\n    if not re.match(r\"^[a-z0-9_]+$\", v):\n        raise ValueError(\"Slug must be lowercase alphanumeric with underscores only\")\n    return v\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Rudiment.strokes_per_beat","title":"strokes_per_beat","text":"<pre><code>strokes_per_beat() -&gt; float\n</code></pre> <p>Calculate how many strokes occur per beat.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def strokes_per_beat(self) -&gt; float:\n    \"\"\"Calculate how many strokes occur per beat.\"\"\"\n    return self.pattern.stroke_count() / self.pattern.beats_per_cycle\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Rudiment.duration_at_tempo","title":"duration_at_tempo","text":"<pre><code>duration_at_tempo(tempo_bpm: int, num_cycles: int = 1) -&gt; float\n</code></pre> <p>Calculate duration in seconds for given number of cycles at tempo.</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def duration_at_tempo(self, tempo_bpm: int, num_cycles: int = 1) -&gt; float:\n    \"\"\"Calculate duration in seconds for given number of cycles at tempo.\"\"\"\n    beats = self.pattern.beats_per_cycle * num_cycles\n    return beats * (60.0 / tempo_bpm)\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.schema.Rudiment.get_alternating_pattern","title":"get_alternating_pattern","text":"<pre><code>get_alternating_pattern() -&gt; StickingPattern\n</code></pre> <p>Return the pattern with hands swapped (for practicing alternating starts).</p> Source code in <code>dataset_gen/rudiments/schema.py</code> <pre><code>def get_alternating_pattern(self) -&gt; StickingPattern:\n    \"\"\"\n    Return the pattern with hands swapped (for practicing alternating starts).\n    \"\"\"\n    swapped_strokes = []\n    for stroke in self.pattern.strokes:\n        new_hand = Hand.LEFT if stroke.hand == Hand.RIGHT else Hand.RIGHT\n        swapped_strokes.append(stroke.model_copy(update={\"hand\": new_hand}))\n\n    return StickingPattern(\n        strokes=swapped_strokes, beats_per_cycle=self.pattern.beats_per_cycle\n    )\n</code></pre>"},{"location":"api/rudiments/#loader","title":"Loader","text":"<p>The loader module provides functions for parsing YAML rudiment definitions into Pydantic models.</p> <p>Load rudiment definitions from YAML files.</p>"},{"location":"api/rudiments/#dataset_gen.rudiments.loader.load_rudiment","title":"load_rudiment","text":"<pre><code>load_rudiment(path: Path | str) -&gt; Rudiment\n</code></pre> <p>Load a single rudiment definition from a YAML file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path | str</code> <p>Path to the YAML file</p> required <p>Returns:</p> Type Description <code>Rudiment</code> <p>Parsed Rudiment object</p> Source code in <code>dataset_gen/rudiments/loader.py</code> <pre><code>def load_rudiment(path: Path | str) -&gt; Rudiment:\n    \"\"\"\n    Load a single rudiment definition from a YAML file.\n\n    Args:\n        path: Path to the YAML file\n\n    Returns:\n        Parsed Rudiment object\n    \"\"\"\n    path = Path(path)\n    with open(path) as f:\n        data = yaml.safe_load(f)\n\n    pattern = _parse_pattern_from_yaml(data[\"pattern\"])\n    params = _parse_rudiment_params(data.get(\"params\"))\n\n    return Rudiment(\n        name=data[\"name\"],\n        slug=data[\"slug\"],\n        category=RudimentCategory(data[\"category\"]),\n        pattern=pattern,\n        subdivision=Subdivision(data.get(\"subdivision\", \"sixteenth\")),\n        tempo_range=tuple(data.get(\"tempo_range\", [60, 180])),\n        params=params,\n        pas_number=data.get(\"pas_number\"),\n        description=data.get(\"description\"),\n        starts_on_left=data.get(\"starts_on_left\", False),\n    )\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.loader.load_all_rudiments","title":"load_all_rudiments","text":"<pre><code>load_all_rudiments(directory: Path | str | None = None) -&gt; dict[str, Rudiment]\n</code></pre> <p>Load all rudiment definitions from a directory.</p> <p>Parameters:</p> Name Type Description Default <code>directory</code> <code>Path | str | None</code> <p>Path to directory containing YAML files.        Defaults to the built-in definitions directory.</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[str, Rudiment]</code> <p>Dict mapping slug to Rudiment object</p> Source code in <code>dataset_gen/rudiments/loader.py</code> <pre><code>def load_all_rudiments(directory: Path | str | None = None) -&gt; dict[str, Rudiment]:\n    \"\"\"\n    Load all rudiment definitions from a directory.\n\n    Args:\n        directory: Path to directory containing YAML files.\n                   Defaults to the built-in definitions directory.\n\n    Returns:\n        Dict mapping slug to Rudiment object\n    \"\"\"\n    if directory is None:\n        directory = DEFINITIONS_DIR\n    directory = Path(directory)\n\n    if not directory.exists():\n        return {}\n\n    rudiments = {}\n    for yaml_file in directory.glob(\"*.yaml\"):\n        try:\n            rudiment = load_rudiment(yaml_file)\n            rudiments[rudiment.slug] = rudiment\n        except Exception as e:\n            raise ValueError(f\"Failed to load {yaml_file}: {e}\") from e\n\n    return rudiments\n</code></pre>"},{"location":"api/rudiments/#dataset_gen.rudiments.loader.get_rudiments_by_category","title":"get_rudiments_by_category","text":"<pre><code>get_rudiments_by_category(rudiments: dict[str, Rudiment] | None = None) -&gt; dict[RudimentCategory, list[Rudiment]]\n</code></pre> <p>Group rudiments by category.</p> <p>Parameters:</p> Name Type Description Default <code>rudiments</code> <code>dict[str, Rudiment] | None</code> <p>Dict of rudiments. If None, loads all definitions.</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[RudimentCategory, list[Rudiment]]</code> <p>Dict mapping category to list of rudiments</p> Source code in <code>dataset_gen/rudiments/loader.py</code> <pre><code>def get_rudiments_by_category(\n    rudiments: dict[str, Rudiment] | None = None,\n) -&gt; dict[RudimentCategory, list[Rudiment]]:\n    \"\"\"\n    Group rudiments by category.\n\n    Args:\n        rudiments: Dict of rudiments. If None, loads all definitions.\n\n    Returns:\n        Dict mapping category to list of rudiments\n    \"\"\"\n    if rudiments is None:\n        rudiments = load_all_rudiments()\n\n    by_category: dict[RudimentCategory, list[Rudiment]] = {cat: [] for cat in RudimentCategory}\n\n    for rudiment in rudiments.values():\n        by_category[rudiment.category].append(rudiment)\n\n    return by_category\n</code></pre>"},{"location":"api/validation/","title":"Validation Module","text":"<p>The validation module provides tools for verifying dataset correctness and analyzing statistical properties. It includes:</p> <ul> <li>Verification: Data integrity checks, range validation, skill tier ordering</li> <li>Analysis: Distribution statistics across all hierarchical levels</li> <li>Reporting: Comprehensive validation reports with pass/fail summaries</li> </ul>"},{"location":"api/validation/#validation-report","title":"Validation Report","text":"<p>Generates comprehensive validation reports combining statistical analysis and verification results.</p> <p>Validation report generation.</p> <p>This module generates comprehensive validation reports combining statistical analysis and verification results.</p>"},{"location":"api/validation/#dataset_gen.validation.report.ValidationReport","title":"ValidationReport  <code>dataclass</code>","text":"<pre><code>ValidationReport(dataset_path: str, generated_at: str, stats: DatasetStats, verification: VerificationResult, skill_tier_ordering: dict[str, Any], realism: RealismReport | None = None)\n</code></pre> <p>Complete validation report.</p>"},{"location":"api/validation/#dataset_gen.validation.report.ValidationReport.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict\n</code></pre> <p>Convert to dictionary.</p> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def to_dict(self) -&gt; dict:\n    \"\"\"Convert to dictionary.\"\"\"\n    result = {\n        \"dataset_path\": self.dataset_path,\n        \"generated_at\": self.generated_at,\n        \"stats\": self.stats.to_dict(),\n        \"verification\": self.verification.to_dict(),\n        \"skill_tier_ordering\": self.skill_tier_ordering,\n    }\n    if self.realism:\n        result[\"realism\"] = self.realism.to_dict()\n    return result\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.report.ValidationReport.save","title":"save","text":"<pre><code>save(output_path: Path | str) -&gt; None\n</code></pre> <p>Save report to JSON file.</p> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def save(self, output_path: Path | str) -&gt; None:\n    \"\"\"Save report to JSON file.\"\"\"\n    output_path = Path(output_path)\n    output_path.parent.mkdir(parents=True, exist_ok=True)\n\n    with open(output_path, \"w\") as f:\n        json.dump(self.to_dict(), f, indent=2, default=str)\n\n    logger.info(f\"Report saved to {output_path}\")\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.report.ValidationReport.summary","title":"summary","text":"<pre><code>summary() -&gt; str\n</code></pre> <p>Generate human-readable summary.</p> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def summary(self) -&gt; str:\n    \"\"\"Generate human-readable summary.\"\"\"\n    lines = [\n        \"=\" * 60,\n        \"DATASET VALIDATION REPORT\",\n        \"=\" * 60,\n        f\"Dataset: {self.dataset_path}\",\n        f\"Generated: {self.generated_at}\",\n        \"\",\n        \"--- Dataset Overview ---\",\n        f\"Samples:    {self.stats.num_samples:,}\",\n        f\"Profiles:   {self.stats.num_profiles:,}\",\n        f\"Rudiments:  {self.stats.num_rudiments:,}\",\n        \"\",\n        \"--- Skill Tier Distribution ---\",\n    ]\n\n    for tier, count in sorted(self.stats.skill_tier_counts.items()):\n        pct = 100 * count / max(self.stats.num_samples, 1)\n        lines.append(f\"  {tier}: {count:,} ({pct:.1f}%)\")\n\n    lines.extend(\n        [\n            \"\",\n            \"--- Split Distribution ---\",\n        ]\n    )\n\n    for split, count in sorted(self.stats.split_counts.items()):\n        pct = 100 * count / max(self.stats.num_samples, 1)\n        lines.append(f\"  {split}: {count:,} ({pct:.1f}%)\")\n\n    lines.extend(\n        [\n            \"\",\n            \"--- Key Statistics ---\",\n            f\"Tempo:           {self.stats.tempo_stats.mean:.1f} \u00b1 {self.stats.tempo_stats.std:.1f} BPM\",\n            f\"Duration:        {self.stats.duration_stats.mean:.2f} \u00b1 {self.stats.duration_stats.std:.2f} sec\",\n            f\"Strokes/sample:  {self.stats.num_strokes_stats.mean:.1f} \u00b1 {self.stats.num_strokes_stats.std:.1f}\",\n            \"\",\n            \"--- Timing Error by Skill Tier ---\",\n        ]\n    )\n\n    for tier, tier_stats in sorted(\n        self.stats.timing_error_stats.by_group.items(),\n        key=lambda x: x[0],\n    ):\n        lines.append(f\"  {tier}: {tier_stats.mean:.2f} \u00b1 {tier_stats.std:.2f} ms\")\n\n    lines.extend(\n        [\n            \"\",\n            \"--- Exercise Scores by Skill Tier ---\",\n            \"Timing Accuracy:\",\n        ]\n    )\n\n    for tier, tier_stats in sorted(\n        self.stats.exercise_timing_accuracy.by_group.items(),\n        key=lambda x: x[0],\n    ):\n        lines.append(f\"  {tier}: {tier_stats.mean:.1f} \u00b1 {tier_stats.std:.1f}\")\n\n    lines.append(\"Hand Balance:\")\n    for tier, tier_stats in sorted(\n        self.stats.exercise_hand_balance.by_group.items(),\n        key=lambda x: x[0],\n    ):\n        lines.append(f\"  {tier}: {tier_stats.mean:.1f} \u00b1 {tier_stats.std:.1f}\")\n\n    lines.extend(\n        [\n            \"\",\n            \"--- Skill Tier Ordering ---\",\n        ]\n    )\n\n    for key, value in self.skill_tier_ordering.items():\n        if isinstance(value, bool):\n            status = \"\u2713\" if value else \"\u2717\"\n            lines.append(f\"  {status} {key}\")\n\n    lines.extend(\n        [\n            \"\",\n            \"--- Verification Results ---\",\n            f\"Passed: {self.verification.num_passed}/{len(self.verification.checks)}\",\n            \"\",\n        ]\n    )\n\n    for check in self.verification.checks:\n        status = \"\u2713\" if check.passed else \"\u2717\"\n        lines.append(f\"  {status} {check.name}: {check.message}\")\n\n    # Realism validation results\n    if self.realism:\n        lines.extend(\n            [\n                \"\",\n                \"--- Realism Validation ---\",\n                f\"Literature comparison: {self.realism.literature_pass_rate:.1f}% pass\",\n                f\"Correlation structure: {self.realism.correlation_pass_rate:.1f}% pass\",\n                \"\",\n            ]\n        )\n\n        # Literature comparisons by tier\n        for comp in self.realism.literature_comparisons:\n            status = \"\u2713\" if comp.within_range else \"\u2717\"\n            lines.append(\n                f\"  {status} {comp.skill_tier} {comp.metric}: \"\n                f\"{comp.dataset_value:.2f} (expected {comp.expected_range})\"\n            )\n\n    lines.extend(\n        [\n            \"\",\n            \"=\" * 60,\n            f\"Overall: {'PASSED' if self.verification.all_passed else 'FAILED'}\",\n            \"=\" * 60,\n        ]\n    )\n\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.report.generate_report","title":"generate_report","text":"<pre><code>generate_report(dataset_dir: Path | str, output_path: Path | str | None = None, include_realism: bool = True, include_midi_checks: bool = True) -&gt; ValidationReport\n</code></pre> <p>Generate comprehensive validation report for a dataset.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required <code>output_path</code> <code>Path | str | None</code> <p>Optional path to save report JSON</p> <code>None</code> <code>include_realism</code> <code>bool</code> <p>Whether to run realism validation (literature comparison)</p> <code>True</code> <code>include_midi_checks</code> <code>bool</code> <p>Whether to run MIDI alignment checks</p> <code>True</code> <p>Returns:</p> Type Description <code>ValidationReport</code> <p>ValidationReport with stats and verification results</p> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def generate_report(\n    dataset_dir: Path | str,\n    output_path: Path | str | None = None,\n    include_realism: bool = True,\n    include_midi_checks: bool = True,\n) -&gt; ValidationReport:\n    \"\"\"\n    Generate comprehensive validation report for a dataset.\n\n    Args:\n        dataset_dir: Path to dataset directory\n        output_path: Optional path to save report JSON\n        include_realism: Whether to run realism validation (literature comparison)\n        include_midi_checks: Whether to run MIDI alignment checks\n\n    Returns:\n        ValidationReport with stats and verification results\n    \"\"\"\n    dataset_dir = Path(dataset_dir)\n    logger.info(f\"Generating validation report for {dataset_dir}\")\n\n    # Run analysis\n    analyzer = DatasetAnalyzer(dataset_dir)\n    stats = analyzer.compute_stats()\n    skill_ordering = analyzer.check_skill_tier_ordering()\n\n    # Run verification\n    verifier = LabelVerifier(dataset_dir)\n    verification = verifier.verify_all(include_midi_checks=include_midi_checks)\n\n    # Run realism validation\n    realism = None\n    if include_realism:\n        logger.info(\"Running realism validation...\")\n        realism_validator = RealismValidator(dataset_dir)\n        realism = realism_validator.validate_all()\n\n    # Create report\n    report = ValidationReport(\n        dataset_path=str(dataset_dir),\n        generated_at=datetime.now().isoformat(),\n        stats=stats,\n        verification=verification,\n        skill_tier_ordering=skill_ordering,\n        realism=realism,\n    )\n\n    # Save if requested\n    if output_path:\n        report.save(output_path)\n\n    return report\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.report.quick_validate","title":"quick_validate","text":"<pre><code>quick_validate(dataset_dir: Path | str) -&gt; bool\n</code></pre> <p>Quick validation check - returns True if dataset is valid.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if all verification checks pass</p> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def quick_validate(dataset_dir: Path | str) -&gt; bool:\n    \"\"\"\n    Quick validation check - returns True if dataset is valid.\n\n    Args:\n        dataset_dir: Path to dataset directory\n\n    Returns:\n        True if all verification checks pass\n    \"\"\"\n    verifier = LabelVerifier(dataset_dir)\n    result = verifier.verify_all()\n    return result.all_passed\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.report.generate_html_report","title":"generate_html_report","text":"<pre><code>generate_html_report(report: ValidationReport, output_path: Path | str, template_path: Path | str | None = None) -&gt; None\n</code></pre> <p>Generate an HTML validation report with visualizations.</p> <p>Parameters:</p> Name Type Description Default <code>report</code> <code>ValidationReport</code> <p>ValidationReport to render</p> required <code>output_path</code> <code>Path | str</code> <p>Path to save HTML file</p> required <code>template_path</code> <code>Path | str | None</code> <p>Optional path to custom template</p> <code>None</code> Source code in <code>dataset_gen/validation/report.py</code> <pre><code>def generate_html_report(\n    report: ValidationReport,\n    output_path: Path | str,\n    template_path: Path | str | None = None,\n) -&gt; None:\n    \"\"\"\n    Generate an HTML validation report with visualizations.\n\n    Args:\n        report: ValidationReport to render\n        output_path: Path to save HTML file\n        template_path: Optional path to custom template\n    \"\"\"\n    import re\n\n    # Find template\n    if template_path is None:\n        # Look in scripts/templates relative to this file\n        module_dir = Path(__file__).parent.parent.parent\n        template_path = module_dir / \"scripts\" / \"templates\" / \"validation_report.html\"\n\n    template_path = Path(template_path)\n    if not template_path.exists():\n        logger.warning(f\"HTML template not found at {template_path}\")\n        # Fall back to generating a simple HTML report\n        _generate_simple_html(report, output_path)\n        return\n\n    # Read template\n    with open(template_path) as f:\n        html = f.read()\n\n    # Embed report data as JSON\n    report_json = json.dumps(report.to_dict(), indent=2, default=str)\n\n    # Replace placeholder with actual data\n    html = re.sub(\n        r\"/\\* REPORT_DATA_PLACEHOLDER \\*/ \\{\\}\",\n        report_json,\n        html,\n    )\n\n    # Write output\n    output_path = Path(output_path)\n    output_path.parent.mkdir(parents=True, exist_ok=True)\n    with open(output_path, \"w\") as f:\n        f.write(html)\n\n    logger.info(f\"HTML report saved to {output_path}\")\n</code></pre>"},{"location":"api/validation/#label-verification","title":"Label Verification","text":"<p>Verifies label correctness and data integrity through a series of automated checks.</p> <p>Label verification for generated datasets.</p> <p>This module verifies that computed labels correctly reflect the generation parameters and that data integrity is maintained.</p>"},{"location":"api/validation/#dataset_gen.validation.verify.VerificationCheck","title":"VerificationCheck  <code>dataclass</code>","text":"<pre><code>VerificationCheck(name: str, passed: bool, message: str, details: dict = dict())\n</code></pre> <p>Result of a single verification check.</p>"},{"location":"api/validation/#dataset_gen.validation.verify.VerificationResult","title":"VerificationResult  <code>dataclass</code>","text":"<pre><code>VerificationResult(checks: list[VerificationCheck] = list())\n</code></pre> <p>Complete verification results.</p>"},{"location":"api/validation/#dataset_gen.validation.verify.VerificationResult.summary","title":"summary","text":"<pre><code>summary() -&gt; str\n</code></pre> <p>Get summary string.</p> Source code in <code>dataset_gen/validation/verify.py</code> <pre><code>def summary(self) -&gt; str:\n    \"\"\"Get summary string.\"\"\"\n    lines = [\n        f\"Verification: {self.num_passed}/{len(self.checks)} checks passed\",\n        \"\",\n    ]\n    for check in self.checks:\n        status = \"\u2713\" if check.passed else \"\u2717\"\n        lines.append(f\"  {status} {check.name}: {check.message}\")\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.verify.LabelVerifier","title":"LabelVerifier","text":"<pre><code>LabelVerifier(dataset_dir: Path | str, midi_dir: Path | str | None = None)\n</code></pre> <p>Verify label correctness and data integrity.</p> <p>Runs a series of checks to ensure: - Labels are within expected ranges - Skill tier differences are reflected in metrics - Data relationships are consistent - No data corruption occurred</p> <p>Initialize verifier.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required <code>midi_dir</code> <code>Path | str | None</code> <p>Path to MIDI files (defaults to dataset_dir/midi)</p> <code>None</code> Source code in <code>dataset_gen/validation/verify.py</code> <pre><code>def __init__(self, dataset_dir: Path | str, midi_dir: Path | str | None = None):\n    \"\"\"\n    Initialize verifier.\n\n    Args:\n        dataset_dir: Path to dataset directory\n        midi_dir: Path to MIDI files (defaults to dataset_dir/midi)\n    \"\"\"\n    self.dataset_dir = Path(dataset_dir)\n    self.reader = ParquetReader(dataset_dir)\n    self.midi_dir = Path(midi_dir) if midi_dir else self.dataset_dir / \"midi\"\n\n    self._samples_df: pd.DataFrame | None = None\n    self._strokes_df: pd.DataFrame | None = None\n    self._measures_df: pd.DataFrame | None = None\n    self._exercises_df: pd.DataFrame | None = None\n    self._rudiments: dict | None = None\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.verify.LabelVerifier.rudiments","title":"rudiments  <code>property</code>","text":"<pre><code>rudiments: dict\n</code></pre> <p>Lazily load rudiment definitions.</p>"},{"location":"api/validation/#dataset_gen.validation.verify.LabelVerifier.load_data","title":"load_data","text":"<pre><code>load_data() -&gt; None\n</code></pre> <p>Load all parquet data.</p> Source code in <code>dataset_gen/validation/verify.py</code> <pre><code>def load_data(self) -&gt; None:\n    \"\"\"Load all parquet data.\"\"\"\n    self._samples_df = self.reader.load_samples()\n    self._strokes_df = self.reader.load_strokes()\n    self._measures_df = self.reader.load_measures()\n    self._exercises_df = self.reader.load_exercises()\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.verify.LabelVerifier.verify_all","title":"verify_all","text":"<pre><code>verify_all(include_midi_checks: bool = True) -&gt; VerificationResult\n</code></pre> <p>Run all verification checks.</p> <p>Parameters:</p> Name Type Description Default <code>include_midi_checks</code> <code>bool</code> <p>Whether to run MIDI alignment checks (slower)</p> <code>True</code> Source code in <code>dataset_gen/validation/verify.py</code> <pre><code>def verify_all(self, include_midi_checks: bool = True) -&gt; VerificationResult:\n    \"\"\"\n    Run all verification checks.\n\n    Args:\n        include_midi_checks: Whether to run MIDI alignment checks (slower)\n    \"\"\"\n    result = VerificationResult()\n\n    # Parquet file integrity (run first - if this fails, other checks can't run)\n    result.checks.append(self._check_parquet_integrity())\n\n    # Data integrity checks\n    result.checks.append(self._check_sample_ids_unique())\n    result.checks.append(self._check_stroke_sample_refs())\n    result.checks.append(self._check_measure_sample_refs())\n    result.checks.append(self._check_exercise_sample_refs())\n\n    # Range checks\n    result.checks.append(self._check_velocity_range())\n    result.checks.append(self._check_timing_range())\n    result.checks.append(self._check_score_ranges())\n\n    # Consistency checks\n    result.checks.append(self._check_stroke_counts_match())\n    result.checks.append(self._check_measure_counts_match())\n\n    # Skill tier checks\n    result.checks.append(self._check_skill_tier_timing())\n    result.checks.append(self._check_skill_tier_hand_balance())\n\n    # Rudiment pattern correctness\n    result.checks.append(self._check_rudiment_pattern_correctness())\n\n    # Label-to-MIDI alignment (optional, slower)\n    if include_midi_checks and self.midi_dir.exists():\n        result.checks.append(self._check_label_midi_alignment())\n\n    return result\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.verify.verify_labels","title":"verify_labels","text":"<pre><code>verify_labels(dataset_dir: Path | str) -&gt; VerificationResult\n</code></pre> <p>Convenience function to verify a dataset.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required <p>Returns:</p> Type Description <code>VerificationResult</code> <p>VerificationResult with all checks</p> Source code in <code>dataset_gen/validation/verify.py</code> <pre><code>def verify_labels(dataset_dir: Path | str) -&gt; VerificationResult:\n    \"\"\"\n    Convenience function to verify a dataset.\n\n    Args:\n        dataset_dir: Path to dataset directory\n\n    Returns:\n        VerificationResult with all checks\n    \"\"\"\n    verifier = LabelVerifier(dataset_dir)\n    return verifier.verify_all()\n</code></pre>"},{"location":"api/validation/#statistical-analysis","title":"Statistical Analysis","text":"<p>Analyzes generated dataset distributions across samples, strokes, measures, and exercises.</p> <p>Statistical analysis of generated datasets.</p> <p>This module provides tools for analyzing the distribution of generated samples across various dimensions.</p>"},{"location":"api/validation/#dataset_gen.validation.analysis.DistributionStats","title":"DistributionStats  <code>dataclass</code>","text":"<pre><code>DistributionStats(name: str, count: int, mean: float, std: float, min: float, max: float, median: float, q25: float, q75: float, skewness: float, kurtosis: float, by_group: dict[str, 'DistributionStats'] = dict())\n</code></pre> <p>Statistics for a single distribution.</p>"},{"location":"api/validation/#dataset_gen.validation.analysis.DistributionStats.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict\n</code></pre> <p>Convert to dictionary.</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def to_dict(self) -&gt; dict:\n    \"\"\"Convert to dictionary.\"\"\"\n    result = {\n        \"name\": self.name,\n        \"count\": self.count,\n        \"mean\": self.mean,\n        \"std\": self.std,\n        \"min\": self.min,\n        \"max\": self.max,\n        \"median\": self.median,\n        \"q25\": self.q25,\n        \"q75\": self.q75,\n        \"skewness\": self.skewness,\n        \"kurtosis\": self.kurtosis,\n    }\n    if self.by_group:\n        result[\"by_group\"] = {k: v.to_dict() for k, v in self.by_group.items()}\n    return result\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DistributionStats.from_array","title":"from_array  <code>classmethod</code>","text":"<pre><code>from_array(name: str, data: ndarray) -&gt; 'DistributionStats'\n</code></pre> <p>Compute statistics from numpy array.</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>@classmethod\ndef from_array(cls, name: str, data: np.ndarray) -&gt; \"DistributionStats\":\n    \"\"\"Compute statistics from numpy array.\"\"\"\n    if len(data) == 0:\n        return cls(\n            name=name,\n            count=0,\n            mean=0.0,\n            std=0.0,\n            min=0.0,\n            max=0.0,\n            median=0.0,\n            q25=0.0,\n            q75=0.0,\n            skewness=0.0,\n            kurtosis=0.0,\n        )\n\n    return cls(\n        name=name,\n        count=len(data),\n        mean=float(np.mean(data)),\n        std=float(np.std(data)),\n        min=float(np.min(data)),\n        max=float(np.max(data)),\n        median=float(np.median(data)),\n        q25=float(np.percentile(data, 25)),\n        q75=float(np.percentile(data, 75)),\n        skewness=float(stats.skew(data)) if len(data) &gt; 2 else 0.0,\n        kurtosis=float(stats.kurtosis(data)) if len(data) &gt; 3 else 0.0,\n    )\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetStats","title":"DatasetStats  <code>dataclass</code>","text":"<pre><code>DatasetStats(num_samples: int, num_profiles: int, num_rudiments: int, tempo_stats: DistributionStats, duration_stats: DistributionStats, num_strokes_stats: DistributionStats, timing_error_stats: DistributionStats, velocity_stats: DistributionStats, measure_timing_stats: DistributionStats, measure_velocity_stats: DistributionStats, exercise_timing_accuracy: DistributionStats, exercise_hand_balance: DistributionStats, skill_tier_counts: dict[str, int], rudiment_counts: dict[str, int], split_counts: dict[str, int])\n</code></pre> <p>Complete statistics for a dataset.</p>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetStats.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict\n</code></pre> <p>Convert to dictionary.</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def to_dict(self) -&gt; dict:\n    \"\"\"Convert to dictionary.\"\"\"\n    return {\n        \"num_samples\": self.num_samples,\n        \"num_profiles\": self.num_profiles,\n        \"num_rudiments\": self.num_rudiments,\n        \"tempo\": self.tempo_stats.to_dict(),\n        \"duration\": self.duration_stats.to_dict(),\n        \"num_strokes\": self.num_strokes_stats.to_dict(),\n        \"timing_error\": self.timing_error_stats.to_dict(),\n        \"velocity\": self.velocity_stats.to_dict(),\n        \"measure_timing\": self.measure_timing_stats.to_dict(),\n        \"measure_velocity\": self.measure_velocity_stats.to_dict(),\n        \"exercise_timing_accuracy\": self.exercise_timing_accuracy.to_dict(),\n        \"exercise_hand_balance\": self.exercise_hand_balance.to_dict(),\n        \"skill_tier_counts\": self.skill_tier_counts,\n        \"rudiment_counts\": self.rudiment_counts,\n        \"split_counts\": self.split_counts,\n    }\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetAnalyzer","title":"DatasetAnalyzer","text":"<pre><code>DatasetAnalyzer(dataset_dir: Path | str)\n</code></pre> <p>Analyze generated dataset statistics.</p> <p>Provides comprehensive analysis of distributions across all hierarchical levels (stroke, measure, exercise, sample).</p> <p>Initialize analyzer.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def __init__(self, dataset_dir: Path | str):\n    \"\"\"\n    Initialize analyzer.\n\n    Args:\n        dataset_dir: Path to dataset directory\n    \"\"\"\n    self.dataset_dir = Path(dataset_dir)\n    self.reader = ParquetReader(dataset_dir)\n\n    # Cached data\n    self._samples_df: pd.DataFrame | None = None\n    self._strokes_df: pd.DataFrame | None = None\n    self._measures_df: pd.DataFrame | None = None\n    self._exercises_df: pd.DataFrame | None = None\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetAnalyzer.load_data","title":"load_data","text":"<pre><code>load_data() -&gt; None\n</code></pre> <p>Load all parquet data into memory.</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def load_data(self) -&gt; None:\n    \"\"\"Load all parquet data into memory.\"\"\"\n    logger.info(\"Loading dataset...\")\n    self._samples_df = self.reader.load_samples()\n    self._strokes_df = self.reader.load_strokes()\n    self._measures_df = self.reader.load_measures()\n    self._exercises_df = self.reader.load_exercises()\n    logger.info(f\"Loaded {len(self._samples_df)} samples\")\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetAnalyzer.compute_stats","title":"compute_stats","text":"<pre><code>compute_stats() -&gt; DatasetStats\n</code></pre> <p>Compute comprehensive dataset statistics.</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def compute_stats(self) -&gt; DatasetStats:\n    \"\"\"Compute comprehensive dataset statistics.\"\"\"\n    samples = self.samples\n    strokes = self.strokes\n    measures = self.measures\n    exercises = self.exercises\n\n    # Basic counts\n    num_samples = len(samples)\n    num_profiles = samples[\"profile_id\"].nunique()\n    num_rudiments = samples[\"rudiment_slug\"].nunique()\n\n    # Sample-level stats\n    tempo_stats = DistributionStats.from_array(\n        \"tempo_bpm\",\n        samples[\"tempo_bpm\"].values,\n    )\n    duration_stats = DistributionStats.from_array(\n        \"duration_sec\",\n        samples[\"duration_sec\"].values,\n    )\n    num_strokes_stats = DistributionStats.from_array(\n        \"num_strokes\",\n        samples[\"num_strokes\"].values,\n    )\n\n    # Stroke-level stats\n    timing_error_stats = DistributionStats.from_array(\n        \"timing_error_ms\",\n        strokes[\"timing_error_ms\"].values,\n    )\n    velocity_stats = DistributionStats.from_array(\n        \"actual_velocity\",\n        strokes[\"actual_velocity\"].values,\n    )\n\n    # Add by-skill-tier breakdown for timing errors\n    timing_by_tier = self._compute_stroke_stats_by_tier(strokes, samples, \"timing_error_ms\")\n    timing_error_stats.by_group = timing_by_tier\n\n    # Measure-level stats\n    measure_timing_stats = DistributionStats.from_array(\n        \"timing_mean_error_ms\",\n        measures[\"timing_mean_error_ms\"].values,\n    )\n    measure_velocity_stats = DistributionStats.from_array(\n        \"velocity_consistency\",\n        measures[\"velocity_consistency\"].values,\n    )\n\n    # Exercise-level stats\n    exercise_timing_accuracy = DistributionStats.from_array(\n        \"timing_accuracy\",\n        exercises[\"timing_accuracy\"].values,\n    )\n    exercise_hand_balance = DistributionStats.from_array(\n        \"hand_balance\",\n        exercises[\"hand_balance\"].values,\n    )\n\n    # Add by-skill-tier breakdown\n    exercise_timing_by_tier = self._compute_exercise_stats_by_tier(\n        exercises, samples, \"timing_accuracy\"\n    )\n    exercise_timing_accuracy.by_group = exercise_timing_by_tier\n\n    exercise_balance_by_tier = self._compute_exercise_stats_by_tier(\n        exercises, samples, \"hand_balance\"\n    )\n    exercise_hand_balance.by_group = exercise_balance_by_tier\n\n    # Categorical counts\n    skill_tier_counts = samples[\"skill_tier\"].value_counts().to_dict()\n    rudiment_counts = samples[\"rudiment_slug\"].value_counts().to_dict()\n\n    # Split counts (if available from splits.json)\n    split_counts = self._get_split_counts()\n\n    return DatasetStats(\n        num_samples=num_samples,\n        num_profiles=num_profiles,\n        num_rudiments=num_rudiments,\n        tempo_stats=tempo_stats,\n        duration_stats=duration_stats,\n        num_strokes_stats=num_strokes_stats,\n        timing_error_stats=timing_error_stats,\n        velocity_stats=velocity_stats,\n        measure_timing_stats=measure_timing_stats,\n        measure_velocity_stats=measure_velocity_stats,\n        exercise_timing_accuracy=exercise_timing_accuracy,\n        exercise_hand_balance=exercise_hand_balance,\n        skill_tier_counts=skill_tier_counts,\n        rudiment_counts=rudiment_counts,\n        split_counts=split_counts,\n    )\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetAnalyzer.check_skill_tier_ordering","title":"check_skill_tier_ordering","text":"<pre><code>check_skill_tier_ordering() -&gt; dict[str, bool]\n</code></pre> <p>Verify that skill tiers show expected ordering.</p> <p>Higher skill should correlate with: - Lower timing errors - Higher timing accuracy scores - Better hand balance</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def check_skill_tier_ordering(self) -&gt; dict[str, bool]:\n    \"\"\"\n    Verify that skill tiers show expected ordering.\n\n    Higher skill should correlate with:\n    - Lower timing errors\n    - Higher timing accuracy scores\n    - Better hand balance\n    \"\"\"\n    exercises = self.exercises\n    samples = self.samples\n\n    merged = exercises.merge(\n        samples[[\"sample_id\", \"skill_tier\"]],\n        on=\"sample_id\",\n    )\n\n    # Expected order (best to worst for timing accuracy)\n    tier_order = [\"professional\", \"advanced\", \"intermediate\", \"beginner\"]\n\n    results = {}\n\n    # Check timing accuracy ordering\n    tier_means = {}\n    for tier in tier_order:\n        tier_data = merged[merged[\"skill_tier\"] == tier][\"timing_accuracy\"]\n        if len(tier_data) &gt; 0:\n            tier_means[tier] = tier_data.mean()\n\n    if len(tier_means) &gt;= 2:\n        # Check if professional &gt; advanced &gt; intermediate &gt; beginner\n        available_tiers = [t for t in tier_order if t in tier_means]\n        is_ordered = all(\n            tier_means[available_tiers[i]] &gt;= tier_means[available_tiers[i + 1]]\n            for i in range(len(available_tiers) - 1)\n        )\n        results[\"timing_accuracy_ordered\"] = is_ordered\n        results[\"timing_accuracy_means\"] = tier_means\n\n    # Check hand balance ordering\n    tier_means = {}\n    for tier in tier_order:\n        tier_data = merged[merged[\"skill_tier\"] == tier][\"hand_balance\"]\n        if len(tier_data) &gt; 0:\n            tier_means[tier] = tier_data.mean()\n\n    if len(tier_means) &gt;= 2:\n        available_tiers = [t for t in tier_order if t in tier_means]\n        is_ordered = all(\n            tier_means[available_tiers[i]] &gt;= tier_means[available_tiers[i + 1]]\n            for i in range(len(available_tiers) - 1)\n        )\n        results[\"hand_balance_ordered\"] = is_ordered\n        results[\"hand_balance_means\"] = tier_means\n\n    return results\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.DatasetAnalyzer.compute_correlation_matrix","title":"compute_correlation_matrix","text":"<pre><code>compute_correlation_matrix(columns: list[str] | None = None) -&gt; DataFrame\n</code></pre> <p>Compute correlation matrix for exercise scores.</p> <p>Parameters:</p> Name Type Description Default <code>columns</code> <code>list[str] | None</code> <p>Columns to include (default: all numeric)</p> <code>None</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Correlation matrix as DataFrame</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def compute_correlation_matrix(\n    self,\n    columns: list[str] | None = None,\n) -&gt; pd.DataFrame:\n    \"\"\"\n    Compute correlation matrix for exercise scores.\n\n    Args:\n        columns: Columns to include (default: all numeric)\n\n    Returns:\n        Correlation matrix as DataFrame\n    \"\"\"\n    exercises = self.exercises\n\n    if columns is None:\n        # Use all numeric columns except sample_id\n        numeric_cols = exercises.select_dtypes(include=[np.number]).columns\n        columns = [c for c in numeric_cols if c != \"sample_id\"]\n\n    return exercises[columns].corr()\n</code></pre>"},{"location":"api/validation/#dataset_gen.validation.analysis.analyze_dataset","title":"analyze_dataset","text":"<pre><code>analyze_dataset(dataset_dir: Path | str) -&gt; DatasetStats\n</code></pre> <p>Convenience function to analyze a dataset.</p> <p>Parameters:</p> Name Type Description Default <code>dataset_dir</code> <code>Path | str</code> <p>Path to dataset directory</p> required <p>Returns:</p> Type Description <code>DatasetStats</code> <p>DatasetStats with comprehensive statistics</p> Source code in <code>dataset_gen/validation/analysis.py</code> <pre><code>def analyze_dataset(dataset_dir: Path | str) -&gt; DatasetStats:\n    \"\"\"\n    Convenience function to analyze a dataset.\n\n    Args:\n        dataset_dir: Path to dataset directory\n\n    Returns:\n        DatasetStats with comprehensive statistics\n    \"\"\"\n    analyzer = DatasetAnalyzer(dataset_dir)\n    return analyzer.compute_stats()\n</code></pre>"},{"location":"contributing/","title":"Contributing to SOUSA","text":"<p>Thank you for your interest in contributing to SOUSA (Synthetic Open Unified Snare Assessment)! This guide covers everything you need to get started.</p>"},{"location":"contributing/#ways-to-contribute","title":"Ways to Contribute","text":"<ul> <li>Report bugs - Found an issue? Open an issue</li> <li>Suggest features - Have an idea? We'd love to hear it</li> <li>Submit pull requests - Fix bugs, add features, improve docs</li> <li>Add rudiments - Expand the rudiment library</li> <li>Share examples - Show how you're using SOUSA</li> </ul>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":"<p>When reporting bugs, please include:</p> <ul> <li>A clear description of the problem</li> <li>Steps to reproduce the issue</li> <li>Your environment (Python version, OS, package versions)</li> <li>Any relevant error messages or logs</li> </ul> <p><pre><code>**Environment:**\n- OS: macOS 14.0\n- Python: 3.11.5\n- SOUSA version: 0.2.0\n- FluidSynth version: 2.3.4\n\n**Steps to reproduce:**\n1. Run `python scripts/generate_dataset.py --preset small`\n2. ...\n\n**Error message:**\n</code></pre> <pre><code>\n</code></pre>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/zakkeown/SOUSA.git\ncd SOUSA\n</code></pre>"},{"location":"contributing/#2-create-a-virtual-environment","title":"2. Create a Virtual Environment","text":"macOS/LinuxWindows <pre><code>python -m venv .venv\nsource .venv/bin/activate\n</code></pre> <pre><code>python -m venv .venv\n.venv\\Scripts\\activate\n</code></pre>"},{"location":"contributing/#3-install-with-development-dependencies","title":"3. Install with Development Dependencies","text":"<pre><code>pip install -e \".[dev]\"\n</code></pre> <p>This installs:</p> <ul> <li>Core SOUSA package in editable mode</li> <li><code>pytest</code> for testing</li> <li><code>black</code> for code formatting</li> <li><code>ruff</code> for linting</li> <li><code>pre-commit</code> for git hooks</li> </ul>"},{"location":"contributing/#4-install-pre-commit-hooks","title":"4. Install Pre-commit Hooks","text":"<p>Required</p> <p>Pre-commit hooks are required. CI will fail if code doesn't pass the hooks.</p> <pre><code>pip install pre-commit\npre-commit install\n</code></pre> <p>Or use the Makefile:</p> <pre><code>make setup-hooks\n</code></pre>"},{"location":"contributing/#5-install-fluidsynth","title":"5. Install FluidSynth","text":"<p>FluidSynth is required for audio synthesis.</p> macOSUbuntu/DebianWindows <pre><code>brew install fluid-synth\n</code></pre> <pre><code>sudo apt-get update\nsudo apt-get install fluidsynth libfluidsynth-dev\n</code></pre> <p>Download from FluidSynth releases and add to PATH.</p> <p>Verify installation:</p> <pre><code>fluidsynth --version\n</code></pre>"},{"location":"contributing/#6-download-soundfonts","title":"6. Download Soundfonts","text":"<pre><code>python scripts/setup_soundfonts.py\n</code></pre> <p>This downloads the required SF2 soundfont files to <code>data/soundfonts/</code>.</p>"},{"location":"contributing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\npytest\n\n# Run specific test file\npytest tests/test_profiles.py\n\n# Run specific test\npytest tests/test_profiles.py::TestProfileGeneration::test_generate_profile_beginner\n\n# Run with verbose output\npytest -v\n\n# Run with coverage\npytest --cov=dataset_gen\n\n# Run tests matching a pattern\npytest -k \"profile\"\n</code></pre>"},{"location":"contributing/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>The project uses pre-commit to run automated checks before each commit.</p>"},{"location":"contributing/#configured-hooks","title":"Configured Hooks","text":"Hook Purpose <code>trailing-whitespace</code> Removes trailing whitespace <code>end-of-file-fixer</code> Ensures files end with newline <code>check-yaml</code> Validates YAML syntax <code>check-toml</code> Validates TOML syntax <code>black</code> Formats Python code <code>ruff</code> Lints Python code with auto-fix"},{"location":"contributing/#running-hooks-manually","title":"Running Hooks Manually","text":"<pre><code># Run on all files\npre-commit run --all-files\n\n# Or use the Makefile\nmake pre-commit\n\n# Run specific hook\npre-commit run black --all-files\n</code></pre>"},{"location":"contributing/#skipping-hooks-emergency-only","title":"Skipping Hooks (Emergency Only)","text":"<pre><code>git commit --no-verify -m \"Emergency fix\"\n</code></pre> <p>Use Sparingly</p> <p>CI will still run the checks. Only skip hooks in genuine emergencies.</p>"},{"location":"contributing/#code-style","title":"Code Style","text":""},{"location":"contributing/#formatting-with-black","title":"Formatting with Black","text":"<p>We use Black for consistent formatting:</p> <pre><code># Format all code\nblack dataset_gen/ tests/ scripts/\n\n# Check without modifying\nblack --check dataset_gen/ tests/ scripts/\n\n# Or use Makefile\nmake format\n</code></pre> <p>Configuration in <code>pyproject.toml</code>:</p> <ul> <li>Line length: 100 characters</li> <li>Python target: 3.10+</li> </ul>"},{"location":"contributing/#linting-with-ruff","title":"Linting with Ruff","text":"<p>We use Ruff for fast linting:</p> <pre><code># Check for issues\nruff check dataset_gen/ tests/ scripts/\n\n# Auto-fix issues\nruff check --fix dataset_gen/ tests/ scripts/\n\n# Or use Makefile\nmake lint\n</code></pre>"},{"location":"contributing/#type-hints","title":"Type Hints","text":"<p>We encourage type hints for public APIs:</p> <pre><code>def generate_profile(\n    skill_tier: str,\n    seed: int | None = None,\n) -&gt; PlayerProfile:\n    \"\"\"Generate a player profile.\n\n    Args:\n        skill_tier: One of \"beginner\", \"intermediate\", \"advanced\", \"professional\"\n        seed: Random seed for reproducibility\n\n    Returns:\n        Generated PlayerProfile instance\n    \"\"\"\n    ...\n</code></pre>"},{"location":"contributing/#docstrings","title":"Docstrings","text":"<p>Use Google-style docstrings:</p> <pre><code>def compute_timing_score(\n    errors_ms: list[float],\n    threshold_ms: float = 25.0,\n) -&gt; float:\n    \"\"\"Compute timing accuracy score from error values.\n\n    Uses sigmoid scaling to map errors to a 0-100 score range.\n\n    Args:\n        errors_ms: List of timing errors in milliseconds\n        threshold_ms: Error value mapping to score of 50\n\n    Returns:\n        Timing accuracy score (0-100)\n\n    Raises:\n        ValueError: If errors_ms is empty\n\n    Example:\n        &gt;&gt;&gt; compute_timing_score([5, 10, 15])\n        85.7\n    \"\"\"\n</code></pre>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":""},{"location":"contributing/#1-create-a-branch","title":"1. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/your-bug-fix\n</code></pre>"},{"location":"contributing/#2-make-your-changes","title":"2. Make Your Changes","text":"<ul> <li>Write clear, descriptive commits</li> <li>Add tests for new functionality</li> <li>Update documentation if needed</li> </ul>"},{"location":"contributing/#3-ensure-quality","title":"3. Ensure Quality","text":"<pre><code># Format code\nblack dataset_gen/ tests/ scripts/\n\n# Run linter\nruff check dataset_gen/ tests/ scripts/\n\n# Run tests\npytest\n\n# Run pre-commit\npre-commit run --all-files\n</code></pre>"},{"location":"contributing/#4-submit-pull-request","title":"4. Submit Pull Request","text":"<ul> <li>Provide a clear description of changes</li> <li>Reference any related issues</li> <li>Include test results if relevant</li> </ul>"},{"location":"contributing/#pr-title-format","title":"PR Title Format","text":"<pre><code>feat: Add new flam quality metric\nfix: Handle empty stroke lists in scoring\ndocs: Update PyTorch DataLoader example\nrefactor: Simplify MIDI generation logic\ntest: Add tests for edge cases in profiles\n</code></pre>"},{"location":"contributing/#adding-new-rudiments","title":"Adding New Rudiments","text":"<p>Rudiment definitions are YAML files in <code>dataset_gen/rudiments/definitions/</code>.</p>"},{"location":"contributing/#1-create-yaml-definition","title":"1. Create YAML Definition","text":"<pre><code># dataset_gen/rudiments/definitions/your_rudiment.yaml\nname: Your Rudiment Name\nslug: your_rudiment_slug\ncategory: single-stroke  # or double-stroke, diddle, flam, drag, roll\ntempo_range:\n  min: 60\n  max: 180\ntime_signature: \"4/4\"\nsubdivision: 16  # 16th notes\n\npatterns:\n  - name: basic\n    sticking: \"RLRL RLRL\"\n    articulations: \"taaa taaa\"\n    measures: 2\n\n# Optional articulation map\narticulation_map:\n  t: tap\n  a: accent\n  g: grace\n  d: diddle\n</code></pre>"},{"location":"contributing/#2-add-tests","title":"2. Add Tests","text":"<pre><code># tests/test_rudiments.py\n\ndef test_your_rudiment_loads():\n    rudiment = load_rudiment(\"your_rudiment_slug\")\n    assert rudiment is not None\n    assert rudiment.slug == \"your_rudiment_slug\"\n\n\ndef test_your_rudiment_generation():\n    rudiment = load_rudiment(\"your_rudiment_slug\")\n    midi = generate_midi(rudiment, tempo=120)\n    assert len(midi.notes) &gt; 0\n</code></pre>"},{"location":"contributing/#3-validate","title":"3. Validate","text":"<pre><code># Run rudiment validation\npython -m dataset_gen.validation.rudiments your_rudiment_slug\n\n# Run tests\npytest tests/test_rudiments.py -v\n</code></pre>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>SOUSA/\n\u251c\u2500\u2500 dataset_gen/           # Core generation modules\n\u2502   \u251c\u2500\u2500 rudiments/         # Rudiment definitions (YAML)\n\u2502   \u2502   \u2514\u2500\u2500 definitions/   # 40 rudiment YAML files\n\u2502   \u251c\u2500\u2500 profiles/          # Player skill modeling\n\u2502   \u251c\u2500\u2500 midi_gen/          # MIDI generation engine\n\u2502   \u251c\u2500\u2500 audio_synth/       # FluidSynth wrapper\n\u2502   \u251c\u2500\u2500 audio_aug/         # Augmentation pipeline\n\u2502   \u251c\u2500\u2500 labels/            # Label computation\n\u2502   \u251c\u2500\u2500 pipeline/          # Orchestration\n\u2502   \u2514\u2500\u2500 validation/        # Dataset validation\n\u251c\u2500\u2500 tests/                 # Test suite\n\u251c\u2500\u2500 scripts/               # CLI scripts\n\u251c\u2500\u2500 examples/              # Usage examples\n\u251c\u2500\u2500 docs/                  # Documentation source\n\u251c\u2500\u2500 data/                  # Soundfonts, IRs, noise profiles\n\u2514\u2500\u2500 output/                # Generated datasets\n</code></pre>"},{"location":"contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Questions: Open an issue with the \"question\" label</li> <li>Discussions: Use GitHub Discussions for general topics</li> <li>Documentation: Check the docs</li> </ul>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Please be respectful and constructive in all interactions. We're building this together!</p>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing to SOUSA, you agree that your contributions will be licensed under the same license as the project (MIT).</p>"},{"location":"examples/","title":"Examples","text":"<p>This section provides practical examples for working with the SOUSA dataset in machine learning workflows. Each example includes complete, runnable code with detailed explanations.</p>"},{"location":"examples/#overview","title":"Overview","text":"Example Description Key Concepts PyTorch DataLoader Load SOUSA into PyTorch training pipelines <code>Dataset</code>, <code>DataLoader</code>, collate functions, batching Feature Extraction Extract ML features from audio Mel spectrograms, MFCCs, Wav2Vec2, caching Filtering Samples Filter dataset by various criteria Skill tiers, rudiments, scores, augmentation Hierarchical Labels Work with stroke/measure/exercise labels Multi-level targets, sequence modeling"},{"location":"examples/#prerequisites","title":"Prerequisites","text":"<p>All examples assume you have:</p> <ol> <li> <p>Installed SOUSA with development dependencies:</p> <pre><code>pip install -e \".[dev]\"\n</code></pre> </li> <li> <p>Generated a dataset (at minimum, the small preset):</p> <pre><code>python scripts/generate_dataset.py --preset small --with-audio\n</code></pre> </li> <li> <p>Optional ML dependencies for specific examples:</p> PyTorchFeature Extraction <pre><code>pip install torch torchaudio\n</code></pre> <pre><code>pip install librosa transformers\n</code></pre> </li> </ol>"},{"location":"examples/#running-the-examples","title":"Running the Examples","text":"<p>Each example can be run directly from the command line:</p> <pre><code># PyTorch DataLoader example\npython -m examples.pytorch_dataloader output/dataset\n\n# Feature extraction example\npython -m examples.feature_extraction\n\n# Filtering example\npython -m examples.filtering output/dataset\n\n# Hierarchical labels example\npython -m examples.hierarchical_labels output/dataset\n</code></pre>"},{"location":"examples/#quick-start","title":"Quick Start","text":"<p>Here's a minimal example to get you started:</p> <pre><code>import pandas as pd\nfrom pathlib import Path\n\n# Load dataset metadata\ndata_dir = Path(\"output/dataset\")\nsamples = pd.read_parquet(data_dir / \"labels\" / \"samples.parquet\")\nexercises = pd.read_parquet(data_dir / \"labels\" / \"exercises.parquet\")\n\n# Merge for easy access\ndata = samples.merge(exercises, on=\"sample_id\")\n\n# Filter to advanced players playing paradiddles\nsubset = data[\n    (data[\"skill_tier\"] == \"advanced\") &amp;\n    (data[\"rudiment_slug\"].str.contains(\"paradiddle\"))\n]\n\nprint(f\"Found {len(subset)} samples\")\nprint(f\"Mean overall score: {subset['overall_score'].mean():.1f}\")\n</code></pre>"},{"location":"examples/#source-code","title":"Source Code","text":"<p>All example source files are available in the <code>examples/</code> directory:</p> <ul> <li><code>pytorch_dataloader.py</code> - Complete PyTorch integration</li> <li><code>feature_extraction.py</code> - Feature extraction utilities</li> <li><code>filtering.py</code> - Filtering functions and examples</li> <li><code>hierarchical_labels.py</code> - Hierarchical label access</li> </ul>"},{"location":"examples/#contributing-examples","title":"Contributing Examples","text":"<p>Have an interesting use case? We welcome example contributions! See the Contributing Guide for how to submit new examples.</p> <p>Example Requirements</p> <p>Good examples should:</p> <ul> <li>Be self-contained and runnable</li> <li>Include docstrings and comments</li> <li>Handle missing optional dependencies gracefully</li> <li>Work with the <code>--preset small</code> dataset for quick testing</li> </ul>"},{"location":"examples/feature-extraction/","title":"Feature Extraction","text":"<p>This guide covers extracting machine learning features from SOUSA audio files. We provide utilities for mel spectrograms, onset detection, RMS energy, and pretrained model features (Wav2Vec2, HuBERT).</p> <p>Source Code</p> <p>Complete implementation: <code>examples/feature_extraction.py</code></p>"},{"location":"examples/feature-extraction/#prerequisites","title":"Prerequisites","text":"Basic (Mel/RMS)Onset DetectionPretrained Models <pre><code>pip install torch torchaudio\n# or\npip install librosa\n</code></pre> <pre><code>pip install librosa\n</code></pre> <pre><code>pip install torch transformers\n</code></pre>"},{"location":"examples/feature-extraction/#quick-start","title":"Quick Start","text":"<pre><code>from examples.feature_extraction import FeatureExtractor\n\n# Create unified extractor\nextractor = FeatureExtractor(\n    sample_rate=16000,\n    feature_type=\"mel_spectrogram\",\n)\n\n# Extract from file\nfeatures = extractor.extract(\"output/dataset/audio/sample.flac\")\n\n# Or from array\nimport numpy as np\naudio = np.random.randn(16000 * 3)  # 3 seconds at 16kHz\nfeatures = extractor.extract_from_array(audio)\n\nprint(features[\"mel_spectrogram\"].shape)  # (128, 188) - (n_mels, time_frames)\n</code></pre>"},{"location":"examples/feature-extraction/#mel-spectrogram-extraction","title":"Mel Spectrogram Extraction","text":"<p>Mel spectrograms are the most common input representation for audio neural networks.</p>"},{"location":"examples/feature-extraction/#basic-usage","title":"Basic Usage","text":"<pre><code>from examples.feature_extraction import MelSpectrogramExtractor\n\nextractor = MelSpectrogramExtractor(\n    sample_rate=16000,\n    n_mels=128,\n    n_fft=1024,\n    hop_length=256,\n    f_min=20.0,\n    f_max=8000.0,\n    normalized=True,\n)\n\n# Extract from audio array\nmel = extractor(audio_array)\nprint(mel.shape)  # (128, time_frames)\n</code></pre>"},{"location":"examples/feature-extraction/#parameters","title":"Parameters","text":"Parameter Default Description <code>sample_rate</code> <code>16000</code> Audio sample rate <code>n_mels</code> <code>128</code> Number of mel frequency bands <code>n_fft</code> <code>1024</code> FFT window size <code>hop_length</code> <code>256</code> Hop length between frames <code>f_min</code> <code>20.0</code> Minimum frequency (Hz) <code>f_max</code> <code>8000.0</code> Maximum frequency (Hz) <code>power</code> <code>2.0</code> Spectrogram power (2=power, 1=magnitude) <code>normalized</code> <code>True</code> Per-channel normalization <code>use_torchaudio</code> <code>True</code> Use torchaudio (faster) or librosa"},{"location":"examples/feature-extraction/#recommended-settings-for-drums","title":"Recommended Settings for Drums","text":"<pre><code># Settings optimized for drum/percussion audio\nextractor = MelSpectrogramExtractor(\n    sample_rate=16000,\n    n_mels=128,\n    n_fft=1024,       # ~64ms window at 16kHz\n    hop_length=256,   # ~16ms hop = 62.5 fps\n    f_min=20.0,       # Capture low-frequency body\n    f_max=8000.0,     # Drums don't need higher frequencies\n)\n</code></pre> <p>Frame Rate Calculation</p> <p>Frame rate = sample_rate / hop_length</p> <p>With default settings: 16000 / 256 = 62.5 frames per second</p>"},{"location":"examples/feature-extraction/#mfcc-features","title":"MFCC Features","text":"<p>For traditional ML models, MFCCs provide compact representations:</p> <pre><code>import librosa\n\ndef extract_mfcc(audio: np.ndarray, sample_rate: int = 16000, n_mfcc: int = 13):\n    \"\"\"Extract MFCC features.\"\"\"\n    mfcc = librosa.feature.mfcc(\n        y=audio,\n        sr=sample_rate,\n        n_mfcc=n_mfcc,\n        n_fft=1024,\n        hop_length=256,\n    )\n\n    # Add delta and delta-delta features\n    mfcc_delta = librosa.feature.delta(mfcc)\n    mfcc_delta2 = librosa.feature.delta(mfcc, order=2)\n\n    # Stack: (39, time_frames) = 13 MFCCs + 13 deltas + 13 delta-deltas\n    return np.vstack([mfcc, mfcc_delta, mfcc_delta2])\n</code></pre>"},{"location":"examples/feature-extraction/#onset-detection-features","title":"Onset Detection Features","text":"<p>Onset detection is particularly relevant for drum performance analysis:</p> <pre><code>from examples.feature_extraction import OnsetDetector\n\ndetector = OnsetDetector(sample_rate=16000, hop_length=128)\n\n# Detect onsets\nresult = detector.detect_onsets(audio_array)\n\nprint(f\"Number of onsets: {result['num_onsets']}\")\nprint(f\"Onset times (seconds): {result['onset_times'][:5]}\")\nprint(f\"Onset strength shape: {result['onset_strength'].shape}\")\n\n# Compute inter-onset interval features\nioi_features = detector.compute_ioi_features(result[\"onset_times\"])\n\nprint(f\"Mean IOI: {ioi_features['ioi_mean']:.3f}s\")\nprint(f\"IOI std: {ioi_features['ioi_std']:.3f}s\")\nprint(f\"Estimated tempo: {ioi_features['tempo_estimate']:.1f} BPM\")\n</code></pre>"},{"location":"examples/feature-extraction/#ioi-features-for-timing-analysis","title":"IOI Features for Timing Analysis","text":"<p>Inter-onset intervals (IOIs) are useful for analyzing timing consistency:</p> Feature Description <code>ioi_mean</code> Mean time between strokes (seconds) <code>ioi_std</code> Standard deviation of IOIs <code>ioi_cv</code> Coefficient of variation (std/mean) - timing consistency <code>tempo_estimate</code> Estimated tempo from mean IOI"},{"location":"examples/feature-extraction/#rms-energy-features","title":"RMS Energy Features","text":"<p>RMS (Root Mean Square) energy captures dynamics:</p> <pre><code>from examples.feature_extraction import RMSExtractor\n\nextractor = RMSExtractor(frame_length=2048, hop_length=512)\n\n# Extract RMS curve\nrms = extractor(audio_array)\n\n# Compute dynamics statistics\ndynamics = extractor.compute_dynamics_features(rms)\n\nprint(f\"Mean RMS: {dynamics['rms_mean']:.4f}\")\nprint(f\"Dynamic range: {dynamics['dynamic_range']:.4f}\")\nprint(f\"RMS CV: {dynamics['rms_cv']:.4f}\")  # Dynamics consistency\n</code></pre>"},{"location":"examples/feature-extraction/#dynamics-features","title":"Dynamics Features","text":"Feature Description <code>rms_mean</code> Average loudness <code>rms_std</code> Loudness variation <code>rms_max</code> Peak loudness <code>rms_min</code> Minimum loudness <code>dynamic_range</code> Max - min RMS <code>rms_cv</code> Coefficient of variation"},{"location":"examples/feature-extraction/#pretrained-model-features","title":"Pretrained Model Features","text":""},{"location":"examples/feature-extraction/#wav2vec2","title":"Wav2Vec2","text":"<p>Wav2Vec2 provides powerful self-supervised features:</p> <pre><code>from examples.feature_extraction import Wav2Vec2Extractor\n\n# Load pretrained model\nextractor = Wav2Vec2Extractor(\n    model_name=\"facebook/wav2vec2-base\",\n    layer=-1,      # Last layer (-1) or specific layer (0-11)\n    device=\"cuda\",\n    freeze=True,\n)\n\n# Extract sequence features\nfeatures = extractor(audio_array)\nprint(features.shape)  # (time_frames, 768)\n\n# Extract pooled (single vector) features\npooled = extractor.extract_pooled(audio_array, pooling=\"mean\")\nprint(pooled.shape)  # (768,)\n</code></pre>"},{"location":"examples/feature-extraction/#hubert","title":"HuBERT","text":"<p>HuBERT works similarly (uses same API):</p> <pre><code>extractor = Wav2Vec2Extractor(\n    model_name=\"facebook/hubert-base-ls960\",\n    device=\"cuda\",\n)\n\nfeatures = extractor(audio_array)\n</code></pre>"},{"location":"examples/feature-extraction/#available-pooling-strategies","title":"Available Pooling Strategies","text":"<pre><code># Mean pooling (recommended for most tasks)\npooled = extractor.extract_pooled(audio, pooling=\"mean\")\n\n# Max pooling\npooled = extractor.extract_pooled(audio, pooling=\"max\")\n\n# First token (CLS-like)\npooled = extractor.extract_pooled(audio, pooling=\"first\")\n\n# Last token\npooled = extractor.extract_pooled(audio, pooling=\"last\")\n</code></pre>"},{"location":"examples/feature-extraction/#multi-layer-features","title":"Multi-Layer Features","text":"<p>For probing or concatenation:</p> <pre><code># Get features from all transformer layers\nall_layers = extractor(audio_array, return_all_layers=True)\n\nfor layer_name, features in all_layers.items():\n    print(f\"{layer_name}: {features.shape}\")\n\n# layer_0: (time_frames, 768)  - CNN output\n# layer_1: (time_frames, 768)  - Transformer layer 1\n# ...\n# layer_12: (time_frames, 768) - Last transformer layer\n</code></pre>"},{"location":"examples/feature-extraction/#unified-feature-extractor","title":"Unified Feature Extractor","text":"<p>The <code>FeatureExtractor</code> class combines multiple extractors:</p> <pre><code>from examples.feature_extraction import FeatureExtractor\n\n# Extract all available features\nextractor = FeatureExtractor(\n    sample_rate=16000,\n    feature_type=\"all\",  # \"mel_spectrogram\", \"onset\", \"rms\", \"wav2vec2\", or \"all\"\n    cache_dir=\"feature_cache\",  # Optional caching\n)\n\nfeatures = extractor.extract(\"audio.flac\")\n\n# Features dict contains:\n# - mel_spectrogram: (n_mels, time_frames)\n# - onset_times: (num_onsets,)\n# - onset_strength: (time_frames,)\n# - num_onsets: int\n# - ioi_mean, ioi_std, ioi_cv, tempo_estimate: floats\n# - rms: (time_frames,)\n# - rms_mean, rms_std, rms_max, rms_min, dynamic_range, rms_cv: floats\n# - wav2vec2: (time_frames, 768)\n# - wav2vec2_pooled: (768,)\n</code></pre>"},{"location":"examples/feature-extraction/#feature-caching","title":"Feature Caching","text":"<p>For large-scale experiments, enable caching:</p> <pre><code>extractor = FeatureExtractor(\n    sample_rate=16000,\n    feature_type=\"mel_spectrogram\",\n    cache_dir=\"./feature_cache\",\n)\n\n# First call: computes and caches\nfeatures1 = extractor.extract(\"audio.flac\")\n\n# Second call: loads from cache (instant)\nfeatures2 = extractor.extract(\"audio.flac\")\n</code></pre> <p>Cache Invalidation</p> <p>The cache key includes the audio filename, feature type, and sample rate. If you change extractor parameters (e.g., <code>n_mels</code>), clear the cache:</p> <pre><code>rm -rf ./feature_cache\n</code></pre>"},{"location":"examples/feature-extraction/#batch-processing","title":"Batch Processing","text":"<p>Process multiple files in parallel:</p> <pre><code>from examples.feature_extraction import extract_batch_features\n\naudio_paths = [\n    \"output/dataset/audio/sample1.flac\",\n    \"output/dataset/audio/sample2.flac\",\n    \"output/dataset/audio/sample3.flac\",\n]\n\nfeatures_list = extract_batch_features(\n    audio_paths,\n    feature_type=\"mel_spectrogram\",\n    sample_rate=16000,\n    num_workers=4,\n    cache_dir=\"./feature_cache\",\n)\n\nfor path, features in zip(audio_paths, features_list):\n    print(f\"{path}: {features['mel_spectrogram'].shape}\")\n</code></pre> <p>Wav2Vec2 and Multiprocessing</p> <p>Wav2Vec2 extraction may not work well with multiprocessing due to CUDA/model loading issues. Use <code>num_workers=1</code> for pretrained features, or extract them separately.</p>"},{"location":"examples/feature-extraction/#integration-with-pytorch","title":"Integration with PyTorch","text":""},{"location":"examples/feature-extraction/#as-a-transform","title":"As a Transform","text":"<pre><code>import torch\nfrom examples.feature_extraction import MelSpectrogramExtractor\nfrom examples.pytorch_dataloader import SOUSADataset\n\n\nclass MelTransform:\n    \"\"\"Transform waveform to mel spectrogram.\"\"\"\n\n    def __init__(self, sample_rate: int = 16000):\n        self.extractor = MelSpectrogramExtractor(sample_rate=sample_rate)\n\n    def __call__(self, waveform: torch.Tensor) -&gt; torch.Tensor:\n        mel = self.extractor(waveform.numpy())\n        return torch.from_numpy(mel)\n\n\n# Use with dataset\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    split=\"train\",\n    target=\"skill_tier\",\n    transform=MelTransform(),\n)\n\nsample = dataset[0]\nprint(sample[\"waveform\"].shape)  # Now a mel spectrogram!\n</code></pre>"},{"location":"examples/feature-extraction/#pre-computed-features-dataset","title":"Pre-computed Features Dataset","text":"<p>For faster training, pre-compute features:</p> <pre><code>import torch\nfrom torch.utils.data import Dataset\nimport pandas as pd\nfrom pathlib import Path\n\n\nclass PrecomputedFeaturesDataset(Dataset):\n    \"\"\"Dataset with pre-computed features.\"\"\"\n\n    def __init__(\n        self,\n        data_dir: str,\n        features_dir: str,\n        split: str = \"train\",\n    ):\n        self.features_dir = Path(features_dir)\n\n        # Load metadata\n        data_dir = Path(data_dir)\n        samples = pd.read_parquet(data_dir / \"labels\" / \"samples.parquet\")\n        exercises = pd.read_parquet(data_dir / \"labels\" / \"exercises.parquet\")\n        self.data = samples.merge(exercises, on=\"sample_id\")\n\n        # Filter by split (implement your own split logic)\n\n    def __len__(self):\n        return len(self.data)\n\n    def __getitem__(self, idx):\n        row = self.data.iloc[idx]\n        sample_id = row[\"sample_id\"]\n\n        # Load pre-computed features\n        features = torch.load(self.features_dir / f\"{sample_id}.pt\")\n\n        return {\n            \"features\": features,\n            \"label\": row[\"overall_score\"] / 100.0,\n            \"sample_id\": sample_id,\n        }\n</code></pre>"},{"location":"examples/feature-extraction/#example-complete-feature-extraction-pipeline","title":"Example: Complete Feature Extraction Pipeline","text":"<pre><code>\"\"\"Extract features for all samples in the dataset.\"\"\"\nfrom pathlib import Path\nimport pandas as pd\nimport torch\nfrom tqdm import tqdm\n\nfrom examples.feature_extraction import FeatureExtractor\n\n\ndef extract_all_features(\n    data_dir: str,\n    output_dir: str,\n    feature_type: str = \"mel_spectrogram\",\n):\n    data_dir = Path(data_dir)\n    output_dir = Path(output_dir)\n    output_dir.mkdir(parents=True, exist_ok=True)\n\n    # Load sample list\n    samples = pd.read_parquet(data_dir / \"labels\" / \"samples.parquet\")\n\n    # Create extractor\n    extractor = FeatureExtractor(\n        sample_rate=16000,\n        feature_type=feature_type,\n    )\n\n    # Process all samples\n    for _, row in tqdm(samples.iterrows(), total=len(samples)):\n        sample_id = row[\"sample_id\"]\n        audio_path = data_dir / row[\"audio_path\"]\n\n        if not audio_path.exists():\n            continue\n\n        # Extract features\n        features = extractor.extract(audio_path)\n\n        # Save as tensor\n        torch.save(\n            {k: torch.from_numpy(v) if hasattr(v, \"shape\") else v\n             for k, v in features.items()},\n            output_dir / f\"{sample_id}.pt\"\n        )\n\n\nif __name__ == \"__main__\":\n    extract_all_features(\n        data_dir=\"output/dataset\",\n        output_dir=\"output/features/mel\",\n        feature_type=\"mel_spectrogram\",\n    )\n</code></pre>"},{"location":"examples/feature-extraction/#next-steps","title":"Next Steps","text":"<ul> <li>PyTorch DataLoader - Combine features with DataLoader</li> <li>Filtering Samples - Filter dataset before feature extraction</li> <li>Hierarchical Labels - Align features with stroke-level labels</li> </ul>"},{"location":"examples/filtering/","title":"Filtering Samples","text":"<p>This guide shows how to filter the SOUSA dataset by skill tier, rudiment type, tempo, score ranges, soundfont, and augmentation settings. Filtering helps create focused subsets for specific experiments or training scenarios.</p> <p>Source Code</p> <p>Complete implementation: <code>examples/filtering.py</code></p>"},{"location":"examples/filtering/#prerequisites","title":"Prerequisites","text":"<pre><code>pip install pandas pyarrow\n</code></pre>"},{"location":"examples/filtering/#loading-dataset-metadata","title":"Loading Dataset Metadata","text":"<p>All filtering operates on the parquet metadata files:</p> <pre><code>import pandas as pd\nfrom pathlib import Path\n\n\ndef load_metadata(data_dir: str) -&gt; pd.DataFrame:\n    \"\"\"Load and merge sample metadata.\"\"\"\n    data_dir = Path(data_dir)\n\n    samples = pd.read_parquet(data_dir / \"labels\" / \"samples.parquet\")\n    exercises = pd.read_parquet(data_dir / \"labels\" / \"exercises.parquet\")\n\n    return samples.merge(exercises, on=\"sample_id\", how=\"left\")\n\n\n# Load all metadata\ndf = load_metadata(\"output/dataset\")\nprint(f\"Total samples: {len(df)}\")\nprint(f\"Columns: {list(df.columns)}\")\n</code></pre>"},{"location":"examples/filtering/#filter-by-skill-tier","title":"Filter by Skill Tier","text":"<pre><code>def filter_by_skill_tier(df: pd.DataFrame, tier: str) -&gt; pd.DataFrame:\n    \"\"\"Filter to specific skill tier.\"\"\"\n    return df[df[\"skill_tier\"] == tier].reset_index(drop=True)\n\n\n# Get only advanced players\nadvanced_df = filter_by_skill_tier(df, \"advanced\")\nprint(f\"Advanced samples: {len(advanced_df)}\")\n\n# Available tiers\nSKILL_TIERS = [\"beginner\", \"intermediate\", \"advanced\", \"professional\"]\n</code></pre>"},{"location":"examples/filtering/#multiple-skill-tiers","title":"Multiple Skill Tiers","text":"<pre><code># Get beginner and intermediate (novice group)\nnovice_df = df[df[\"skill_tier\"].isin([\"beginner\", \"intermediate\"])]\n\n# Get advanced and professional (skilled group)\nskilled_df = df[df[\"skill_tier\"].isin([\"advanced\", \"professional\"])]\n</code></pre>"},{"location":"examples/filtering/#filter-by-rudiment","title":"Filter by Rudiment","text":"<pre><code>def filter_by_rudiment(df: pd.DataFrame, rudiment_slug: str) -&gt; pd.DataFrame:\n    \"\"\"Filter to specific rudiment.\"\"\"\n    return df[df[\"rudiment_slug\"] == rudiment_slug].reset_index(drop=True)\n\n\n# Get single paradiddle samples\nparadiddle_df = filter_by_rudiment(df, \"single_paradiddle\")\n\n# List all available rudiments\nrudiments = sorted(df[\"rudiment_slug\"].unique())\nprint(f\"Available rudiments ({len(rudiments)}):\")\nfor r in rudiments[:10]:\n    print(f\"  - {r}\")\n</code></pre>"},{"location":"examples/filtering/#filter-by-rudiment-category","title":"Filter by Rudiment Category","text":"<pre><code># Get all paradiddle variants\nparadiddle_variants = df[df[\"rudiment_slug\"].str.contains(\"paradiddle\")]\n\n# Get all roll types\nrolls = df[df[\"rudiment_slug\"].str.contains(\"roll\")]\n\n# Get all flam rudiments\nflams = df[df[\"rudiment_slug\"].str.contains(\"flam\")]\n</code></pre>"},{"location":"examples/filtering/#filter-by-tempo","title":"Filter by Tempo","text":"<pre><code>def filter_by_tempo_range(\n    df: pd.DataFrame,\n    min_tempo: int = 60,\n    max_tempo: int = 200,\n) -&gt; pd.DataFrame:\n    \"\"\"Filter to tempo range (BPM).\"\"\"\n    mask = (df[\"tempo_bpm\"] &gt;= min_tempo) &amp; (df[\"tempo_bpm\"] &lt;= max_tempo)\n    return df[mask].reset_index(drop=True)\n\n\n# Get slow tempos only (60-100 BPM)\nslow_df = filter_by_tempo_range(df, 60, 100)\n\n# Get fast tempos only (140-200 BPM)\nfast_df = filter_by_tempo_range(df, 140, 200)\n</code></pre>"},{"location":"examples/filtering/#filter-by-score","title":"Filter by Score","text":"<pre><code>def filter_by_score_range(\n    df: pd.DataFrame,\n    min_score: float = 0,\n    max_score: float = 100,\n    score_column: str = \"overall_score\",\n) -&gt; pd.DataFrame:\n    \"\"\"Filter to samples within score range.\"\"\"\n    mask = (df[score_column] &gt;= min_score) &amp; (df[score_column] &lt;= max_score)\n    return df[mask].reset_index(drop=True)\n\n\n# High-quality performances only\nhigh_quality_df = filter_by_score_range(df, min_score=80)\n\n# Low-quality performances (for contrastive learning)\nlow_quality_df = filter_by_score_range(df, max_score=40)\n\n# Filter by timing accuracy specifically\naccurate_df = filter_by_score_range(df, min_score=75, score_column=\"timing_accuracy\")\n</code></pre>"},{"location":"examples/filtering/#available-score-columns","title":"Available Score Columns","text":"Column Description Range <code>overall_score</code> Composite quality score 0-100 <code>timing_accuracy</code> How close to intended timing 0-100 <code>timing_consistency</code> Consistency of timing errors 0-100 <code>velocity_accuracy</code> How close to intended velocity 0-100 <code>velocity_consistency</code> Consistency of velocity 0-100 <code>hand_balance</code> L/R hand consistency 0-100 <code>tempo_stability</code> Tempo drift throughout exercise 0-100 <code>tier_confidence</code> Confidence in skill tier label 0-1"},{"location":"examples/filtering/#filter-by-augmentation","title":"Filter by Augmentation","text":""},{"location":"examples/filtering/#clean-samples-only","title":"Clean Samples Only","text":"<pre><code>def filter_clean_samples(df: pd.DataFrame) -&gt; pd.DataFrame:\n    \"\"\"Filter to clean (non-augmented) samples only.\"\"\"\n    if \"augmentation_preset\" not in df.columns:\n        return df\n\n    mask = df[\"augmentation_preset\"].isna() | (df[\"augmentation_preset\"] == \"none\")\n    return df[mask].reset_index(drop=True)\n\n\nclean_df = filter_clean_samples(df)\nprint(f\"Clean samples: {len(clean_df)}\")\n</code></pre>"},{"location":"examples/filtering/#augmented-samples-only","title":"Augmented Samples Only","text":"<pre><code>def filter_augmented_samples(df: pd.DataFrame) -&gt; pd.DataFrame:\n    \"\"\"Filter to augmented samples only.\"\"\"\n    if \"augmentation_preset\" not in df.columns:\n        return df\n\n    mask = df[\"augmentation_preset\"].notna() &amp; (df[\"augmentation_preset\"] != \"none\")\n    return df[mask].reset_index(drop=True)\n\n\naugmented_df = filter_augmented_samples(df)\nprint(f\"Augmented samples: {len(augmented_df)}\")\n</code></pre>"},{"location":"examples/filtering/#specific-augmentation-preset","title":"Specific Augmentation Preset","text":"<pre><code>def filter_by_augmentation_preset(df: pd.DataFrame, preset: str) -&gt; pd.DataFrame:\n    \"\"\"Filter to specific augmentation preset.\"\"\"\n    return df[df[\"augmentation_preset\"] == preset].reset_index(drop=True)\n\n\n# Get moderately augmented samples\nmoderate_df = filter_by_augmentation_preset(df, \"moderate\")\n\n# Available presets (check your dataset)\nif \"augmentation_preset\" in df.columns:\n    presets = df[\"augmentation_preset\"].unique()\n    print(f\"Available presets: {presets}\")\n</code></pre>"},{"location":"examples/filtering/#filter-by-soundfont","title":"Filter by Soundfont","text":"<pre><code>def filter_by_soundfont(df: pd.DataFrame, soundfont: str) -&gt; pd.DataFrame:\n    \"\"\"Filter to specific soundfont.\"\"\"\n    return df[df[\"soundfont\"] == soundfont].reset_index(drop=True)\n\n\n# Get practice pad samples only\npractice_pad_df = filter_by_soundfont(df, \"practice_pad\")\n\n# Get marching snare samples\nmarching_df = filter_by_soundfont(df, \"marching_snare\")\n\n# List available soundfonts\nif \"soundfont\" in df.columns:\n    soundfonts = df[\"soundfont\"].unique()\n    print(f\"Available soundfonts: {soundfonts}\")\n</code></pre>"},{"location":"examples/filtering/#combined-filters","title":"Combined Filters","text":"<p>Chain multiple filters for specific subsets:</p> <pre><code># Advanced players, single paradiddle, fast tempo, high quality\nsubset = df[\n    (df[\"skill_tier\"] == \"advanced\") &amp;\n    (df[\"rudiment_slug\"] == \"single_paradiddle\") &amp;\n    (df[\"tempo_bpm\"] &gt;= 140) &amp;\n    (df[\"overall_score\"] &gt;= 75)\n]\n\nprint(f\"Subset size: {len(subset)}\")\n</code></pre>"},{"location":"examples/filtering/#using-filteredsousadataset","title":"Using FilteredSOUSADataset","text":"<p>The <code>FilteredSOUSADataset</code> class combines filtering with PyTorch DataLoader:</p> <pre><code>from examples.filtering import FilteredSOUSADataset\n\n# Create filtered dataset\ndataset = FilteredSOUSADataset(\n    data_dir=\"output/dataset\",\n    split=\"train\",\n    target=\"skill_tier\",\n    filters={\n        \"augmentation_preset\": None,    # None = clean/null\n        \"soundfont\": \"practice_pad\",\n        \"skill_tier\": \"advanced\",\n    }\n)\n\nprint(f\"Filtered dataset size: {len(dataset)}\")\n</code></pre>"},{"location":"examples/filtering/#filter-values","title":"Filter Values","text":"Filter Value Type Example Single value <code>str</code> <code>{\"skill_tier\": \"advanced\"}</code> Multiple values <code>list</code> <code>{\"skill_tier\": [\"advanced\", \"professional\"]}</code> Null/clean <code>None</code> <code>{\"augmentation_preset\": None}</code>"},{"location":"examples/filtering/#augmentation-groups","title":"Augmentation Groups","text":"<p>Link clean samples with their augmented variants:</p> <pre><code>def group_by_augmentation(df: pd.DataFrame) -&gt; dict[str, pd.DataFrame]:\n    \"\"\"Group samples by augmentation_group_id.\"\"\"\n    if \"augmentation_group_id\" not in df.columns:\n        return {}\n\n    return {\n        group_id: group_df.reset_index(drop=True)\n        for group_id, group_df in df.groupby(\"augmentation_group_id\")\n    }\n\n\ndef get_clean_augmented_pairs(df: pd.DataFrame) -&gt; list[tuple[str, list[str]]]:\n    \"\"\"Get pairs of (clean_sample_id, [augmented_sample_ids]).\"\"\"\n    if \"augmentation_group_id\" not in df.columns:\n        return []\n\n    pairs = []\n    for group_id, group_df in df.groupby(\"augmentation_group_id\"):\n        clean_mask = (\n            group_df[\"augmentation_preset\"].isna() |\n            (group_df[\"augmentation_preset\"] == \"none\")\n        )\n        clean_ids = group_df[clean_mask][\"sample_id\"].tolist()\n        augmented_ids = group_df[~clean_mask][\"sample_id\"].tolist()\n\n        if clean_ids and augmented_ids:\n            for clean_id in clean_ids:\n                pairs.append((clean_id, augmented_ids))\n\n    return pairs\n\n\n# Get pairs for contrastive learning\npairs = get_clean_augmented_pairs(df)\nprint(f\"Found {len(pairs)} clean-augmented pairs\")\n\nif pairs:\n    clean_id, aug_ids = pairs[0]\n    print(f\"Clean: {clean_id}\")\n    print(f\"Augmented: {aug_ids}\")\n</code></pre>"},{"location":"examples/filtering/#dataset-statistics","title":"Dataset Statistics","text":"<p>Print summary statistics for any filtered subset:</p> <pre><code>def print_dataset_summary(df: pd.DataFrame, name: str = \"Dataset\"):\n    \"\"\"Print summary statistics for a filtered dataset.\"\"\"\n    print(f\"\\n{name}\")\n    print(\"=\" * 50)\n    print(f\"Total samples: {len(df)}\")\n\n    if \"skill_tier\" in df.columns:\n        print(f\"\\nBy skill tier:\")\n        for tier, count in df[\"skill_tier\"].value_counts().items():\n            pct = count / len(df) * 100\n            print(f\"  {tier}: {count} ({pct:.1f}%)\")\n\n    if \"soundfont\" in df.columns:\n        print(f\"\\nBy soundfont:\")\n        for sf, count in df[\"soundfont\"].value_counts().items():\n            print(f\"  {sf}: {count}\")\n\n    if \"overall_score\" in df.columns:\n        print(f\"\\nScore statistics:\")\n        print(f\"  Mean: {df['overall_score'].mean():.1f}\")\n        print(f\"  Std:  {df['overall_score'].std():.1f}\")\n        print(f\"  Min:  {df['overall_score'].min():.1f}\")\n        print(f\"  Max:  {df['overall_score'].max():.1f}\")\n\n\n# Use it\nprint_dataset_summary(df, \"Full Dataset\")\nprint_dataset_summary(filter_clean_samples(df), \"Clean Samples Only\")\n</code></pre>"},{"location":"examples/filtering/#example-balanced-skill-tier-subset","title":"Example: Balanced Skill Tier Subset","text":"<p>Create a balanced subset for classification:</p> <pre><code>def create_balanced_subset(\n    df: pd.DataFrame,\n    samples_per_tier: int = 1000,\n    random_state: int = 42,\n) -&gt; pd.DataFrame:\n    \"\"\"Create balanced subset with equal samples per skill tier.\"\"\"\n    balanced_dfs = []\n\n    for tier in [\"beginner\", \"intermediate\", \"advanced\", \"professional\"]:\n        tier_df = df[df[\"skill_tier\"] == tier]\n\n        if len(tier_df) &gt;= samples_per_tier:\n            sampled = tier_df.sample(n=samples_per_tier, random_state=random_state)\n        else:\n            sampled = tier_df  # Take all if not enough\n\n        balanced_dfs.append(sampled)\n\n    return pd.concat(balanced_dfs, ignore_index=True)\n\n\nbalanced_df = create_balanced_subset(df, samples_per_tier=500)\nprint_dataset_summary(balanced_df, \"Balanced Dataset\")\n</code></pre>"},{"location":"examples/filtering/#example-filter-for-specific-experiment","title":"Example: Filter for Specific Experiment","text":"<pre><code>def create_experiment_subset(\n    data_dir: str,\n    output_path: str,\n):\n    \"\"\"Create a filtered subset for a timing accuracy experiment.\"\"\"\n    df = load_metadata(data_dir)\n\n    # Filter criteria:\n    # - Clean audio only (no augmentation)\n    # - Single paradiddle rudiment\n    # - Medium tempo range (100-140 BPM)\n    # - Exclude extreme scores (keep 20-90 range)\n\n    subset = df[\n        # Clean audio\n        (df[\"augmentation_preset\"].isna() | (df[\"augmentation_preset\"] == \"none\")) &amp;\n        # Single paradiddle\n        (df[\"rudiment_slug\"] == \"single_paradiddle\") &amp;\n        # Medium tempo\n        (df[\"tempo_bpm\"] &gt;= 100) &amp; (df[\"tempo_bpm\"] &lt;= 140) &amp;\n        # Exclude extremes\n        (df[\"overall_score\"] &gt;= 20) &amp; (df[\"overall_score\"] &lt;= 90)\n    ]\n\n    print(f\"Filtered to {len(subset)} samples\")\n\n    # Save sample IDs for reproducibility\n    subset[[\"sample_id\", \"skill_tier\", \"tempo_bpm\", \"overall_score\"]].to_csv(\n        output_path, index=False\n    )\n    print(f\"Saved to {output_path}\")\n\n    return subset\n\n\n# Run\nsubset = create_experiment_subset(\n    \"output/dataset\",\n    \"experiment_samples.csv\"\n)\n</code></pre>"},{"location":"examples/filtering/#using-filtered-indices-with-dataloader","title":"Using Filtered Indices with DataLoader","text":"<pre><code>from torch.utils.data import Subset\nfrom examples.pytorch_dataloader import SOUSADataset, create_dataloader\n\n\n# Load full dataset\nfull_dataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    split=\"train\",\n    target=\"skill_tier\",\n)\n\n# Get filtered indices\ndf = load_metadata(\"output/dataset\")\nfiltered_df = df[\n    (df[\"skill_tier\"].isin([\"advanced\", \"professional\"])) &amp;\n    (df[\"overall_score\"] &gt;= 70)\n]\n\n# Map sample_ids to dataset indices\nsample_id_to_idx = {\n    row[\"sample_id\"]: idx\n    for idx, row in full_dataset.data.iterrows()\n}\n\nfiltered_indices = [\n    sample_id_to_idx[sid]\n    for sid in filtered_df[\"sample_id\"]\n    if sid in sample_id_to_idx\n]\n\n# Create subset\nfiltered_dataset = Subset(full_dataset, filtered_indices)\nprint(f\"Filtered dataset size: {len(filtered_dataset)}\")\n\n# Create dataloader\ndataloader = create_dataloader(filtered_dataset, batch_size=16)\n</code></pre>"},{"location":"examples/filtering/#next-steps","title":"Next Steps","text":"<ul> <li>PyTorch DataLoader - Use filtered data in training</li> <li>Feature Extraction - Extract features from filtered subsets</li> <li>Hierarchical Labels - Access detailed stroke-level labels</li> </ul>"},{"location":"examples/hierarchical-labels/","title":"Hierarchical Labels","text":"<p>SOUSA provides labels at three hierarchical levels: exercise, measure, and stroke. This guide shows how to access and use these multi-level labels for various ML tasks.</p> <p>Source Code</p> <p>Complete implementation: <code>examples/hierarchical_labels.py</code></p>"},{"location":"examples/hierarchical-labels/#label-hierarchy","title":"Label Hierarchy","text":"<pre><code>Exercise Level (1 per sample)\n\u251c\u2500\u2500 Overall score, timing accuracy, etc.\n\u2502\n\u251c\u2500\u2500 Measure Level (N per sample)\n\u2502   \u251c\u2500\u2500 Per-measure timing statistics\n\u2502   \u251c\u2500\u2500 Per-measure velocity statistics\n\u2502   \u2514\u2500\u2500 Hand balance metrics\n\u2502\n\u2514\u2500\u2500 Stroke Level (M per sample)\n    \u251c\u2500\u2500 Intended vs actual timing\n    \u251c\u2500\u2500 Intended vs actual velocity\n    \u251c\u2500\u2500 Hand (L/R)\n    \u2514\u2500\u2500 Articulation type\n</code></pre>"},{"location":"examples/hierarchical-labels/#prerequisites","title":"Prerequisites","text":"<pre><code>pip install pandas numpy\n# Optional for visualization:\npip install matplotlib\n# Optional for PyTorch integration:\npip install torch\n</code></pre>"},{"location":"examples/hierarchical-labels/#loading-hierarchical-labels","title":"Loading Hierarchical Labels","text":"<pre><code>from examples.hierarchical_labels import HierarchicalLabels\n\n# Load all label levels\nlabels = HierarchicalLabels(\"output/dataset\")\n\n# Get sample IDs\nsample_ids = labels.get_sample_ids()\nprint(f\"Total samples: {len(sample_ids)}\")\n\nsample_id = sample_ids[0]\n</code></pre>"},{"location":"examples/hierarchical-labels/#exercise-level-labels","title":"Exercise-Level Labels","text":"<p>Exercise-level labels provide overall performance scores:</p> <pre><code># Get exercise scores\nexercise = labels.get_exercise(sample_id)\n\nprint(f\"Overall score: {exercise['overall_score']:.1f}\")\nprint(f\"Timing accuracy: {exercise['timing_accuracy']:.1f}\")\nprint(f\"Timing consistency: {exercise['timing_consistency']:.1f}\")\nprint(f\"Velocity accuracy: {exercise['velocity_accuracy']:.1f}\")\nprint(f\"Tempo stability: {exercise['tempo_stability']:.1f}\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#exercise-score-columns","title":"Exercise Score Columns","text":"Column Description <code>overall_score</code> Composite quality score (0-100) <code>timing_accuracy</code> Mean timing error score (0-100) <code>timing_consistency</code> Timing error variance score (0-100) <code>velocity_accuracy</code> Mean velocity error score (0-100) <code>velocity_consistency</code> Velocity variance score (0-100) <code>hand_balance</code> L/R hand consistency (0-100) <code>tempo_stability</code> Tempo drift score (0-100) <code>flam_quality</code> Flam spacing quality (if applicable) <code>diddle_quality</code> Diddle evenness (if applicable)"},{"location":"examples/hierarchical-labels/#measure-level-labels","title":"Measure-Level Labels","text":"<p>Measure-level labels aggregate statistics per measure:</p> <pre><code># Get measures for a sample\nmeasures = labels.get_measures(sample_id)\n\nprint(f\"Number of measures: {len(measures)}\")\nprint(f\"Columns: {list(measures.columns)}\")\n\n# Examine first measure\nfirst_measure = measures.iloc[0]\nprint(f\"\\nMeasure 0:\")\nprint(f\"  Strokes {first_measure['stroke_start']} to {first_measure['stroke_end']}\")\nprint(f\"  Timing mean error: {first_measure['timing_mean_error_ms']:.2f} ms\")\nprint(f\"  Timing std: {first_measure['timing_std_ms']:.2f} ms\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#measure-columns","title":"Measure Columns","text":"Column Description <code>index</code> Measure number (0-based) <code>stroke_start</code> First stroke index in measure <code>stroke_end</code> Last stroke index (exclusive) <code>timing_mean_error_ms</code> Mean timing error in ms <code>timing_std_ms</code> Timing error standard deviation <code>velocity_mean</code> Mean MIDI velocity <code>velocity_std</code> Velocity standard deviation <code>lr_velocity_ratio</code> Left/right hand velocity ratio"},{"location":"examples/hierarchical-labels/#stroke-level-labels","title":"Stroke-Level Labels","text":"<p>Stroke-level labels provide the finest granularity:</p> <pre><code># Get all strokes for a sample\nstrokes = labels.get_strokes(sample_id)\n\nprint(f\"Number of strokes: {len(strokes)}\")\nprint(f\"Columns: {list(strokes.columns)}\")\n\n# Examine first few strokes\nfor i, stroke in strokes.head().iterrows():\n    print(f\"Stroke {i}: {stroke['hand']} hand, \"\n          f\"intended={stroke['intended_time_ms']:.1f}ms, \"\n          f\"actual={stroke['actual_time_ms']:.1f}ms, \"\n          f\"error={stroke['timing_error_ms']:.1f}ms\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#stroke-columns","title":"Stroke Columns","text":"Column Description <code>index</code> Stroke number (0-based) <code>hand</code> <code>\"L\"</code> or <code>\"R\"</code> <code>stroke_type</code> <code>\"tap\"</code>, <code>\"accent\"</code>, <code>\"grace\"</code>, <code>\"diddle\"</code> <code>intended_time_ms</code> Target timing (milliseconds) <code>actual_time_ms</code> Performed timing (milliseconds) <code>timing_error_ms</code> Actual - intended (positive = late) <code>intended_velocity</code> Target MIDI velocity (0-127) <code>actual_velocity</code> Performed MIDI velocity <code>is_grace_note</code> Boolean flag <code>is_accent</code> Boolean flag"},{"location":"examples/hierarchical-labels/#accessing-strokes-within-a-measure","title":"Accessing Strokes Within a Measure","text":"<pre><code># Get strokes for measure 2\nmeasure_strokes = labels.get_strokes_for_measure(sample_id, measure_index=2)\n\nprint(f\"Strokes in measure 2: {len(measure_strokes)}\")\nfor _, stroke in measure_strokes.iterrows():\n    print(f\"  {stroke['hand']} at {stroke['actual_time_ms']:.1f}ms\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#aligning-strokes-with-audio","title":"Aligning Strokes with Audio","text":"<p>For sequence models, align stroke times with audio sample indices:</p> <pre><code># Align strokes with audio at 16kHz\naligned = labels.align_strokes_with_audio(\n    sample_id,\n    sample_rate=16000,\n)\n\nprint(\"First 5 strokes with sample indices:\")\nfor _, stroke in aligned.head().iterrows():\n    print(f\"  Stroke at {stroke['actual_time_ms']:.1f}ms -&gt; \"\n          f\"sample {stroke['actual_sample_idx']}\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#creating-stroke-sequences-for-rnnstransformers","title":"Creating Stroke Sequences for RNNs/Transformers","text":""},{"location":"examples/hierarchical-labels/#fixed-length-sequences","title":"Fixed-Length Sequences","text":"<pre><code># Create padded stroke sequence\nsequence = labels.create_stroke_sequence(\n    sample_id,\n    max_strokes=128,\n    features=[\"timing_error_ms\", \"actual_velocity\", \"is_accent\", \"is_grace_note\"],\n)\n\nprint(f\"Sequence shape: {sequence['sequence'].shape}\")  # (128, 4)\nprint(f\"Valid strokes: {sequence['mask'].sum()}\")\nprint(f\"Feature names: {sequence['feature_names']}\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#pytorch-tensors","title":"PyTorch Tensors","text":"<pre><code># Get as PyTorch tensors\nsequence_torch = labels.create_stroke_sequence_torch(\n    sample_id,\n    max_strokes=128,\n)\n\nprint(f\"Sequence: {sequence_torch['sequence'].shape}\")  # torch.Size([128, 4])\nprint(f\"Mask: {sequence_torch['mask'].shape}\")          # torch.Size([128])\n</code></pre>"},{"location":"examples/hierarchical-labels/#frame-level-targets","title":"Frame-Level Targets","text":""},{"location":"examples/hierarchical-labels/#onset-detection-targets","title":"Onset Detection Targets","text":"<p>Create binary onset labels aligned with audio frames:</p> <pre><code># Create onset targets at 10ms resolution\nduration_ms = strokes[\"actual_time_ms\"].max() + 500  # Add buffer\nonset_targets = labels.create_onset_targets(\n    sample_id,\n    duration_ms=duration_ms,\n    resolution_ms=10.0,\n)\n\nprint(f\"Onset target shape: {onset_targets.shape}\")\nprint(f\"Number of onsets: {onset_targets.sum()}\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#hand-classification-targets","title":"Hand Classification Targets","text":"<pre><code># Create hand (L/R) targets for each frame\nhand_targets = labels.create_hand_targets(\n    sample_id,\n    duration_ms=duration_ms,\n    resolution_ms=10.0,\n)\n\nprint(f\"Hand target shape: {hand_targets.shape}\")\nprint(f\"Unique values: {np.unique(hand_targets)}\")\n# 0 = no stroke, 1 = left hand, 2 = right hand\n</code></pre>"},{"location":"examples/hierarchical-labels/#timing-error-sequences","title":"Timing Error Sequences","text":"<pre><code># Get normalized timing errors for all strokes\ntiming_errors = labels.get_timing_error_sequence(\n    sample_id,\n    normalize=True,  # Normalized to ~[-1, 1]\n)\n\nprint(f\"Timing errors shape: {timing_errors.shape}\")\nprint(f\"Range: [{timing_errors.min():.3f}, {timing_errors.max():.3f}]\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#measure-level-summary","title":"Measure-Level Summary","text":"<p>Compute extended measure statistics:</p> <pre><code># Get detailed measure summary\nsummary = labels.compute_measure_summary(sample_id)\n\nprint(\"Measure summary:\")\nfor _, measure in summary.iterrows():\n    print(f\"  Measure {measure['index']}: \"\n          f\"{measure['num_strokes']} strokes, \"\n          f\"{measure['num_accents']} accents, \"\n          f\"{measure['pct_right_hand']:.0%} right hand\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#visualization","title":"Visualization","text":"<p>Visualize stroke timeline with audio:</p> <pre><code>import torchaudio\n\n# Load audio\naudio_path = f\"output/dataset/{labels.get_sample_metadata(sample_id)['audio_path']}\"\nwaveform, sr = torchaudio.load(audio_path)\naudio = waveform.squeeze().numpy()\n\n# Resample if needed\nif sr != 16000:\n    resampler = torchaudio.transforms.Resample(sr, 16000)\n    audio = resampler(waveform).squeeze().numpy()\n\n# Create visualization\nfig, axes = labels.visualize_strokes(\n    sample_id,\n    audio_array=audio,\n    sample_rate=16000,\n    figsize=(14, 10),\n    save_path=\"stroke_visualization.png\",\n)\n</code></pre> <p>The visualization includes:</p> <ol> <li>Waveform with stroke markers (red = right hand, blue = left hand)</li> <li>Timing errors over time</li> <li>Velocity pattern</li> <li>Sticking pattern (L/R alternation)</li> </ol>"},{"location":"examples/hierarchical-labels/#multi-task-learning-example","title":"Multi-Task Learning Example","text":"<p>Use hierarchical labels for multi-task targets:</p> <pre><code>import torch\nfrom torch.utils.data import Dataset\n\n\nclass HierarchicalLabelDataset(Dataset):\n    \"\"\"Dataset with multi-level targets.\"\"\"\n\n    def __init__(\n        self,\n        data_dir: str,\n        max_strokes: int = 128,\n    ):\n        self.labels = HierarchicalLabels(data_dir)\n        self.sample_ids = self.labels.get_sample_ids()\n        self.max_strokes = max_strokes\n\n    def __len__(self):\n        return len(self.sample_ids)\n\n    def __getitem__(self, idx):\n        sample_id = self.sample_ids[idx]\n\n        # Exercise-level targets\n        exercise = self.labels.get_exercise(sample_id)\n        exercise_target = torch.tensor([\n            exercise[\"overall_score\"] / 100.0,\n            exercise[\"timing_accuracy\"] / 100.0,\n            exercise[\"tempo_stability\"] / 100.0,\n        ])\n\n        # Stroke-level sequence\n        stroke_seq = self.labels.create_stroke_sequence_torch(\n            sample_id,\n            max_strokes=self.max_strokes,\n        )\n\n        # Measure count (for auxiliary task)\n        measures = self.labels.get_measures(sample_id)\n        num_measures = len(measures)\n\n        return {\n            \"sample_id\": sample_id,\n            \"exercise_target\": exercise_target,       # (3,)\n            \"stroke_sequence\": stroke_seq[\"sequence\"], # (max_strokes, 4)\n            \"stroke_mask\": stroke_seq[\"mask\"],         # (max_strokes,)\n            \"num_measures\": num_measures,\n        }\n\n\n# Usage\ndataset = HierarchicalLabelDataset(\"output/dataset\")\nsample = dataset[0]\nprint(f\"Exercise target: {sample['exercise_target']}\")\nprint(f\"Stroke sequence: {sample['stroke_sequence'].shape}\")\n</code></pre>"},{"location":"examples/hierarchical-labels/#regression-vs-classification-tasks","title":"Regression vs Classification Tasks","text":""},{"location":"examples/hierarchical-labels/#stroke-level-regression","title":"Stroke-Level Regression","text":"<p>Predict timing errors for each stroke:</p> <pre><code># Target: timing error per stroke\nstroke_seq = labels.create_stroke_sequence(\n    sample_id,\n    features=[\"timing_error_ms\"],\n)\n# Use stroke_seq[\"sequence\"][:, 0] as regression target\n</code></pre>"},{"location":"examples/hierarchical-labels/#measure-level-classification","title":"Measure-Level Classification","text":"<p>Classify measures as \"good\" or \"needs work\":</p> <pre><code>measures = labels.get_measures(sample_id)\n\n# Create binary labels based on timing std\nthreshold_ms = 15.0\nmeasure_labels = (measures[\"timing_std_ms\"] &lt; threshold_ms).astype(int)\n# 1 = good timing consistency, 0 = needs work\n</code></pre>"},{"location":"examples/hierarchical-labels/#exercise-level-ordinal-regression","title":"Exercise-Level Ordinal Regression","text":"<p>Predict skill tier from ordinal labels:</p> <pre><code>SKILL_TIER_ORDINAL = {\n    \"beginner\": 0,\n    \"intermediate\": 1,\n    \"advanced\": 2,\n    \"professional\": 3,\n}\n\nmetadata = labels.get_sample_metadata(sample_id)\nordinal_label = SKILL_TIER_ORDINAL[metadata[\"skill_tier\"]]\n</code></pre>"},{"location":"examples/hierarchical-labels/#example-stroke-level-transformer","title":"Example: Stroke-Level Transformer","text":"<pre><code>import torch\nimport torch.nn as nn\n\n\nclass StrokeTransformer(nn.Module):\n    \"\"\"Transformer for stroke sequence analysis.\"\"\"\n\n    def __init__(\n        self,\n        input_dim: int = 4,\n        hidden_dim: int = 128,\n        num_layers: int = 4,\n        num_heads: int = 4,\n        num_classes: int = 4,  # Skill tiers\n    ):\n        super().__init__()\n\n        self.input_proj = nn.Linear(input_dim, hidden_dim)\n\n        encoder_layer = nn.TransformerEncoderLayer(\n            d_model=hidden_dim,\n            nhead=num_heads,\n            dim_feedforward=hidden_dim * 4,\n            batch_first=True,\n        )\n        self.encoder = nn.TransformerEncoder(encoder_layer, num_layers)\n\n        self.classifier = nn.Linear(hidden_dim, num_classes)\n\n    def forward(self, stroke_seq, mask):\n        # stroke_seq: (B, max_strokes, input_dim)\n        # mask: (B, max_strokes)\n\n        x = self.input_proj(stroke_seq)\n\n        # Create attention mask (True = ignore)\n        attn_mask = ~mask\n\n        x = self.encoder(x, src_key_padding_mask=attn_mask)\n\n        # Pool over valid strokes\n        x = x * mask.unsqueeze(-1)\n        x = x.sum(dim=1) / mask.sum(dim=1, keepdim=True)\n\n        return self.classifier(x)\n\n\n# Usage\nmodel = StrokeTransformer()\n\nsample = dataset[0]\nstroke_seq = sample[\"stroke_sequence\"].unsqueeze(0)  # Add batch dim\nmask = sample[\"stroke_mask\"].unsqueeze(0)\n\nlogits = model(stroke_seq, mask)\nprint(f\"Output shape: {logits.shape}\")  # (1, 4)\n</code></pre>"},{"location":"examples/hierarchical-labels/#next-steps","title":"Next Steps","text":"<ul> <li>PyTorch DataLoader - Combine with audio features</li> <li>Feature Extraction - Extract mel spectrograms aligned with strokes</li> <li>Filtering Samples - Filter by exercise-level scores</li> </ul>"},{"location":"examples/pytorch-dataloader/","title":"PyTorch DataLoader Integration","text":"<p>This guide shows how to integrate the SOUSA dataset with PyTorch for training neural networks. We cover custom <code>Dataset</code> classes, collate functions for variable-length audio, and efficient DataLoader configurations.</p> <p>Source Code</p> <p>Complete implementation: <code>examples/pytorch_dataloader.py</code></p>"},{"location":"examples/pytorch-dataloader/#prerequisites","title":"Prerequisites","text":"<pre><code>pip install torch torchaudio\n</code></pre>"},{"location":"examples/pytorch-dataloader/#basic-usage","title":"Basic Usage","text":""},{"location":"examples/pytorch-dataloader/#loading-the-dataset","title":"Loading the Dataset","text":"<pre><code>from examples.pytorch_dataloader import SOUSADataset, create_dataloader\n\n# Create dataset for training\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    split=\"train\",\n    target=\"skill_tier\",      # Classification target\n    resample_rate=16000,      # Resample to 16kHz\n    max_length_sec=5.0,       # Truncate to 5 seconds\n)\n\nprint(f\"Dataset size: {len(dataset)}\")\nprint(f\"Number of classes: {dataset.num_classes}\")\n</code></pre>"},{"location":"examples/pytorch-dataloader/#creating-a-dataloader","title":"Creating a DataLoader","text":"<pre><code># Create DataLoader with custom collate function\ndataloader = create_dataloader(\n    dataset,\n    batch_size=16,\n    shuffle=True,\n    num_workers=4,\n    fixed_length=80000,  # 5 seconds at 16kHz (optional)\n)\n\n# Iterate over batches\nfor batch in dataloader:\n    waveforms = batch[\"waveforms\"]       # (B, max_length)\n    lengths = batch[\"lengths\"]           # (B,)\n    labels = batch[\"labels\"]             # (B,)\n    attention_mask = batch[\"attention_mask\"]  # (B, max_length)\n\n    # Your training code here\n    break\n</code></pre>"},{"location":"examples/pytorch-dataloader/#sousadataset-class","title":"SOUSADataset Class","text":"<p>The <code>SOUSADataset</code> class wraps the SOUSA parquet files and provides a standard PyTorch <code>Dataset</code> interface.</p>"},{"location":"examples/pytorch-dataloader/#constructor-arguments","title":"Constructor Arguments","text":"Argument Type Default Description <code>data_dir</code> <code>str \\| Path</code> required Path to SOUSA dataset directory <code>split</code> <code>str \\| None</code> <code>None</code> <code>\"train\"</code>, <code>\"validation\"</code>, <code>\"test\"</code>, or <code>None</code> for all <code>target</code> <code>str \\| list[str]</code> <code>\"overall_score\"</code> Target variable(s) for labels <code>resample_rate</code> <code>int \\| None</code> <code>16000</code> Target sample rate (None keeps 44.1kHz) <code>max_length_sec</code> <code>float \\| None</code> <code>None</code> Maximum audio length in seconds <code>transform</code> <code>Callable \\| None</code> <code>None</code> Optional audio transform <code>normalize_audio</code> <code>bool</code> <code>True</code> Normalize audio to [-1, 1]"},{"location":"examples/pytorch-dataloader/#target-options","title":"Target Options","text":"ClassificationRegressionMulti-Task <pre><code># Skill tier classification (4 classes)\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    target=\"skill_tier\",\n)\n# Labels: 0=beginner, 1=intermediate, 2=advanced, 3=professional\n\n# Rudiment classification (40 classes)\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    target=\"rudiment_slug\",\n)\n</code></pre> <pre><code># Single score regression\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    target=\"overall_score\",\n)\n# Labels: normalized to [0, 1]\n\n# Any score column works\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    target=\"timing_accuracy\",\n)\n</code></pre> <pre><code># Multiple targets for multi-task learning\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    target=[\"overall_score\", \"timing_accuracy\", \"tempo_stability\"],\n)\n# Labels: tensor of shape (3,) with normalized scores\n</code></pre>"},{"location":"examples/pytorch-dataloader/#accessing-samples","title":"Accessing Samples","text":"<pre><code># Get a single sample\nsample = dataset[0]\n\nprint(sample[\"waveform\"].shape)    # torch.Size([80000]) - 5 sec @ 16kHz\nprint(sample[\"label\"])             # 2 (for skill_tier target)\nprint(sample[\"sample_id\"])         # \"adv042_single_paradiddle_100bpm_...\"\nprint(sample[\"skill_tier\"])        # \"advanced\"\nprint(sample[\"rudiment_slug\"])     # \"single_paradiddle\"\nprint(sample[\"tempo_bpm\"])         # 100\n</code></pre>"},{"location":"examples/pytorch-dataloader/#collate-functions","title":"Collate Functions","text":"<p>SOUSA audio samples have variable lengths. We provide two collate strategies:</p>"},{"location":"examples/pytorch-dataloader/#variable-length-collation","title":"Variable-Length Collation","text":"<p>Pads each batch to the maximum length within that batch. Memory-efficient for diverse lengths.</p> <pre><code>from examples.pytorch_dataloader import collate_variable_length\n\ndataloader = DataLoader(\n    dataset,\n    batch_size=16,\n    collate_fn=collate_variable_length,\n)\n\nbatch = next(iter(dataloader))\n# batch[\"waveforms\"].shape varies per batch\n# batch[\"attention_mask\"] indicates valid vs padded positions\n</code></pre>"},{"location":"examples/pytorch-dataloader/#fixed-length-collation","title":"Fixed-Length Collation","text":"<p>Pads/truncates all samples to a fixed length. More efficient for training (consistent tensor shapes).</p> <pre><code>from examples.pytorch_dataloader import collate_fixed_length\nfrom functools import partial\n\n# Create collate function with fixed length\ncollate_fn = partial(collate_fixed_length, target_length=80000)\n\ndataloader = DataLoader(\n    dataset,\n    batch_size=16,\n    collate_fn=collate_fn,\n)\n\nbatch = next(iter(dataloader))\n# batch[\"waveforms\"].shape is always (B, 80000)\n</code></pre>"},{"location":"examples/pytorch-dataloader/#batch-dictionary","title":"Batch Dictionary","text":"<p>Both collate functions return the same structure:</p> <pre><code>{\n    \"waveforms\": torch.Tensor,      # (B, max_length) - padded audio\n    \"lengths\": torch.Tensor,        # (B,) - original lengths\n    \"labels\": torch.Tensor,         # (B,) or (B, num_targets)\n    \"attention_mask\": torch.Tensor, # (B, max_length) - 1=valid, 0=padding\n    \"sample_ids\": list[str],        # Sample identifiers\n    \"metadata\": {\n        \"skill_tiers\": list[str],\n        \"rudiment_slugs\": list[str],\n        \"tempo_bpms\": list[int],\n    }\n}\n</code></pre>"},{"location":"examples/pytorch-dataloader/#stratified-batch-sampler","title":"Stratified Batch Sampler","text":"<p>For classification tasks, use stratified sampling to ensure balanced batches:</p> <pre><code>from examples.pytorch_dataloader import StratifiedBatchSampler\n\nsampler = StratifiedBatchSampler(\n    dataset,\n    batch_size=16,\n    drop_last=False,\n)\n\ndataloader = DataLoader(\n    dataset,\n    batch_sampler=sampler,\n    collate_fn=collate_variable_length,\n)\n\n# Each batch contains ~equal samples from each skill tier\n</code></pre>"},{"location":"examples/pytorch-dataloader/#training-loop-example","title":"Training Loop Example","text":"<p>Here's a complete training loop for skill tier classification:</p> <pre><code>import torch\nimport torch.nn as nn\nfrom torch.optim import AdamW\nfrom torch.utils.data import DataLoader\n\nfrom examples.pytorch_dataloader import (\n    SOUSADataset,\n    create_dataloader,\n    SKILL_TIER_TO_ID,\n    ID_TO_SKILL_TIER,\n)\n\n\nclass SimpleClassifier(nn.Module):\n    \"\"\"Simple 1D CNN classifier for demonstration.\"\"\"\n\n    def __init__(self, num_classes: int = 4):\n        super().__init__()\n        self.conv = nn.Sequential(\n            nn.Conv1d(1, 32, kernel_size=80, stride=16),\n            nn.ReLU(),\n            nn.MaxPool1d(4),\n            nn.Conv1d(32, 64, kernel_size=3),\n            nn.ReLU(),\n            nn.AdaptiveAvgPool1d(1),\n        )\n        self.classifier = nn.Linear(64, num_classes)\n\n    def forward(self, x, attention_mask=None):\n        # x: (B, T) -&gt; (B, 1, T)\n        x = x.unsqueeze(1)\n        x = self.conv(x)\n        x = x.squeeze(-1)\n        return self.classifier(x)\n\n\ndef train_epoch(model, dataloader, optimizer, criterion, device):\n    model.train()\n    total_loss = 0\n    correct = 0\n    total = 0\n\n    for batch in dataloader:\n        waveforms = batch[\"waveforms\"].to(device)\n        labels = batch[\"labels\"].to(device)\n        attention_mask = batch[\"attention_mask\"].to(device)\n\n        optimizer.zero_grad()\n        outputs = model(waveforms, attention_mask)\n        loss = criterion(outputs, labels)\n        loss.backward()\n        optimizer.step()\n\n        total_loss += loss.item()\n        _, predicted = outputs.max(1)\n        correct += predicted.eq(labels).sum().item()\n        total += labels.size(0)\n\n    return total_loss / len(dataloader), correct / total\n\n\ndef main():\n    device = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\n\n    # Create datasets\n    train_dataset = SOUSADataset(\n        data_dir=\"output/dataset\",\n        split=\"train\",\n        target=\"skill_tier\",\n        resample_rate=16000,\n        max_length_sec=5.0,\n    )\n\n    val_dataset = SOUSADataset(\n        data_dir=\"output/dataset\",\n        split=\"validation\",\n        target=\"skill_tier\",\n        resample_rate=16000,\n        max_length_sec=5.0,\n    )\n\n    # Create dataloaders\n    train_loader = create_dataloader(\n        train_dataset,\n        batch_size=16,\n        shuffle=True,\n        fixed_length=80000,\n    )\n\n    val_loader = create_dataloader(\n        val_dataset,\n        batch_size=16,\n        shuffle=False,\n        fixed_length=80000,\n    )\n\n    # Model, optimizer, loss\n    model = SimpleClassifier(num_classes=4).to(device)\n    optimizer = AdamW(model.parameters(), lr=1e-4)\n    criterion = nn.CrossEntropyLoss()\n\n    # Training loop\n    for epoch in range(10):\n        train_loss, train_acc = train_epoch(\n            model, train_loader, optimizer, criterion, device\n        )\n        print(f\"Epoch {epoch+1}: Loss={train_loss:.4f}, Acc={train_acc:.2%}\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"examples/pytorch-dataloader/#custom-transforms","title":"Custom Transforms","text":"<p>Add audio augmentation during training:</p> <pre><code>import torchaudio.transforms as T\n\n\nclass AudioTransform:\n    \"\"\"Compose multiple audio transforms.\"\"\"\n\n    def __init__(self, sample_rate: int = 16000):\n        self.time_stretch = T.TimeStretch()\n        self.freq_mask = T.FrequencyMasking(freq_mask_param=30)\n        self.time_mask = T.TimeMasking(time_mask_param=100)\n\n    def __call__(self, waveform: torch.Tensor) -&gt; torch.Tensor:\n        # Add your augmentations here\n        # Note: Some transforms work on spectrograms, not waveforms\n        return waveform\n\n\n# Use with dataset\ndataset = SOUSADataset(\n    data_dir=\"output/dataset\",\n    split=\"train\",\n    target=\"skill_tier\",\n    transform=AudioTransform(),\n)\n</code></pre>"},{"location":"examples/pytorch-dataloader/#performance-tips","title":"Performance Tips","text":"<p>Optimization Recommendations</p> <ol> <li> <p>Use <code>fixed_length</code> collation for faster training (consistent tensor shapes)</p> </li> <li> <p>Increase <code>num_workers</code> based on your CPU cores:    <pre><code>dataloader = create_dataloader(dataset, num_workers=8)\n</code></pre></p> </li> <li> <p>Enable <code>pin_memory</code> for faster GPU transfer (enabled by default)</p> </li> <li> <p>Resample to 16kHz - sufficient for drum audio, faster processing</p> </li> <li> <p>Use smaller batch sizes if memory-limited:    <pre><code>dataloader = create_dataloader(dataset, batch_size=8)\n</code></pre></p> </li> </ol>"},{"location":"examples/pytorch-dataloader/#label-mappings","title":"Label Mappings","text":"<pre><code>from examples.pytorch_dataloader import (\n    SKILL_TIER_LABELS,      # [\"beginner\", \"intermediate\", \"advanced\", \"professional\"]\n    SKILL_TIER_TO_ID,       # {\"beginner\": 0, \"intermediate\": 1, ...}\n    ID_TO_SKILL_TIER,       # {0: \"beginner\", 1: \"intermediate\", ...}\n)\n\n# Convert predictions back to labels\npredictions = model(batch[\"waveforms\"])\npredicted_ids = predictions.argmax(dim=1)\npredicted_labels = [ID_TO_SKILL_TIER[i.item()] for i in predicted_ids]\n</code></pre>"},{"location":"examples/pytorch-dataloader/#next-steps","title":"Next Steps","text":"<ul> <li>Feature Extraction - Extract mel spectrograms and pretrained features</li> <li>Filtering Samples - Filter dataset before creating DataLoader</li> <li>Hierarchical Labels - Use stroke/measure-level labels for sequence models</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to SOUSA! This section will help you get up and running with the synthetic drum rudiment dataset generator.</p>"},{"location":"getting-started/#overview","title":"Overview","text":"<p>SOUSA (Synthetic Open Unified Snare Assessment) generates synthetic drum rudiment datasets for machine learning training. You can either:</p> <ol> <li>Use the pre-generated dataset from HuggingFace Hub (easiest)</li> <li>Generate your own dataset locally with custom configurations</li> </ol>"},{"location":"getting-started/#quick-navigation","title":"Quick Navigation","text":"<ul> <li> <p> Installation</p> <p>Set up Python, install SOUSA, and configure FluidSynth for audio synthesis.</p> <p> Installation</p> </li> <li> <p> Quick Start</p> <p>Generate a test dataset and explore the samples in 5 minutes.</p> <p> Quick Start</p> </li> <li> <p> Loading Data</p> <p>Load the dataset from HuggingFace Hub or local files.</p> <p> Loading Data</p> </li> </ul>"},{"location":"getting-started/#recommended-path","title":"Recommended Path","text":""},{"location":"getting-started/#for-ml-practitioners","title":"For ML Practitioners","text":"<p>If you want to use SOUSA for training models, the fastest path is:</p> <pre><code>from datasets import load_dataset\n\n# Load from HuggingFace (no local installation needed)\ndataset = load_dataset(\"zkeown/sousa\")\n</code></pre> <p>See the Loading Data guide for more options.</p>"},{"location":"getting-started/#for-dataset-customization","title":"For Dataset Customization","text":"<p>If you want to generate custom datasets with different configurations:</p> <ol> <li>Follow the Installation guide</li> <li>Work through the Quick Start tutorial</li> <li>Explore the User Guide for advanced options</li> </ol>"},{"location":"getting-started/#requirements-at-a-glance","title":"Requirements at a Glance","text":"Requirement Minimum Recommended Python 3.10 3.11+ RAM 4 GB 8+ GB Disk (small preset) 1 GB 2 GB Disk (full preset) 100 GB 150 GB FluidSynth Required for audio -"},{"location":"getting-started/#what-youll-learn","title":"What You'll Learn","text":"<p>By the end of this section, you will be able to:</p> <ul> <li>Install SOUSA and its dependencies</li> <li>Generate a test dataset with MIDI and audio</li> <li>Load and explore samples programmatically</li> <li>Filter samples by skill level, rudiment, or score</li> <li>Prepare data for ML training pipelines</li> </ul>"},{"location":"getting-started/#need-help","title":"Need Help?","text":"<ul> <li>Check the User Guide for detailed examples</li> <li>See Limitations for known constraints</li> <li>Review Validation for quality assurance details</li> <li>Open an issue on GitHub for bugs or questions</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide covers installing SOUSA and its dependencies for dataset generation.</p> <p>Just want to use the dataset?</p> <p>If you only need to load the pre-generated dataset, you can skip local installation entirely: <pre><code>pip install datasets\nfrom datasets import load_dataset\ndataset = load_dataset(\"zkeown/sousa\")\n</code></pre></p>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+ (3.11 or 3.12 recommended)</li> <li>FluidSynth (required for audio synthesis)</li> <li>pip (Python package manager)</li> </ul>"},{"location":"getting-started/installation/#python-installation","title":"Python Installation","text":"<p>SOUSA requires Python 3.10 or later. Check your version:</p> <pre><code>python --version\n# or\npython3 --version\n</code></pre> <p>If you need to install Python, visit python.org/downloads or use a version manager like <code>pyenv</code>.</p>"},{"location":"getting-started/installation/#install-sousa","title":"Install SOUSA","text":""},{"location":"getting-started/installation/#basic-installation","title":"Basic Installation","text":"<p>Clone the repository and install in editable mode:</p> <pre><code>git clone https://github.com/zakkeown/SOUSA.git\ncd SOUSA\n\n# Create virtual environment (recommended)\npython -m venv .venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\n\n# Install base package\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#installation-extras","title":"Installation Extras","text":"<p>SOUSA provides optional dependency groups for different use cases:</p> DevelopmentHuggingFace HubMachine LearningDocumentationAll Extras <pre><code># Install with development tools (pytest, black, ruff)\npip install -e '.[dev]'\n</code></pre> <pre><code># Install with HuggingFace dependencies for uploading/downloading\npip install -e '.[hub]'\n</code></pre> <pre><code># Install with ML dependencies (PyTorch, transformers, etc.)\npip install -e '.[ml]'\n</code></pre> <pre><code># Install with MkDocs for building documentation\npip install -e '.[docs]'\n</code></pre> <pre><code># Install everything\npip install -e '.[dev,hub,ml,docs]'\n</code></pre>"},{"location":"getting-started/installation/#fluidsynth-installation","title":"FluidSynth Installation","text":"<p>FluidSynth is required for synthesizing audio from MIDI. Install it for your operating system:</p> macOSUbuntu/DebianWindowsConda <p>Using Homebrew:</p> <pre><code>brew install fluid-synth\n</code></pre> <p>Verify installation:</p> <pre><code>fluidsynth --version\n</code></pre> <p>Using apt:</p> <pre><code>sudo apt update\nsudo apt install fluidsynth libfluidsynth-dev\n</code></pre> <p>Verify installation:</p> <pre><code>fluidsynth --version\n</code></pre> <p>Option 1: Using Chocolatey</p> <pre><code>choco install fluidsynth\n</code></pre> <p>Option 2: Manual Installation</p> <ol> <li>Download FluidSynth from GitHub Releases</li> <li>Extract to a folder (e.g., <code>C:\\FluidSynth</code>)</li> <li>Add the <code>bin</code> folder to your system PATH</li> </ol> <p>Verify installation:</p> <pre><code>fluidsynth --version\n</code></pre> <p>If using Conda/Mamba:</p> <pre><code>conda install -c conda-forge fluidsynth\n</code></pre> <p>FluidSynth Required for Audio</p> <p>Without FluidSynth, you can still generate MIDI files and labels, but audio synthesis will fail. Use <code>--no-audio</code> flag if FluidSynth is not available: <pre><code>python scripts/generate_dataset.py --preset small\n</code></pre></p>"},{"location":"getting-started/installation/#soundfont-setup","title":"Soundfont Setup","text":"<p>Soundfonts (<code>.sf2</code> files) define the sounds used for audio synthesis. SOUSA includes a setup script to download recommended soundfonts:</p> <pre><code># Download recommended soundfonts (~170 MB)\npython scripts/setup_soundfonts.py\n</code></pre>"},{"location":"getting-started/installation/#soundfont-options","title":"Soundfont Options","text":"Default (Recommended)MinimalAll SoundfontsSpecific Soundfont <p>Downloads a good set for rudiment generation:</p> <pre><code>python scripts/setup_soundfonts.py\n</code></pre> <p>Includes:</p> <ul> <li>FluidR3_GM_GS (141 MB) - High-quality General MIDI</li> <li>Marching_Snare (0.2 MB) - Marching snare drum</li> <li>MT_Power_DrumKit (8.7 MB) - Punchy acoustic kit</li> </ul> <p>Just one good soundfont (~141 MB):</p> <pre><code>python scripts/setup_soundfonts.py --minimal\n</code></pre> <p>Download all available soundfonts (~460 MB):</p> <pre><code>python scripts/setup_soundfonts.py --all\n</code></pre> <p>Download a specific soundfont by name:</p> <pre><code>python scripts/setup_soundfonts.py --name Marching_Snare\n</code></pre>"},{"location":"getting-started/installation/#list-available-soundfonts","title":"List Available Soundfonts","text":"<pre><code>python scripts/setup_soundfonts.py --list\n</code></pre> <p>Output:</p> <pre><code>Available Soundfonts (all verified working)\n=================================================================\n\n*[INSTALLED] FluidR3_GM_GS\n   FluidR3 GM+GS merged - excellent quality, MIT license\n   Size: ~141 MB | License: MIT\n\n [available] GeneralUser_GS\n   Compact GM soundfont with great drums (~30MB)\n   Size: ~30 MB | License: Free for any use\n\n [available] Marching_Snare\n   Marching snare drum - great for rudiments\n   Size: ~0.2 MB | License: CC BY\n...\n</code></pre>"},{"location":"getting-started/installation/#custom-soundfonts","title":"Custom Soundfonts","text":"<p>You can use your own soundfonts by placing <code>.sf2</code> files in <code>data/soundfonts/</code> or specifying a path:</p> <pre><code>python scripts/generate_dataset.py --soundfont /path/to/my_soundfont.sf2\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Run the test suite to verify everything is working:</p> <pre><code># Run all tests\npytest\n\n# Run with verbose output\npytest -v\n\n# Run specific test module\npytest tests/test_profiles.py\n</code></pre> <p>Quick verification:</p> <pre><code># Check that SOUSA can be imported\npython -c \"from dataset_gen.pipeline.generate import DatasetGenerator; print('SOUSA installed successfully!')\"\n\n# Check FluidSynth binding\npython -c \"import fluidsynth; print('FluidSynth binding OK')\"\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#fluidsynth-not-found","title":"FluidSynth Not Found","text":"<p>If you get <code>ModuleNotFoundError: No module named 'fluidsynth'</code>:</p> <pre><code># Reinstall the Python binding\npip install --force-reinstall pyfluidsynth\n</code></pre> <p>If the system library is not found:</p> macOSLinux <pre><code># Ensure Homebrew's lib path is in DYLD_LIBRARY_PATH\nexport DYLD_LIBRARY_PATH=\"/opt/homebrew/lib:$DYLD_LIBRARY_PATH\"\n</code></pre> <pre><code># Ensure libfluidsynth is installed\nsudo apt install libfluidsynth-dev\n\n# Check library path\nldconfig -p | grep fluidsynth\n</code></pre>"},{"location":"getting-started/installation/#soundfont-download-fails","title":"Soundfont Download Fails","text":"<p>If soundfont downloads fail:</p> <ol> <li>Check your internet connection</li> <li>Try downloading manually from musical-artifacts.com</li> <li>Place <code>.sf2</code> files in <code>data/soundfonts/</code></li> </ol>"},{"location":"getting-started/installation/#import-errors","title":"Import Errors","text":"<p>If you get import errors after installation:</p> <pre><code># Ensure you're in the virtual environment\nsource .venv/bin/activate\n\n# Reinstall in editable mode\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once installation is complete:</p> <ol> <li>Quick Start - Generate your first dataset</li> <li>Loading Data - Access the pre-generated dataset</li> <li>User Guide - Detailed examples for ML tasks</li> </ol>"},{"location":"getting-started/loading/","title":"Loading the Dataset","text":"<p>This guide covers all methods for loading and accessing the SOUSA dataset.</p>"},{"location":"getting-started/loading/#from-huggingface-hub","title":"From HuggingFace Hub","text":"<p>The easiest way to use SOUSA is via the HuggingFace Hub. No local generation required.</p>"},{"location":"getting-started/loading/#basic-loading","title":"Basic Loading","text":"<pre><code>from datasets import load_dataset\n\n# Load the full dataset (all splits)\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Access splits\ntrain = dataset[\"train\"]\nval = dataset[\"validation\"]\ntest = dataset[\"test\"]\n\n# Get a sample\nsample = train[0]\nprint(f\"Rudiment: {sample['rudiment_slug']}\")\nprint(f\"Overall Score: {sample['overall_score']:.1f}\")\n</code></pre>"},{"location":"getting-started/loading/#load-specific-split","title":"Load Specific Split","text":"<pre><code>from datasets import load_dataset\n\n# Load only the training split\ntrain = load_dataset(\"zkeown/sousa\", split=\"train\")\n\n# Load only validation\nval = load_dataset(\"zkeown/sousa\", split=\"validation\")\n\n# Load a subset (first 1000 samples)\nsubset = load_dataset(\"zkeown/sousa\", split=\"train[:1000]\")\n</code></pre>"},{"location":"getting-started/loading/#streaming-for-memory-efficiency","title":"Streaming for Memory Efficiency","text":"<p>For large-scale training or limited memory, use streaming mode:</p> <pre><code>from datasets import load_dataset\n\n# Stream the dataset (loads samples on-demand)\ndataset = load_dataset(\"zkeown/sousa\", streaming=True)\n\n# Iterate through samples\nfor sample in dataset[\"train\"]:\n    # Process sample\n    print(sample[\"rudiment_slug\"])\n    break  # Just show first sample\n\n# Take first N samples\nfrom itertools import islice\nfirst_100 = list(islice(dataset[\"train\"], 100))\n</code></pre> <p>When to Use Streaming</p> <ul> <li>Training on the full 100K dataset</li> <li>Limited RAM (&lt; 16 GB)</li> <li>Preprocessing on-the-fly</li> <li>Distributed training</li> </ul>"},{"location":"getting-started/loading/#load-specific-columns","title":"Load Specific Columns","text":"<p>Reduce memory by loading only needed columns:</p> <pre><code>from datasets import load_dataset\n\n# Load only audio and labels\ndataset = load_dataset(\n    \"zkeown/sousa\",\n    columns=[\"audio\", \"overall_score\", \"skill_tier\", \"rudiment_slug\"]\n)\n</code></pre>"},{"location":"getting-started/loading/#from-local-files","title":"From Local Files","text":"<p>If you generated the dataset locally, load it from the output directory.</p>"},{"location":"getting-started/loading/#using-pandas","title":"Using Pandas","text":"<pre><code>import pandas as pd\nfrom pathlib import Path\n\ndataset_dir = Path(\"output/dataset\")\n\n# Load the main samples table\nsamples_df = pd.read_parquet(dataset_dir / \"labels\" / \"samples.parquet\")\n\n# Load hierarchical labels\nexercises_df = pd.read_parquet(dataset_dir / \"labels\" / \"exercises.parquet\")\nmeasures_df = pd.read_parquet(dataset_dir / \"labels\" / \"measures.parquet\")\nstrokes_df = pd.read_parquet(dataset_dir / \"labels\" / \"strokes.parquet\")\n\nprint(f\"Samples: {len(samples_df)}\")\nprint(f\"Exercises: {len(exercises_df)}\")\nprint(f\"Measures: {len(measures_df)}\")\nprint(f\"Strokes: {len(strokes_df)}\")\n</code></pre>"},{"location":"getting-started/loading/#using-huggingface-datasets-local","title":"Using HuggingFace Datasets (Local)","text":"<p>Load local parquet files with the HuggingFace datasets library:</p> <pre><code>from datasets import load_dataset\n\n# Load from local parquet files\ndataset = load_dataset(\n    \"parquet\",\n    data_dir=\"./output/dataset/labels\",\n    split=\"train\"  # or specify a data_files dict\n)\n</code></pre>"},{"location":"getting-started/loading/#using-pyarrow","title":"Using PyArrow","text":"<p>For maximum performance with large datasets:</p> <pre><code>import pyarrow.parquet as pq\n\n# Read with PyArrow\ntable = pq.read_table(\"output/dataset/labels/samples.parquet\")\n\n# Convert to pandas if needed\ndf = table.to_pandas()\n\n# Or iterate over row groups for memory efficiency\nparquet_file = pq.ParquetFile(\"output/dataset/labels/samples.parquet\")\nfor batch in parquet_file.iter_batches(batch_size=1000):\n    df_batch = batch.to_pandas()\n    # Process batch\n</code></pre>"},{"location":"getting-started/loading/#accessing-audio","title":"Accessing Audio","text":""},{"location":"getting-started/loading/#from-huggingface-dataset","title":"From HuggingFace Dataset","text":"<p>Audio is automatically loaded as numpy arrays:</p> <pre><code>sample = dataset[\"train\"][0]\naudio = sample[\"audio\"]\n\n# Audio data\naudio_array = audio[\"array\"]       # NumPy array (float32)\nsample_rate = audio[\"sampling_rate\"]  # 44100 Hz\n\nprint(f\"Duration: {len(audio_array) / sample_rate:.2f} seconds\")\nprint(f\"Shape: {audio_array.shape}\")\n</code></pre>"},{"location":"getting-started/loading/#play-audio-in-jupyter","title":"Play Audio in Jupyter","text":"<pre><code>from IPython.display import Audio\n\nsample = dataset[\"train\"][0]\nAudio(sample[\"audio\"][\"array\"], rate=sample[\"audio\"][\"sampling_rate\"])\n</code></pre>"},{"location":"getting-started/loading/#save-audio-to-file","title":"Save Audio to File","text":"<pre><code>import soundfile as sf\n\nsample = dataset[\"train\"][0]\naudio = sample[\"audio\"]\n\nsf.write(\n    \"output_sample.wav\",\n    audio[\"array\"],\n    audio[\"sampling_rate\"]\n)\n</code></pre>"},{"location":"getting-started/loading/#from-local-files_1","title":"From Local Files","text":"<pre><code>import soundfile as sf\nfrom pathlib import Path\n\n# Load audio by sample ID\nsample_id = \"beg042_single_paradiddle_100bpm_marching_practicedry\"\naudio_path = Path(\"output/dataset/audio\") / f\"{sample_id}.flac\"\n\naudio_data, sample_rate = sf.read(audio_path)\nprint(f\"Loaded {len(audio_data)} samples at {sample_rate} Hz\")\n</code></pre>"},{"location":"getting-started/loading/#batch-audio-loading","title":"Batch Audio Loading","text":"<pre><code>import soundfile as sf\nfrom pathlib import Path\nfrom concurrent.futures import ThreadPoolExecutor\n\ndef load_audio(sample_id):\n    \"\"\"Load audio for a single sample.\"\"\"\n    audio_path = Path(\"output/dataset/audio\") / f\"{sample_id}.flac\"\n    if audio_path.exists():\n        return sf.read(audio_path)\n    return None, None\n\n# Load multiple audio files in parallel\nsample_ids = samples_df[\"sample_id\"].head(100).tolist()\n\nwith ThreadPoolExecutor(max_workers=4) as executor:\n    results = list(executor.map(load_audio, sample_ids))\n\naudio_data = [(data, sr) for data, sr in results if data is not None]\nprint(f\"Loaded {len(audio_data)} audio files\")\n</code></pre>"},{"location":"getting-started/loading/#accessing-midi","title":"Accessing MIDI","text":""},{"location":"getting-started/loading/#from-local-files_2","title":"From Local Files","text":"<pre><code>import mido\nfrom pathlib import Path\n\n# Load MIDI by sample ID\nsample_id = \"beg042_single_paradiddle_100bpm_marching_practicedry\"\nmidi_path = Path(\"output/dataset/midi\") / f\"{sample_id}.mid\"\n\nmid = mido.MidiFile(midi_path)\n\n# Get basic info\nprint(f\"Tracks: {len(mid.tracks)}\")\nprint(f\"Ticks per beat: {mid.ticks_per_beat}\")\n\n# Iterate through messages\nfor track in mid.tracks:\n    for msg in track:\n        if msg.type == \"note_on\" and msg.velocity &gt; 0:\n            print(f\"Note: {msg.note}, Velocity: {msg.velocity}, Time: {msg.time}\")\n</code></pre>"},{"location":"getting-started/loading/#extract-note-events","title":"Extract Note Events","text":"<pre><code>def extract_notes(midi_path):\n    \"\"\"Extract note events from MIDI file.\"\"\"\n    mid = mido.MidiFile(midi_path)\n    notes = []\n    current_time = 0\n\n    for track in mid.tracks:\n        for msg in track:\n            current_time += msg.time\n            if msg.type == \"note_on\" and msg.velocity &gt; 0:\n                notes.append({\n                    \"time\": current_time,\n                    \"note\": msg.note,\n                    \"velocity\": msg.velocity\n                })\n\n    return notes\n\nnotes = extract_notes(\"output/dataset/midi/sample.mid\")\nprint(f\"Total notes: {len(notes)}\")\n</code></pre>"},{"location":"getting-started/loading/#convert-midi-to-dataframe","title":"Convert MIDI to DataFrame","text":"<pre><code>import pandas as pd\nimport mido\n\ndef midi_to_dataframe(midi_path):\n    \"\"\"Convert MIDI file to pandas DataFrame.\"\"\"\n    mid = mido.MidiFile(midi_path)\n    events = []\n    current_time = 0\n\n    for track in mid.tracks:\n        for msg in track:\n            current_time += msg.time\n            if msg.type == \"note_on\":\n                events.append({\n                    \"time_ticks\": current_time,\n                    \"time_seconds\": mido.tick2second(\n                        current_time, mid.ticks_per_beat, 500000\n                    ),\n                    \"note\": msg.note,\n                    \"velocity\": msg.velocity,\n                    \"is_note_on\": msg.velocity &gt; 0\n                })\n\n    return pd.DataFrame(events)\n\ndf = midi_to_dataframe(\"output/dataset/midi/sample.mid\")\nprint(df.head())\n</code></pre>"},{"location":"getting-started/loading/#working-with-splits","title":"Working with Splits","text":""},{"location":"getting-started/loading/#load-split-assignments","title":"Load Split Assignments","text":"<pre><code>import json\n\nwith open(\"output/dataset/splits.json\") as f:\n    splits = json.load(f)\n\nprint(f\"Train profiles: {len(splits['train_profile_ids'])}\")\nprint(f\"Val profiles: {len(splits['val_profile_ids'])}\")\nprint(f\"Test profiles: {len(splits['test_profile_ids'])}\")\n</code></pre>"},{"location":"getting-started/loading/#filter-by-split","title":"Filter by Split","text":"<pre><code># Using pandas\ntrain_df = samples_df[samples_df[\"split\"] == \"train\"]\nval_df = samples_df[samples_df[\"split\"] == \"val\"]\ntest_df = samples_df[samples_df[\"split\"] == \"test\"]\n\n# Using HuggingFace datasets\ntrain = dataset.filter(lambda x: x[\"split\"] == \"train\")\n</code></pre>"},{"location":"getting-started/loading/#creating-pytorch-dataloaders","title":"Creating PyTorch DataLoaders","text":""},{"location":"getting-started/loading/#basic-dataloader","title":"Basic DataLoader","text":"<pre><code>import torch\nfrom torch.utils.data import Dataset, DataLoader\nimport soundfile as sf\nfrom pathlib import Path\n\nclass SOUSADataset(Dataset):\n    def __init__(self, samples_df, audio_dir, transform=None):\n        self.samples = samples_df.reset_index(drop=True)\n        self.audio_dir = Path(audio_dir)\n        self.transform = transform\n\n    def __len__(self):\n        return len(self.samples)\n\n    def __getitem__(self, idx):\n        row = self.samples.iloc[idx]\n\n        # Load audio\n        audio_path = self.audio_dir / f\"{row['sample_id']}.flac\"\n        audio, sr = sf.read(audio_path)\n\n        # Get label\n        label = row[\"overall_score\"] / 100.0  # Normalize to 0-1\n\n        if self.transform:\n            audio = self.transform(audio)\n\n        return torch.tensor(audio, dtype=torch.float32), torch.tensor(label)\n\n# Create dataset and dataloader\ntrain_dataset = SOUSADataset(train_df, \"output/dataset/audio\")\ntrain_loader = DataLoader(train_dataset, batch_size=16, shuffle=True, num_workers=4)\n</code></pre>"},{"location":"getting-started/loading/#with-huggingface-datasets","title":"With HuggingFace Datasets","text":"<pre><code>from datasets import load_dataset\nfrom transformers import AutoFeatureExtractor\n\n# Load dataset\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Load feature extractor\nfeature_extractor = AutoFeatureExtractor.from_pretrained(\"facebook/wav2vec2-base\")\n\ndef preprocess(batch):\n    audio = batch[\"audio\"]\n    inputs = feature_extractor(\n        audio[\"array\"],\n        sampling_rate=audio[\"sampling_rate\"],\n        return_tensors=\"pt\",\n        padding=True,\n    )\n    inputs[\"labels\"] = batch[\"overall_score\"] / 100.0\n    return inputs\n\n# Apply preprocessing\ndataset = dataset.map(preprocess, remove_columns=[\"audio\"])\n\n# Convert to torch format\ndataset.set_format(\"torch\")\n\n# Use with DataLoader\ntrain_loader = DataLoader(dataset[\"train\"], batch_size=16, shuffle=True)\n</code></pre>"},{"location":"getting-started/loading/#caching-preprocessed-data","title":"Caching Preprocessed Data","text":"<p>For faster iteration during model development:</p> <pre><code>from datasets import load_dataset\n\n# Map with caching (persists across sessions)\ndataset = dataset.map(\n    preprocess_function,\n    cache_file_name=\"./cache/preprocessed_{split}\",\n    num_proc=4,  # Parallel processing\n)\n</code></pre>"},{"location":"getting-started/loading/#manual-feature-caching","title":"Manual Feature Caching","text":"<pre><code>import pickle\nfrom pathlib import Path\n\nCACHE_DIR = Path(\"./feature_cache\")\nCACHE_DIR.mkdir(exist_ok=True)\n\ndef get_cached_features(sample_id, audio_array, extract_fn):\n    \"\"\"Cache extracted features to disk.\"\"\"\n    cache_path = CACHE_DIR / f\"{sample_id}.pkl\"\n\n    if cache_path.exists():\n        with open(cache_path, \"rb\") as f:\n            return pickle.load(f)\n\n    features = extract_fn(audio_array)\n\n    with open(cache_path, \"wb\") as f:\n        pickle.dump(features, f)\n\n    return features\n</code></pre>"},{"location":"getting-started/loading/#memory-management","title":"Memory Management","text":""},{"location":"getting-started/loading/#for-large-datasets","title":"For Large Datasets","text":"<pre><code># Use streaming mode\ndataset = load_dataset(\"zkeown/sousa\", streaming=True)\n\n# Process in batches\ndef process_batch(batch):\n    # Your processing logic\n    return batch\n\n# Use batched mapping\ndataset = dataset.map(process_batch, batched=True, batch_size=100)\n</code></pre>"},{"location":"getting-started/loading/#reduce-memory-with-column-selection","title":"Reduce Memory with Column Selection","text":"<pre><code># Load only necessary columns\ndataset = load_dataset(\n    \"zkeown/sousa\",\n    columns=[\"audio\", \"overall_score\", \"skill_tier\"]\n)\n</code></pre>"},{"location":"getting-started/loading/#use-memory-mapping","title":"Use Memory Mapping","text":"<pre><code>from datasets import load_dataset\n\n# Keep data on disk, memory-map for access\ndataset = load_dataset(\"zkeown/sousa\", keep_in_memory=False)\n</code></pre>"},{"location":"getting-started/loading/#next-steps","title":"Next Steps","text":"<ul> <li>User Guide - ML task examples and best practices</li> <li>Data Format - Full schema documentation</li> <li>Limitations - Known constraints and recommendations</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Generate and explore a SOUSA dataset in 5 minutes.</p> <p>Prerequisites</p> <p>This guide assumes you have completed the Installation steps, including:</p> <ul> <li>Python 3.10+ installed</li> <li>SOUSA installed (<code>pip install -e .</code>)</li> <li>Soundfonts downloaded (<code>python scripts/setup_soundfonts.py</code>)</li> <li>FluidSynth installed (for audio generation)</li> </ul>"},{"location":"getting-started/quickstart/#generate-a-test-dataset","title":"Generate a Test Dataset","text":"<p>Generate a small test dataset (~1,200 samples) to verify your setup:</p> <pre><code>python scripts/generate_dataset.py --preset small --with-audio\n</code></pre> Without Audio <p>If you don't have FluidSynth installed or want faster generation: <pre><code>python scripts/generate_dataset.py --preset small\n</code></pre> This generates MIDI files and labels only (no audio).</p> <p>Expected output:</p> <pre><code>============================================================\nDATASET GENERATION PLAN\n============================================================\nPreset: small - Quick testing (~1,200 samples)\n\nConfiguration:\n  10 player profiles\n  40 rudiments\n  3 tempos per rudiment\n  1 augmentations per sample\n\nTotal samples: 1,200\n\nEstimated storage:\n  MIDI files:  ~2.3 MB\n  Labels:      ~0.6 MB\n  Audio files: ~1.8 GB\n  TOTAL:       ~1.8 GB\n============================================================\n\nLoaded 40 rudiments\n...\nDataset saved to: output/dataset\nTotal time: X.X minutes\n</code></pre>"},{"location":"getting-started/quickstart/#explore-the-dataset","title":"Explore the Dataset","text":""},{"location":"getting-started/quickstart/#dataset-structure","title":"Dataset Structure","text":"<p>After generation, your dataset is organized as:</p> <pre><code>output/dataset/\n\u251c\u2500\u2500 midi/              # MIDI files (*.mid)\n\u251c\u2500\u2500 audio/             # Audio files (*.flac)\n\u251c\u2500\u2500 labels/            # Parquet files with labels\n\u2502   \u251c\u2500\u2500 samples.parquet\n\u2502   \u251c\u2500\u2500 exercises.parquet\n\u2502   \u251c\u2500\u2500 measures.parquet\n\u2502   \u2514\u2500\u2500 strokes.parquet\n\u251c\u2500\u2500 splits.json        # Train/val/test split assignments\n\u2514\u2500\u2500 validation_report.json\n</code></pre>"},{"location":"getting-started/quickstart/#load-samples-in-python","title":"Load Samples in Python","text":"<pre><code>import pandas as pd\nfrom pathlib import Path\n\n# Load the samples table\nsamples_df = pd.read_parquet(\"output/dataset/labels/samples.parquet\")\n\n# View basic info\nprint(f\"Total samples: {len(samples_df)}\")\nprint(f\"Columns: {list(samples_df.columns)}\")\nprint(samples_df.head())\n</code></pre> <p>Output:</p> <pre><code>Total samples: 1200\nColumns: ['sample_id', 'profile_id', 'rudiment_slug', 'tempo_bpm', 'soundfont',\n          'augmentation_preset', 'split', 'skill_tier', 'overall_score', ...]\n</code></pre>"},{"location":"getting-started/quickstart/#access-a-sample","title":"Access a Sample","text":"<pre><code># Get the first sample\nsample = samples_df.iloc[0]\n\nprint(f\"Sample ID: {sample['sample_id']}\")\nprint(f\"Rudiment: {sample['rudiment_slug']}\")\nprint(f\"Tempo: {sample['tempo_bpm']} BPM\")\nprint(f\"Skill Tier: {sample['skill_tier']}\")\nprint(f\"Overall Score: {sample['overall_score']:.1f}\")\n</code></pre>"},{"location":"getting-started/quickstart/#load-audio","title":"Load Audio","text":"<pre><code>import soundfile as sf\n\n# Get audio path from sample\naudio_path = Path(\"output/dataset/audio\") / f\"{sample['sample_id']}.flac\"\n\n# Load audio\naudio_data, sample_rate = sf.read(audio_path)\nprint(f\"Duration: {len(audio_data) / sample_rate:.2f} seconds\")\nprint(f\"Sample rate: {sample_rate} Hz\")\n</code></pre>"},{"location":"getting-started/quickstart/#load-midi","title":"Load MIDI","text":"<pre><code>import mido\n\n# Get MIDI path from sample\nmidi_path = Path(\"output/dataset/midi\") / f\"{sample['sample_id']}.mid\"\n\n# Load MIDI\nmid = mido.MidiFile(midi_path)\n\n# Count notes\nnote_count = sum(1 for track in mid.tracks for msg in track if msg.type == 'note_on')\nprint(f\"Total notes: {note_count}\")\n</code></pre>"},{"location":"getting-started/quickstart/#filter-samples","title":"Filter Samples","text":""},{"location":"getting-started/quickstart/#by-skill-level","title":"By Skill Level","text":"<pre><code># Filter to beginners only\nbeginners = samples_df[samples_df['skill_tier'] == 'beginner']\nprint(f\"Beginner samples: {len(beginners)}\")\n\n# Filter to advanced and professional\nadvanced = samples_df[samples_df['skill_tier'].isin(['advanced', 'professional'])]\nprint(f\"Advanced/Professional samples: {len(advanced)}\")\n</code></pre>"},{"location":"getting-started/quickstart/#by-rudiment","title":"By Rudiment","text":"<pre><code># Get all paradiddle variants\nparadiddles = samples_df[samples_df['rudiment_slug'].str.contains('paradiddle')]\nprint(f\"Paradiddle samples: {len(paradiddles)}\")\n\n# List unique rudiments\nrudiments = samples_df['rudiment_slug'].unique()\nprint(f\"Rudiments in dataset: {len(rudiments)}\")\n</code></pre>"},{"location":"getting-started/quickstart/#by-score","title":"By Score","text":"<pre><code># High performers (score &gt; 80)\nhigh_scores = samples_df[samples_df['overall_score'] &gt; 80]\nprint(f\"High score samples: {len(high_scores)}\")\n\n# Poor timing (timing_accuracy &lt; 50)\npoor_timing = samples_df[samples_df['timing_accuracy'] &lt; 50]\nprint(f\"Poor timing samples: {len(poor_timing)}\")\n</code></pre>"},{"location":"getting-started/quickstart/#by-split","title":"By Split","text":"<pre><code># Get training set\ntrain = samples_df[samples_df['split'] == 'train']\nval = samples_df[samples_df['split'] == 'val']\ntest = samples_df[samples_df['split'] == 'test']\n\nprint(f\"Train: {len(train)}, Val: {len(val)}, Test: {len(test)}\")\n</code></pre>"},{"location":"getting-started/quickstart/#view-validation-report","title":"View Validation Report","text":"<p>The generation process automatically validates the dataset:</p> <pre><code>import json\n\nwith open(\"output/dataset/validation_report.json\") as f:\n    report = json.load(f)\n\nprint(f\"All checks passed: {report['verification']['all_passed']}\")\nprint(f\"Total checks: {report['verification']['total_checks']}\")\n</code></pre>"},{"location":"getting-started/quickstart/#play-audio-jupyter","title":"Play Audio (Jupyter)","text":"<p>If you're in a Jupyter notebook:</p> <pre><code>from IPython.display import Audio\n\n# Load audio\naudio_path = Path(\"output/dataset/audio\") / f\"{sample['sample_id']}.flac\"\naudio_data, sr = sf.read(audio_path)\n\n# Play in notebook\nAudio(audio_data, rate=sr)\n</code></pre>"},{"location":"getting-started/quickstart/#quick-statistics","title":"Quick Statistics","text":"<pre><code># Score statistics by skill tier\nprint(samples_df.groupby('skill_tier')['overall_score'].describe())\n\n# Sample counts by rudiment\nprint(samples_df['rudiment_slug'].value_counts().head(10))\n\n# Tempo distribution\nprint(samples_df['tempo_bpm'].value_counts().sort_index())\n</code></pre>"},{"location":"getting-started/quickstart/#generation-presets","title":"Generation Presets","text":"<p>SOUSA provides three presets for different use cases:</p> Preset Use Case Samples Time Storage <code>small</code> Testing/debugging ~1,200 ~5 min ~1 GB <code>medium</code> Development ~12,000 ~30 min ~10 GB <code>full</code> Production ~100,000 ~4 hours ~97 GB <pre><code># Quick test\npython scripts/generate_dataset.py --preset small --with-audio\n\n# Development\npython scripts/generate_dataset.py --preset medium --with-audio\n\n# Full production dataset\npython scripts/generate_dataset.py --preset full --with-audio\n</code></pre>"},{"location":"getting-started/quickstart/#custom-configuration","title":"Custom Configuration","text":"<p>Override preset values for custom generation:</p> <pre><code># Custom profile count\npython scripts/generate_dataset.py --preset small --profiles 20 --with-audio\n\n# Custom tempo sampling\npython scripts/generate_dataset.py --preset small --tempos 5 --with-audio\n\n# Custom output directory\npython scripts/generate_dataset.py --preset small --output ./my_dataset --with-audio\n\n# Parallel generation (faster)\npython scripts/generate_dataset.py --preset medium --workers 4 --with-audio\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<p>Now that you have a dataset:</p> <ol> <li>Loading Data - Load from HuggingFace or local files</li> <li>User Guide - Detailed ML task examples</li> <li>Data Format - Full schema documentation</li> <li>Validation - Quality assurance details</li> </ol>"},{"location":"plans/2026-02-19-huggingface-publish-design/","title":"SOUSA HuggingFace Publish Design","text":"<p>Date: 2026-02-19 Target repo: <code>zkeown/sousa</code> Dataset size: ~121 GB (100K samples, 100K audio FLAC, 20K MIDI, 4 label parquets)</p>"},{"location":"plans/2026-02-19-huggingface-publish-design/#problem","title":"Problem","text":"<p>SOUSA generates a synthetic drum rudiment dataset locally but it has never been published to HuggingFace Hub. The current generation pipeline writes media files into flat <code>audio/</code> and <code>midi/</code> directories (100K+ files total), which exceeds HuggingFace's per-directory limits and is poorly organized for browsing.</p> <p>An existing branch (<code>refactor/organize-by-rudiment</code>) refactors the Hub uploader to organize media into <code>audio/{rudiment_slug}/</code> subdirectories at upload time. However, the generation pipeline itself still outputs flat directories, creating a mismatch between source and published layout.</p>"},{"location":"plans/2026-02-19-huggingface-publish-design/#decision","title":"Decision","text":"<p>Align everything end-to-end: update the generation pipeline to write into rudiment subdirectories natively, regenerate the dataset, then publish to HuggingFace with a proper dataset card.</p>"},{"location":"plans/2026-02-19-huggingface-publish-design/#design","title":"Design","text":""},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-1-merge-refactororganize-by-rudiment","title":"Phase 1: Merge <code>refactor/organize-by-rudiment</code>","text":"<ol> <li>Check for merge conflicts against main</li> <li>Run test suite on the branch</li> <li>Fast-forward merge into main</li> <li>Delete the local branch</li> </ol>"},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-2-update-generation-pipeline-to-write-by-rudiment","title":"Phase 2: Update generation pipeline to write by rudiment","text":"<p><code>dataset_gen/pipeline/storage.py</code> changes:</p> <ul> <li><code>_setup_directories()</code>: Stop pre-creating flat <code>audio/</code> and <code>midi/</code> dirs. Rudiment subdirs are created on demand.</li> <li><code>_write_midi(sample_id, midi_data)</code> -&gt; <code>_write_midi(sample_id, rudiment_slug, midi_data)</code>: Write to <code>midi/{rudiment_slug}/{sample_id}.mid</code></li> <li><code>_write_audio(sample_id, audio_data)</code> -&gt; <code>_write_audio(sample_id, rudiment_slug, audio_data)</code>: Write to <code>audio/{rudiment_slug}/{sample_id}.flac</code></li> <li><code>write_sample()</code>: Pass <code>sample.rudiment_slug</code> to the write methods</li> <li>Stored <code>midi_path</code>/<code>audio_path</code> in parquet reflect new paths (e.g., <code>midi/single_stroke_roll/beg001_single_stroke_roll_120bpm.mid</code>)</li> </ul> <p><code>dataset_gen/hub/uploader.py</code> changes:</p> <ul> <li><code>_copy_media_by_rudiment()</code>: Update to handle already-organized source (read from <code>audio/{slug}/</code> subdirs instead of flat <code>audio/</code>)</li> <li>The uploader's <code>prepare()</code> creates the same <code>audio/{slug}/</code> layout in staging, but now source files are already organized identically</li> </ul> <p>Test and validation updates:</p> <ul> <li>Update <code>tests/test_hub_uploader.py</code> fixtures to use organized source layout</li> <li>Update any validation scripts that assume flat audio/midi directories</li> <li>Add integration test: generate small sample set, run uploader <code>prepare()</code>, verify staged paths match generation output paths</li> </ul> <p>Sousaphone model (sibling directory):</p> <ul> <li>Check and update any hardcoded audio/midi path references that assume flat layout</li> </ul>"},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-3-regenerate-dataset","title":"Phase 3: Regenerate dataset","text":"<ol> <li>Run: <code>python scripts/generate_dataset.py --preset full --with-audio</code> (~45 min)</li> <li>Validate:</li> <li><code>python scripts/check_generation.py output/dataset</code></li> <li><code>pytest tests/ -v</code></li> <li><code>python scripts/dataset_stats.py output/dataset</code></li> </ol>"},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-4-create-dataset-card","title":"Phase 4: Create dataset card","text":"<p>Create <code>output/dataset/README.md</code> with:</p> <ul> <li>YAML frontmatter: <code>dataset_info</code> with features, splits, size estimates; <code>license: apache-2.0</code>; tags: <code>audio</code>, <code>music</code>, <code>drum-rudiments</code>, <code>synthetic</code>, <code>snare-drum</code>, <code>midi</code>; task categories</li> <li>Dataset description: SOUSA overview, 40 PAS rudiments, 100K samples, 4 skill tiers, hierarchical labels</li> <li>Dataset structure: Splits (train/val/test by player profile), columns, file organization (<code>audio/{rudiment_slug}/</code>, <code>midi/{rudiment_slug}/</code>)</li> <li>Usage example: <code>load_dataset(\"zkeown/sousa\")</code> Python snippet</li> <li>Features table: Column names, types, descriptions</li> <li>Generation info: Link to GitHub repo, generation command</li> <li>Citation: BibTeX entry</li> </ul>"},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-5-upload-to-huggingface","title":"Phase 5: Upload to HuggingFace","text":"<ol> <li>Verify auth: <code>huggingface-cli whoami</code></li> <li>Dry run: <code>python scripts/push_to_hub.py zkeown/sousa --dry-run</code></li> <li>Confirm staging directory structure looks correct</li> <li>Verify split parquet files have correct sample counts</li> <li>Upload: <code>python scripts/push_to_hub.py zkeown/sousa</code></li> <li>Uses <code>upload_large_folder</code> (chunked, resumable)</li> <li>If connection drops, rerun the same command to resume</li> <li>Monitor progress in terminal output</li> </ol>"},{"location":"plans/2026-02-19-huggingface-publish-design/#phase-6-post-upload-verification","title":"Phase 6: Post-upload verification","text":"<ol> <li>Check dataset page at <code>https://huggingface.co/datasets/zkeown/sousa</code></li> <li>Verify dataset card renders correctly</li> <li>Smoke test:    <pre><code>from datasets import load_dataset\nds = load_dataset(\"zkeown/sousa\")\nprint(ds)\nprint(ds[\"train\"][0])\n</code></pre></li> <li>Verify split sample counts match local dataset</li> <li>Spot-check audio file accessibility</li> </ol>"},{"location":"plans/2026-02-19-huggingface-publish-design/#key-files","title":"Key Files","text":"File Role <code>dataset_gen/pipeline/storage.py</code> Generation output layout (Phase 2) <code>dataset_gen/hub/uploader.py</code> HF upload staging + upload (Phase 2, 5) <code>dataset_gen/hub/archiver.py</code> Deleted by merge (Phase 1) <code>scripts/push_to_hub.py</code> Upload CLI entry point (Phase 5) <code>scripts/generate_dataset.py</code> Regeneration entry point (Phase 3) <code>output/dataset/README.md</code> Dataset card (Phase 4) <code>tests/test_hub_uploader.py</code> Uploader tests (Phase 2)"},{"location":"plans/2026-02-19-huggingface-publish-design/#risks","title":"Risks","text":"<ul> <li>Upload time: 121 GB over <code>upload_large_folder</code> could take hours. Mitigated by resume capability.</li> <li>Regeneration variance: Synthetic data is seeded but any code change could shift output. Mitigated by validation suite.</li> <li>Sousaphone model compatibility: Path changes could break sibling project. Needs explicit check.</li> </ul>"},{"location":"plans/2026-02-19-huggingface-publish-design/#out-of-scope","title":"Out of scope","text":"<ul> <li>Changing the dataset content or labels</li> <li>Audio augmentation changes</li> <li>HuggingFace dataset viewer configuration (auto-detected from parquet)</li> </ul>"},{"location":"plans/2026-02-19-huggingface-publish-plan/","title":"HuggingFace Publish Implementation Plan","text":"<p>For Claude: REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.</p> <p>Goal: Publish the SOUSA dataset to HuggingFace Hub at <code>zkeown/sousa</code> with media organized by rudiment subdirectories.</p> <p>Architecture: Merge the existing organize-by-rudiment uploader refactor, then update the generation pipeline to match that layout natively. Regenerate the dataset, create a dataset card, and upload via <code>upload_large_folder</code>.</p> <p>Tech Stack: Python, pandas, pyarrow, huggingface_hub, soundfile, FluidSynth</p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-1-merge-refactororganize-by-rudiment-into-main","title":"Task 1: Merge <code>refactor/organize-by-rudiment</code> into main","text":"<p>Files: - Deleted: <code>dataset_gen/hub/archiver.py</code> - Deleted: <code>tests/test_hub_archiver.py</code> - Modified: <code>dataset_gen/hub/__init__.py</code> - Modified: <code>dataset_gen/hub/uploader.py</code> - Modified: <code>scripts/push_to_hub.py</code> - Modified: <code>tests/test_hub_uploader.py</code></p> <p>Step 1: Check for conflicts</p> <p>Run: <code>git merge --no-commit --no-ff refactor/organize-by-rudiment</code> Expected: Clean merge (no conflicts) Then: <code>git merge --abort</code> (we'll do the real merge next)</p> <p>Step 2: Run tests on the branch</p> <p>Run: <code>git stash &amp;&amp; git checkout refactor/organize-by-rudiment &amp;&amp; pytest tests/test_hub_uploader.py -v</code> Expected: All tests pass</p> <p>Step 3: Merge into main</p> <pre><code>git checkout main\ngit merge refactor/organize-by-rudiment --no-ff -m \"refactor(hub): organize media by rudiment, remove TAR sharding\"\n</code></pre> <p>Step 4: Run full test suite on main</p> <p>Run: <code>pytest tests/ -v</code> Expected: All tests pass</p> <p>Step 5: Delete the local branch</p> <p>Run: <code>git branch -d refactor/organize-by-rudiment</code></p> <p>Step 6: Commit checkpoint</p> <p>The merge commit from step 3 is the checkpoint. Verify: <code>git log --oneline -3</code></p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-2-update-storagepy-to-write-media-into-rudiment-subdirectories","title":"Task 2: Update <code>storage.py</code> to write media into rudiment subdirectories","text":"<p>Files: - Modify: <code>dataset_gen/pipeline/storage.py:88-150</code> (directory setup + write methods) - Test: <code>tests/test_storage.py</code> (or existing tests that exercise storage)</p> <p>Step 1: Write a failing test for rudiment-organized output</p> <p>Create or update test in the appropriate test file. The test generates a sample with a known <code>rudiment_slug</code> and verifies the output path includes the rudiment subdirectory.</p> <pre><code>def test_write_sample_organizes_by_rudiment(tmp_path):\n    \"\"\"write_sample should write audio/midi into rudiment subdirectories.\"\"\"\n    from dataset_gen.pipeline.storage import StorageConfig, DatasetWriter\n    from dataset_gen.labels.schema import Sample, ExerciseScores\n\n    config = StorageConfig(output_dir=tmp_path)\n    writer = DatasetWriter(config)\n\n    # Create minimal sample with rudiment_slug\n    sample = Sample(\n        sample_id=\"test001_flam_120bpm\",\n        profile_id=\"p1\",\n        rudiment_slug=\"flam\",\n        tempo_bpm=120,\n        duration_sec=2.0,\n        num_cycles=2,\n        skill_tier=\"beginner\",\n        skill_tier_binary=\"developing\",\n        dominant_hand=\"right\",\n        strokes=[],\n        measures=[],\n        exercise_scores=ExerciseScores(),\n    )\n\n    import numpy as np\n    audio_data = np.zeros(44100, dtype=np.float32)  # 1 second of silence\n    midi_data = b\"\\x00\" * 100  # Dummy MIDI bytes\n\n    writer.write_sample(sample, midi_data=midi_data, audio_data=audio_data)\n\n    # Verify files are in rudiment subdirectories\n    assert (tmp_path / \"midi\" / \"flam\" / \"test001_flam_120bpm.mid\").exists()\n    assert (tmp_path / \"audio\" / \"flam\" / \"test001_flam_120bpm.flac\").exists()\n\n    # Verify stored paths in sample reflect rudiment subdirs\n    assert sample.midi_path == \"midi/flam/test001_flam_120bpm.mid\"\n    assert sample.audio_path == \"audio/flam/test001_flam_120bpm.flac\"\n</code></pre> <p>Step 2: Run the test to verify it fails</p> <p>Run: <code>pytest tests/test_storage_rudiment.py::test_write_sample_organizes_by_rudiment -v</code> Expected: FAIL - files written to flat <code>midi/test001_flam_120bpm.mid</code> instead of <code>midi/flam/...</code></p> <p>Step 3: Implement the changes in <code>storage.py</code></p> <p>In <code>dataset_gen/pipeline/storage.py</code>, make these changes:</p> <ol> <li><code>_setup_directories()</code> (line 88-93): Remove pre-creation of flat <code>audio/</code> and <code>midi/</code> dirs. Only create <code>labels/</code> dir.</li> </ol> <pre><code>def _setup_directories(self) -&gt; None:\n    \"\"\"Create output directory structure.\"\"\"\n    self.config.output_dir.mkdir(parents=True, exist_ok=True)\n    (self.config.output_dir / self.config.labels_subdir).mkdir(exist_ok=True)\n</code></pre> <ol> <li><code>write_sample()</code> (line 95-130): Pass <code>sample.rudiment_slug</code> to write methods.</li> </ol> <pre><code># Write MIDI\nif midi_data is not None:\n    midi_path = self._write_midi(sample.sample_id, sample.rudiment_slug, midi_data)\n    paths[\"midi\"] = midi_path\n    sample.midi_path = str(midi_path.relative_to(self.config.output_dir))\n\n# Write audio\nif audio_data is not None:\n    audio_path = self._write_audio(sample.sample_id, sample.rudiment_slug, audio_data)\n    paths[\"audio\"] = audio_path\n    sample.audio_path = str(audio_path.relative_to(self.config.output_dir))\n</code></pre> <ol> <li><code>_write_midi()</code> (line 132-136): Accept <code>rudiment_slug</code>, create subdirectory, write there.</li> </ol> <pre><code>def _write_midi(self, sample_id: str, rudiment_slug: str, midi_data: bytes) -&gt; Path:\n    \"\"\"Write MIDI data to file in rudiment subdirectory.\"\"\"\n    rudiment_dir = self.config.output_dir / self.config.midi_subdir / rudiment_slug\n    rudiment_dir.mkdir(parents=True, exist_ok=True)\n    midi_path = rudiment_dir / f\"{sample_id}.mid\"\n    midi_path.write_bytes(midi_data)\n    return midi_path\n</code></pre> <ol> <li><code>_write_audio()</code> (line 138-150): Accept <code>rudiment_slug</code>, create subdirectory, write there.</li> </ol> <pre><code>def _write_audio(self, sample_id: str, rudiment_slug: str, audio_data: np.ndarray) -&gt; Path:\n    \"\"\"Write audio data to file in rudiment subdirectory.\"\"\"\n    ext = self.config.audio_format\n    rudiment_dir = self.config.output_dir / self.config.audio_subdir / rudiment_slug\n    rudiment_dir.mkdir(parents=True, exist_ok=True)\n    audio_path = rudiment_dir / f\"{sample_id}.{ext}\"\n\n    sf.write(\n        str(audio_path),\n        audio_data,\n        self.config.sample_rate,\n        format=self.config.audio_format.upper(),\n        subtype=self.config.audio_subtype,\n    )\n    return audio_path\n</code></pre> <ol> <li>Update the docstring (line 51-67) to reflect the new directory structure:</li> </ol> <pre><code>output_dir/\n\u251c\u2500\u2500 midi/\n\u2502   \u2514\u2500\u2500 {rudiment_slug}/\n\u2502       \u2514\u2500\u2500 {sample_id}.mid\n\u251c\u2500\u2500 audio/\n\u2502   \u2514\u2500\u2500 {rudiment_slug}/\n\u2502       \u2514\u2500\u2500 {sample_id}.flac\n\u251c\u2500\u2500 labels/\n\u2502   \u251c\u2500\u2500 strokes.parquet\n\u2502   \u251c\u2500\u2500 measures.parquet\n\u2502   \u251c\u2500\u2500 exercises.parquet\n\u2502   \u2514\u2500\u2500 samples.parquet\n\u2514\u2500\u2500 index.json\n</code></pre> <p>Step 4: Run the test to verify it passes</p> <p>Run: <code>pytest tests/test_storage_rudiment.py::test_write_sample_organizes_by_rudiment -v</code> Expected: PASS</p> <p>Step 5: Run the full test suite to check for regressions</p> <p>Run: <code>pytest tests/ -v</code> Expected: Some existing tests may fail if they assume flat layout. Note which ones.</p> <p>Step 6: Commit</p> <pre><code>git add dataset_gen/pipeline/storage.py tests/test_storage_rudiment.py\ngit commit -m \"feat(storage): write media files into rudiment subdirectories\"\n</code></pre>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-3-update-generate_datasetpy-worker-merge-to-handle-rudiment-subdirs","title":"Task 3: Update <code>generate_dataset.py</code> worker merge to handle rudiment subdirs","text":"<p>Files: - Modify: <code>scripts/generate_dataset.py:169-217</code> (merge_worker_outputs function)</p> <p>Step 1: Update <code>merge_worker_outputs()</code> to handle rudiment subdirectories</p> <p>The function currently creates flat <code>audio/</code> and <code>midi/</code> dirs and moves files directly. It needs to handle the nested <code>audio/{rudiment_slug}/</code> structure from each worker.</p> <p>Replace lines 169-217 with logic that: 1. Does NOT pre-create flat <code>main_midi_dir</code> / <code>main_audio_dir</code> 2. Iterates over worker <code>audio/</code> and <code>midi/</code> dirs, preserving rudiment subdirectory structure 3. Moves files from <code>worker_N/audio/{slug}/file.flac</code> to <code>output/audio/{slug}/file.flac</code></p> <pre><code>main_labels_dir = output_dir / \"labels\"\nmain_labels_dir.mkdir(parents=True, exist_ok=True)\n\n# ... (parquet merge logic stays the same) ...\n\n# Move MIDI and audio files preserving rudiment subdirectories\nfor w in range(num_workers):\n    worker_dir = output_dir / f\"worker_{w}\"\n\n    for media_type in [\"midi\", \"audio\"]:\n        worker_media = worker_dir / media_type\n        if not worker_media.exists():\n            continue\n        main_media = output_dir / media_type\n        # Walk rudiment subdirectories\n        for rudiment_dir in worker_media.iterdir():\n            if not rudiment_dir.is_dir():\n                continue\n            dest_dir = main_media / rudiment_dir.name\n            dest_dir.mkdir(parents=True, exist_ok=True)\n            for media_file in rudiment_dir.iterdir():\n                if media_file.is_file():\n                    shutil.move(str(media_file), str(dest_dir / media_file.name))\n\n    # Clean up worker directory\n    shutil.rmtree(worker_dir, ignore_errors=True)\n</code></pre> <p>Step 2: Run tests</p> <p>Run: <code>pytest tests/ -v</code> Expected: Pass</p> <p>Step 3: Commit</p> <pre><code>git add scripts/generate_dataset.py\ngit commit -m \"feat(generate): preserve rudiment subdirectory structure in worker merge\"\n</code></pre>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-4-update-validation-scripts-to-use-metadata-paths","title":"Task 4: Update validation scripts to use metadata paths","text":"<p>Files: - Modify: <code>dataset_gen/validation/verify.py:707</code> (MIDI path construction) - Modify: <code>dataset_gen/validation/audio_check.py:101,244</code> (audio path construction)</p> <p>Context: Both validators currently construct paths as <code>self.midi_dir / f\"{sample_id}.mid\"</code> (flat). They need to use the <code>audio_path</code> / <code>midi_path</code> columns from the metadata instead, since files are now in rudiment subdirectories.</p> <p>Step 1: Update <code>verify.py</code> MIDI alignment check</p> <p>At line 707, change: <pre><code># Old: midi_path = self.midi_dir / f\"{sample_id}.mid\"\n# New: use midi_path from metadata\nmidi_path_str = sample_row.get(\"midi_path\")\nif pd.isna(midi_path_str) or not midi_path_str:\n    continue\nmidi_path = self.dataset_dir / midi_path_str\n</code></pre></p> <p>Step 2: Update <code>audio_check.py</code> audio file resolution</p> <p>At line 244, change: <pre><code># Old: audio_path = self.audio_dir / f\"{sample_id}.flac\"\n# New: use audio_path from metadata\naudio_path_str = row.get(\"audio_path\")\nif pd.isna(audio_path_str) or not audio_path_str:\n    continue\naudio_path = self.dataset_dir / audio_path_str\n</code></pre></p> <p>Also update line 101: remove <code>self.audio_dir = self.dataset_dir / \"audio\"</code> if no longer needed (check all usages first).</p> <p>At lines 369-371 (<code>__main__</code> section), update the audio dir existence check to check for <code>audio/</code> with subdirectories rather than flat files.</p> <p>Step 3: Run tests</p> <p>Run: <code>pytest tests/ -v</code> Expected: Pass</p> <p>Step 4: Commit</p> <pre><code>git add dataset_gen/validation/verify.py dataset_gen/validation/audio_check.py\ngit commit -m \"fix(validation): resolve media paths from metadata instead of flat directory\"\n</code></pre>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-5-update-hub-uploader-to-handle-already-organized-source","title":"Task 5: Update hub uploader to handle already-organized source","text":"<p>Files: - Modify: <code>dataset_gen/hub/uploader.py</code> (<code>_copy_media_by_rudiment</code> method)</p> <p>Context: After the merge in Task 1, the uploader reads from flat <code>audio/</code> and reorganizes into <code>audio/{slug}/</code>. Now that generation writes into <code>audio/{slug}/</code> natively, the uploader's source path construction needs updating. The source files are at <code>audio/{slug}/{filename}</code> not <code>audio/{filename}</code>.</p> <p>Step 1: Update <code>_copy_media_by_rudiment()</code></p> <p>The method currently looks up source files as <code>src_dir / filename</code>. It needs to look them up as <code>src_dir / slug / filename</code> since the source is now organized by rudiment.</p> <pre><code># Change from:\n# src_file = src_dir / filename\n# To:\nsrc_file = src_dir / slug / filename\n</code></pre> <p>The destination path stays the same (it's already <code>dst_base / slug / filename</code>).</p> <p>Step 2: Run uploader tests</p> <p>Run: <code>pytest tests/test_hub_uploader.py -v</code></p> <p>Update test fixtures if needed: source audio/midi files should be in rudiment subdirectories.</p> <p>Step 3: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py tests/test_hub_uploader.py\ngit commit -m \"fix(hub): read media from rudiment subdirectories in source\"\n</code></pre>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-6-integration-test-generation-output-matches-uploader-expectations","title":"Task 6: Integration test -- generation output matches uploader expectations","text":"<p>Files: - Create: <code>tests/test_hub_integration.py</code></p> <p>Step 1: Write the integration test</p> <pre><code>\"\"\"Integration test: generation output layout matches uploader staging.\"\"\"\nimport json\nimport numpy as np\nimport pandas as pd\nimport pytest\n\nfrom dataset_gen.pipeline.storage import StorageConfig, DatasetWriter\nfrom dataset_gen.hub.uploader import HubConfig, DatasetUploader\nfrom dataset_gen.labels.schema import Sample, ExerciseScores\n\n\n@pytest.fixture\ndef generated_dataset(tmp_path):\n    \"\"\"Generate a small dataset using the storage pipeline.\"\"\"\n    config = StorageConfig(output_dir=tmp_path)\n    writer = DatasetWriter(config)\n\n    rudiments = [\"flam\", \"paradiddle\", \"single_stroke_roll\"]\n    profiles = {\"p1\": \"train\", \"p2\": \"val\", \"p3\": \"test\"}\n\n    for profile_id, split in profiles.items():\n        for slug in rudiments:\n            sample_id = f\"test_{slug}_{profile_id}\"\n            sample = Sample(\n                sample_id=sample_id,\n                profile_id=profile_id,\n                rudiment_slug=slug,\n                tempo_bpm=120,\n                duration_sec=2.0,\n                num_cycles=2,\n                skill_tier=\"beginner\",\n                skill_tier_binary=\"developing\",\n                dominant_hand=\"right\",\n                strokes=[],\n                measures=[],\n                exercise_scores=ExerciseScores(),\n            )\n            audio = np.zeros(44100, dtype=np.float32)\n            midi = b\"\\x00\" * 100\n            writer.write_sample(sample, midi_data=midi, audio_data=audio)\n\n    writer.flush()\n\n    # Create splits.json\n    splits = {\n        \"train_profile_ids\": [\"p1\"],\n        \"val_profile_ids\": [\"p2\"],\n        \"test_profile_ids\": [\"p3\"],\n    }\n    with open(tmp_path / \"splits.json\", \"w\") as f:\n        json.dump(splits, f)\n\n    return tmp_path\n\n\ndef test_generation_layout_matches_uploader(generated_dataset):\n    \"\"\"Verify uploader can stage a dataset generated with rudiment subdirs.\"\"\"\n    config = HubConfig(dataset_dir=generated_dataset, repo_id=\"test/repo\")\n    uploader = DatasetUploader(config)\n\n    staging_dir = uploader.prepare()\n\n    # Check parquet has correct paths\n    train_df = pd.read_parquet(staging_dir / \"data\" / \"train-00000-of-00001.parquet\")\n    assert \"audio\" in train_df.columns\n\n    # Every audio path in parquet should point to a real file in staging\n    for _, row in train_df.iterrows():\n        audio_path = row.get(\"audio\")\n        if audio_path:\n            assert (staging_dir / audio_path).exists(), f\"Missing: {audio_path}\"\n\n        midi_path = row.get(\"midi\")\n        if midi_path:\n            assert (staging_dir / midi_path).exists(), f\"Missing: {midi_path}\"\n</code></pre> <p>Step 2: Run the integration test</p> <p>Run: <code>pytest tests/test_hub_integration.py -v</code> Expected: PASS</p> <p>Step 3: Commit</p> <pre><code>git add tests/test_hub_integration.py\ngit commit -m \"test: add integration test for generation-to-upload path consistency\"\n</code></pre>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-7-regenerate-the-dataset","title":"Task 7: Regenerate the dataset","text":"<p>Step 1: Delete old dataset output</p> <p>Run: <code>rm -rf output/dataset</code></p> <p>Step 2: Regenerate with full preset and audio</p> <p>Run: <code>python scripts/generate_dataset.py --preset full --with-audio</code> Expected: ~45 minutes. Output at <code>output/dataset/</code> with <code>audio/{slug}/</code> and <code>midi/{slug}/</code> subdirectories.</p> <p>Step 3: Quick validation</p> <p>Run: <code>python scripts/check_generation.py output/dataset</code> Expected: Exit code 0, no critical issues.</p> <p>Step 4: Full test suite</p> <p>Run: <code>pytest tests/ -v</code> Expected: All pass.</p> <p>Step 5: Dataset stats</p> <p>Run: <code>python scripts/dataset_stats.py output/dataset</code> Expected: ~100K samples, ~100K audio files, ~20K MIDI files across 40 rudiment subdirectories.</p> <p>Step 6: Spot-check directory structure</p> <p>Run: <code>ls output/dataset/audio/ | head -10</code> -- should list rudiment slugs. Run: <code>ls output/dataset/audio/single_stroke_roll/ | head -5</code> -- should list FLAC files. Run: <code>ls output/dataset/midi/flam/ | head -5</code> -- should list MID files.</p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-8-create-dataset-card","title":"Task 8: Create dataset card","text":"<p>Files: - Create: <code>output/dataset/README.md</code></p> <p>Step 1: Create the dataset card</p> <p>Write <code>output/dataset/README.md</code> with YAML frontmatter and markdown content.</p> <p>The card should include: - YAML frontmatter with: <code>license</code>, <code>task_categories</code>, <code>tags</code>, <code>size_categories</code>, <code>dataset_info</code> (features, splits) - Description of SOUSA: what it is, 40 PAS rudiments, 100K samples, 4 skill tiers - Dataset structure: splits (train/val/test by player profile), file organization - Features table: all columns from the merged parquet with types and descriptions - Usage example with <code>load_dataset</code> - Generation info with link to GitHub - Citation BibTeX</p> <p>Refer to existing parquet schema for column names and types. Key columns: - From <code>samples.parquet</code>: sample_id, profile_id, rudiment_slug, tempo_bpm, duration_sec, num_cycles, skill_tier, skill_tier_binary, dominant_hand, midi_path, audio_path, num_strokes, num_measures, soundfont, augmentation_preset, augmentation_group_id, aug_* - From <code>exercises.parquet</code>: timing_accuracy, timing_consistency, tempo_stability, subdivision_evenness, velocity_control, accent_differentiation, accent_accuracy, hand_balance, weak_hand_index, flam_quality, diddle_quality, roll_sustain, groove_feel_proxy, overall_score</p> <p>Step 2: Verify the card renders</p> <p>Visually inspect the markdown. Check YAML is valid: <code>python -c \"import yaml; yaml.safe_load(open('output/dataset/README.md').read().split('---')[1])\"</code></p> <p>Step 3: Commit code changes (not dataset output)</p> <pre><code>git add -A  # Only staged code changes, NOT output/dataset\ngit commit -m \"docs: create HuggingFace dataset card\"\n</code></pre> <p>Note: The dataset card lives in <code>output/dataset/</code> which is gitignored. It will be uploaded to HF Hub.</p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-9-dry-run-upload","title":"Task 9: Dry-run upload","text":"<p>Step 1: Verify HuggingFace auth</p> <p>Run: <code>huggingface-cli whoami</code> Expected: Shows <code>zkeown</code> username.</p> <p>Step 2: Install hub dependencies if needed</p> <p>Run: <code>pip install -e '.[hub]'</code></p> <p>Step 3: Dry-run upload</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa --dry-run</code></p> <p>Expected output: - Staging directory created at <code>output/dataset/hf_staging</code> - Shows sample counts per split - Shows file counts - Says \"DRY RUN complete\"</p> <p>Step 4: Inspect staging directory</p> <p>Run: <code>ls output/dataset/hf_staging/</code> -- should show <code>data/</code>, <code>audio/</code>, <code>midi/</code>, <code>README.md</code> Run: <code>ls output/dataset/hf_staging/audio/</code> -- should show 40 rudiment subdirectories Run: <code>ls output/dataset/hf_staging/data/</code> -- should show 3 parquet files (train/val/test)</p> <p>Verify parquet content: <pre><code>python -c \"\nimport pandas as pd\nfor split in ['train', 'validation', 'test']:\n    df = pd.read_parquet(f'output/dataset/hf_staging/data/{split}-00000-of-00001.parquet')\n    print(f'{split}: {len(df)} samples, columns: {len(df.columns)}')\n    print(f'  audio paths sample: {df[\\\"audio\\\"].dropna().iloc[0]}')\n\"\n</code></pre></p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-10-upload-to-huggingface-hub","title":"Task 10: Upload to HuggingFace Hub","text":"<p>Step 1: Run the upload</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa</code></p> <p>This will: 1. Create the <code>zkeown/sousa</code> dataset repository on HF Hub 2. Prepare staging directory (parquet + symlinked audio/midi) 3. Upload via <code>upload_large_folder</code> (chunked, resumable)</p> <p>Expected: Long-running process. Monitor terminal output for progress.</p> <p>Step 2: If upload fails partway, resume</p> <p>Simply rerun: <code>python scripts/push_to_hub.py zkeown/sousa</code> The <code>upload_large_folder</code> API detects already-uploaded files and skips them.</p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-11-post-upload-verification","title":"Task 11: Post-upload verification","text":"<p>Step 1: Check HF web UI</p> <p>Visit <code>https://huggingface.co/datasets/zkeown/sousa</code> -- verify: - Dataset card renders correctly - File browser shows <code>audio/</code>, <code>midi/</code>, <code>data/</code> directories - <code>audio/</code> contains rudiment subdirectories - Parquet viewer shows data</p> <p>Step 2: Load dataset programmatically</p> <pre><code>from datasets import load_dataset\nds = load_dataset(\"zkeown/sousa\")\nprint(ds)\nprint(ds[\"train\"][0])\nprint(f\"Train: {len(ds['train'])}, Val: {len(ds['validation'])}, Test: {len(ds['test'])}\")\n</code></pre> <p>Expected: Matches local dataset counts.</p> <p>Step 3: Final commit</p> <p>If any fixes were needed, commit them: <pre><code>git add -A\ngit commit -m \"chore: post-upload fixes\"\n</code></pre></p>"},{"location":"plans/2026-02-19-huggingface-publish-plan/#task-12-update-sousaphone-sibling-project","title":"Task 12: Update SOUSAphone (sibling project)","text":"<p>Files: - Check: <code>/Users/zakkeown/Code/SOUSAphone/sousa/data/dataset.py:194</code> - Check: <code>/Users/zakkeown/Code/SOUSAphone/tests/data/test_dataset.py:17-22</code></p> <p>Context: SOUSAphone's <code>SOUSADataset.__getitem__()</code> loads audio via <code>self.dataset_path / row[\"audio_path\"]</code>. Since <code>audio_path</code> in the regenerated parquet now includes the rudiment slug (e.g., <code>audio/flam/test001.flac</code>), this should work automatically. But we need to verify and update test fixtures.</p> <p>Step 1: Verify SOUSAphone still loads correctly</p> <p>The metadata-driven path construction (<code>self.dataset_path / row[\"audio_path\"]</code>) should work with the new paths. Verify by pointing SOUSAphone at the regenerated dataset and running its tests.</p> <p>Step 2: Update test fixtures if needed</p> <p>The mock CSV in <code>tests/data/test_dataset.py</code> uses flat paths like <code>audio/sample_001.flac</code>. Update these to include rudiment slugs: <code>audio/flam/sample_001.flac</code>.</p> <p>Step 3: Run SOUSAphone tests</p> <p>Run: <code>cd /Users/zakkeown/Code/SOUSAphone &amp;&amp; pytest tests/ -v</code></p> <p>Step 4: Commit SOUSAphone changes if any</p> <pre><code>cd /Users/zakkeown/Code/SOUSAphone\ngit add -A\ngit commit -m \"fix: update test fixtures for rudiment-organized audio paths\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/","title":"Parquet Hub Migration Design","text":"<p>Date: 2026-02-20 Status: Approved Problem: Hub upload produces 120K+ individual files (MIDI + FLAC), exceeding HuggingFace's 100K file limit. Solution: Embed media as binary columns in Parquet shards, reduce to ~130 files total.</p>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#repository-structure","title":"Repository Structure","text":"<pre><code>zkeown/sousa/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 audio/\n\u2502   \u251c\u2500\u2500 train-00000-of-00096.parquet      # ~1GB each\n\u2502   \u251c\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 validation-00000-of-00019.parquet\n\u2502   \u2514\u2500\u2500 test-00000-of-00027.parquet\n\u251c\u2500\u2500 midi_only/\n\u2502   \u251c\u2500\u2500 train-00000-of-00003.parquet\n\u2502   \u251c\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 test-00000-of-00001.parquet\n\u251c\u2500\u2500 labels_only/\n\u2502   \u251c\u2500\u2500 train-00000-of-00001.parquet\n\u2502   \u251c\u2500\u2500 validation-00000-of-00001.parquet\n\u2502   \u2514\u2500\u2500 test-00000-of-00001.parquet\n\u2514\u2500\u2500 auxiliary/\n    \u251c\u2500\u2500 strokes.parquet\n    \u2514\u2500\u2500 measures.parquet\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#three-dataset-configurations","title":"Three Dataset Configurations","text":"<pre><code>from datasets import load_dataset\n\nds = load_dataset(\"zkeown/sousa\")                  # \"audio\" config (default), ~96GB\nds = load_dataset(\"zkeown/sousa\", \"midi_only\")      # MIDI + labels, ~2.5GB\nds = load_dataset(\"zkeown/sousa\", \"labels_only\")    # Pure tabular, ~50MB\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#schema","title":"Schema","text":""},{"location":"plans/2026-02-20-parquet-hub-migration-design/#main-configs-audio-midi_only-labels_only","title":"Main Configs (audio / midi_only / labels_only)","text":"Column Type In audio In midi_only In labels_only sample_id string Y Y Y profile_id string Y Y Y rudiment_slug string Y Y Y skill_tier string Y Y Y tempo_bpm float64 Y Y Y duration_sec float64 Y Y Y num_cycles int64 Y Y Y dominant_hand string Y Y Y soundfont string Y Y Y augmentation_preset string Y Y Y audio Audio (FLAC + sr) Y - - midi binary Y Y - timing_accuracy float64 Y Y Y timing_consistency float64 Y Y Y tempo_stability float64 Y Y Y subdivision_evenness float64 Y Y Y velocity_control float64 Y Y Y accent_differentiation float64 Y Y Y accent_accuracy float64 Y Y Y hand_balance float64 Y Y Y weak_hand_index float64 Y Y Y flam_quality float64 Y Y Y diddle_quality float64 Y Y Y roll_sustain float64 Y Y Y groove_feel_proxy float64 Y Y Y overall_score float64 Y Y Y <ul> <li><code>audio</code> column uses HF <code>Audio</code> feature type (FLAC bytes + sampling_rate: 44100)</li> <li><code>midi</code> column uses <code>Value(\"binary\")</code> (raw .mid file bytes)</li> </ul>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#auxiliary-tables","title":"Auxiliary Tables","text":"<p>Uploaded to <code>auxiliary/</code> directory, not part of any config. Loaded separately:</p> <pre><code>import pandas as pd\nstrokes = pd.read_parquet(\"hf://datasets/zkeown/sousa/auxiliary/strokes.parquet\")\nmeasures = pd.read_parquet(\"hf://datasets/zkeown/sousa/auxiliary/measures.parquet\")\n</code></pre> <p>These contain stroke-level (35M rows) and measure-level (10M rows) hierarchical labels, joinable on <code>sample_id</code>.</p>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#implementation-scope","title":"Implementation Scope","text":""},{"location":"plans/2026-02-20-parquet-hub-migration-design/#modified-files","title":"Modified Files","text":"<ol> <li><code>dataset_gen/hub/uploader.py</code> \u2014 Major rewrite:</li> <li>Replace staging/symlink approach with <code>datasets.DatasetDict</code> construction</li> <li>Build three configs by iterating samples, reading audio/MIDI bytes</li> <li>Push each config via <code>dataset_dict.push_to_hub(config_name=..., max_shard_size=\"1GB\")</code></li> <li>Add hub purge step before upload</li> <li>Upload auxiliary tables via <code>HfApi.upload_file()</code></li> <li> <p>Remove: <code>_copy_media_by_rudiment()</code>, symlink logic, staging directory concept</p> </li> <li> <p><code>scripts/push_to_hub.py</code> \u2014 Update CLI:</p> </li> <li>Remove <code>--no-audio</code> / <code>--no-midi</code> flags</li> <li>Add <code>--configs</code> (select which configs to upload, default: all)</li> <li>Add <code>--purge</code> (clean existing repo before upload, default: prompt)</li> <li> <p>Add <code>--max-shard-size</code> (default: \"1GB\")</p> </li> <li> <p><code>output/dataset/README.md</code> \u2014 Update YAML frontmatter to declare configs</p> </li> <li> <p>Tests \u2014 New test coverage for uploader schema and round-trip verification</p> </li> </ol>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#unchanged","title":"Unchanged","text":"<ul> <li><code>dataset_gen/pipeline/storage.py</code> \u2014 generation pipeline untouched</li> <li><code>dataset_gen/pipeline/generate.py</code> \u2014 dataset generation untouched</li> <li>Existing test suite \u2014 generation tests unchanged</li> </ul>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#upload-process","title":"Upload Process","text":"<ol> <li>Purge: Delete all existing files from <code>zkeown/sousa</code> (except <code>.gitattributes</code>)</li> <li>Upload <code>labels_only</code> (~50MB, validates pipeline)</li> <li>Upload <code>midi_only</code> (~2.5GB)</li> <li>Upload <code>audio</code> (~96GB across ~96 shards)</li> <li>Upload auxiliary (strokes + measures parquets)</li> <li>Upload README.md</li> </ol> <p>Each config is a separate commit. Partial failures leave the repo usable.</p>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#safety","title":"Safety","text":"<ul> <li><code>--dry-run</code> builds DatasetDict and prints schema/shard count without uploading</li> <li><code>push_to_hub</code> is resumable (re-run picks up where it left off)</li> <li><code>--purge</code> prompts for confirmation unless <code>--yes</code> is passed</li> </ul>"},{"location":"plans/2026-02-20-parquet-hub-migration-design/#estimated-sizes","title":"Estimated Sizes","text":"Config Size Shards audio ~96GB ~96 midi_only ~2.5GB ~3 labels_only ~50MB 3 auxiliary ~55MB 2 Total ~99GB ~130 files"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/","title":"Parquet Hub Migration Implementation Plan","text":"<p>For Claude: REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.</p> <p>Goal: Replace the 120K-file hub upload with Parquet-embedded media across three configs (audio, midi_only, labels_only), reducing to ~130 files.</p> <p>Architecture: Rewrite <code>DatasetUploader</code> to build HuggingFace <code>DatasetDict</code> objects with Audio and binary MIDI columns, then push via the <code>datasets</code> API with <code>max_shard_size=\"1GB\"</code>. Three configs share the same metadata/scores but differ in media columns. Auxiliary stroke/measure tables are uploaded separately.</p> <p>Tech Stack: <code>datasets</code> library (Audio feature type, DatasetDict, push_to_hub), <code>huggingface_hub</code> (HfApi for repo management and auxiliary uploads), <code>pandas</code> (DataFrame manipulation), <code>pyarrow</code>.</p>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-1-rewrite-hubconfig-dataclass","title":"Task 1: Rewrite HubConfig dataclass","text":"<p>Files: - Modify: <code>dataset_gen/hub/uploader.py:24-52</code></p> <p>Step 1: Write the failing test</p> <p>Add to <code>tests/test_hub_uploader.py</code>:</p> <pre><code>class TestHubConfigParquet:\n    \"\"\"Tests for updated HubConfig dataclass.\"\"\"\n\n    def test_default_configs_is_all_three(self, tmp_path):\n        \"\"\"configs defaults to all three: audio, midi_only, labels_only.\"\"\"\n        config = HubConfig(dataset_dir=tmp_path, repo_id=\"test/repo\")\n        assert config.configs == [\"audio\", \"midi_only\", \"labels_only\"]\n\n    def test_custom_configs(self, tmp_path):\n        \"\"\"configs can be set to a subset.\"\"\"\n        config = HubConfig(\n            dataset_dir=tmp_path,\n            repo_id=\"test/repo\",\n            configs=[\"labels_only\"],\n        )\n        assert config.configs == [\"labels_only\"]\n\n    def test_max_shard_size_default(self, tmp_path):\n        \"\"\"max_shard_size defaults to 1GB.\"\"\"\n        config = HubConfig(dataset_dir=tmp_path, repo_id=\"test/repo\")\n        assert config.max_shard_size == \"1GB\"\n\n    def test_no_staging_dir(self, tmp_path):\n        \"\"\"staging_dir concept is removed.\"\"\"\n        config = HubConfig(dataset_dir=tmp_path, repo_id=\"test/repo\")\n        assert not hasattr(config, \"staging_dir\")\n\n    def test_no_include_audio_midi_flags(self, tmp_path):\n        \"\"\"include_audio/include_midi flags are removed.\"\"\"\n        config = HubConfig(dataset_dir=tmp_path, repo_id=\"test/repo\")\n        assert not hasattr(config, \"include_audio\")\n        assert not hasattr(config, \"include_midi\")\n</code></pre> <p>Step 2: Run test to verify it fails</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestHubConfigParquet -v</code> Expected: FAIL (old HubConfig doesn't have <code>configs</code> field, still has <code>staging_dir</code>/<code>include_audio</code>/<code>include_midi</code>)</p> <p>Step 3: Rewrite HubConfig</p> <p>Replace the <code>HubConfig</code> dataclass in <code>dataset_gen/hub/uploader.py</code>:</p> <pre><code>@dataclass\nclass HubConfig:\n    \"\"\"Configuration for HuggingFace Hub upload.\"\"\"\n\n    # Source dataset directory\n    dataset_dir: Path\n\n    # Hub settings\n    repo_id: str\n    private: bool = False\n    token: str | None = None\n\n    # Which configs to upload: \"audio\", \"midi_only\", \"labels_only\"\n    configs: list[str] | None = None\n\n    # Shard settings\n    max_shard_size: str = \"1GB\"\n\n    def __post_init__(self):\n        self.dataset_dir = Path(self.dataset_dir)\n        if self.configs is None:\n            self.configs = [\"audio\", \"midi_only\", \"labels_only\"]\n</code></pre> <p>Step 4: Run test to verify it passes</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestHubConfigParquet -v</code> Expected: PASS</p> <p>Step 5: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py tests/test_hub_uploader.py\ngit commit -m \"refactor(hub): rewrite HubConfig for Parquet-native upload\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-2-build-the-datasetdict-construction-logic","title":"Task 2: Build the DatasetDict construction logic","text":"<p>This is the core of the migration \u2014 a method that reads local parquets + media files and builds a HuggingFace <code>DatasetDict</code> with embedded binary data.</p> <p>Files: - Modify: <code>dataset_gen/hub/uploader.py</code> - Test: <code>tests/test_hub_uploader.py</code></p> <p>Step 1: Write the failing test</p> <p>Add to <code>tests/test_hub_uploader.py</code>. This test uses the existing <code>sample_dataset</code> fixture but enhanced with actual audio/MIDI file bytes:</p> <pre><code>class TestBuildDatasetDict:\n    \"\"\"Tests for DatasetDict construction with embedded media.\"\"\"\n\n    @pytest.fixture\n    def sample_dataset(self, tmp_path):\n        \"\"\"Create a minimal dataset with actual media files.\"\"\"\n        labels_dir = tmp_path / \"labels\"\n        labels_dir.mkdir()\n\n        samples_df = pd.DataFrame({\n            \"sample_id\": [\"s1\", \"s2\", \"s3\", \"s4\"],\n            \"profile_id\": [\"p1\", \"p1\", \"p2\", \"p3\"],\n            \"rudiment_slug\": [\"single_stroke_roll\", \"double_stroke_roll\",\n                              \"single_stroke_roll\", \"paradiddle\"],\n            \"tempo_bpm\": [120, 100, 120, 140],\n            \"duration_sec\": [2.0, 2.5, 2.0, 1.5],\n            \"num_cycles\": [2, 3, 2, 2],\n            \"skill_tier\": [\"beginner\", \"intermediate\", \"beginner\", \"advanced\"],\n            \"skill_tier_binary\": [\"novice\", \"skilled\", \"novice\", \"skilled\"],\n            \"dominant_hand\": [\"right\", \"right\", \"left\", \"right\"],\n            \"num_strokes\": [16, 24, 16, 20],\n            \"num_measures\": [2, 3, 2, 2],\n            \"soundfont\": [\"sf1\", \"sf2\", \"sf1\", \"sf1\"],\n            \"augmentation_preset\": [\"clean\", \"studio\", \"clean\", \"garage\"],\n            \"augmentation_group_id\": [\"g1\", \"g2\", \"g1\", \"g3\"],\n            \"audio_path\": [\n                \"audio/single_stroke_roll/s1.flac\",\n                \"audio/double_stroke_roll/s2.flac\",\n                \"audio/single_stroke_roll/s3.flac\",\n                \"audio/paradiddle/s4.flac\",\n            ],\n            \"midi_path\": [\n                \"midi/single_stroke_roll/s1.mid\",\n                \"midi/double_stroke_roll/s2.mid\",\n                \"midi/single_stroke_roll/s3.mid\",\n                \"midi/paradiddle/s4.mid\",\n            ],\n        })\n        samples_df.to_parquet(labels_dir / \"samples.parquet\")\n\n        exercises_df = pd.DataFrame({\n            \"sample_id\": [\"s1\", \"s2\", \"s3\", \"s4\"],\n            \"timing_accuracy\": [80.0, 85.0, 75.0, 90.0],\n            \"timing_consistency\": [78.0, 82.0, 72.0, 88.0],\n            \"tempo_stability\": [82.0, 87.0, 77.0, 92.0],\n            \"subdivision_evenness\": [76.0, 80.0, 70.0, 86.0],\n            \"velocity_control\": [79.0, 84.0, 74.0, 89.0],\n            \"accent_differentiation\": [75.0, 80.0, 70.0, 85.0],\n            \"accent_accuracy\": [77.0, 82.0, 72.0, 87.0],\n            \"hand_balance\": [80.0, 85.0, 75.0, 90.0],\n            \"weak_hand_index\": [50.0, 55.0, 45.0, 60.0],\n            \"flam_quality\": [None, None, None, None],\n            \"diddle_quality\": [None, None, None, None],\n            \"roll_sustain\": [None, None, None, None],\n            \"groove_feel_proxy\": [0.7, 0.75, 0.65, 0.85],\n            \"overall_score\": [78.0, 83.0, 73.0, 88.0],\n        })\n        exercises_df.to_parquet(labels_dir / \"exercises.parquet\")\n\n        splits = {\n            \"train_profile_ids\": [\"p1\"],\n            \"val_profile_ids\": [\"p2\"],\n            \"test_profile_ids\": [\"p3\"],\n        }\n        with open(tmp_path / \"splits.json\", \"w\") as f:\n            json.dump(splits, f)\n\n        # Create actual media files\n        for subdir, ext, content in [\n            (\"audio\", \"flac\", b\"FAKE_FLAC_CONTENT_HERE\"),\n            (\"midi\", \"mid\", b\"MThd\\x00\\x00\\x00\\x06\"),\n        ]:\n            for slug, sid in [\n                (\"single_stroke_roll\", \"s1\"),\n                (\"double_stroke_roll\", \"s2\"),\n                (\"single_stroke_roll\", \"s3\"),\n                (\"paradiddle\", \"s4\"),\n            ]:\n                d = tmp_path / subdir / slug\n                d.mkdir(parents=True, exist_ok=True)\n                (d / f\"{sid}.{ext}\").write_bytes(content)\n\n        return tmp_path\n\n    def test_build_labels_only_dataset_dict(self, sample_dataset):\n        \"\"\"build_dataset_dict('labels_only') returns DatasetDict without media columns.\"\"\"\n        from datasets import DatasetDict\n\n        config = HubConfig(dataset_dir=sample_dataset, repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n        dd = uploader.build_dataset_dict(\"labels_only\")\n\n        assert isinstance(dd, DatasetDict)\n        assert set(dd.keys()) == {\"train\", \"validation\", \"test\"}\n        assert \"audio\" not in dd[\"train\"].column_names\n        assert \"midi\" not in dd[\"train\"].column_names\n        assert \"sample_id\" in dd[\"train\"].column_names\n        assert \"overall_score\" in dd[\"train\"].column_names\n        assert dd[\"train\"].num_rows == 2\n        assert dd[\"validation\"].num_rows == 1\n        assert dd[\"test\"].num_rows == 1\n\n    def test_build_midi_only_dataset_dict(self, sample_dataset):\n        \"\"\"build_dataset_dict('midi_only') includes midi bytes but no audio.\"\"\"\n        config = HubConfig(dataset_dir=sample_dataset, repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n        dd = uploader.build_dataset_dict(\"midi_only\")\n\n        assert \"midi\" in dd[\"train\"].column_names\n        assert \"audio\" not in dd[\"train\"].column_names\n        # MIDI should be bytes\n        midi_val = dd[\"train\"][0][\"midi\"]\n        assert isinstance(midi_val, bytes)\n        assert len(midi_val) &gt; 0\n\n    def test_build_audio_dataset_dict(self, sample_dataset):\n        \"\"\"build_dataset_dict('audio') includes both audio and midi columns.\"\"\"\n        config = HubConfig(dataset_dir=sample_dataset, repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n        dd = uploader.build_dataset_dict(\"audio\")\n\n        assert \"audio\" in dd[\"train\"].column_names\n        assert \"midi\" in dd[\"train\"].column_names\n\n    def test_metadata_columns_present(self, sample_dataset):\n        \"\"\"All expected metadata and score columns are present.\"\"\"\n        config = HubConfig(dataset_dir=sample_dataset, repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n        dd = uploader.build_dataset_dict(\"labels_only\")\n\n        expected_cols = [\n            \"sample_id\", \"profile_id\", \"rudiment_slug\", \"skill_tier\",\n            \"tempo_bpm\", \"duration_sec\", \"num_cycles\", \"dominant_hand\",\n            \"soundfont\", \"augmentation_preset\",\n            \"timing_accuracy\", \"overall_score\",\n        ]\n        for col in expected_cols:\n            assert col in dd[\"train\"].column_names, f\"Missing column: {col}\"\n\n    def test_internal_path_columns_excluded(self, sample_dataset):\n        \"\"\"audio_path and midi_path (internal filesystem paths) are not in output.\"\"\"\n        config = HubConfig(dataset_dir=sample_dataset, repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n        dd = uploader.build_dataset_dict(\"labels_only\")\n\n        assert \"audio_path\" not in dd[\"train\"].column_names\n        assert \"midi_path\" not in dd[\"train\"].column_names\n</code></pre> <p>Step 2: Run tests to verify they fail</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestBuildDatasetDict -v</code> Expected: FAIL (<code>build_dataset_dict</code> method doesn't exist)</p> <p>Step 3: Implement build_dataset_dict method</p> <p>Add to the <code>DatasetUploader</code> class in <code>dataset_gen/hub/uploader.py</code>:</p> <pre><code>def build_dataset_dict(self, config_name: str) -&gt; \"DatasetDict\":\n    \"\"\"\n    Build a HuggingFace DatasetDict for the given config.\n\n    Args:\n        config_name: One of \"audio\", \"midi_only\", \"labels_only\"\n\n    Returns:\n        DatasetDict with train/validation/test splits\n    \"\"\"\n    from datasets import Dataset, DatasetDict, Features, Value, Audio\n\n    # Load source data\n    samples_df = pd.read_parquet(self.config.dataset_dir / \"labels\" / \"samples.parquet\")\n    exercises_df = pd.read_parquet(self.config.dataset_dir / \"labels\" / \"exercises.parquet\")\n\n    with open(self.config.dataset_dir / \"splits.json\") as f:\n        splits = json.load(f)\n\n    # Merge samples with exercise scores\n    merged_df = self._merge_dataframes(samples_df, exercises_df)\n\n    # Add split assignment\n    merged_df[\"split\"] = merged_df[\"profile_id\"].apply(\n        lambda pid: self._get_split(pid, splits)\n    )\n\n    # Drop internal path columns \u2014 we'll resolve them to bytes/Audio\n    path_cols_to_drop = [\"audio_path\", \"midi_path\"]\n    # Keep the path values for media resolution before dropping\n    audio_paths = merged_df[\"audio_path\"] if \"audio_path\" in merged_df.columns else None\n    midi_paths = merged_df[\"midi_path\"] if \"midi_path\" in merged_df.columns else None\n    merged_df = merged_df.drop(\n        columns=[c for c in path_cols_to_drop if c in merged_df.columns]\n    )\n\n    # Build per-split datasets\n    split_datasets = {}\n    split_map = {\"train\": \"train\", \"val\": \"validation\", \"test\": \"test\"}\n\n    for split_key, split_name in split_map.items():\n        mask = merged_df[\"split\"] == split_key\n        split_df = merged_df[mask].drop(columns=[\"split\"]).reset_index(drop=True)\n\n        if len(split_df) == 0:\n            continue\n\n        data_dict = split_df.to_dict(orient=\"list\")\n\n        # Add media columns based on config\n        if config_name in (\"audio\", \"midi_only\"):\n            split_midi_paths = midi_paths[mask].reset_index(drop=True)\n            midi_bytes = []\n            for path_val in split_midi_paths:\n                if pd.notna(path_val) and path_val:\n                    slug = Path(path_val).parent.name\n                    filename = Path(path_val).name\n                    full_path = self.config.dataset_dir / \"midi\" / slug / filename\n                    midi_bytes.append(full_path.read_bytes() if full_path.exists() else None)\n                else:\n                    midi_bytes.append(None)\n            data_dict[\"midi\"] = midi_bytes\n\n        if config_name == \"audio\":\n            split_audio_paths = audio_paths[mask].reset_index(drop=True)\n            audio_file_paths = []\n            for path_val in split_audio_paths:\n                if pd.notna(path_val) and path_val:\n                    slug = Path(path_val).parent.name\n                    filename = Path(path_val).name\n                    full_path = self.config.dataset_dir / \"audio\" / slug / filename\n                    audio_file_paths.append(str(full_path) if full_path.exists() else None)\n                else:\n                    audio_file_paths.append(None)\n            data_dict[\"audio\"] = audio_file_paths\n\n        ds = Dataset.from_dict(data_dict)\n\n        # Cast audio column to Audio feature type\n        if config_name == \"audio\" and \"audio\" in ds.column_names:\n            ds = ds.cast_column(\"audio\", Audio())\n\n        split_datasets[split_name] = ds\n\n    return DatasetDict(split_datasets)\n</code></pre> <p>Also keep the existing <code>_merge_dataframes</code> and <code>_get_split</code> helper methods unchanged \u2014 they are reused.</p> <p>Step 4: Run tests to verify they pass</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestBuildDatasetDict -v</code> Expected: PASS</p> <p>Step 5: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py tests/test_hub_uploader.py\ngit commit -m \"feat(hub): add build_dataset_dict for Parquet-native configs\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-3-implement-hub-purge-functionality","title":"Task 3: Implement hub purge functionality","text":"<p>Files: - Modify: <code>dataset_gen/hub/uploader.py</code> - Test: <code>tests/test_hub_uploader.py</code></p> <p>Step 1: Write the failing test</p> <pre><code>from unittest.mock import MagicMock, patch\n\nclass TestPurgeRepo:\n    \"\"\"Tests for hub repository purge.\"\"\"\n\n    def test_purge_deletes_all_files(self):\n        \"\"\"purge_repo deletes all files except .gitattributes.\"\"\"\n        config = HubConfig(\n            dataset_dir=Path(\"/fake\"),\n            repo_id=\"test/repo\",\n        )\n        uploader = DatasetUploader(config)\n\n        mock_api = MagicMock()\n        mock_api.list_repo_tree.return_value = [\n            MagicMock(rfilename=\"data/train-00000.parquet\"),\n            MagicMock(rfilename=\"audio/single_stroke_roll/s1.flac\"),\n            MagicMock(rfilename=\".gitattributes\"),\n            MagicMock(rfilename=\"README.md\"),\n        ]\n\n        uploader.purge_repo(api=mock_api)\n\n        # Should call delete_files with all files except .gitattributes\n        mock_api.delete_files.assert_called_once()\n        deleted = mock_api.delete_files.call_args[1][\"delete_patterns\"]\n        assert \".gitattributes\" not in deleted\n        assert \"data/train-00000.parquet\" in deleted\n        assert \"README.md\" in deleted\n\n    def test_purge_skips_empty_repo(self):\n        \"\"\"purge_repo does nothing for empty repo.\"\"\"\n        config = HubConfig(dataset_dir=Path(\"/fake\"), repo_id=\"test/repo\")\n        uploader = DatasetUploader(config)\n\n        mock_api = MagicMock()\n        mock_api.list_repo_tree.return_value = [\n            MagicMock(rfilename=\".gitattributes\"),\n        ]\n\n        uploader.purge_repo(api=mock_api)\n        mock_api.delete_files.assert_not_called()\n</code></pre> <p>Step 2: Run test to verify it fails</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestPurgeRepo -v</code> Expected: FAIL (<code>purge_repo</code> doesn't exist)</p> <p>Step 3: Implement purge_repo</p> <p>Add to <code>DatasetUploader</code>:</p> <pre><code>def purge_repo(self, api: \"HfApi | None\" = None) -&gt; None:\n    \"\"\"\n    Delete all files from the hub repo except .gitattributes.\n\n    Args:\n        api: HfApi instance (created if None)\n    \"\"\"\n    if api is None:\n        from huggingface_hub import HfApi\n        api = HfApi(token=self.config.token)\n\n    logger.info(f\"Listing files in {self.config.repo_id}...\")\n    files = list(api.list_repo_tree(\n        repo_id=self.config.repo_id,\n        repo_type=\"dataset\",\n        recursive=True,\n    ))\n\n    to_delete = [\n        f.rfilename for f in files\n        if hasattr(f, \"rfilename\") and f.rfilename != \".gitattributes\"\n    ]\n\n    if not to_delete:\n        logger.info(\"Repository is empty, nothing to purge\")\n        return\n\n    logger.info(f\"Purging {len(to_delete)} files from {self.config.repo_id}\")\n    api.delete_files(\n        repo_id=self.config.repo_id,\n        repo_type=\"dataset\",\n        delete_patterns=to_delete,\n        commit_message=\"chore: purge individual files for Parquet migration\",\n    )\n    logger.info(\"Purge complete\")\n</code></pre> <p>Note: The <code>HfApi.delete_files</code> method may not exist \u2014 check the actual huggingface_hub API. The alternative is to use <code>CommitOperationDelete</code> with <code>create_commit</code>. Adjust during implementation based on the actual API available. The test mocks the API, so the interface can be adjusted.</p> <p>An alternative implementation using <code>create_commit</code>:</p> <pre><code>from huggingface_hub import CommitOperationDelete\n\noperations = [CommitOperationDelete(path_in_repo=f) for f in to_delete]\napi.create_commit(\n    repo_id=self.config.repo_id,\n    repo_type=\"dataset\",\n    operations=operations,\n    commit_message=\"chore: purge individual files for Parquet migration\",\n)\n</code></pre> <p>Step 4: Run test to verify it passes</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestPurgeRepo -v</code> Expected: PASS</p> <p>Step 5: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py tests/test_hub_uploader.py\ngit commit -m \"feat(hub): add purge_repo to clear hub before Parquet upload\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-4-implement-the-upload-method","title":"Task 4: Implement the upload method","text":"<p>Files: - Modify: <code>dataset_gen/hub/uploader.py</code> - Test: <code>tests/test_hub_uploader.py</code></p> <p>Step 1: Write the failing test</p> <pre><code>class TestUploadParquet:\n    \"\"\"Tests for the Parquet-native upload method.\"\"\"\n\n    @pytest.fixture\n    def sample_dataset(self, tmp_path):\n        \"\"\"Reuse the same fixture from TestBuildDatasetDict.\"\"\"\n        # (Same fixture content as Task 2 \u2014 copy it or extract to module-level fixture)\n        ...  # See Task 2 for full fixture\n\n    @patch(\"dataset_gen.hub.uploader.HfApi\")\n    def test_upload_calls_push_to_hub_for_each_config(self, mock_hf_api_cls, sample_dataset):\n        \"\"\"upload() pushes each configured config to hub.\"\"\"\n        config = HubConfig(\n            dataset_dir=sample_dataset,\n            repo_id=\"test/repo\",\n            configs=[\"labels_only\"],\n        )\n        uploader = DatasetUploader(config)\n\n        # Mock push_to_hub on the DatasetDict\n        with patch.object(uploader, \"build_dataset_dict\") as mock_build:\n            mock_dd = MagicMock()\n            mock_build.return_value = mock_dd\n\n            uploader.upload()\n\n            mock_build.assert_called_once_with(\"labels_only\")\n            mock_dd.push_to_hub.assert_called_once_with(\n                \"test/repo\",\n                config_name=\"labels_only\",\n                max_shard_size=\"1GB\",\n                token=None,\n                private=False,\n            )\n\n    @patch(\"dataset_gen.hub.uploader.HfApi\")\n    def test_upload_dry_run_does_not_push(self, mock_hf_api_cls, sample_dataset):\n        \"\"\"upload(dry_run=True) builds but doesn't push.\"\"\"\n        config = HubConfig(\n            dataset_dir=sample_dataset,\n            repo_id=\"test/repo\",\n            configs=[\"labels_only\"],\n        )\n        uploader = DatasetUploader(config)\n\n        with patch.object(uploader, \"build_dataset_dict\") as mock_build:\n            mock_dd = MagicMock()\n            mock_build.return_value = mock_dd\n\n            uploader.upload(dry_run=True)\n\n            mock_build.assert_called_once()\n            mock_dd.push_to_hub.assert_not_called()\n\n    @patch(\"dataset_gen.hub.uploader.HfApi\")\n    def test_upload_pushes_auxiliary_tables(self, mock_hf_api_cls, sample_dataset):\n        \"\"\"upload() uploads strokes.parquet and measures.parquet to auxiliary/.\"\"\"\n        # Create strokes and measures parquets\n        labels_dir = sample_dataset / \"labels\"\n        pd.DataFrame({\"sample_id\": [\"s1\"], \"index\": [0], \"timing_error\": [0.01]}).to_parquet(\n            labels_dir / \"strokes.parquet\"\n        )\n        pd.DataFrame({\"sample_id\": [\"s1\"], \"index\": [0], \"mean_timing\": [0.02]}).to_parquet(\n            labels_dir / \"measures.parquet\"\n        )\n\n        config = HubConfig(\n            dataset_dir=sample_dataset,\n            repo_id=\"test/repo\",\n            configs=[\"labels_only\"],\n        )\n        uploader = DatasetUploader(config)\n\n        with patch.object(uploader, \"build_dataset_dict\") as mock_build:\n            mock_dd = MagicMock()\n            mock_build.return_value = mock_dd\n\n            uploader.upload()\n\n            # Check that auxiliary files were uploaded\n            mock_api = mock_hf_api_cls.return_value\n            upload_calls = mock_api.upload_file.call_args_list\n            uploaded_paths = [c[1][\"path_in_repo\"] for c in upload_calls]\n            assert \"auxiliary/strokes.parquet\" in uploaded_paths\n            assert \"auxiliary/measures.parquet\" in uploaded_paths\n</code></pre> <p>Step 2: Run tests to verify they fail</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestUploadParquet -v</code> Expected: FAIL (old <code>upload</code> method has different signature/behavior)</p> <p>Step 3: Rewrite the upload method</p> <p>Replace the existing <code>upload</code> method in <code>DatasetUploader</code>:</p> <pre><code>def upload(self, dry_run: bool = False, purge: bool = False) -&gt; str | None:\n    \"\"\"\n    Upload dataset to HuggingFace Hub as Parquet shards.\n\n    Args:\n        dry_run: If True, build DatasetDicts but don't push\n        purge: If True, delete all existing files before upload\n\n    Returns:\n        URL to the uploaded dataset, or None if dry_run\n    \"\"\"\n    from huggingface_hub import HfApi\n\n    api = HfApi(token=self.config.token)\n\n    if not dry_run:\n        # Create repository if needed\n        logger.info(f\"Creating/verifying repository: {self.config.repo_id}\")\n        api.create_repo(\n            repo_id=self.config.repo_id,\n            repo_type=\"dataset\",\n            exist_ok=True,\n            private=self.config.private,\n        )\n\n        if purge:\n            self.purge_repo(api=api)\n\n    # Build and push each config\n    for config_name in self.config.configs:\n        logger.info(f\"Building DatasetDict for config '{config_name}'...\")\n        dd = self.build_dataset_dict(config_name)\n\n        # Log stats\n        for split_name, ds in dd.items():\n            logger.info(f\"  {config_name}/{split_name}: {ds.num_rows} rows, \"\n                        f\"columns: {ds.column_names}\")\n\n        if dry_run:\n            logger.info(f\"DRY RUN: would push config '{config_name}' to {self.config.repo_id}\")\n            continue\n\n        logger.info(f\"Pushing config '{config_name}' to {self.config.repo_id}...\")\n        dd.push_to_hub(\n            self.config.repo_id,\n            config_name=config_name,\n            max_shard_size=self.config.max_shard_size,\n            token=self.config.token,\n            private=self.config.private,\n        )\n        logger.info(f\"Config '{config_name}' pushed successfully\")\n\n    # Upload auxiliary tables\n    if not dry_run:\n        self._upload_auxiliary(api)\n\n    # Upload README\n    if not dry_run:\n        readme_path = self.config.dataset_dir / \"README.md\"\n        if readme_path.exists():\n            logger.info(\"Uploading README.md...\")\n            api.upload_file(\n                path_or_fileobj=str(readme_path),\n                path_in_repo=\"README.md\",\n                repo_id=self.config.repo_id,\n                repo_type=\"dataset\",\n                commit_message=\"docs: update dataset card\",\n            )\n\n    url = f\"https://huggingface.co/datasets/{self.config.repo_id}\"\n    if dry_run:\n        logger.info(f\"DRY RUN complete. Would upload to: {url}\")\n        return None\n\n    logger.info(f\"Upload complete: {url}\")\n    return url\n\ndef _upload_auxiliary(self, api: \"HfApi\") -&gt; None:\n    \"\"\"Upload stroke and measure level parquet tables to auxiliary/.\"\"\"\n    labels_dir = self.config.dataset_dir / \"labels\"\n\n    for filename in [\"strokes.parquet\", \"measures.parquet\"]:\n        src = labels_dir / filename\n        if src.exists():\n            logger.info(f\"Uploading auxiliary/{filename}...\")\n            api.upload_file(\n                path_or_fileobj=str(src),\n                path_in_repo=f\"auxiliary/{filename}\",\n                repo_id=self.config.repo_id,\n                repo_type=\"dataset\",\n                commit_message=f\"data: upload auxiliary {filename}\",\n            )\n        else:\n            logger.warning(f\"Auxiliary file not found: {src}\")\n</code></pre> <p>Step 4: Run tests to verify they pass</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestUploadParquet -v</code> Expected: PASS</p> <p>Step 5: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py tests/test_hub_uploader.py\ngit commit -m \"feat(hub): rewrite upload to push Parquet configs via datasets API\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-5-remove-old-staging-code-and-update-convenience-functions","title":"Task 5: Remove old staging code and update convenience functions","text":"<p>Files: - Modify: <code>dataset_gen/hub/uploader.py</code> - Modify: <code>dataset_gen/hub/__init__.py</code></p> <p>Step 1: Write the failing test</p> <pre><code>class TestConvenienceFunctions:\n    \"\"\"Tests for updated module-level convenience functions.\"\"\"\n\n    def test_push_to_hub_signature(self):\n        \"\"\"push_to_hub accepts new kwargs (configs, purge).\"\"\"\n        import inspect\n        sig = inspect.signature(push_to_hub)\n        params = list(sig.parameters.keys())\n        assert \"configs\" in params\n        assert \"purge\" in params\n        assert \"max_shard_size\" in params\n        # Old params should be gone\n        assert \"include_audio\" not in params\n        assert \"include_midi\" not in params\n\n    def test_prepare_hf_structure_removed(self):\n        \"\"\"prepare_hf_structure convenience function is removed.\"\"\"\n        from dataset_gen.hub import __all__\n        assert \"prepare_hf_structure\" not in __all__\n</code></pre> <p>Step 2: Run tests to verify they fail</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestConvenienceFunctions -v</code> Expected: FAIL</p> <p>Step 3: Remove old code, update convenience functions</p> <p>In <code>dataset_gen/hub/uploader.py</code>:</p> <ol> <li>Delete the <code>prepare</code> method entirely</li> <li>Delete <code>_copy_media_by_rudiment</code> method</li> <li>Delete <code>_count_media_files</code> method</li> <li>Delete the <code>prepare_hf_structure</code> function</li> <li>Update the <code>push_to_hub</code> convenience function:</li> </ol> <pre><code>def push_to_hub(\n    dataset_dir: Path | str,\n    repo_id: str,\n    token: str | None = None,\n    private: bool = False,\n    configs: list[str] | None = None,\n    max_shard_size: str = \"1GB\",\n    purge: bool = False,\n    dry_run: bool = False,\n) -&gt; str | None:\n    \"\"\"\n    Upload dataset to HuggingFace Hub as Parquet shards.\n\n    Args:\n        dataset_dir: Path to generated dataset\n        repo_id: HuggingFace repository ID (e.g., \"username/sousa\")\n        token: HuggingFace API token (uses cached token if None)\n        private: Make repository private\n        configs: Which configs to upload (default: all three)\n        max_shard_size: Max Parquet shard size (default: \"1GB\")\n        purge: Delete existing repo files before upload\n        dry_run: Prepare but don't upload\n\n    Returns:\n        URL to uploaded dataset, or None if dry_run\n    \"\"\"\n    config = HubConfig(\n        dataset_dir=Path(dataset_dir),\n        repo_id=repo_id,\n        token=token,\n        private=private,\n        configs=configs,\n        max_shard_size=max_shard_size,\n    )\n    uploader = DatasetUploader(config)\n    return uploader.upload(dry_run=dry_run, purge=purge)\n</code></pre> <p>Update <code>dataset_gen/hub/__init__.py</code>:</p> <pre><code>from dataset_gen.hub.uploader import (\n    HubConfig,\n    DatasetUploader,\n    push_to_hub,\n)\n\n__all__ = [\n    \"HubConfig\",\n    \"DatasetUploader\",\n    \"push_to_hub\",\n]\n</code></pre> <p>Also update/remove <code>UploadStats</code> if it is no longer used by the new code. The new <code>upload</code> method doesn't use the stats tracking \u2014 the <code>datasets</code> library handles progress. You can keep <code>UploadStats</code> for the dry-run summary if useful, or remove it.</p> <p>Step 4: Run tests to verify they pass</p> <p>Run: <code>pytest tests/test_hub_uploader.py::TestConvenienceFunctions -v</code> Expected: PASS</p> <p>Step 5: Commit</p> <pre><code>git add dataset_gen/hub/uploader.py dataset_gen/hub/__init__.py\ngit commit -m \"refactor(hub): remove staging/symlink code, update convenience API\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-6-update-existing-tests","title":"Task 6: Update existing tests","text":"<p>The old tests in <code>TestDatasetUploaderHelpers</code> and <code>test_hub_integration.py</code> test the staging/symlink flow that no longer exists. They need to be rewritten to test the new DatasetDict flow.</p> <p>Files: - Modify: <code>tests/test_hub_uploader.py</code> (remove old <code>TestHubConfig</code>, <code>TestDatasetUploaderHelpers</code>) - Modify: <code>tests/test_hub_integration.py</code> (rewrite for new API)</p> <p>Step 1: Remove old test classes</p> <p>In <code>tests/test_hub_uploader.py</code>, delete: - <code>TestHubConfig</code> class (replaced by <code>TestHubConfigParquet</code>) - <code>TestDatasetUploaderHelpers</code> class (replaced by <code>TestBuildDatasetDict</code>)</p> <p>Step 2: Rewrite integration test</p> <p>Replace <code>tests/test_hub_integration.py</code>:</p> <pre><code>\"\"\"Integration test: generation output is compatible with Parquet hub uploader.\"\"\"\n\nimport json\nimport numpy as np\nimport pandas as pd\nimport pytest\n\nfrom dataset_gen.pipeline.storage import StorageConfig, DatasetWriter\nfrom dataset_gen.hub.uploader import HubConfig, DatasetUploader\nfrom dataset_gen.labels.schema import Sample, ExerciseScores\n\n\n@pytest.fixture\ndef generated_dataset(tmp_path):\n    \"\"\"Generate a small dataset using the storage pipeline.\"\"\"\n    config = StorageConfig(output_dir=tmp_path)\n    writer = DatasetWriter(config)\n\n    rudiments = [\"flam\", \"paradiddle\", \"single_stroke_roll\"]\n    profiles = {\"p1\": \"train\", \"p2\": \"val\", \"p3\": \"test\"}\n\n    for profile_id in profiles:\n        for slug in rudiments:\n            sample_id = f\"test_{slug}_{profile_id}\"\n            sample = Sample(\n                sample_id=sample_id,\n                profile_id=profile_id,\n                rudiment_slug=slug,\n                tempo_bpm=120,\n                duration_sec=2.0,\n                num_cycles=2,\n                skill_tier=\"beginner\",\n                skill_tier_binary=\"novice\",\n                dominant_hand=\"right\",\n                strokes=[],\n                measures=[],\n                exercise_scores=ExerciseScores(\n                    timing_accuracy=75.0,\n                    timing_consistency=70.0,\n                    tempo_stability=80.0,\n                    subdivision_evenness=65.0,\n                    velocity_control=72.0,\n                    accent_differentiation=60.0,\n                    accent_accuracy=68.0,\n                    hand_balance=74.0,\n                    weak_hand_index=50.0,\n                    groove_feel_proxy=0.7,\n                    overall_score=71.0,\n                ),\n            )\n            audio = np.zeros(44100, dtype=np.float32)\n            midi = b\"\\x00\" * 100\n            writer.write_sample(sample, midi_data=midi, audio_data=audio)\n\n    writer.flush()\n\n    splits = {\n        \"train_profile_ids\": [\"p1\"],\n        \"val_profile_ids\": [\"p2\"],\n        \"test_profile_ids\": [\"p3\"],\n    }\n    with open(tmp_path / \"splits.json\", \"w\") as f:\n        json.dump(splits, f)\n\n    return tmp_path\n\n\ndef test_generated_dataset_builds_labels_only(generated_dataset):\n    \"\"\"Labels-only config builds successfully from generated data.\"\"\"\n    config = HubConfig(dataset_dir=generated_dataset, repo_id=\"test/repo\")\n    uploader = DatasetUploader(config)\n    dd = uploader.build_dataset_dict(\"labels_only\")\n\n    assert dd[\"train\"].num_rows == 3\n    assert dd[\"validation\"].num_rows == 3\n    assert dd[\"test\"].num_rows == 3\n    assert \"overall_score\" in dd[\"train\"].column_names\n\n\ndef test_generated_dataset_builds_midi_only(generated_dataset):\n    \"\"\"MIDI-only config includes MIDI bytes from generated data.\"\"\"\n    config = HubConfig(dataset_dir=generated_dataset, repo_id=\"test/repo\")\n    uploader = DatasetUploader(config)\n    dd = uploader.build_dataset_dict(\"midi_only\")\n\n    assert \"midi\" in dd[\"train\"].column_names\n    midi_val = dd[\"train\"][0][\"midi\"]\n    assert isinstance(midi_val, bytes)\n    assert len(midi_val) &gt; 0\n\n\ndef test_generated_dataset_builds_audio(generated_dataset):\n    \"\"\"Audio config includes audio from generated data.\"\"\"\n    config = HubConfig(dataset_dir=generated_dataset, repo_id=\"test/repo\")\n    uploader = DatasetUploader(config)\n    dd = uploader.build_dataset_dict(\"audio\")\n\n    assert \"audio\" in dd[\"train\"].column_names\n    assert \"midi\" in dd[\"train\"].column_names\n\n\ndef test_all_splits_have_correct_sample_count(generated_dataset):\n    \"\"\"Each split has the correct number of samples based on profile assignment.\"\"\"\n    config = HubConfig(dataset_dir=generated_dataset, repo_id=\"test/repo\")\n    uploader = DatasetUploader(config)\n    dd = uploader.build_dataset_dict(\"labels_only\")\n\n    # 3 profiles, 3 rudiments each = 9 total, 3 per split\n    total = sum(ds.num_rows for ds in dd.values())\n    assert total == 9\n</code></pre> <p>Step 3: Run all hub tests</p> <p>Run: <code>pytest tests/test_hub_uploader.py tests/test_hub_integration.py -v</code> Expected: PASS</p> <p>Step 4: Commit</p> <pre><code>git add tests/test_hub_uploader.py tests/test_hub_integration.py\ngit commit -m \"test(hub): rewrite tests for Parquet-native upload\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-7-update-push_to_hubpy-cli-script","title":"Task 7: Update push_to_hub.py CLI script","text":"<p>Files: - Modify: <code>scripts/push_to_hub.py</code></p> <p>Step 1: Rewrite the CLI script</p> <p>Replace the contents of <code>scripts/push_to_hub.py</code>:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nPush SOUSA dataset to HuggingFace Hub as Parquet shards.\n========================================================\n\nUpload the generated SOUSA dataset with embedded audio/MIDI in Parquet format.\n\nUsage:\n    python scripts/push_to_hub.py zkeown/sousa                       # Upload all configs\n    python scripts/push_to_hub.py zkeown/sousa --dry-run              # Test without upload\n    python scripts/push_to_hub.py zkeown/sousa --configs labels_only  # Labels only (~50MB)\n    python scripts/push_to_hub.py zkeown/sousa --purge                # Clear repo first\n\nPrerequisites:\n    1. Install hub dependencies: pip install 'sousa[hub]'\n    2. Login to HuggingFace: huggingface-cli login\n    3. Generate dataset: python scripts/generate_dataset.py\n\"\"\"\n\nimport argparse\nimport logging\nimport sys\nfrom pathlib import Path\n\nsys.path.insert(0, str(Path(__file__).parent.parent))\n\nfrom dataset_gen.hub import HubConfig, DatasetUploader\n\n\nVALID_CONFIGS = [\"audio\", \"midi_only\", \"labels_only\"]\n\n\ndef main():\n    parser = argparse.ArgumentParser(\n        description=\"Push SOUSA dataset to HuggingFace Hub as Parquet shards\",\n        formatter_class=argparse.RawDescriptionHelpFormatter,\n        epilog=\"\"\"\nExamples:\n  python scripts/push_to_hub.py zkeown/sousa                        # All configs\n  python scripts/push_to_hub.py zkeown/sousa --configs labels_only   # Labels only\n  python scripts/push_to_hub.py zkeown/sousa --configs midi_only audio  # MIDI + audio\n  python scripts/push_to_hub.py zkeown/sousa --purge --yes           # Purge without prompt\n  python scripts/push_to_hub.py zkeown/sousa --dry-run               # Test run\n\nConfigs:\n  audio        Full dataset with FLAC audio + MIDI bytes + labels (~96GB)\n  midi_only    MIDI bytes + labels, no audio (~2.5GB)\n  labels_only  Pure tabular metadata + scores (~50MB)\n\nPrerequisites:\n  pip install 'sousa[hub]'\n  huggingface-cli login\n        \"\"\",\n    )\n    parser.add_argument(\n        \"repo_id\",\n        type=str,\n        help=\"HuggingFace repository ID (e.g., zkeown/sousa)\",\n    )\n    parser.add_argument(\n        \"--dataset-dir\", \"-d\",\n        type=Path,\n        default=Path(\"output/dataset\"),\n        help=\"Path to generated dataset (default: output/dataset)\",\n    )\n    parser.add_argument(\n        \"--configs\",\n        nargs=\"+\",\n        choices=VALID_CONFIGS,\n        default=None,\n        help=\"Which configs to upload (default: all three)\",\n    )\n    parser.add_argument(\n        \"--max-shard-size\",\n        type=str,\n        default=\"1GB\",\n        help=\"Max Parquet shard size (default: 1GB)\",\n    )\n    parser.add_argument(\n        \"--purge\",\n        action=\"store_true\",\n        help=\"Delete all existing files from the repo before upload\",\n    )\n    parser.add_argument(\n        \"--yes\", \"-y\",\n        action=\"store_true\",\n        help=\"Skip confirmation prompts\",\n    )\n    parser.add_argument(\n        \"--token\", \"-t\",\n        type=str,\n        default=None,\n        help=\"HuggingFace API token (uses cached token if not provided)\",\n    )\n    parser.add_argument(\n        \"--private\",\n        action=\"store_true\",\n        help=\"Make the repository private\",\n    )\n    parser.add_argument(\n        \"--dry-run\",\n        action=\"store_true\",\n        help=\"Build DatasetDicts but don't upload (for testing)\",\n    )\n    parser.add_argument(\n        \"--quiet\", \"-q\",\n        action=\"store_true\",\n        help=\"Reduce output verbosity\",\n    )\n\n    args = parser.parse_args()\n\n    # Setup logging\n    log_level = logging.WARNING if args.quiet else logging.INFO\n    logging.basicConfig(\n        level=log_level,\n        format=\"%(asctime)s - %(levelname)s - %(message)s\",\n    )\n    logger = logging.getLogger(__name__)\n\n    # Validate dataset directory\n    if not args.dataset_dir.exists():\n        logger.error(f\"Dataset directory not found: {args.dataset_dir}\")\n        logger.error(\"Run 'python scripts/generate_dataset.py' first\")\n        sys.exit(1)\n\n    labels_dir = args.dataset_dir / \"labels\"\n    if not labels_dir.exists():\n        logger.error(f\"Labels directory not found: {labels_dir}\")\n        sys.exit(1)\n\n    # Check dependencies\n    try:\n        import huggingface_hub  # noqa: F401\n        import datasets  # noqa: F401\n    except ImportError:\n        logger.error(\"Required packages not installed\")\n        logger.error(\"Install with: pip install 'sousa[hub]'\")\n        sys.exit(1)\n\n    configs = args.configs or VALID_CONFIGS\n\n    # Print plan\n    print(\"\\n\" + \"=\" * 60)\n    print(\"HUGGINGFACE HUB UPLOAD (Parquet)\")\n    print(\"=\" * 60)\n    print(f\"\\nRepository: {args.repo_id}\")\n    print(f\"Visibility: {'Private' if args.private else 'Public'}\")\n    print(f\"Source:     {args.dataset_dir}\")\n    print(f\"Configs:    {', '.join(configs)}\")\n    print(f\"Shard size: {args.max_shard_size}\")\n    if args.purge:\n        print(\"Purge:      YES - will delete all existing files first\")\n    if args.dry_run:\n        print(\"Mode:       DRY RUN (no actual upload)\")\n    print(\"=\" * 60 + \"\\n\")\n\n    # Confirm purge\n    if args.purge and not args.dry_run and not args.yes:\n        response = input(\n            f\"This will DELETE all files from {args.repo_id}. Continue? [y/N] \"\n        )\n        if response.lower() != \"y\":\n            print(\"Aborted.\")\n            sys.exit(0)\n\n    # Configure and upload\n    config = HubConfig(\n        dataset_dir=args.dataset_dir,\n        repo_id=args.repo_id,\n        token=args.token,\n        private=args.private,\n        configs=configs,\n        max_shard_size=args.max_shard_size,\n    )\n\n    uploader = DatasetUploader(config)\n\n    try:\n        url = uploader.upload(dry_run=args.dry_run, purge=args.purge)\n\n        if args.dry_run:\n            print(\"\\nDRY RUN complete. No files were uploaded.\")\n            print(\"Remove --dry-run to upload for real.\")\n        else:\n            print(\"\\n\" + \"=\" * 60)\n            print(\"UPLOAD COMPLETE\")\n            print(\"=\" * 60)\n            print(f\"\\nDataset URL: {url}\")\n            print(\"\\nLoad the dataset:\")\n            print(f'  ds = load_dataset(\"{args.repo_id}\")               # audio (default)')\n            print(f'  ds = load_dataset(\"{args.repo_id}\", \"midi_only\")  # MIDI + labels')\n            print(f'  ds = load_dataset(\"{args.repo_id}\", \"labels_only\") # labels only')\n            print(\"=\" * 60)\n\n    except Exception as e:\n        logger.error(f\"Upload failed: {e}\")\n        raise\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre> <p>Step 2: Run lint to verify</p> <p>Run: <code>ruff check scripts/push_to_hub.py &amp;&amp; black --check scripts/push_to_hub.py</code> Expected: PASS</p> <p>Step 3: Commit</p> <pre><code>git add scripts/push_to_hub.py\ngit commit -m \"feat(cli): rewrite push_to_hub for Parquet configs\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-8-update-readmemd-yaml-frontmatter-for-configs","title":"Task 8: Update README.md YAML frontmatter for configs","text":"<p>Files: - Modify: <code>output/dataset/README.md</code></p> <p>Step 1: Update YAML frontmatter</p> <p>Replace the YAML frontmatter at the top of <code>output/dataset/README.md</code>:</p> <pre><code>---\nlicense: mit\ntask_categories:\n  - audio-classification\n  - tabular-classification\n  - tabular-regression\ntags:\n  - audio\n  - music\n  - drum-rudiments\n  - synthetic\n  - snare-drum\n  - midi\n  - percussion\n  - music-information-retrieval\nsize_categories:\n  - 100K&lt;n&lt;1M\nlanguage:\n  - en\npretty_name: SOUSA - Synthetic Open Unified Snare Assessment\nconfigs:\n  - config_name: audio\n    data_files:\n      - split: train\n        path: audio/train-*.parquet\n      - split: validation\n        path: audio/validation-*.parquet\n      - split: test\n        path: audio/test-*.parquet\n    default: true\n  - config_name: midi_only\n    data_files:\n      - split: train\n        path: midi_only/train-*.parquet\n      - split: validation\n        path: midi_only/validation-*.parquet\n      - split: test\n        path: midi_only/test-*.parquet\n  - config_name: labels_only\n    data_files:\n      - split: train\n        path: labels_only/train-*.parquet\n      - split: validation\n        path: labels_only/validation-*.parquet\n      - split: test\n        path: labels_only/test-*.parquet\n---\n</code></pre> <p>Step 2: Update the Usage section</p> <p>Replace the Usage section in the README body:</p> <p><pre><code>## Usage\n\n```python\nfrom datasets import load_dataset\n\n# Full dataset with audio (~96GB download)\nds = load_dataset(\"zkeown/sousa\")\n\n# MIDI + labels only (~2.5GB download)\nds = load_dataset(\"zkeown/sousa\", \"midi_only\")\n\n# Pure tabular labels (~50MB download)\nds = load_dataset(\"zkeown/sousa\", \"labels_only\")\n\n# Access a sample\nsample = ds[\"train\"][0]\nprint(sample[\"rudiment_slug\"], sample[\"skill_tier\"], sample[\"overall_score\"])\n\n# Access audio (decoded automatically)\naudio_array = sample[\"audio\"][\"array\"]     # numpy array\nsample_rate = sample[\"audio\"][\"sampling_rate\"]  # 44100\n\n# Access MIDI bytes\nmidi_bytes = sample[\"midi\"]  # raw .mid file bytes\n</code></pre> <pre><code>**Step 3: Update the File Organization section**\n\nReplace with:\n\n```markdown\n### File Organization\n\nThe dataset uses three configurations with different levels of content:\n\n| Config | Contents | Size |\n|--------|----------|------|\n| `audio` (default) | FLAC audio + MIDI bytes + metadata + scores | ~96GB |\n| `midi_only` | MIDI bytes + metadata + scores | ~2.5GB |\n| `labels_only` | Metadata + scores only | ~50MB |\n\nStroke-level and measure-level labels are available as auxiliary files:\n\n```python\nimport pandas as pd\nstrokes = pd.read_parquet(\"hf://datasets/zkeown/sousa/auxiliary/strokes.parquet\")\nmeasures = pd.read_parquet(\"hf://datasets/zkeown/sousa/auxiliary/measures.parquet\")\n</code></pre> <pre><code>**Step 4: Commit**\n\n```bash\ngit add output/dataset/README.md\ngit commit -m \"docs: update dataset card for Parquet configs\"\n</code></pre></p>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-9-run-full-test-suite-and-verify","title":"Task 9: Run full test suite and verify","text":"<p>Step 1: Run all tests</p> <p>Run: <code>pytest tests/ -v</code> Expected: ALL PASS</p> <p>Step 2: Run lint</p> <p>Run: <code>ruff check dataset_gen/ scripts/ &amp;&amp; black --check dataset_gen/ scripts/</code> Expected: PASS</p> <p>Step 3: Run a dry-run upload to verify the full flow</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa --dry-run --configs labels_only</code> Expected: Prints schema info, shard counts, and \"DRY RUN complete\" without uploading</p> <p>Step 4: Commit any fixes</p> <p>If any fixes were needed, commit them:</p> <pre><code>git add -A\ngit commit -m \"fix: address test/lint issues from Parquet migration\"\n</code></pre>"},{"location":"plans/2026-02-20-parquet-hub-migration-plan/#task-10-execute-the-actual-upload","title":"Task 10: Execute the actual upload","text":"<p>This is the manual execution step \u2014 not automated.</p> <p>Step 1: Upload labels_only first (validates pipeline)</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa --purge --configs labels_only --yes</code> Expected: Purges existing repo, uploads ~50MB of labels-only Parquet shards</p> <p>Step 2: Verify on hub</p> <p>Visit <code>https://huggingface.co/datasets/zkeown/sousa</code> and confirm: - Dataset viewer works - <code>labels_only</code> config shows correct columns and data</p> <p>Step 3: Upload midi_only</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa --configs midi_only</code> Expected: Uploads ~2.5GB of MIDI + labels Parquet shards</p> <p>Step 4: Upload audio</p> <p>Run: <code>python scripts/push_to_hub.py zkeown/sousa --configs audio</code> Expected: Uploads ~96GB across ~96 Parquet shards (this will take a while)</p> <p>Step 5: Verify all configs on hub</p> <pre><code>from datasets import load_dataset\nds = load_dataset(\"zkeown/sousa\", \"labels_only\", split=\"train[:5]\")\nprint(ds)\nds = load_dataset(\"zkeown/sousa\", \"midi_only\", split=\"train[:5]\")\nprint(ds[0][\"midi\"][:20])\nds = load_dataset(\"zkeown/sousa\", split=\"train[:1]\")\nprint(ds[0][\"audio\"])\n</code></pre> <p>Step 6: Commit final state</p> <pre><code>git add -A\ngit commit -m \"feat: complete Parquet hub migration\"\n</code></pre>"},{"location":"reference/","title":"Technical Reference","text":"<p>This section provides comprehensive technical documentation for SOUSA's internal systems, data structures, and algorithms.</p>"},{"location":"reference/#overview","title":"Overview","text":"<p>SOUSA (Synthetic Open Unified Snare Assessment) generates synthetic drum rudiment datasets for machine learning training. The system produces over 100,000 labeled samples covering all 40 PAS (Percussive Arts Society) drum rudiments with MIDI, audio, and hierarchical performance labels.</p>"},{"location":"reference/#reference-documentation","title":"Reference Documentation","text":""},{"location":"reference/#architecture","title":"Architecture","text":"<p>System architecture documentation including:</p> <ul> <li>Pipeline Flow: Complete data flow from rudiment definitions through audio output</li> <li>Class Diagrams: Data structure relationships (Sample, StrokeLabel, MeasureLabel, ExerciseScores)</li> <li>Module Dependencies: How components interact</li> </ul>"},{"location":"reference/#rudiment-schema","title":"Rudiment Schema","text":"<p>YAML schema specification for rudiment definitions:</p> <ul> <li>Schema Fields: Complete field reference with types and constraints</li> <li>Stroke Types: tap, accent, grace, diddle, buzz</li> <li>Category Parameters: Flam, drag, diddle, and roll-specific configurations</li> <li>Examples: Annotated YAML files for common rudiments</li> </ul>"},{"location":"reference/#score-computation","title":"Score Computation","text":"<p>Mathematical foundations for performance scoring:</p> <ul> <li>Timing Metrics: Accuracy, consistency, tempo stability formulas</li> <li>Dynamics Metrics: Velocity control, accent differentiation</li> <li>Hand Balance: Combined velocity and timing balance scoring</li> <li>Overall Score: Weighted composite calculation</li> <li>Perceptual Scaling: Sigmoid transformations for human-aligned scores</li> </ul>"},{"location":"reference/#audio-processing","title":"Audio Processing","text":"<p>Audio augmentation pipeline documentation:</p> <ul> <li>Preamp Simulation: CLEAN, WARM, AGGRESSIVE, VINTAGE types</li> <li>Compression: Threshold, ratio, attack, release, knee parameters</li> <li>Equalization: Highpass, lowpass, and shelving filters</li> <li>Room Simulation: Impulse response convolution</li> <li>Degradation: Sample rate, bit depth, and noise injection</li> </ul>"},{"location":"reference/#data-format","title":"Data Format","text":"<p>Complete data schema documentation:</p> <ul> <li>File Structure: Directory layout for local and HuggingFace datasets</li> <li>Parquet Schemas: Column definitions for samples, exercises, measures, strokes</li> <li>Audio/MIDI Formats: Technical specifications</li> <li>Augmentation Presets: Configuration details for each preset</li> </ul>"},{"location":"reference/#quick-reference","title":"Quick Reference","text":""},{"location":"reference/#key-data-types","title":"Key Data Types","text":"Type Description Location <code>Rudiment</code> Complete rudiment definition <code>dataset_gen/rudiments/schema.py</code> <code>PlayerProfile</code> Player execution characteristics <code>dataset_gen/profiles/archetypes.py</code> <code>Sample</code> Complete labeled sample <code>dataset_gen/labels/schema.py</code> <code>StrokeEvent</code> Generated stroke with timing/velocity <code>dataset_gen/midi_gen/generator.py</code>"},{"location":"reference/#pipeline-stages","title":"Pipeline Stages","text":"Stage Module Description 1. Load <code>rudiments/loader.py</code> Parse YAML definitions 2. Profile <code>profiles/archetypes.py</code> Generate player profiles 3. MIDI <code>midi_gen/generator.py</code> Generate stroke events 4. Audio <code>audio_synth/synthesizer.py</code> Render via FluidSynth 5. Augment <code>audio_aug/pipeline.py</code> Apply audio augmentations 6. Label <code>labels/compute.py</code> Compute hierarchical scores 7. Store <code>pipeline/storage.py</code> Write Parquet files"},{"location":"reference/#score-ranges","title":"Score Ranges","text":"<p>All scores use a 0-100 scale where higher values indicate better performance:</p> Score Perfect Professional Advanced Intermediate Beginner <code>overall_score</code> 100 70-85 55-70 40-55 25-40 <code>timing_accuracy</code> 100 80-95 65-80 45-65 20-45 <code>hand_balance</code> 100 90-98 80-90 70-80 50-70"},{"location":"reference/#see-also","title":"See Also","text":"<ul> <li>Getting Started Guide - Installation and first steps</li> <li>User Guide - Configuration and generation</li> <li>API Reference - Python API documentation</li> </ul>"},{"location":"reference/architecture/","title":"Pipeline Architecture","text":"<p>This document describes SOUSA's data generation pipeline architecture, including data flow, class relationships, and module organization.</p>"},{"location":"reference/architecture/#pipeline-overview","title":"Pipeline Overview","text":"<p>The generation pipeline transforms rudiment definitions and player profiles into labeled audio samples through seven stages:</p> <pre><code>flowchart LR\n    subgraph Input\n        A[Rudiment YAML] --&gt; B[Loader]\n        C[Profile Config] --&gt; D[Generator]\n    end\n\n    subgraph Generation\n        B --&gt; E[StickingPattern]\n        D --&gt; F[PlayerProfile]\n        E --&gt; G[MIDI Generator]\n        F --&gt; G\n        G --&gt; H[StrokeEvents]\n    end\n\n    subgraph Audio\n        H --&gt; I[FluidSynth]\n        I --&gt; J[Raw Audio]\n        J --&gt; K[Room Sim]\n        K --&gt; L[Mic Sim]\n        L --&gt; M[Chain/EQ]\n        M --&gt; N[Degradation]\n    end\n\n    subgraph Labels\n        H --&gt; O[Stroke Labels]\n        O --&gt; P[Measure Labels]\n        P --&gt; Q[Exercise Scores]\n    end\n\n    subgraph Output\n        N --&gt; R[FLAC Audio]\n        G --&gt; S[MIDI File]\n        Q --&gt; T[Parquet Labels]\n    end</code></pre>"},{"location":"reference/architecture/#detailed-pipeline-stages","title":"Detailed Pipeline Stages","text":""},{"location":"reference/architecture/#stage-1-rudiment-loading","title":"Stage 1: Rudiment Loading","text":"<pre><code>flowchart TD\n    A[YAML Files] --&gt; B[yaml.safe_load]\n    B --&gt; C[Pydantic Validation]\n    C --&gt; D[Rudiment Object]\n\n    subgraph Validation\n        C --&gt; C1{Valid Schema?}\n        C1 --&gt;|Yes| D\n        C1 --&gt;|No| E[ValidationError]\n    end</code></pre> <p>Module: <code>dataset_gen/rudiments/loader.py</code></p> <p>The loader reads YAML definitions from <code>dataset_gen/rudiments/definitions/</code> and validates them against Pydantic schemas. Each rudiment file specifies:</p> <ul> <li>Pattern structure (strokes with hand, type, timing)</li> <li>Subdivision and tempo range</li> <li>Category-specific parameters</li> </ul>"},{"location":"reference/architecture/#stage-2-profile-generation","title":"Stage 2: Profile Generation","text":"<pre><code>flowchart TD\n    A[SkillTier] --&gt; B[ARCHETYPE_PARAMS]\n    B --&gt; C[Gaussian Sampling]\n    C --&gt; D[Dimension Clamping]\n    D --&gt; E[PlayerProfile]\n\n    subgraph Dimensions\n        C --&gt; C1[TimingDimensions]\n        C --&gt; C2[DynamicsDimensions]\n        C --&gt; C3[HandBalanceDimensions]\n        C --&gt; C4[RudimentSpecificDimensions]\n    end</code></pre> <p>Module: <code>dataset_gen/profiles/archetypes.py</code></p> <p>Profiles are generated from archetype parameters with Gaussian sampling. Each skill tier (beginner, intermediate, advanced, professional) has distinct parameter ranges derived from percussion research literature.</p>"},{"location":"reference/architecture/#stage-3-midi-generation","title":"Stage 3: MIDI Generation","text":"<pre><code>flowchart TD\n    A[Rudiment + Profile] --&gt; B[Ideal Events]\n    B --&gt; C[Apply Deviations]\n\n    subgraph Deviations\n        C --&gt; D[Timing Error]\n        C --&gt; E[Tempo Drift]\n        C --&gt; F[Hand Bias]\n        C --&gt; G[Fatigue Effect]\n        C --&gt; H[Velocity Variance]\n    end\n\n    D --&gt; I[StrokeEvents]\n    E --&gt; I\n    F --&gt; I\n    G --&gt; I\n    H --&gt; I\n\n    I --&gt; J[MIDI Bytes]</code></pre> <p>Module: <code>dataset_gen/midi_gen/generator.py</code></p> <p>The MIDI generator:</p> <ol> <li>Creates ideal stroke events from the rudiment pattern</li> <li>Applies player-specific deviations based on profile dimensions</li> <li>Encodes events as Standard MIDI Format bytes</li> </ol>"},{"location":"reference/architecture/#stage-4-audio-synthesis","title":"Stage 4: Audio Synthesis","text":"<pre><code>flowchart TD\n    A[MIDI Bytes] --&gt; B[FluidSynth]\n    B --&gt; C{Soundfont}\n    C --&gt; D[GeneralUser GS]\n    C --&gt; E[Marching Snare]\n    C --&gt; F[MT Power Drums]\n    C --&gt; G[Other SF2]\n\n    D --&gt; H[Raw Audio]\n    E --&gt; H\n    F --&gt; H\n    G --&gt; H</code></pre> <p>Module: <code>dataset_gen/audio_synth/synthesizer.py</code></p> <p>FluidSynth renders MIDI to audio using SF2 soundfonts. Multiple soundfonts provide timbral variety across practice pad, marching snare, and drum kit sounds.</p>"},{"location":"reference/architecture/#stage-5-audio-augmentation","title":"Stage 5: Audio Augmentation","text":"<pre><code>flowchart TD\n    A[Raw Audio] --&gt; B[Room Simulation]\n    B --&gt; C[Mic Simulation]\n    C --&gt; D[Recording Chain]\n    D --&gt; E[Degradation]\n    E --&gt; F[Augmented Audio]\n\n    subgraph Room\n        B --&gt; B1[IR Convolution]\n        B --&gt; B2[Wet/Dry Mix]\n    end\n\n    subgraph Mic\n        C --&gt; C1[Frequency Response]\n        C --&gt; C2[Proximity Effect]\n        C --&gt; C3[Distance Rolloff]\n    end\n\n    subgraph Chain\n        D --&gt; D1[Preamp]\n        D --&gt; D2[Compression]\n        D --&gt; D3[EQ]\n    end\n\n    subgraph Degrade\n        E --&gt; E1[Bit Depth]\n        E --&gt; E2[Sample Rate]\n        E --&gt; E3[Noise]\n    end</code></pre> <p>Module: <code>dataset_gen/audio_aug/pipeline.py</code></p> <p>The augmentation pipeline applies realistic recording conditions through four stages, each with configurable parameters.</p>"},{"location":"reference/architecture/#stage-6-label-computation","title":"Stage 6: Label Computation","text":"<pre><code>flowchart TD\n    A[StrokeEvents] --&gt; B[compute_stroke_labels]\n    B --&gt; C[StrokeLabel list]\n    C --&gt; D[compute_measure_labels]\n    D --&gt; E[MeasureLabel list]\n    C --&gt; F[compute_exercise_scores]\n    E --&gt; F\n    F --&gt; G[ExerciseScores]\n\n    C --&gt; H[Sample]\n    E --&gt; H\n    G --&gt; H</code></pre> <p>Module: <code>dataset_gen/labels/compute.py</code></p> <p>Labels are computed hierarchically:</p> <ol> <li>Stroke level: Individual timing/velocity errors</li> <li>Measure level: Aggregate statistics per measure</li> <li>Exercise level: Composite performance scores</li> </ol>"},{"location":"reference/architecture/#stage-7-storage","title":"Stage 7: Storage","text":"<pre><code>flowchart TD\n    A[Sample Objects] --&gt; B[DataFrame Conversion]\n    B --&gt; C[Parquet Writer]\n\n    C --&gt; D[samples.parquet]\n    C --&gt; E[exercises.parquet]\n    C --&gt; F[measures.parquet]\n    C --&gt; G[strokes.parquet]\n\n    H[MIDI Bytes] --&gt; I[midi/*.mid]\n    J[Audio Array] --&gt; K[audio/*.flac]</code></pre> <p>Module: <code>dataset_gen/pipeline/storage.py</code></p> <p>Final outputs are written to:</p> <ul> <li>Parquet files for structured labels</li> <li>MIDI files for symbolic data</li> <li>FLAC files for lossless audio</li> </ul>"},{"location":"reference/architecture/#data-structure-relationships","title":"Data Structure Relationships","text":""},{"location":"reference/architecture/#class-diagram","title":"Class Diagram","text":"<pre><code>classDiagram\n    class Sample {\n        +str sample_id\n        +str profile_id\n        +str rudiment_slug\n        +int tempo_bpm\n        +float duration_sec\n        +int num_cycles\n        +str skill_tier\n        +str dominant_hand\n        +List~StrokeLabel~ strokes\n        +List~MeasureLabel~ measures\n        +ExerciseScores exercise_scores\n        +AudioAugmentation audio_augmentation\n    }\n\n    class StrokeLabel {\n        +int index\n        +str hand\n        +str stroke_type\n        +float intended_time_ms\n        +float actual_time_ms\n        +float timing_error_ms\n        +int intended_velocity\n        +int actual_velocity\n        +int velocity_error\n        +bool is_grace_note\n        +bool is_accent\n        +int diddle_position\n        +float flam_spacing_ms\n        +int parent_stroke_index\n    }\n\n    class MeasureLabel {\n        +int index\n        +int stroke_start\n        +int stroke_end\n        +float timing_mean_error_ms\n        +float timing_std_ms\n        +float timing_max_error_ms\n        +float velocity_mean\n        +float velocity_std\n        +float velocity_consistency\n        +float lr_velocity_ratio\n        +float lr_timing_diff_ms\n    }\n\n    class ExerciseScores {\n        +float timing_accuracy\n        +float timing_consistency\n        +float tempo_stability\n        +float subdivision_evenness\n        +float velocity_control\n        +float accent_differentiation\n        +float accent_accuracy\n        +float hand_balance\n        +float weak_hand_index\n        +float flam_quality\n        +float diddle_quality\n        +float roll_sustain\n        +float groove_feel_proxy\n        +float overall_score\n        +float tier_confidence\n    }\n\n    class AudioAugmentation {\n        +str soundfont\n        +str room_type\n        +float room_wet_dry\n        +float mic_distance\n        +str mic_type\n        +float compression_ratio\n        +float noise_level_db\n        +int bit_depth\n        +int sample_rate\n    }\n\n    Sample \"1\" *-- \"many\" StrokeLabel : contains\n    Sample \"1\" *-- \"many\" MeasureLabel : contains\n    Sample \"1\" *-- \"1\" ExerciseScores : contains\n    Sample \"1\" *-- \"0..1\" AudioAugmentation : contains\n    MeasureLabel --&gt; StrokeLabel : references via stroke_start/end</code></pre>"},{"location":"reference/architecture/#rudiment-structure","title":"Rudiment Structure","text":"<pre><code>classDiagram\n    class Rudiment {\n        +str name\n        +str slug\n        +RudimentCategory category\n        +StickingPattern pattern\n        +Subdivision subdivision\n        +Tuple tempo_range\n        +RudimentParams params\n        +int pas_number\n        +str description\n        +bool starts_on_left\n    }\n\n    class StickingPattern {\n        +List~Stroke~ strokes\n        +float beats_per_cycle\n        +stroke_count()\n        +accent_positions()\n        +grace_note_positions()\n    }\n\n    class Stroke {\n        +Hand hand\n        +StrokeType stroke_type\n        +float grace_offset\n        +int diddle_position\n        +is_accented()\n        +is_grace_note()\n    }\n\n    class RudimentParams {\n        +Tuple flam_spacing_range\n        +Tuple diddle_ratio_range\n        +str roll_type\n        +int roll_strokes_per_beat\n        +Tuple buzz_strokes_range\n        +Tuple drag_spacing_range\n    }\n\n    Rudiment \"1\" *-- \"1\" StickingPattern : contains\n    Rudiment \"1\" *-- \"1\" RudimentParams : contains\n    StickingPattern \"1\" *-- \"many\" Stroke : contains</code></pre>"},{"location":"reference/architecture/#player-profile-structure","title":"Player Profile Structure","text":"<pre><code>classDiagram\n    class PlayerProfile {\n        +str id\n        +SkillTier skill_tier\n        +ExecutionDimensions dimensions\n        +str dominant_hand\n        +float fatigue_coefficient\n        +Tuple tempo_comfort_range\n        +get_tempo_penalty()\n    }\n\n    class ExecutionDimensions {\n        +TimingDimensions timing\n        +DynamicsDimensions dynamics\n        +HandBalanceDimensions hand_balance\n        +RudimentSpecificDimensions rudiment_specific\n    }\n\n    class TimingDimensions {\n        +float timing_accuracy\n        +float timing_consistency\n        +float tempo_drift\n        +float subdivision_evenness\n    }\n\n    class DynamicsDimensions {\n        +float velocity_mean\n        +float velocity_variance\n        +float accent_differentiation\n        +float accent_accuracy\n    }\n\n    class HandBalanceDimensions {\n        +float lr_velocity_ratio\n        +float lr_timing_bias\n        +float lr_consistency_delta\n    }\n\n    class RudimentSpecificDimensions {\n        +float flam_spacing\n        +float flam_spacing_variance\n        +float diddle_evenness\n        +float diddle_variance\n        +float roll_sustain\n        +float buzz_density_consistency\n    }\n\n    PlayerProfile \"1\" *-- \"1\" ExecutionDimensions : contains\n    ExecutionDimensions \"1\" *-- \"1\" TimingDimensions\n    ExecutionDimensions \"1\" *-- \"1\" DynamicsDimensions\n    ExecutionDimensions \"1\" *-- \"1\" HandBalanceDimensions\n    ExecutionDimensions \"1\" *-- \"1\" RudimentSpecificDimensions</code></pre>"},{"location":"reference/architecture/#module-organization","title":"Module Organization","text":"<pre><code>dataset_gen/\n\u251c\u2500\u2500 rudiments/\n\u2502   \u251c\u2500\u2500 definitions/     # 40 YAML files\n\u2502   \u251c\u2500\u2500 schema.py        # Pydantic models\n\u2502   \u2514\u2500\u2500 loader.py        # YAML loading\n\u2502\n\u251c\u2500\u2500 profiles/\n\u2502   \u251c\u2500\u2500 archetypes.py    # Profile generation\n\u2502   \u2514\u2500\u2500 sampler.py       # Batch sampling\n\u2502\n\u251c\u2500\u2500 midi_gen/\n\u2502   \u251c\u2500\u2500 generator.py     # MIDI generation\n\u2502   \u2514\u2500\u2500 articulations.py # Articulation handling\n\u2502\n\u251c\u2500\u2500 audio_synth/\n\u2502   \u2514\u2500\u2500 synthesizer.py   # FluidSynth wrapper\n\u2502\n\u251c\u2500\u2500 audio_aug/\n\u2502   \u251c\u2500\u2500 room.py          # Room simulation\n\u2502   \u251c\u2500\u2500 mic.py           # Mic simulation\n\u2502   \u251c\u2500\u2500 chain.py         # Recording chain\n\u2502   \u251c\u2500\u2500 degradation.py   # Quality degradation\n\u2502   \u2514\u2500\u2500 pipeline.py      # Augmentation orchestration\n\u2502\n\u251c\u2500\u2500 labels/\n\u2502   \u251c\u2500\u2500 schema.py        # Label Pydantic models\n\u2502   \u251c\u2500\u2500 compute.py       # Score computation\n\u2502   \u2514\u2500\u2500 groove.py        # Groove metrics\n\u2502\n\u251c\u2500\u2500 pipeline/\n\u2502   \u251c\u2500\u2500 generate.py      # Main orchestration\n\u2502   \u251c\u2500\u2500 parallel.py      # Multiprocessing\n\u2502   \u251c\u2500\u2500 checkpoint.py    # Resumable generation\n\u2502   \u251c\u2500\u2500 storage.py       # Parquet writing\n\u2502   \u2514\u2500\u2500 splits.py        # Train/val/test splits\n\u2502\n\u251c\u2500\u2500 validation/\n\u2502   \u251c\u2500\u2500 verify.py        # Data integrity checks\n\u2502   \u251c\u2500\u2500 realism.py       # Literature validation\n\u2502   \u2514\u2500\u2500 report.py        # Report generation\n\u2502\n\u2514\u2500\u2500 hub/\n    \u2514\u2500\u2500 uploader.py      # HuggingFace upload\n</code></pre>"},{"location":"reference/architecture/#parallel-processing","title":"Parallel Processing","text":"<pre><code>flowchart TD\n    A[Sample Tasks] --&gt; B[Task Queue]\n    B --&gt; C1[Worker 1]\n    B --&gt; C2[Worker 2]\n    B --&gt; C3[Worker N]\n\n    C1 --&gt; D[Result Queue]\n    C2 --&gt; D\n    C3 --&gt; D\n\n    D --&gt; E[Checkpoint Manager]\n    E --&gt; F[Storage Writer]\n\n    subgraph Checkpoint\n        E --&gt; G[Progress File]\n        E --&gt; H[Partial Results]\n    end</code></pre> <p>Module: <code>dataset_gen/pipeline/parallel.py</code></p> <p>The pipeline supports:</p> <ul> <li>Multiprocessing: CPU-parallel sample generation</li> <li>Checkpointing: Resume interrupted generation</li> <li>Batch writing: Efficient Parquet append operations</li> </ul>"},{"location":"reference/architecture/#data-flow-summary","title":"Data Flow Summary","text":"Stage Input Output Key Module Load YAML files <code>Rudiment</code> objects <code>rudiments/loader.py</code> Profile Skill tier <code>PlayerProfile</code> objects <code>profiles/archetypes.py</code> MIDI Rudiment + Profile <code>StrokeEvent</code> list + MIDI bytes <code>midi_gen/generator.py</code> Synth MIDI bytes Raw audio array <code>audio_synth/synthesizer.py</code> Augment Raw audio Augmented audio <code>audio_aug/pipeline.py</code> Label StrokeEvents <code>Sample</code> with all labels <code>labels/compute.py</code> Store Samples Parquet + MIDI + FLAC files <code>pipeline/storage.py</code>"},{"location":"reference/architecture/#see-also","title":"See Also","text":"<ul> <li>Rudiment Schema - YAML format specification</li> <li>Score Computation - Scoring algorithms</li> <li>Audio Processing - Augmentation details</li> </ul>"},{"location":"reference/audio-processing/","title":"Audio Processing","text":"<p>This document describes SOUSA's audio augmentation pipeline, which simulates realistic recording conditions to create diverse training data.</p>"},{"location":"reference/audio-processing/#pipeline-overview","title":"Pipeline Overview","text":"<p>The audio augmentation pipeline processes raw synthesized audio through four stages:</p> <pre><code>flowchart TD\n    A[Raw Audio] --&gt; B[Room Simulation]\n    B --&gt; C[Microphone Simulation]\n    C --&gt; D[Recording Chain]\n    D --&gt; E[Degradation]\n    E --&gt; F[Output Audio]\n\n    subgraph \"Stage 1: Room\"\n        B --&gt; B1[IR Convolution]\n        B --&gt; B2[Wet/Dry Mix]\n    end\n\n    subgraph \"Stage 2: Mic\"\n        C --&gt; C1[Frequency Response]\n        C --&gt; C2[Proximity Effect]\n        C --&gt; C3[Distance Rolloff]\n    end\n\n    subgraph \"Stage 3: Chain\"\n        D --&gt; D1[Preamp/Saturation]\n        D --&gt; D2[Compression]\n        D --&gt; D3[EQ]\n    end\n\n    subgraph \"Stage 4: Degrade\"\n        E --&gt; E1[Sample Rate]\n        E --&gt; E2[Bit Depth]\n        E --&gt; E3[Noise Injection]\n    end</code></pre>"},{"location":"reference/audio-processing/#stage-1-room-simulation","title":"Stage 1: Room Simulation","text":"<p>Module: <code>dataset_gen/audio_aug/room.py</code></p> <p>Room simulation adds acoustic space characteristics using convolution reverb.</p>"},{"location":"reference/audio-processing/#room-types","title":"Room Types","text":"Room Type RT60 (sec) Early Reflections (ms) Default Wet/Dry <code>PRACTICE_ROOM</code> 0.3 8 0.15 <code>STUDIO</code> 0.5 15 0.25 <code>BEDROOM</code> 0.25 5 0.10 <code>GARAGE</code> 0.8 25 0.30 <code>GYM</code> 1.5 50 0.35 <code>CONCERT_HALL</code> 2.0 40 0.40 <code>CHURCH</code> 3.0 60 0.50 <code>OUTDOOR</code> 0.1 100 0.05"},{"location":"reference/audio-processing/#configuration","title":"Configuration","text":"<pre><code>@dataclass\nclass RoomConfig:\n    room_type: RoomType = RoomType.STUDIO\n    wet_dry_mix: float = 0.3        # 0 = dry, 1 = wet only\n    ir_path: Path | None = None     # Custom IR file\n    decay_time_sec: float = 0.5     # RT60 approximation\n    early_reflection_delay_ms: float = 20.0\n    pre_delay_ms: float = 10.0\n    ir_trim_sec: float | None = None\n    ir_gain: float = 1.0\n</code></pre>"},{"location":"reference/audio-processing/#algorithm","title":"Algorithm","text":"<p>Impulse Response (IR) Convolution:</p> <p>When an IR file is available:</p> \\[ y(t) = x(t) * h(t) = \\int_{-\\infty}^{\\infty} x(\\tau) \\cdot h(t - \\tau) \\, d\\tau \\] <p>Where:</p> <ul> <li>\\(x(t)\\) is the input audio</li> <li>\\(h(t)\\) is the impulse response</li> <li>\\(y(t)\\) is the wet (reverberant) signal</li> </ul> <p>Synthetic IR Generation:</p> <p>When no IR is available, a synthetic reverb is generated:</p> <ol> <li> <p>Create exponential decay envelope:    $\\(\\text{envelope}(t) = e^{-6.91 \\cdot t / \\text{RT60}}\\)$</p> </li> <li> <p>Add early reflections at calculated delays</p> </li> <li> <p>Generate diffuse tail from filtered noise</p> </li> <li> <p>Mix dry and wet signals:    $\\(\\text{output} = (1 - \\text{wet\\_dry}) \\cdot \\text{dry} + \\text{wet\\_dry} \\cdot \\text{wet}\\)$</p> </li> </ol>"},{"location":"reference/audio-processing/#stage-2-microphone-simulation","title":"Stage 2: Microphone Simulation","text":"<p>Module: <code>dataset_gen/audio_aug/mic.py</code></p> <p>Microphone simulation applies frequency response curves and distance-based effects.</p>"},{"location":"reference/audio-processing/#microphone-types","title":"Microphone Types","text":"Type Character Frequency Response <code>DYNAMIC</code> SM57-style Presence peak at 3-5kHz, rolled-off highs <code>CONDENSER</code> Flat, detailed Slight air boost at 10kHz <code>RIBBON</code> Warm, vintage Significant high rolloff above 8kHz <code>PIEZO</code> Contact mic Harsh mids, limited range"},{"location":"reference/audio-processing/#microphone-positions","title":"Microphone Positions","text":"Position Effect <code>CENTER</code> On-axis, no additional filtering <code>OFF_AXIS</code> Reduced highs (10kHz lowpass) <code>OVERHEAD</code> More room, less attack (5kHz lowpass) <code>DISTANT</code> Significant rolloff (3kHz lowpass)"},{"location":"reference/audio-processing/#configuration_1","title":"Configuration","text":"<pre><code>@dataclass\nclass MicConfig:\n    mic_type: MicType = MicType.CONDENSER\n    position: MicPosition = MicPosition.CENTER\n    distance_meters: float = 0.5\n    proximity_effect: bool = True\n    distance_rolloff: bool = True\n    self_noise_db: float = -80.0\n    output_gain: float = 1.0\n</code></pre>"},{"location":"reference/audio-processing/#frequency-response-curves","title":"Frequency Response Curves","text":"<p>Each microphone type has a defined frequency response:</p> <p>Dynamic (SM57-style):</p> Frequency (Hz) Gain (dB) 20 -6 80 -3 200 0 1000 0 3000 +3 5000 +2 8000 0 12000 -3 16000 -8 20000 -15 <p>Condenser:</p> Frequency (Hz) Gain (dB) 20 -3 50 0 5000 +1 10000 +2 15000 +1 20000 -2"},{"location":"reference/audio-processing/#proximity-effect","title":"Proximity Effect","text":"<p>Bass boost for close-miking (&lt; 0.3m):</p> \\[ \\text{boost\\_dB} = \\max(0, (0.3 - \\text{distance}) \\times 20) \\] <p>Applied as a low shelf filter at 200Hz.</p>"},{"location":"reference/audio-processing/#distance-rolloff","title":"Distance Rolloff","text":"<p>High frequency rolloff based on distance:</p> \\[ f_{\\text{rolloff}} = \\frac{20000}{1 + \\text{distance} \\times 2} \\] <p>Clamped to 3000-15000 Hz range.</p> <p>Amplitude reduction (inverse square law approximation):</p> \\[ \\text{amplitude} = \\frac{1}{1 + \\text{distance}^{1.5}} \\]"},{"location":"reference/audio-processing/#stage-3-recording-chain","title":"Stage 3: Recording Chain","text":"<p>Module: <code>dataset_gen/audio_aug/chain.py</code></p> <p>The recording chain simulates analog processing: preamp, compression, and EQ.</p>"},{"location":"reference/audio-processing/#preamp-types","title":"Preamp Types","text":"Type Character Saturation Style <code>CLEAN</code> Transparent Minimal, soft clipping <code>WARM</code> Tube-style Asymmetric, even harmonics, low-mid bump <code>AGGRESSIVE</code> Solid-state Hard clipping, odd harmonics <code>VINTAGE</code> Transformer Soft limiting, frequency coloration"},{"location":"reference/audio-processing/#preamp-configuration","title":"Preamp Configuration","text":"<pre><code>@dataclass\nclass PreampConfig:\n    preamp_type: PreampType = PreampType.CLEAN\n    gain_db: float = 0.0      # Input gain\n    drive: float = 0.0        # Saturation amount (0-1)\n    output_gain_db: float = 0.0\n</code></pre>"},{"location":"reference/audio-processing/#saturation-algorithms","title":"Saturation Algorithms","text":"<p>Soft Clipping (tanh):</p> \\[ y = \\tanh(x \\cdot (1 + \\text{drive} \\times 3)) \\] <p>Hard Clipping:</p> \\[ y = \\text{clip}(x \\cdot (1 + \\text{drive} \\times 2), -\\text{threshold}, \\text{threshold}) \\] <p>Where \\(\\text{threshold} = 1.0 - \\text{drive} \\times 0.7\\)</p> <p>Tube Saturation (asymmetric):</p> <pre><code>positive = np.tanh(positive_signal)\nnegative = np.tanh(negative_signal * 0.9) * 1.1  # Asymmetry\n</code></pre>"},{"location":"reference/audio-processing/#compressor-configuration","title":"Compressor Configuration","text":"<pre><code>@dataclass\nclass CompressorConfig:\n    enabled: bool = True\n    threshold_db: float = -12.0\n    ratio: float = 4.0           # e.g., 4:1\n    attack_ms: float = 10.0\n    release_ms: float = 100.0\n    knee_db: float = 6.0         # Soft knee width\n    makeup_gain_db: float = 0.0\n</code></pre>"},{"location":"reference/audio-processing/#compression-algorithm","title":"Compression Algorithm","text":"<p>Gain Reduction:</p> <p>For input level \\(L\\) above threshold \\(T\\):</p> \\[ G = \\left(\\frac{T}{L}\\right)^{1 - 1/R} \\] <p>Where \\(R\\) is the compression ratio.</p> <p>Soft Knee:</p> <p>In the knee region (\\(T - \\frac{K}{2}\\) to \\(T + \\frac{K}{2}\\)):</p> \\[ R_{\\text{effective}} = 1 + \\frac{L - T_{\\text{start}}}{T_{\\text{end}} - T_{\\text{start}}} \\times (R - 1) \\] <p>Time Constants:</p> \\[ \\alpha_{\\text{attack}} = e^{-1 / (f_s \\times t_{\\text{attack}})} \\] \\[ \\alpha_{\\text{release}} = e^{-1 / (f_s \\times t_{\\text{release}})} \\]"},{"location":"reference/audio-processing/#eq-configuration","title":"EQ Configuration","text":"<pre><code>@dataclass\nclass EQConfig:\n    enabled: bool = True\n    highpass_freq: float = 40.0      # Hz\n    highpass_enabled: bool = True\n    lowpass_freq: float = 18000.0    # Hz\n    lowpass_enabled: bool = True\n    low_shelf: tuple[float, float] = (100.0, 0.0)   # (freq, gain_db)\n    high_shelf: tuple[float, float] = (8000.0, 0.0)\n</code></pre>"},{"location":"reference/audio-processing/#eq-implementation","title":"EQ Implementation","text":"<ul> <li>Highpass/Lowpass: 2<sup>nd</sup>-order Butterworth filters</li> <li>Shelving: 1<sup>st</sup>-order filters with gain mixing</li> </ul>"},{"location":"reference/audio-processing/#stage-4-degradation","title":"Stage 4: Degradation","text":"<p>Module: <code>dataset_gen/audio_aug/degradation.py</code></p> <p>Degradation simulates imperfect recording conditions.</p>"},{"location":"reference/audio-processing/#noise-types","title":"Noise Types","text":"Type Character Implementation <code>WHITE</code> Flat spectrum Gaussian noise <code>PINK</code> 1/f spectrum Voss-McCartney algorithm <code>BROWN</code> 1/f^2 (rumble) Integrated white noise <code>HVAC</code> Air conditioning 60Hz hum + filtered broadband <code>ROOM_TONE</code> Ambient Bandpass filtered pink noise <code>TAPE_HISS</code> High frequency Highpass filtered white noise <code>VINYL</code> Crackle/pops Brown noise + random impulses"},{"location":"reference/audio-processing/#noise-configuration","title":"Noise Configuration","text":"<pre><code>@dataclass\nclass NoiseConfig:\n    enabled: bool = True\n    noise_type: NoiseType = NoiseType.PINK\n    level_db: float = -40.0    # Relative to signal\n    noise_file: Path | None = None\n</code></pre>"},{"location":"reference/audio-processing/#noise-level-calculation","title":"Noise Level Calculation","text":"\\[ \\text{noise\\_amplitude} = \\text{signal\\_rms} \\times 10^{\\text{level\\_dB} / 20} \\]"},{"location":"reference/audio-processing/#bit-depth-reduction","title":"Bit Depth Reduction","text":"<pre><code>@dataclass\nclass BitDepthConfig:\n    enabled: bool = False\n    bit_depth: int = 16       # 24, 16, 12, or 8\n    dither: bool = True       # TPDF dither\n</code></pre> <p>Quantization:</p> \\[ y = \\frac{\\text{round}(x \\times 2^{n-1})}{2^{n-1}} \\] <p>Where \\(n\\) is the target bit depth.</p> <p>TPDF Dither:</p> <p>Triangular probability density function dither is added before quantization to reduce harmonic distortion:</p> \\[ \\text{dither} = \\frac{r_1 + r_2 - 1}{2^{n-1}} \\] <p>Where \\(r_1, r_2\\) are uniform random values in [0, 1].</p>"},{"location":"reference/audio-processing/#sample-rate-degradation","title":"Sample Rate Degradation","text":"<pre><code>@dataclass\nclass SampleRateConfig:\n    enabled: bool = False\n    target_rate: int = 22050\n    anti_alias: bool = True\n</code></pre> <p>Process:</p> <ol> <li>Apply anti-aliasing lowpass filter at \\(f_{\\text{target}} / 2\\)</li> <li>Downsample to target rate</li> <li>Upsample back to original rate</li> </ol> <p>This introduces aliasing artifacts characteristic of low-quality recordings.</p>"},{"location":"reference/audio-processing/#additional-degradations","title":"Additional Degradations","text":"Parameter Range Effect <code>dc_offset</code> -1 to 1 Adds DC offset <code>phase_shift</code> 0 to 1 Phase difference between stereo channels <code>wow_flutter</code> 0 to 1 Tape-style pitch variation <code>dropout_probability</code> 0 to 1 Brief audio dropouts <p>Wow and Flutter:</p> \\[ \\text{modulation}(t) = 1 + \\sin(2\\pi f_{\\text{wow}} t) \\cdot a_{\\text{wow}} + \\sin(2\\pi f_{\\text{flutter}} t) \\cdot a_{\\text{flutter}} \\] <p>Where:</p> <ul> <li>\\(f_{\\text{wow}} \\in [0.5, 2]\\) Hz</li> <li>\\(f_{\\text{flutter}} \\in [5, 15]\\) Hz</li> <li>Amplitudes scale with the <code>wow_flutter</code> parameter</li> </ul>"},{"location":"reference/audio-processing/#augmentation-presets","title":"Augmentation Presets","text":"<p>SOUSA includes predefined augmentation presets for common scenarios:</p> Preset Room Mic Compression Noise Use Case <code>cleanstudio</code> None Close None None Reference recordings <code>cleanclosed</code> Small Close Light None Studio practice <code>practiceroom</code> Practice Medium Light Low Typical practice <code>concerthall</code> Hall Far None Low Live performance <code>gym</code> Gymnasium Far None Medium Marching band <code>garage</code> Garage Medium Medium Medium Band rehearsal <code>vintagetape</code> Medium Medium Tape saturation Tape hiss Vintage aesthetic <code>lofi</code> Variable Variable Heavy High Lo-fi aesthetic <code>phonerecording</code> None Poor Heavy limiting High Phone recordings"},{"location":"reference/audio-processing/#preset-configuration-example","title":"Preset Configuration Example","text":"<pre><code># 'practiceroom' preset\nconfig = AugmentationConfig(\n    room=RoomConfig(\n        room_type=RoomType.PRACTICE_ROOM,\n        wet_dry_mix=0.15,\n    ),\n    mic=MicConfig(\n        mic_type=MicType.DYNAMIC,\n        distance_meters=0.8,\n    ),\n    chain=ChainConfig(\n        compressor=CompressorConfig(\n            threshold_db=-18.0,\n            ratio=2.0,\n        ),\n    ),\n    degradation=DegradationConfig(\n        noise=NoiseConfig(\n            noise_type=NoiseType.ROOM_TONE,\n            level_db=-45.0,\n        ),\n    ),\n)\n</code></pre>"},{"location":"reference/audio-processing/#output-specifications","title":"Output Specifications","text":"Property Value Format FLAC (lossless) Sample Rate 44,100 Hz Bit Depth 24-bit Channels Mono Duration 4-12 seconds typical"},{"location":"reference/audio-processing/#implementation-notes","title":"Implementation Notes","text":""},{"location":"reference/audio-processing/#processing-order","title":"Processing Order","text":"<p>The fixed processing order ensures consistent results:</p> <ol> <li>Room simulation (affects spatial characteristics)</li> <li>Mic simulation (captures source character)</li> <li>Recording chain (analog processing)</li> <li>Degradation (final quality reduction)</li> </ol>"},{"location":"reference/audio-processing/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>IR Caching: Impulse responses are cached to avoid repeated disk reads</li> <li>Noise Caching: External noise files are cached and looped as needed</li> <li>Filter Design: Filters are designed once per configuration</li> </ul>"},{"location":"reference/audio-processing/#clipping-prevention","title":"Clipping Prevention","text":"<p>Each stage includes output limiting:</p> <pre><code>max_val = np.max(np.abs(output))\nif max_val &gt; 1.0:\n    output = output / max_val * 0.99\n</code></pre>"},{"location":"reference/audio-processing/#usage-example","title":"Usage Example","text":"<pre><code>from dataset_gen.audio_aug.pipeline import AugmentationPipeline\n\n# Create pipeline with preset\npipeline = AugmentationPipeline.from_preset(\"practiceroom\")\n\n# Process audio\naugmented = pipeline.process(raw_audio, sample_rate=44100)\n\n# Or with custom config\nfrom dataset_gen.audio_aug.room import RoomConfig, RoomType\nfrom dataset_gen.audio_aug.chain import ChainConfig, PreampType\n\nconfig = AugmentationConfig(\n    room=RoomConfig(room_type=RoomType.GARAGE),\n    chain=ChainConfig(\n        preamp=PreampConfig(preamp_type=PreampType.WARM, drive=0.3)\n    ),\n)\naugmented = pipeline.process(raw_audio, config=config)\n</code></pre>"},{"location":"reference/audio-processing/#see-also","title":"See Also","text":"<ul> <li>Architecture - Pipeline overview</li> <li>Data Format - Augmentation metadata in Parquet</li> </ul>"},{"location":"reference/data-format/","title":"Data Format","text":"<p>This document describes the complete data schema for the SOUSA dataset, including file structure, Parquet schemas, and format specifications.</p>"},{"location":"reference/data-format/#overview","title":"Overview","text":"<p>SOUSA uses a hierarchical label structure with three levels of granularity:</p> <pre><code>Exercise (1 per sample)\n  |-- Measures (N per exercise)\n        |-- Strokes (M per measure)\n</code></pre> <p>Each sample includes:</p> <ul> <li>MIDI file: Symbolic performance data</li> <li>Audio file: Rendered and augmented audio (FLAC)</li> <li>Labels: Hierarchical scores in Parquet format</li> </ul>"},{"location":"reference/data-format/#file-structure","title":"File Structure","text":""},{"location":"reference/data-format/#local-dataset","title":"Local Dataset","text":"<pre><code>output/dataset/\n|-- audio/                    # FLAC audio files (44.1kHz, 24-bit)\n|   |-- {sample_id}.flac\n|-- midi/                     # Standard MIDI files\n|   |-- {sample_id}.mid\n|-- labels/                   # Parquet files with hierarchical labels\n|   |-- samples.parquet       # Sample metadata\n|   |-- exercises.parquet     # Exercise-level scores\n|   |-- measures.parquet      # Measure-level statistics\n|   |-- strokes.parquet       # Stroke-level events\n|-- index.json                # Dataset index\n|-- splits.json               # Train/val/test profile assignments\n|-- README.md                 # Dataset card\n</code></pre>"},{"location":"reference/data-format/#huggingface-format","title":"HuggingFace Format","text":"<pre><code>username/sousa/\n|-- data/\n|   |-- train-00000-of-00001.parquet\n|   |-- validation-00000-of-00001.parquet\n|   |-- test-00000-of-00001.parquet\n|-- audio/\n|   |-- {sample_id}.flac\n|-- midi/\n|   |-- {sample_id}.mid\n|-- README.md\n</code></pre>"},{"location":"reference/data-format/#sample-id-convention","title":"Sample ID Convention","text":"<p>Sample IDs encode key metadata for easy filtering:</p> <pre><code>{skill_tier}{profile_num}_{rudiment}_{tempo}bpm_{soundfont}_{augmentation}\n</code></pre> Component Description Examples <code>skill_tier</code> 3-letter skill code <code>beg</code>, <code>int</code>, <code>adv</code>, <code>pro</code> <code>profile_num</code> 3-digit profile number <code>000</code>-<code>099</code> <code>rudiment</code> Snake_case rudiment name <code>single_paradiddle</code>, <code>flam_tap</code> <code>tempo</code> BPM value <code>60</code>-<code>180</code> <code>soundfont</code> Soundfont identifier <code>generalu</code>, <code>marching</code>, <code>mtpowerd</code> <code>augmentation</code> Augmentation preset <code>cleanstudio</code>, <code>practiceroom</code>, <code>gym</code> <p>Example: <code>adv042_single_paradiddle_100bpm_marching_practiceroom</code></p>"},{"location":"reference/data-format/#schema-definitions","title":"Schema Definitions","text":""},{"location":"reference/data-format/#sample-metadata-samplesparquet","title":"Sample Metadata (<code>samples.parquet</code>)","text":"Column Type Description <code>sample_id</code> string Unique sample identifier <code>profile_id</code> string UUID of player profile <code>rudiment_slug</code> string Rudiment identifier (snake_case) <code>tempo_bpm</code> int Performance tempo <code>duration_sec</code> float Audio duration in seconds <code>num_cycles</code> int Number of rudiment repetitions <code>skill_tier</code> string One of: <code>beginner</code>, <code>intermediate</code>, <code>advanced</code>, <code>professional</code> <code>skill_tier_binary</code> string One of: <code>novice</code>, <code>skilled</code> <code>dominant_hand</code> string <code>right</code> or <code>left</code> <code>midi_path</code> string Relative path to MIDI file <code>audio_path</code> string Relative path to audio file <code>num_strokes</code> int Total strokes in performance <code>num_measures</code> int Total measures in performance"},{"location":"reference/data-format/#audio-augmentation-columns","title":"Audio Augmentation Columns","text":"<p>Prefixed with <code>aug_</code>:</p> Column Type Description <code>aug_soundfont</code> string Soundfont used for synthesis <code>aug_room_type</code> string Room simulation type <code>aug_room_wet_dry</code> float Room reverb wet/dry ratio (0-1) <code>aug_mic_distance</code> float Simulated mic distance (meters) <code>aug_mic_type</code> string Microphone type simulation <code>aug_compression_ratio</code> float Compression ratio applied <code>aug_noise_level_db</code> float Added noise level (dB) <code>aug_bit_depth</code> int Output bit depth <code>aug_sample_rate</code> int Output sample rate (Hz)"},{"location":"reference/data-format/#exercise-scores-exercisesparquet","title":"Exercise Scores (<code>exercises.parquet</code>)","text":"<p>All scores are 0-100 (higher = better performance).</p> Column Type Description <code>sample_id</code> string Sample identifier"},{"location":"reference/data-format/#timing-scores","title":"Timing Scores","text":"Column Type Description <code>timing_accuracy</code> float How close strokes are to intended timing <code>timing_consistency</code> float Variance in timing errors (lower variance = higher score) <code>tempo_stability</code> float Consistency of overall tempo throughout <code>subdivision_evenness</code> float Evenness of note subdivisions"},{"location":"reference/data-format/#dynamics-scores","title":"Dynamics Scores","text":"Column Type Description <code>velocity_control</code> float Control over stroke dynamics <code>accent_differentiation</code> float Clarity between accented/unaccented strokes <code>accent_accuracy</code> float Correct placement of accents"},{"location":"reference/data-format/#balance-scores","title":"Balance Scores","text":"Column Type Description <code>hand_balance</code> float Evenness between L/R hand strokes <code>weak_hand_index</code> float 0=left weak, 100=right weak, 50=balanced"},{"location":"reference/data-format/#rudiment-specific-scores-nullable","title":"Rudiment-Specific Scores (nullable)","text":"Column Type Description <code>flam_quality</code> float? Grace note spacing quality (flam rudiments only) <code>diddle_quality</code> float? Diddle stroke evenness (paradiddles only) <code>roll_sustain</code> float? Roll smoothness (roll rudiments only)"},{"location":"reference/data-format/#composite-scores","title":"Composite Scores","text":"Column Type Description <code>groove_feel_proxy</code> float Groove/feel metric (0-1 scale) <code>overall_score</code> float Weighted composite of all metrics <code>tier_confidence</code> float Confidence that skill_tier label is unambiguous (0-1)"},{"location":"reference/data-format/#measure-labels-measuresparquet","title":"Measure Labels (<code>measures.parquet</code>)","text":"<p>Per-measure aggregate statistics.</p> Column Type Description <code>sample_id</code> string Sample identifier <code>index</code> int Measure index (0-based) <code>stroke_start</code> int First stroke index in measure <code>stroke_end</code> int Last stroke index (exclusive)"},{"location":"reference/data-format/#timing-statistics","title":"Timing Statistics","text":"Column Type Description <code>timing_mean_error_ms</code> float Mean timing error (milliseconds) <code>timing_std_ms</code> float Timing error standard deviation <code>timing_max_error_ms</code> float Maximum timing error"},{"location":"reference/data-format/#velocity-statistics","title":"Velocity Statistics","text":"Column Type Description <code>velocity_mean</code> float Mean velocity (0-127 MIDI scale) <code>velocity_std</code> float Velocity standard deviation <code>velocity_consistency</code> float 1 - (std/mean), higher = more consistent"},{"location":"reference/data-format/#hand-balance","title":"Hand Balance","text":"Column Type Description <code>lr_velocity_ratio</code> float? Left/Right velocity ratio (null if single-hand) <code>lr_timing_diff_ms</code> float? L/R timing difference (ms)"},{"location":"reference/data-format/#stroke-labels-strokesparquet","title":"Stroke Labels (<code>strokes.parquet</code>)","text":"<p>Individual stroke-level events.</p> Column Type Description <code>sample_id</code> string Sample identifier <code>index</code> int Stroke index (0-based) <code>hand</code> string <code>L</code> or <code>R</code> <code>stroke_type</code> string Stroke type identifier"},{"location":"reference/data-format/#timing","title":"Timing","text":"Column Type Description <code>intended_time_ms</code> float Intended stroke time (ms from start) <code>actual_time_ms</code> float Actual stroke time <code>timing_error_ms</code> float actual - intended (positive = late)"},{"location":"reference/data-format/#velocity","title":"Velocity","text":"Column Type Description <code>intended_velocity</code> int Intended velocity (0-127) <code>actual_velocity</code> int Actual velocity <code>velocity_error</code> int actual - intended"},{"location":"reference/data-format/#articulation-flags","title":"Articulation Flags","text":"Column Type Description <code>is_grace_note</code> bool True if grace note (flams) <code>is_accent</code> bool True if accented stroke <code>diddle_position</code> int? Position in diddle (null if not diddle) <code>flam_spacing_ms</code> float? Actual spacing to primary stroke (grace notes only) <code>parent_stroke_index</code> int? Index of primary stroke (grace notes only)"},{"location":"reference/data-format/#audio-format","title":"Audio Format","text":"Property Value Format FLAC (lossless) Sample Rate 44,100 Hz Bit Depth 24-bit Channels Mono Duration 4-12 seconds typical"},{"location":"reference/data-format/#midi-format","title":"MIDI Format","text":"<p>Standard MIDI Type 1 files with:</p> Property Value Track 0 Tempo and time signature Track 1 Note events (channel 10 for drums) Note Numbers Standard GM drum mapping (38 = snare) Velocity 1-127 (dynamics) PPQ 480 ticks per quarter note"},{"location":"reference/data-format/#augmentation-presets","title":"Augmentation Presets","text":"Preset Room Mic Compression Noise <code>cleanstudio</code> None Close None None <code>cleanclosed</code> Small Close Light None <code>practiceroom</code> Small practice Medium Light Low <code>concerthall</code> Large hall Far None Low <code>gym</code> Gymnasium Far None Medium <code>garage</code> Garage Medium Medium Medium <code>vintagetape</code> Medium Medium Tape saturation Tape hiss <code>lofi</code> Variable Variable Heavy High <code>phonerecording</code> None Poor Heavy limiting High"},{"location":"reference/data-format/#soundfonts","title":"Soundfonts","text":"Identifier Description <code>generalu</code> GeneralUser GS - General purpose <code>marching</code> Marching snare focused <code>mtpowerd</code> MT Power Drums - Rock kit <code>douglasn</code> Douglas Drums - Natural kit <code>fluidr3</code> FluidR3 GM - Standard GM"},{"location":"reference/data-format/#trainvaltest-splits","title":"Train/Val/Test Splits","text":"<p>Default 70/15/15 split by profile (not by sample):</p> Split Profiles Samples (approx.) train 70 ~70,000 validation 15 ~15,000 test 15 ~15,000 <p>Profile-Based Splits</p> <p>Splits are assigned at the profile level to prevent data leakage from player-specific timing/velocity patterns. This tests generalization to \"new players\" not seen during training.</p> <p>Stratification: Splits maintain skill tier proportions:</p> <pre><code>Train skill distribution == Val skill distribution == Test skill distribution\n</code></pre>"},{"location":"reference/data-format/#class-balance-and-distribution","title":"Class Balance and Distribution","text":""},{"location":"reference/data-format/#skill-tier-distribution","title":"Skill Tier Distribution","text":"<p>SOUSA uses a non-uniform distribution approximating realistic player populations:</p> Skill Tier Target Proportion Full Dataset (~100K) Medium (~12K) Beginner 25% ~25,000 ~3,000 Intermediate 35% ~35,000 ~4,200 Advanced 25% ~25,000 ~3,000 Professional 15% ~15,000 ~1,800"},{"location":"reference/data-format/#rudiment-distribution","title":"Rudiment Distribution","text":"<p>All 40 PAS rudiments are equally represented:</p> Preset Profiles Tempos/Rudiment Augmentations Samples/Rudiment small 10 3 1 ~30 medium 50 3 2 ~300 full 100 5 5 ~2,500"},{"location":"reference/data-format/#score-specific-availability","title":"Score-Specific Availability","text":"<p>Some scores are only computed for rudiments containing specific articulations:</p> Score Column Available For % Non-Null <code>flam_quality</code> Flam rudiments (20-30) ~27.5% <code>diddle_quality</code> Diddle/roll rudiments (6-19, 24-26, 35-37) ~47.5% <code>roll_sustain</code> Roll rudiments (1-15) ~37.5% <p>Handling in Training:</p> <ul> <li>Use masking for null values in loss computation</li> <li>Consider separate prediction heads per articulation type</li> <li>Filter to non-null subset if focusing on specific rudiments</li> </ul>"},{"location":"reference/data-format/#rudiments","title":"Rudiments","text":""},{"location":"reference/data-format/#roll-rudiments-15","title":"Roll Rudiments (15)","text":"Slug Name <code>single_stroke_roll</code> Single Stroke Roll <code>single_stroke_four</code> Single Stroke Four <code>single_stroke_seven</code> Single Stroke Seven <code>multiple_bounce_roll</code> Multiple Bounce Roll <code>triple_stroke_roll</code> Triple Stroke Roll <code>double_stroke_roll</code> Double Stroke Open Roll <code>five_stroke_roll</code> Five Stroke Roll <code>six_stroke_roll</code> Six Stroke Roll <code>seven_stroke_roll</code> Seven Stroke Roll <code>nine_stroke_roll</code> Nine Stroke Roll <code>ten_stroke_roll</code> Ten Stroke Roll <code>eleven_stroke_roll</code> Eleven Stroke Roll <code>thirteen_stroke_roll</code> Thirteen Stroke Roll <code>fifteen_stroke_roll</code> Fifteen Stroke Roll <code>seventeen_stroke_roll</code> Seventeen Stroke Roll"},{"location":"reference/data-format/#diddle-rudiments-4","title":"Diddle Rudiments (4)","text":"Slug Name <code>single_paradiddle</code> Single Paradiddle <code>double_paradiddle</code> Double Paradiddle <code>triple_paradiddle</code> Triple Paradiddle <code>paradiddle_diddle</code> Paradiddle-Diddle"},{"location":"reference/data-format/#flam-rudiments-11","title":"Flam Rudiments (11)","text":"Slug Name <code>flam</code> Flam <code>flam_accent</code> Flam Accent <code>flam_tap</code> Flam Tap <code>flamacue</code> Flamacue <code>flam_paradiddle</code> Flam Paradiddle <code>single_flammed_mill</code> Single Flammed Mill <code>flam_paradiddle_diddle</code> Flam Paradiddle-Diddle <code>pataflafla</code> Pataflafla <code>swiss_army_triplet</code> Swiss Army Triplet <code>inverted_flam_tap</code> Inverted Flam Tap <code>flam_drag</code> Flam Drag"},{"location":"reference/data-format/#drag-rudiments-10","title":"Drag Rudiments (10)","text":"Slug Name <code>drag</code> Drag <code>single_drag_tap</code> Single Drag Tap <code>double_drag_tap</code> Double Drag Tap <code>lesson_25</code> Lesson 25 <code>single_dragadiddle</code> Single Dragadiddle <code>drag_paradiddle_1</code> Drag Paradiddle #1 <code>drag_paradiddle_2</code> Drag Paradiddle #2 <code>single_ratamacue</code> Single Ratamacue <code>double_ratamacue</code> Double Ratamacue <code>triple_ratamacue</code> Triple Ratamacue"},{"location":"reference/data-format/#score-computation-reference","title":"Score Computation Reference","text":""},{"location":"reference/data-format/#timing-accuracy","title":"Timing Accuracy","text":"<p>Uses sigmoid scaling for perceptual alignment:</p> \\[ \\text{timing\\_accuracy} = 100 \\times \\frac{1}{1 + e^{(\\bar{e} - 25) / 10}} \\] <p>Where <code>max_expected_error_ms</code> scales with tempo (faster = tighter tolerance).</p>"},{"location":"reference/data-format/#velocity-control","title":"Velocity Control","text":"\\[ \\text{velocity\\_control} = 100 \\times (1 - \\text{velocity\\_std} / \\text{expected\\_std\\_for\\_tier}) \\]"},{"location":"reference/data-format/#overall-score","title":"Overall Score","text":"<p>Weighted combination:</p> Component Weight timing_accuracy 0.20 timing_consistency 0.15 velocity_control 0.10 accent_accuracy 0.10 hand_balance 0.15 tempo_stability 0.10 subdivision_evenness 0.10 accent_differentiation 0.10 <p>Plus rudiment-specific bonuses/penalties when applicable.</p>"},{"location":"reference/data-format/#validation-report-schema","title":"Validation Report Schema","text":"<p>The <code>validation_report.json</code> file contains comprehensive dataset validation results.</p>"},{"location":"reference/data-format/#top-level-structure","title":"Top-Level Structure","text":"Field Type Description <code>dataset_path</code> string Path to validated dataset <code>generated_at</code> string ISO 8601 timestamp <code>stats</code> object Statistical analysis results <code>verification</code> object Data integrity check results <code>skill_tier_ordering</code> object Skill tier ordering verification <code>realism</code> object Literature validation results"},{"location":"reference/data-format/#stats-object","title":"Stats Object","text":"Field Type Description <code>num_samples</code> int Total sample count <code>num_profiles</code> int Unique player profiles <code>num_rudiments</code> int Unique rudiments <code>tempo</code> DistributionStats Tempo BPM distribution <code>duration</code> DistributionStats Duration in seconds <code>num_strokes</code> DistributionStats Strokes per sample <code>timing_error</code> DistributionStats Stroke timing error (ms) <code>velocity</code> DistributionStats MIDI velocity values <code>skill_tier_counts</code> object Samples per skill tier <code>rudiment_counts</code> object Samples per rudiment <code>split_counts</code> object Train/val/test counts"},{"location":"reference/data-format/#distributionstats-object","title":"DistributionStats Object","text":"Field Type Description <code>name</code> string Metric name <code>count</code> int Number of observations <code>mean</code> float Arithmetic mean <code>std</code> float Standard deviation <code>min</code> float Minimum value <code>max</code> float Maximum value <code>median</code> float 50<sup>th</sup> percentile <code>q25</code> float 25<sup>th</sup> percentile <code>q75</code> float 75<sup>th</sup> percentile <code>skewness</code> float Distribution skewness <code>kurtosis</code> float Distribution kurtosis <code>by_group</code> object? Optional breakdown by skill tier"},{"location":"reference/data-format/#loading-the-dataset","title":"Loading the Dataset","text":""},{"location":"reference/data-format/#with-pandas","title":"With Pandas","text":"<pre><code>import pandas as pd\n\n# Load label files\nsamples = pd.read_parquet(\"output/dataset/labels/samples.parquet\")\nexercises = pd.read_parquet(\"output/dataset/labels/exercises.parquet\")\nmeasures = pd.read_parquet(\"output/dataset/labels/measures.parquet\")\nstrokes = pd.read_parquet(\"output/dataset/labels/strokes.parquet\")\n\n# Join for analysis\ndata = samples.merge(exercises, on=\"sample_id\")\n</code></pre>"},{"location":"reference/data-format/#with-huggingface-datasets","title":"With HuggingFace Datasets","text":"<pre><code>from datasets import load_dataset\n\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Access splits\ntrain = dataset[\"train\"]\nval = dataset[\"validation\"]\ntest = dataset[\"test\"]\n\n# Filter by rudiment\nparadiddles = train.filter(lambda x: \"paradiddle\" in x[\"rudiment_slug\"])\n</code></pre>"},{"location":"reference/data-format/#loading-audio","title":"Loading Audio","text":"<pre><code>import soundfile as sf\n\n# Load audio file\naudio, sr = sf.read(\"output/dataset/audio/sample_id.flac\")\nprint(f\"Sample rate: {sr}, Duration: {len(audio)/sr:.2f}s\")\n</code></pre>"},{"location":"reference/data-format/#loading-midi","title":"Loading MIDI","text":"<pre><code>import mido\n\nmidi = mido.MidiFile(\"output/dataset/midi/sample_id.mid\")\nfor track in midi.tracks:\n    for msg in track:\n        if msg.type == \"note_on\":\n            print(f\"Note: {msg.note}, Velocity: {msg.velocity}, Time: {msg.time}\")\n</code></pre>"},{"location":"reference/data-format/#see-also","title":"See Also","text":"<ul> <li>Architecture - Pipeline overview</li> <li>Score Computation - Detailed scoring algorithms</li> <li>Rudiment Schema - YAML format for rudiments</li> </ul>"},{"location":"reference/rudiment-schema/","title":"Rudiment Schema Specification","text":"<p>This document defines the YAML schema for rudiment definitions in SOUSA. All 40 PAS rudiments are defined in <code>dataset_gen/rudiments/definitions/</code>.</p>"},{"location":"reference/rudiment-schema/#schema-overview","title":"Schema Overview","text":"<p>Each rudiment is defined in a YAML file with the following structure:</p> <pre><code>name: &lt;string&gt;           # Official PAS name\nslug: &lt;string&gt;           # URL-safe identifier\ncategory: &lt;enum&gt;         # roll | diddle | flam | drag\npas_number: &lt;int&gt;        # Official PAS number (1-40)\ndescription: &lt;string&gt;    # Brief description\n\npattern:\n  strokes: &lt;list&gt;        # Stroke definitions\n  beats_per_cycle: &lt;float&gt;  # Duration of one pattern cycle\n\nsubdivision: &lt;enum&gt;      # Base note subdivision\ntempo_range: [min, max]  # Recommended BPM range\n\nparams:                  # Category-specific parameters\n  &lt;param&gt;: &lt;value&gt;\n</code></pre>"},{"location":"reference/rudiment-schema/#field-reference","title":"Field Reference","text":""},{"location":"reference/rudiment-schema/#top-level-fields","title":"Top-Level Fields","text":"Field Type Required Description <code>name</code> string Yes Official PAS rudiment name <code>slug</code> string Yes URL-safe identifier (lowercase, underscores only) <code>category</code> enum Yes One of: <code>roll</code>, <code>diddle</code>, <code>flam</code>, <code>drag</code> <code>pas_number</code> int No Official PAS number (1-40) <code>description</code> string No Brief description of the rudiment <code>pattern</code> object Yes Sticking pattern definition <code>subdivision</code> enum No Base subdivision (default: <code>sixteenth</code>) <code>tempo_range</code> [int, int] No Min/max BPM (default: [60, 180]) <code>params</code> object No Category-specific parameters <code>starts_on_left</code> bool No If true, alternate version starts on left hand"},{"location":"reference/rudiment-schema/#pattern-object","title":"Pattern Object","text":"Field Type Required Description <code>strokes</code> list Yes List of stroke definitions <code>beats_per_cycle</code> float No Beats per pattern cycle (default: 1.0)"},{"location":"reference/rudiment-schema/#stroke-object","title":"Stroke Object","text":"<p>Each stroke in the <code>strokes</code> list:</p> Field Type Required Description <code>hand</code> enum Yes <code>R</code> (right) or <code>L</code> (left) <code>type</code> enum No Stroke type (default: <code>tap</code>) <code>grace_offset</code> float No Timing offset in beats for grace notes <code>diddle_position</code> int No Position in diddle (1 or 2)"},{"location":"reference/rudiment-schema/#stroke-types","title":"Stroke Types","text":"<p>SOUSA supports five stroke types, each with distinct velocity and timing characteristics:</p>"},{"location":"reference/rudiment-schema/#tap","title":"<code>tap</code>","text":"<p>Standard unaccented stroke. Default velocity: 85.</p> <pre><code>- {hand: R, type: tap}\n</code></pre>"},{"location":"reference/rudiment-schema/#accent","title":"<code>accent</code>","text":"<p>Emphasized stroke with higher velocity. Default velocity: 110.</p> <pre><code>- {hand: R, type: accent}\n</code></pre>"},{"location":"reference/rudiment-schema/#grace","title":"<code>grace</code>","text":"<p>Grace note preceding a primary stroke. Requires <code>grace_offset</code> to specify timing.</p> <pre><code>- {hand: L, type: grace, grace_offset: -0.05}  # 0.05 beats before primary\n- {hand: R, type: accent}                       # Primary stroke\n</code></pre> <p>Grace Note Timing</p> <p><code>grace_offset</code> is specified in beats (negative = before the beat). Typical values:</p> <ul> <li>Flams: <code>-0.05</code> (single grace note)</li> <li>Drags: <code>-0.08</code> and <code>-0.04</code> (two grace notes)</li> </ul>"},{"location":"reference/rudiment-schema/#diddle","title":"<code>diddle</code>","text":"<p>Double stroke (one of two strokes played with the same hand). Must specify <code>diddle_position</code>.</p> <pre><code>- {hand: R, type: diddle, diddle_position: 1}  # First stroke\n- {hand: R, type: diddle, diddle_position: 2}  # Second stroke\n</code></pre>"},{"location":"reference/rudiment-schema/#buzz","title":"<code>buzz</code>","text":"<p>Press roll stroke with multiple bounces. Used in buzz rolls.</p> <pre><code>- {hand: R, type: buzz}\n</code></pre>"},{"location":"reference/rudiment-schema/#subdivisions","title":"Subdivisions","text":"<p>The <code>subdivision</code> field specifies the base rhythmic subdivision:</p> Value Notes per Beat Common Usage <code>quarter</code> 1 Slow exercises <code>eighth</code> 2 Drags, some flams <code>triplet</code> 3 Triplet-based rudiments <code>sixteenth</code> 4 Most rudiments (default) <code>sextuplet</code> 6 Fast rolls <code>thirtysecond</code> 8 Double-time passages"},{"location":"reference/rudiment-schema/#category-parameters","title":"Category Parameters","text":"<p>Category-specific parameters control articulation-specific behaviors.</p>"},{"location":"reference/rudiment-schema/#flam-parameters","title":"Flam Parameters","text":"<p>For rudiments in the <code>flam</code> category:</p> Parameter Type Description Example <code>flam_spacing_range</code> [float, float] Min/max grace note spacing in ms <code>[15, 50]</code> <pre><code>params:\n  flam_spacing_range: [15, 50]  # Grace note 15-50ms before primary\n</code></pre>"},{"location":"reference/rudiment-schema/#diddle-parameters","title":"Diddle Parameters","text":"<p>For rudiments in the <code>diddle</code> category:</p> Parameter Type Description Example <code>diddle_ratio_range</code> [float, float] Ratio range between first/second stroke duration <code>[0.9, 1.1]</code> <pre><code>params:\n  diddle_ratio_range: [0.9, 1.1]  # Nearly even strokes\n</code></pre>"},{"location":"reference/rudiment-schema/#roll-parameters","title":"Roll Parameters","text":"<p>For rudiments in the <code>roll</code> category:</p> Parameter Type Description Example <code>roll_type</code> enum <code>open</code>, <code>closed</code>, or <code>buzz</code> <code>\"open\"</code> <code>roll_strokes_per_beat</code> int Number of strokes per beat <code>4</code> <pre><code>params:\n  roll_type: open\n  roll_strokes_per_beat: 4\n</code></pre>"},{"location":"reference/rudiment-schema/#drag-parameters","title":"Drag Parameters","text":"<p>For rudiments in the <code>drag</code> category:</p> Parameter Type Description Example <code>drag_spacing_range</code> [float, float] Min/max spacing between drag grace notes in ms <code>[10, 30]</code> <pre><code>params:\n  drag_spacing_range: [10, 30]\n</code></pre>"},{"location":"reference/rudiment-schema/#buzz-roll-parameters","title":"Buzz Roll Parameters","text":"<p>For buzz/press roll rudiments:</p> Parameter Type Description Example <code>buzz_strokes_range</code> [int, int] Min/max bounce strokes per primary <code>[3, 8]</code> <pre><code>params:\n  buzz_strokes_range: [3, 8]\n</code></pre>"},{"location":"reference/rudiment-schema/#complete-examples","title":"Complete Examples","text":""},{"location":"reference/rudiment-schema/#single-paradiddle-diddle-category","title":"Single Paradiddle (Diddle Category)","text":"<pre><code># File: 16_single_paradiddle.yaml\n#\n# The single paradiddle: RLRR LRLL\n# One of the most fundamental paradiddle patterns with accents\n# on the first stroke of each group.\n\nname: Single Paradiddle\nslug: single_paradiddle\ncategory: diddle\npas_number: 16\ndescription: RLRR LRLL - the most fundamental paradiddle pattern\n\npattern:\n  strokes:\n    # First group: RLRR\n    - {hand: R, type: accent}              # Accented primary\n    - {hand: L, type: tap}                 # Single tap\n    - {hand: R, type: diddle, diddle_position: 1}  # First diddle\n    - {hand: R, type: diddle, diddle_position: 2}  # Second diddle\n    # Second group: LRLL\n    - {hand: L, type: accent}              # Accented primary\n    - {hand: R, type: tap}                 # Single tap\n    - {hand: L, type: diddle, diddle_position: 1}  # First diddle\n    - {hand: L, type: diddle, diddle_position: 2}  # Second diddle\n  beats_per_cycle: 2  # 8 sixteenths = 2 beats\n\nsubdivision: sixteenth\ntempo_range: [60, 200]\n\nparams:\n  diddle_ratio_range: [0.9, 1.1]  # Diddles should be nearly even\n</code></pre>"},{"location":"reference/rudiment-schema/#flam-tap-flam-category","title":"Flam Tap (Flam Category)","text":"<pre><code># File: 22_flam_tap.yaml\n#\n# Alternating flams with a tap on each hand.\n# Pattern: flam-R tap-R | flam-L tap-L\n\nname: Flam Tap\nslug: flam_tap\ncategory: flam\npas_number: 22\ndescription: Alternating flams with a tap on each hand\n\npattern:\n  strokes:\n    # Flam R, tap R\n    - {hand: L, type: grace, grace_offset: -0.05}  # Grace note (left hand)\n    - {hand: R, type: accent}                       # Primary (right hand)\n    - {hand: R, type: tap}                          # Tap (right hand)\n    # Flam L, tap L\n    - {hand: R, type: grace, grace_offset: -0.05}  # Grace note (right hand)\n    - {hand: L, type: accent}                       # Primary (left hand)\n    - {hand: L, type: tap}                          # Tap (left hand)\n  beats_per_cycle: 1.5  # Triplet feel\n\nsubdivision: sixteenth\ntempo_range: [60, 180]\n\nparams:\n  flam_spacing_range: [15, 50]  # Grace note 15-50ms before primary\n</code></pre>"},{"location":"reference/rudiment-schema/#drag-drag-category","title":"Drag (Drag Category)","text":"<pre><code># File: 31_drag.yaml\n#\n# Two grace notes (diddle) followed by primary stroke.\n# Also known as a \"ruff\" in some contexts.\n\nname: Drag\nslug: drag\ncategory: drag\npas_number: 31\ndescription: Two grace notes (diddle) followed by primary stroke\n\npattern:\n  strokes:\n    # Drag R (grace LL + accent R)\n    - {hand: L, type: grace, grace_offset: -0.08}  # First grace\n    - {hand: L, type: grace, grace_offset: -0.04}  # Second grace\n    - {hand: R, type: accent}                       # Primary stroke\n    # Drag L (grace RR + accent L)\n    - {hand: R, type: grace, grace_offset: -0.08}  # First grace\n    - {hand: R, type: grace, grace_offset: -0.04}  # Second grace\n    - {hand: L, type: accent}                       # Primary stroke\n  beats_per_cycle: 1\n\nsubdivision: eighth\ntempo_range: [60, 160]\n\nparams:\n  drag_spacing_range: [10, 30]  # Spacing between the two grace notes\n</code></pre>"},{"location":"reference/rudiment-schema/#validation-rules","title":"Validation Rules","text":"<p>The schema enforces these validation rules:</p>"},{"location":"reference/rudiment-schema/#slug-format","title":"Slug Format","text":"<pre><code># Must be lowercase alphanumeric with underscores only\nif not re.match(r\"^[a-z0-9_]+$\", slug):\n    raise ValueError(\"Invalid slug format\")\n</code></pre>"},{"location":"reference/rudiment-schema/#diddle-position","title":"Diddle Position","text":"<p>Diddle strokes must specify position 1 or 2:</p> <pre><code>if stroke.stroke_type == StrokeType.DIDDLE:\n    assert stroke.diddle_position in (1, 2)\n</code></pre>"},{"location":"reference/rudiment-schema/#grace-note-offset","title":"Grace Note Offset","text":"<p>Grace notes must have a <code>grace_offset</code> value:</p> <pre><code>if stroke.stroke_type == StrokeType.GRACE:\n    assert stroke.grace_offset is not None\n    assert stroke.grace_offset &lt; 0  # Must be before the beat\n</code></pre>"},{"location":"reference/rudiment-schema/#category-parameter-matching","title":"Category-Parameter Matching","text":"<p>Category-specific parameters are validated against category:</p> Category Valid Parameters <code>flam</code> <code>flam_spacing_range</code> <code>diddle</code> <code>diddle_ratio_range</code> <code>roll</code> <code>roll_type</code>, <code>roll_strokes_per_beat</code>, <code>buzz_strokes_range</code> <code>drag</code> <code>drag_spacing_range</code>"},{"location":"reference/rudiment-schema/#creating-new-rudiments","title":"Creating New Rudiments","text":"<p>To add a custom rudiment:</p> <ol> <li>Create a YAML file in <code>dataset_gen/rudiments/definitions/</code></li> <li>Follow the naming convention: <code>{number}_{slug}.yaml</code></li> <li>Include all required fields</li> <li>Add category-appropriate parameters</li> <li>Test loading with:</li> </ol> <pre><code>from dataset_gen.rudiments.loader import load_rudiment\n\nrudiment = load_rudiment(\"my_custom_rudiment\")\nprint(rudiment.pattern.stroke_count())\n</code></pre> <p>PAS Numbers</p> <p>PAS numbers 1-40 are reserved for official PAS rudiments. Use numbers &gt; 40 for custom rudiments.</p>"},{"location":"reference/rudiment-schema/#complete-rudiment-list","title":"Complete Rudiment List","text":""},{"location":"reference/rudiment-schema/#roll-rudiments-1-15","title":"Roll Rudiments (1-15)","text":"# Slug Contains 1 <code>single_stroke_roll</code> - 2 <code>single_stroke_four</code> - 3 <code>single_stroke_seven</code> - 4 <code>multiple_bounce_roll</code> Buzz 5 <code>triple_stroke_roll</code> - 6 <code>double_stroke_open_roll</code> Diddle 7-15 <code>five_stroke_roll</code> through <code>seventeen_stroke_roll</code> Diddle"},{"location":"reference/rudiment-schema/#paradiddle-rudiments-16-19","title":"Paradiddle Rudiments (16-19)","text":"# Slug Contains 16 <code>single_paradiddle</code> Diddle 17 <code>double_paradiddle</code> Diddle 18 <code>triple_paradiddle</code> Diddle 19 <code>paradiddle_diddle</code> Diddle"},{"location":"reference/rudiment-schema/#flam-rudiments-20-30","title":"Flam Rudiments (20-30)","text":"# Slug Contains 20 <code>flam</code> Flam 21 <code>flam_accent</code> Flam 22 <code>flam_tap</code> Flam 23 <code>flamacue</code> Flam 24 <code>flam_paradiddle</code> Flam, Diddle 25 <code>single_flammed_mill</code> Flam, Diddle 26 <code>flam_paradiddle_diddle</code> Flam, Diddle 27 <code>pataflafla</code> Flam 28 <code>swiss_army_triplet</code> Flam 29 <code>inverted_flam_tap</code> Flam 30 <code>flam_drag</code> Flam, Drag"},{"location":"reference/rudiment-schema/#drag-rudiments-31-40","title":"Drag Rudiments (31-40)","text":"# Slug Contains 31 <code>drag</code> Drag 32 <code>single_drag_tap</code> Drag 33 <code>double_drag_tap</code> Drag 34 <code>lesson_25</code> Drag 35 <code>single_dragadiddle</code> Drag, Diddle 36 <code>drag_paradiddle_1</code> Drag, Diddle 37 <code>drag_paradiddle_2</code> Drag, Diddle 38 <code>single_ratamacue</code> Drag 39 <code>double_ratamacue</code> Drag 40 <code>triple_ratamacue</code> Drag"},{"location":"reference/rudiment-schema/#see-also","title":"See Also","text":"<ul> <li>Architecture - Pipeline overview</li> <li>Score Computation - How scores are calculated from rudiment performances</li> </ul>"},{"location":"reference/score-computation/","title":"Score Computation","text":"<p>This document describes the mathematical foundations for computing performance scores in SOUSA. All scores use a 0-100 scale where higher values indicate better performance.</p>"},{"location":"reference/score-computation/#overview","title":"Overview","text":"<p>SOUSA computes scores at three hierarchical levels:</p> <ol> <li>Stroke Level: Individual timing and velocity measurements</li> <li>Measure Level: Aggregate statistics per measure</li> <li>Exercise Level: Composite performance scores</li> </ol> <p>The exercise-level scores are the primary targets for machine learning, while stroke and measure labels provide fine-grained supervision.</p>"},{"location":"reference/score-computation/#perceptual-scaling","title":"Perceptual Scaling","text":"<p>SOUSA uses sigmoid (logistic) scaling to transform raw error measurements into perceptual scores. This approach aligns with human perception of timing errors:</p> <ul> <li>Errors &lt; 10ms: Nearly imperceptible (high score)</li> <li>Errors 20-30ms: Noticeable but acceptable (medium score)</li> <li>Errors &gt; 50ms: Clearly audible (low score)</li> </ul> <p>The general sigmoid transformation:</p> \\[ \\text{score} = 100 \\times \\frac{1}{1 + e^{(x - c) / k}} \\] <p>Where:</p> <ul> <li>\\(x\\) is the raw measurement (e.g., mean absolute timing error)</li> <li>\\(c\\) is the center point (50% score threshold)</li> <li>\\(k\\) controls the steepness of the transition</li> </ul>"},{"location":"reference/score-computation/#timing-scores","title":"Timing Scores","text":""},{"location":"reference/score-computation/#timing-accuracy","title":"Timing Accuracy","text":"<p>Measures how close strokes are to their intended timing.</p> <p>Formula:</p> \\[ \\text{timing\\_accuracy} = 100 \\times \\frac{1}{1 + e^{(\\bar{e} - 25) / 10}} \\] <p>Where:</p> <ul> <li>\\(\\bar{e}\\) = mean absolute timing error in milliseconds</li> </ul> <p>Parameters:</p> Parameter Value Meaning Center (\\(c\\)) 25 ms 50% score at 25ms mean error Steepness (\\(k\\)) 10 Transition width <p>Score Distribution:</p> Mean Error Score 5 ms 88 10 ms 82 25 ms 50 40 ms 18 60 ms 3"},{"location":"reference/score-computation/#timing-consistency","title":"Timing Consistency","text":"<p>Measures the variance in timing errors (lower variance = higher score).</p> <p>Formula:</p> \\[ \\text{timing\\_consistency} = 100 \\times \\frac{1}{1 + e^{(\\sigma_t - 15) / 8}} \\] <p>Where:</p> <ul> <li>\\(\\sigma_t\\) = standard deviation of timing errors in milliseconds</li> </ul> <p>Parameters:</p> Parameter Value Meaning Center (\\(c\\)) 15 ms 50% score at 15ms std dev Steepness (\\(k\\)) 8 Transition width"},{"location":"reference/score-computation/#tempo-stability","title":"Tempo Stability","text":"<p>Measures drift in timing over the exercise duration.</p> <p>Computation:</p> <ol> <li> <p>Fit a linear regression to timing errors over time:    $\\(\\text{error}_i = \\beta_0 + \\beta_1 \\cdot t_i\\)$</p> </li> <li> <p>Calculate slope in ms/second:    $\\(\\text{slope} = \\beta_1 \\times 1000\\)$</p> </li> <li> <p>Convert to score:    $\\(\\text{tempo\\_stability} = \\max(0, 100 - |\\text{slope}| \\times 10)\\)$</p> </li> </ol> <p>Interpretation:</p> Slope (ms/s) Score Meaning 0 100 No drift 5 50 Moderate drift 10 0 Severe drift"},{"location":"reference/score-computation/#subdivision-evenness","title":"Subdivision Evenness","text":"<p>Measures consistency of inter-onset intervals (IOI).</p> <p>Formula:</p> <ol> <li> <p>Calculate IOI ratios:    $\\(r_i = \\frac{\\text{IOI}_{\\text{actual},i}}{\\text{IOI}_{\\text{intended},i}}\\)$</p> </li> <li> <p>Calculate variance:    $\\(\\sigma_r = \\text{std}(r_1, r_2, \\ldots, r_n)\\)$</p> </li> <li> <p>Convert to score:    $\\(\\text{subdivision\\_evenness} = \\max(0, 100 - \\sigma_r \\times 100)\\)$</p> </li> </ol>"},{"location":"reference/score-computation/#dynamics-scores","title":"Dynamics Scores","text":""},{"location":"reference/score-computation/#velocity-control","title":"Velocity Control","text":"<p>Measures consistency of stroke dynamics.</p> <p>Formula:</p> \\[ \\text{velocity\\_control} = \\max(0, 100 - \\sigma_v \\times 2) \\] <p>Where:</p> <ul> <li>\\(\\sigma_v\\) = standard deviation of MIDI velocities (0-127 scale)</li> </ul> <p>Interpretation:</p> Velocity Std Dev Score 0 100 10 80 25 50 50 0"},{"location":"reference/score-computation/#accent-differentiation","title":"Accent Differentiation","text":"<p>Measures the dynamic contrast between accented and unaccented strokes.</p> <p>Formula:</p> <ol> <li> <p>Calculate velocity difference:    $\\(\\Delta v = \\bar{v}_{\\text{accent}} - \\bar{v}_{\\text{tap}}\\)$</p> </li> <li> <p>Convert to approximate dB:    $\\(\\Delta_{\\text{dB}} = \\frac{\\Delta v}{127} \\times 20\\)$</p> </li> <li> <p>Calculate score:    $\\(\\text{accent\\_differentiation} = \\min(100, \\max(0, \\Delta_{\\text{dB}} \\times 8))\\)$</p> </li> </ol> <p>Target Range:</p> dB Difference Score Quality 0 dB 0 No differentiation 6 dB 48 Minimal 12 dB 96 Good 15+ dB 100 Excellent"},{"location":"reference/score-computation/#accent-accuracy","title":"Accent Accuracy","text":"<p>Measures whether accents are placed on the correct beats.</p> <p>Formula:</p> \\[ \\text{accent\\_accuracy} = \\frac{n_{\\text{correct}}}{n_{\\text{total}}} \\times 100 \\] <p>Where:</p> <ul> <li>\\(n_{\\text{correct}}\\) = accented strokes with velocity above average</li> <li>\\(n_{\\text{total}}\\) = total accented strokes in the pattern</li> </ul>"},{"location":"reference/score-computation/#hand-balance-scores","title":"Hand Balance Scores","text":""},{"location":"reference/score-computation/#hand-balance-composite","title":"Hand Balance (Composite)","text":"<p>Measures evenness between left and right hand performance, combining velocity balance and timing balance equally.</p> <p>Formula:</p> \\[ \\text{hand\\_balance} = 0.5 \\times \\text{velocity\\_balance} + 0.5 \\times \\text{timing\\_balance} \\] <p>Velocity Balance:</p> \\[ \\text{velocity\\_balance} = \\frac{\\min(\\bar{v}_L, \\bar{v}_R)}{\\max(\\bar{v}_L, \\bar{v}_R)} \\times 100 \\] <p>Timing Balance:</p> \\[ \\text{timing\\_balance} = \\frac{\\min(\\bar{|e|}_L, \\bar{|e|}_R)}{\\max(\\bar{|e|}_L, \\bar{|e|}_R)} \\times 100 \\] <p>Where:</p> <ul> <li>\\(\\bar{v}_L\\), \\(\\bar{v}_R\\) = mean velocity for left/right hand</li> <li>\\(\\bar{|e|}_L\\), \\(\\bar{|e|}_R\\) = mean absolute timing error for left/right hand</li> </ul> <p>Composite Score Rationale</p> <p>Earlier versions used velocity-only balance, which exhibited a ceiling effect (nearly always high). Adding timing balance provides better discrimination between skill levels.</p>"},{"location":"reference/score-computation/#weak-hand-index","title":"Weak Hand Index","text":"<p>Identifies which hand is weaker for diagnostic purposes.</p> <p>Formula:</p> \\[ \\text{weak\\_hand\\_index} = \\frac{\\bar{|e|}_L}{\\bar{|e|}_L + \\bar{|e|}_R} \\times 100 \\] <p>Interpretation:</p> Value Meaning 0 Left hand much weaker 50 Balanced 100 Right hand much weaker"},{"location":"reference/score-computation/#rudiment-specific-scores","title":"Rudiment-Specific Scores","text":"<p>These scores are only computed for rudiments containing the relevant articulations.</p>"},{"location":"reference/score-computation/#flam-quality","title":"Flam Quality","text":"<p>Measures grace note spacing consistency for flam rudiments.</p> <p>Ideal Range: 20-40ms (center: 30ms)</p> <p>Computation:</p> <p>For each grace note with spacing \\(s\\) (ms from grace to primary):</p> \\[ \\text{score}_i = \\begin{cases} 100 &amp; \\text{if } 20 \\leq s \\leq 40 \\\\ 100 - (20 - s) \\times 5 &amp; \\text{if } s &lt; 20 \\text{ (too tight)} \\\\ 100 - (s - 40) \\times 3 &amp; \\text{if } s &gt; 40 \\text{ (too wide)} \\end{cases} \\] <p>Final Score:</p> \\[ \\text{flam\\_quality} = \\frac{1}{n} \\sum_{i=1}^{n} \\text{score}_i \\]"},{"location":"reference/score-computation/#diddle-quality","title":"Diddle Quality","text":"<p>Measures evenness of double strokes.</p> <p>Computation:</p> <p>For each diddle pair with actual gap \\(g_a\\) and intended gap \\(g_i\\):</p> \\[ r = \\frac{g_a}{g_i} \\] <p>Score:</p> \\[ \\text{diddle\\_quality} = \\max(0, 100 - \\bar{|r - 1|} \\times 200) \\] <p>Where perfect evenness yields \\(r = 1\\).</p>"},{"location":"reference/score-computation/#roll-sustain","title":"Roll Sustain","text":"<p>Measures velocity consistency across sustained rolls (penalizes decay).</p> <p>Computation:</p> <ol> <li>Calculate mean velocity for first quarter: \\(\\bar{v}_{\\text{start}}\\)</li> <li>Calculate mean velocity for last quarter: \\(\\bar{v}_{\\text{end}}\\)</li> <li>Calculate decay ratio:    $\\(\\text{decay} = \\frac{\\bar{v}_{\\text{end}}}{\\bar{v}_{\\text{start}}}\\)$</li> </ol> <p>Score:</p> \\[ \\text{roll\\_sustain} = \\min(100, \\text{decay} \\times 100) \\] Decay Ratio Score Interpretation 1.0 100 Perfect sustain 0.8 80 Slight decay 0.5 50 Significant decay"},{"location":"reference/score-computation/#composite-scores","title":"Composite Scores","text":""},{"location":"reference/score-computation/#overall-score","title":"Overall Score","text":"<p>Weighted average of all component scores.</p> <p>Formula:</p> \\[ \\text{overall\\_score} = \\sum_{i} w_i \\times s_i \\] <p>Weight Table:</p> Component Weight Rationale <code>timing_accuracy</code> 0.20 Most critical for rhythmic precision <code>timing_consistency</code> 0.15 Important for professional sound <code>tempo_stability</code> 0.10 Shows control over time <code>subdivision_evenness</code> 0.10 Essential for clean rudiments <code>velocity_control</code> 0.10 Dynamics consistency <code>accent_differentiation</code> 0.10 Musical expression <code>accent_accuracy</code> 0.10 Pattern correctness <code>hand_balance</code> 0.15 Technical evenness Total 1.00 <p>Rudiment-Specific Bonuses</p> <p>Rudiment-specific scores (flam_quality, diddle_quality, roll_sustain) are computed separately and not included in the overall score to maintain consistency across rudiment types.</p>"},{"location":"reference/score-computation/#groove-feel-proxy","title":"Groove Feel Proxy","text":"<p>A supplementary metric capturing the \"feel\" of the performance.</p> <p>Formula:</p> \\[ \\text{groove\\_feel} = f(\\text{micro-timing patterns, velocity contours}) \\] <p>This is a 0-1 scale metric computed in <code>labels/groove.py</code>. It captures intentional micro-timing deviations that contribute to musical groove rather than penalizing all deviations equally.</p>"},{"location":"reference/score-computation/#tier-confidence","title":"Tier Confidence","text":"<p>Measures how clearly a sample belongs to its assigned skill tier.</p> <p>Formula:</p> \\[ \\text{tier\\_confidence} = e^{-0.5 \\cdot z^2} \\] <p>Where:</p> \\[ z = \\frac{|\\text{overall\\_score} - \\mu_{\\text{tier}}|}{\\sigma_{\\text{tier}}} \\] <p>Tier Distribution Parameters:</p> Tier Mean (\\(\\mu\\)) Std Dev (\\(\\sigma\\)) Beginner 34.3 6.6 Intermediate 45.7 10.1 Advanced 61.0 10.8 Professional 73.5 10.7 <p>Interpretation:</p> Confidence Meaning &gt; 0.9 Clearly within tier 0.5-0.9 Typical for tier &lt; 0.5 Near tier boundary (label noise) <p>Using Tier Confidence</p> <p>When training classification models, consider:</p> <ul> <li>Filtering samples with <code>tier_confidence &lt; 0.3</code> to reduce label noise</li> <li>Using <code>tier_confidence</code> as sample weights</li> <li>Using the binary <code>skill_tier_binary</code> (novice/skilled) for cleaner separation</li> </ul>"},{"location":"reference/score-computation/#score-correlations","title":"Score Correlations","text":"<p>Understanding score correlations is important for multi-task learning.</p>"},{"location":"reference/score-computation/#high-correlation-pairs-r-07","title":"High Correlation Pairs (\\(r &gt; 0.7\\))","text":"Score 1 Score 2 Expected \\(r\\) Reason <code>timing_accuracy</code> <code>timing_consistency</code> 0.85-0.90 Both from timing errors <code>timing_accuracy</code> <code>subdivision_evenness</code> 0.75-0.85 Both measure rhythm <code>timing_consistency</code> <code>tempo_stability</code> 0.70-0.80 Consistent players don't drift <code>velocity_control</code> <code>accent_differentiation</code> 0.60-0.75 Both require dynamic control"},{"location":"reference/score-computation/#score-clusters","title":"Score Clusters","text":"<p>Cluster 1: Timing Quality</p> <ul> <li><code>timing_accuracy</code></li> <li><code>timing_consistency</code></li> <li><code>tempo_stability</code></li> <li><code>subdivision_evenness</code></li> </ul> <p>Cluster 2: Dynamics Quality</p> <ul> <li><code>velocity_control</code></li> <li><code>accent_differentiation</code></li> <li><code>accent_accuracy</code></li> </ul> <p>Cluster 3: Hand Balance</p> <ul> <li><code>hand_balance</code></li> <li><code>weak_hand_index</code></li> </ul> <p>Cluster 4: Rudiment-Specific (independent)</p> <ul> <li><code>flam_quality</code></li> <li><code>diddle_quality</code></li> <li><code>roll_sustain</code></li> </ul>"},{"location":"reference/score-computation/#recommendations","title":"Recommendations","text":"<p>For score regression:</p> <ul> <li>Predicting <code>overall_score</code> alone is sufficient for most use cases</li> <li>PCA on the 8 core scores captures ~95% variance in 3-4 components</li> </ul> <p>For multi-task learning:</p> <ul> <li>Weight timing cluster lower (high redundancy)</li> <li>Give rudiment-specific scores separate heads with masking</li> <li>Consider predicting: <code>overall_score</code> + <code>hand_balance</code> + rudiment-specific</li> </ul> <p>Minimal orthogonal score set:</p> <ol> <li><code>overall_score</code> (composite, always available)</li> <li><code>hand_balance</code> (independent axis)</li> <li><code>flam_quality</code> (when available)</li> <li><code>diddle_quality</code> (when available)</li> </ol>"},{"location":"reference/score-computation/#implementation-reference","title":"Implementation Reference","text":"<p>Score computation is implemented in <code>dataset_gen/labels/compute.py</code>:</p> <pre><code>def compute_exercise_scores(\n    stroke_labels: list[StrokeLabel],\n    events: list[StrokeEvent],\n    rudiment: Rudiment,\n) -&gt; ExerciseScores:\n    \"\"\"Compute all exercise-level scores.\"\"\"\n\n    # Timing scores (use corrected values from labels)\n    timing_errors = np.array([s.timing_error_ms for s in stroke_labels])\n    timing_errors_abs = np.abs(timing_errors)\n\n    # Timing accuracy: sigmoid scaling\n    mean_abs_error = np.mean(timing_errors_abs)\n    timing_accuracy = 100 * (1 / (1 + np.exp((mean_abs_error - 25) / 10)))\n\n    # ... additional scores computed similarly\n</code></pre>"},{"location":"reference/score-computation/#see-also","title":"See Also","text":"<ul> <li>Architecture - Pipeline overview showing where scores are computed</li> <li>Data Format - Schema for score columns in Parquet files</li> <li>Rudiment Schema - How rudiment definitions affect scoring</li> </ul>"},{"location":"specs/rudiments/01_single_stroke_roll/","title":"PAS #1: Single Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 1 Name Single Stroke Roll Category roll Family single stroke Composed Of None \u2014 this is the primitive alternating stroke pattern Related #2 Single Stroke Four (grouped subset), #3 Single Stroke Seven (grouped subset), #6 Double Stroke Open Roll (doubles instead of singles) NARD Original Yes"},{"location":"specs/rudiments/01_single_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 8 Primary Strokes Per Cycle 8"},{"location":"specs/rudiments/01_single_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R t 2 \u00bc 1e L t 3 \u00bd 1&amp; R t 4 \u00be 1a L t 5 1 2 R t 6 1 + \u00bc 2e L t 7 1 + \u00bd 2&amp; R t 8 1 + \u00be 2a L t"},{"location":"specs/rudiments/01_single_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R  L  R  L | R  L  R  L\n</code></pre>"},{"location":"specs/rudiments/01_single_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R tap none n/a Even, unaccented single stroke 2 L tap none n/a Even, unaccented single stroke 3 R tap none n/a Even, unaccented single stroke 4 L tap none n/a Even, unaccented single stroke 5 R tap none n/a Even, unaccented single stroke 6 L tap none n/a Even, unaccented single stroke 7 R tap none n/a Even, unaccented single stroke 8 L tap none n/a Even, unaccented single stroke"},{"location":"specs/rudiments/01_single_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>No ornaments. All strokes are primary singles.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes tap 0.65 - 0.77 All strokes at even, matched velocity <p>The single stroke roll is fundamentally an exercise in evenness. In its pure form, all strokes are at the same dynamic level with no accents. The velocity ratio listed is relative to accent = 1.0, but since no accents appear in the base rudiment, all strokes share the same absolute velocity target.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  - | -  -  -  -\n</code></pre> <p>No inherent accent pattern. All strokes are intended to be dynamically equal.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single stroke roll has a flat dynamic contour by design. The musical goal is perfect uniformity: identical volume, tone, and spacing for every stroke regardless of hand. In practice, subtle dynamic variations emerge from hand-dominance imbalance and fatigue, which is precisely what this rudiment trains the player to eliminate. When applied musically, accents and dynamic shaping are overlaid onto the pattern (see Variations section), but the rudiment itself is defined as uniform.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R tap half wrist 2 L tap half wrist 3 R tap half wrist 4 L tap half wrist 5 R tap half wrist 6 L tap half wrist 7 R tap half wrist 8 L tap half wrist <p>At moderate tempos, all strokes are played from the same stick height with matched wrist motion. The height class shifts based on dynamic context (half for mezzo-forte practice, low for quiet, full for loud).</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist strokes with deliberate, controlled motion. Focus on stick height matching between hands. Each stroke is a discrete arm/wrist motion with clear lift and drop. Moderate (100-160 BPM) Primarily wrist-driven strokes. Rebound becomes more important; the player begins to \"catch\" the stick bounce rather than lifting fully between strokes. Stick height naturally decreases. Fast (160-220 BPM) Transition to finger control with minimal wrist involvement. Stick height drops to low/tap class. Moeller technique (whip motion) may be employed for endurance. The fulcrum loosens to allow faster rebound cycling."},{"location":"specs/rudiments/01_single_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Accented singles: Accent every 2<sup>nd</sup>, 3<sup>rd</sup>, 4<sup>th</sup>, 5<sup>th</sup>, 6<sup>th</sup>, 7<sup>th</sup>, or 8<sup>th</sup> note to build dynamic independence while maintaining hand alternation</li> <li>Open-close-open: Begin slowly, gradually accelerate to maximum speed, then decelerate back \u2014 the traditional \"rudimental roll\" practice</li> <li>Dynamic contour: Play crescendo and decrescendo across a set number of beats while keeping even spacing</li> <li>Cross-surface orchestration: Move between drums/surfaces while maintaining alternation (drum set application)</li> <li>Metric modulation: Play singles in eighth notes, triplets, sixteenths, sextuplets, and 32<sup>nd</sup> notes to practice subdivision shifts</li> </ul>"},{"location":"specs/rudiments/01_single_stroke_roll/#prerequisites","title":"Prerequisites","text":"<ul> <li>None. This is the first rudiment and requires no prior rudiment knowledge. Basic grip technique (matched or traditional) is the only prerequisite.</li> </ul>"},{"location":"specs/rudiments/01_single_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>All 40 rudiments ultimately build on the ability to alternate single strokes cleanly</li> </ul>"},{"location":"specs/rudiments/01_single_stroke_roll/#2-single-stroke-four-adds-grouping-and-accent","title":"2 Single Stroke Four (adds grouping and accent)","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#3-single-stroke-seven-adds-grouping-accent-and-odd-number-phrasing","title":"3 Single Stroke Seven (adds grouping, accent, and odd-number phrasing)","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#5-triple-stroke-roll-same-alternation-principle-extended-to-three-per-hand","title":"5 Triple Stroke Roll (same alternation principle extended to three per hand)","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#6-double-stroke-open-roll-doubles-instead-of-singles","title":"6 Double Stroke Open Roll (doubles instead of singles)","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The single stroke roll is the very first rudiment taught to beginning percussionists. Despite its apparent simplicity, it remains one of the most difficult to truly master.</p> <p>Common mistakes: - Uneven spacing between right and left strokes (galloping) - Volume imbalance between dominant and non-dominant hand - Stick height mismatch \u2014 one hand consistently higher than the other - Tension in the grip, forearms, or shoulders, especially at faster tempos - Rushing or dragging relative to the metronome</p> <p>Practice strategies: - Begin at very slow tempos (60 BPM sixteenths) with a metronome, focusing on stick height matching - Practice leading with both hands (R-L and L-R) for equal development - Use a mirror or video to visually compare hand motions - Practice on a pad, snare drum, and pillow/soft surface to develop different aspects of control - Record and listen back to check for evenness defects the ear misses in real time</p> <p>What to listen for: - Identical tone quality from both hands - Perfectly even spacing (no flamming, no galloping) - Consistent volume across all strokes - Clean, focused sound with no buzzing or double-bouncing</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The single stroke roll is the most fundamental action in percussion: one hand, then the other, alternating. While the concept predates any formal codification, the single stroke roll was included in the NARD (National Association of Rudimental Drummers) original 26 rudiments when NARD was founded in 1933. Notably, it was the sole addition to Gardiner Strube's 25 Lessons from his 1870 Drum and Fife Instructor; all other 25 NARD rudiments came directly from Strube's work. The single stroke roll was retained as PAS #1 when the Percussive Arts Society expanded the list to 40 in 1984 under Jay Wanamaker's committee. It is universally recognized as the foundation of all drumming technique across every percussion tradition worldwide.</p>"},{"location":"specs/rudiments/01_single_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/01_single_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>R  L  R  L  R  L  R  L\n</code></pre>"},{"location":"specs/rudiments/01_single_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     L     R     L   | R     L     R     L   |\nType:    | t     t     t     t   | t     t     t     t   |\nAccent:  |                       |                       |\n</code></pre>"},{"location":"specs/rudiments/02_single_stroke_four/","title":"PAS #2: Single Stroke Four","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#1-identity","title":"1. Identity","text":"Field Value PAS Number 2 Name Single Stroke Four Category roll Family single stroke Composed Of Four alternating singles with accent \u2014 a defined grouping of the single stroke roll primitive Related #1 Single Stroke Roll (unaccented continuous form), #3 Single Stroke Seven (seven-stroke grouped variant) NARD Original No (added by PAS in 1984)"},{"location":"specs/rudiments/02_single_stroke_four/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 1 beat Strokes Per Cycle 4 Primary Strokes Per Cycle 4"},{"location":"specs/rudiments/02_single_stroke_four/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L t 3 \u00bd 1&amp; R t 4 \u00be 1a L t <p>The cycle naturally alternates starting hand: the first cycle begins R, the second begins L, and so on. This is because four strokes with alternating sticking automatically shifts the lead hand each cycle.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/02_single_stroke_four/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;\nR  L  R  L | L  R  L  R\n</code></pre> <p>Two consecutive cycles shown. The accent (&gt;) falls on stroke 1 of each group. The lead hand alternates naturally between cycles.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented downbeat of the group; full stroke 2 L tap none n/a Unaccented single stroke 3 R tap none n/a Unaccented single stroke 4 L tap none n/a Unaccented single stroke; lead hand shifts on next cycle"},{"location":"specs/rudiments/02_single_stroke_four/#ornament-timing","title":"Ornament Timing","text":"<p>No ornaments. All strokes are primary singles.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/02_single_stroke_four/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Reference level; stroke 1 of each group tap 0.65 - 0.77 Strokes 2, 3, and 4; even and matched"},{"location":"specs/rudiments/02_single_stroke_four/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  -\n</code></pre> <p>Single accent on the first stroke of each four-note group. When played across a full measure of 4/4, the accent falls on every beat (1, 2, 3, 4), creating a clear quarter-note pulse within the sixteenth-note stream.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single stroke four has a repeating \"accent-decay\" contour: a strong first stroke followed by three even, softer strokes. This creates a clear rhythmic grouping where the accent defines the start of each four-note cell. The three tap strokes should be at a matched dynamic level with no decay or crescendo between them. The contrast between accent and taps is the defining musical characteristic \u2014 without it, the pattern reverts to an undifferentiated single stroke roll. The accent-to-tap ratio should be clearly audible but not exaggerated; the taps carry the rhythmic subdivision while the accent anchors the pulse.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/02_single_stroke_four/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R tap low wrist 4 L tap low wrist <p>The accent on stroke 1 is a downstroke: the stick starts high (full height class, 12\"+) and stops low after striking. Strokes 2 and 3 are taps played from a low position. Stroke 4 is an upstroke: starting low and lifting the stick to full height to prepare the accent on the next cycle's downbeat. This downstroke-tap-tap-upstroke motion forms the foundational four-stroke sequence (Moeller method).</p>"},{"location":"specs/rudiments/02_single_stroke_four/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full arm + wrist motion for accents with clear height differential. Taps played with deliberate low strokes. Each of the four motions (down, tap, tap, up) is distinct and visible. Moderate (100-160 BPM) Accent motion becomes more wrist-driven; arm assists but does not dominate. Tap strokes rely on controlled rebound. The up-down-tap-tap cycle becomes fluid and connected. Fast (160-200 BPM) Height differential decreases but accent remains perceptibly louder. Finger control supplements wrist for taps. Moeller whip technique becomes essential for accents to maintain separation without tension."},{"location":"specs/rudiments/02_single_stroke_four/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/02_single_stroke_four/#common-variations","title":"Common Variations","text":"<ul> <li>Accent displacement: Move the accent to stroke 2, 3, or 4 within the group (accent on \"e\", \"&amp;\", or \"a\") to develop dynamic independence</li> <li>Double accent: Accent strokes 1 and 3 to create an accent pattern on the beats and \"ands\"</li> <li>Cross-surface orchestration: Play accents on one surface (e.g., snare rim or tom) and taps on another to create timbral grouping</li> <li>Dynamic gradient: Replace the binary accent/tap with a four-level dynamic contour (f, mf, mp, p) across the four strokes</li> <li>Continuous alternation across bar lines: Chain groups without pause, emphasizing that the lead hand alternates every group</li> </ul>"},{"location":"specs/rudiments/02_single_stroke_four/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/02_single_stroke_four/#1-single-stroke-roll-must-be-able-to-play-even-alternating-strokes-before-adding-accent-grouping","title":"1 Single Stroke Roll \u2014 must be able to play even alternating strokes before adding accent grouping","text":""},{"location":"specs/rudiments/02_single_stroke_four/#builds-toward","title":"Builds Toward","text":"<ul> <li>All accented rudiments benefit from the accent/tap independence developed here</li> </ul>"},{"location":"specs/rudiments/02_single_stroke_four/#3-single-stroke-seven-extends-the-grouping-concept-to-seven-strokes","title":"3 Single Stroke Seven (extends the grouping concept to seven strokes)","text":""},{"location":"specs/rudiments/02_single_stroke_four/#16-single-paradiddle-introduces-diddle-within-accented-grouping","title":"16 Single Paradiddle (introduces diddle within accented grouping)","text":""},{"location":"specs/rudiments/02_single_stroke_four/#teaching-notes","title":"Teaching Notes","text":"<p>The single stroke four is typically the second rudiment taught after the single stroke roll. It introduces the critical concept of dynamic contrast within an alternating pattern \u2014 the ability to play one stroke louder while keeping subsequent strokes even and controlled.</p> <p>Common mistakes: - Accent bleeds into stroke 2 (the tap immediately following the accent is too loud due to uncontrolled rebound) - Taps are uneven \u2014 stroke 4 is often louder than strokes 2-3 because the player lifts the stick early to prepare the next accent - Loss of rhythmic evenness when adding the accent (the accent arrives early or the tap after the accent is late) - Identical dynamics on all four strokes (failure to differentiate accent from taps)</p> <p>Practice strategies: - Begin by practicing the single stroke roll with no accents, then gradually introduce the accent on beat 1 while maintaining tap evenness - Practice the four-stroke motion sequence in isolation: downstroke, tap, tap, upstroke (Moeller motion) - Use a metronome at slow tempos and check that the accent falls precisely on the click, not before it - Practice leading with both hands: R-L-R-L and L-R-L-R groups - Record and compare the volume of strokes 2, 3, and 4 to verify they are matched</p> <p>What to listen for: - Clear accent/tap contrast without exaggeration - Strokes 2, 3, and 4 at identical dynamic level - Perfectly even sixteenth-note spacing (no rhythmic distortion from the accent) - Consistent tone quality across both hands</p>"},{"location":"specs/rudiments/02_single_stroke_four/#historical-context","title":"Historical Context","text":"<p>The single stroke four was not part of the NARD original 26 rudiments. It was added to the PAS 40 International Drum Rudiments list in 1984 when Jay Wanamaker's committee expanded and reorganized the rudiment canon. While the single stroke four is simply a four-note grouping of the single stroke roll with an accent, its formal inclusion recognized the pedagogical importance of defining accented groupings as distinct rudiments. The concept of grouping singles in fours with accents predates its formal PAS codification \u2014 it appears implicitly in military drumming manuals and marching percussion literature throughout the 19<sup>th</sup> and 20<sup>th</sup> centuries. Its categorization as a separate rudiment reflects a modern pedagogical emphasis on accent control as a discrete skill.</p>"},{"location":"specs/rudiments/02_single_stroke_four/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/02_single_stroke_four/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;\nR  L  R  L  |  L  R  L  R\n</code></pre>"},{"location":"specs/rudiments/02_single_stroke_four/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   |\nHand:    | R     L     R     L   |\nType:    | A     t     t     t   |\nAccent:  | &gt;                     |\n</code></pre> <p>Two-cycle view (showing natural hand alternation):</p> <pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     L     R     L   | L     R     L     R   |\nType:    | A     t     t     t   | A     t     t     t   |\nAccent:  | &gt;                     | &gt;                     |\n</code></pre>"},{"location":"specs/rudiments/03_single_stroke_seven/","title":"PAS #3: Single Stroke Seven","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#1-identity","title":"1. Identity","text":"Field Value PAS Number 3 Name Single Stroke Seven Category roll Family single stroke Composed Of Seven alternating singles with accent \u2014 an odd-number grouping of the single stroke roll primitive Related #1 Single Stroke Roll (unaccented continuous form), #2 Single Stroke Four (four-stroke grouped variant) NARD Original No (added by PAS in 1984)"},{"location":"specs/rudiments/03_single_stroke_seven/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 7 Primary Strokes Per Cycle 7 <p>Seven sixteenth notes occupy positions 1 through 1 + \u00bd (seven of the eight available sixteenth-note slots in a two-beat span). The eighth slot (position 1 + \u00be) is a sixteenth rest, completing the two-beat cycle. Because the stroke count is odd, the starting hand alternates naturally between cycles.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L t 3 \u00bd 1&amp; R t 4 \u00be 1a L t 5 1 2 R t 6 1 + \u00bc 2e L t 7 1 + \u00bd 2&amp; R A \u2014 1 + \u00be 2a \u2014 (rest) <p>The sixteenth rest on slot 2a creates a brief silence that defines the group boundary and provides a rhythmic \"breath\" before the next cycle. The accent on stroke 7 resolves the phrase and signals the approaching rest.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                    &gt;\nR  L  R  L | R  L  R  (rest) | L  R  L  R | L  R  L  (rest)\n</code></pre> <p>Two consecutive cycles shown. Accents (&gt;) fall on strokes 1 and 7 of each group. The lead hand alternates between cycles due to the odd stroke count.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented downbeat of the group; initiates the phrase 2 L tap none n/a Unaccented single stroke 3 R tap none n/a Unaccented single stroke 4 L tap none n/a Unaccented single stroke 5 R tap none n/a Unaccented single stroke 6 L tap none n/a Unaccented single stroke 7 R accent none n/a Accented final stroke; resolves the phrase before the rest"},{"location":"specs/rudiments/03_single_stroke_seven/#ornament-timing","title":"Ornament Timing","text":"<p>No ornaments. All strokes are primary singles.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Reference level; strokes 1 and 7 tap 0.65 - 0.77 Strokes 2 through 6; even and matched"},{"location":"specs/rudiments/03_single_stroke_seven/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  - | -  -  &gt;  (rest)\n</code></pre> <p>Accents on strokes 1 and 7 frame the seven-note group. Stroke 1 initiates the phrase, and stroke 7 provides a strong resolution before the rest.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single stroke seven has a \"bookend\" accent contour: strong on the first and last strokes, with five even taps in between. This creates a phrase with clear entry and exit points. The five interior taps should be at a matched, lower dynamic level with no crescendo or decrescendo between them. The accent on stroke 7 is particularly important because it marks the end of the group before the rest, giving the pattern its distinctive rhythmic signature \u2014 a burst of activity that resolves firmly before a brief silence. The accent on stroke 1 re-initiates after the rest, creating a clear sense of rhythmic cycling.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R tap low wrist 4 L tap low wrist 5 R tap low wrist 6 L tap low wrist 7 R accent full wrist + arm <p>Stroke 1 is a downstroke: starts high, stops low after striking. Strokes 2 through 5 are taps at low height. Stroke 6 is an upstroke: starts low and lifts to full height to prepare the accent on stroke 7. Stroke 7 is a downstroke that resolves the phrase. During the rest, the opposite hand lifts to full height in preparation for the next cycle's opening accent.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full arm + wrist motion for accents with clear height differential. Taps played with deliberate low strokes. The rest provides ample time to prepare the hand switch for the next cycle. Each stroke is distinct and controlled. Moderate (100-160 BPM) Accent motion becomes more wrist-driven. Taps rely on controlled rebound at low stick height. The rest shrinks in perceived duration; preparation for the next cycle's accent must be efficient. The seven-note phrase begins to feel like a continuous gesture punctuated by a brief gap. Fast (160-200 BPM) Height differential decreases but accent remains perceptible. Finger control supplements wrist for interior taps. The rest becomes very brief (a single sixteenth note at fast tempo). Moeller technique helps sustain accents without tension. The upstroke into stroke 7's accent and the hand-switch during the rest become the primary technical challenges."},{"location":"specs/rudiments/03_single_stroke_seven/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#common-variations","title":"Common Variations","text":"<ul> <li>Accent on stroke 1 only: Remove the accent on stroke 7, treating it as a tap \u2014 this creates a single-accent phrase with the rest providing the only grouping cue</li> <li>No accents (even): Play all seven strokes at matched dynamics, using only the rest to define the group boundary \u2014 useful as an evenness exercise</li> <li>Triplet subdivision: Notate the seven strokes as a sextuplet (six notes over one beat) plus a quarter note on beat 2, creating a compound rhythmic feel rather than straight sixteenths</li> <li>Open-close-open: Begin slowly, accelerate through the pattern, then decelerate \u2014 applied to sets of seven rather than continuous alternation</li> <li>Accent displacement: Move accents to different positions within the seven-note group to develop independence</li> <li>Cross-surface orchestration: Play accents on one surface and taps on another, or distribute the seven strokes across multiple drums</li> </ul>"},{"location":"specs/rudiments/03_single_stroke_seven/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#1-single-stroke-roll-even-alternating-strokes-at-a-range-of-tempos","title":"1 Single Stroke Roll \u2014 even alternating strokes at a range of tempos","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#2-single-stroke-four-ability-to-accent-within-an-alternating-pattern","title":"2 Single Stroke Four \u2014 ability to accent within an alternating pattern","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#builds-toward","title":"Builds Toward","text":"<ul> <li>Odd-meter phrasing skills (\u215e, 7/16 time signatures)</li> <li>Fill and solo vocabulary using seven-note groupings over common time</li> </ul>"},{"location":"specs/rudiments/03_single_stroke_seven/#16-single-paradiddle-combines-accented-grouping-with-diddle","title":"16 Single Paradiddle (combines accented grouping with diddle)","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#teaching-notes","title":"Teaching Notes","text":"<p>The single stroke seven introduces two concepts beyond the single stroke four: odd-number grouping and the incorporation of a rest within the rhythmic cycle. The odd count means the starting hand alternates naturally, which is a valuable pedagogical feature \u2014 it forces equal development of both hands as lead.</p> <p>Common mistakes: - Rushing through the seven strokes to \"get to the rest\" (the rest should arrive naturally, not be forced) - Uneven spacing of the seven strokes, particularly around strokes 5-6-7 where the player anticipates the accent on 7 - Accent on stroke 7 arrives early (pulled toward the rest) or is weakened - Failing to maintain the rest \u2014 filling the silence with an extra stroke or starting the next cycle too early - Inconsistent hand alternation across cycles (forgetting that the lead hand switches)</p> <p>Practice strategies: - Begin by counting aloud: \"1-e-&amp;-a, 2-e-&amp;-(rest)\" while playing to internalize the rhythmic structure - Practice with a metronome, placing clicks on beats 1 and 2 to verify the seven strokes and rest align correctly - Isolate the hand switch: practice the transition from stroke 7 through the rest to stroke 1 of the next cycle at slow tempos - Practice leading with both R and L as starting hands - Chain multiple cycles together to build endurance and verify that the hand alternation stays consistent across many repetitions</p> <p>What to listen for: - Clear accent/tap contrast on strokes 1 and 7 - Five interior taps (strokes 2-6) at identical dynamic level - Even sixteenth-note spacing across all seven strokes - A clean, silent rest with no ghost notes or stick noise - Seamless hand alternation between cycles</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#historical-context","title":"Historical Context","text":"<p>The single stroke seven was not part of the NARD original 26 rudiments. It was added to the PAS 40 International Drum Rudiments list in 1984 as part of the expansion led by Jay Wanamaker's committee. Its inclusion recognized the importance of odd-number groupings in percussion pedagogy. While seven-note single stroke phrases appear throughout historical drumming literature and in various cultural drumming traditions (particularly those with asymmetric meter), the formal codification as PAS #3 established it as a standard exercise alongside the single stroke roll and single stroke four. The single stroke seven completes the single stroke family: continuous (roll), four-note grouping, and seven-note grouping, providing a progressive sequence for developing alternating stroke technique with increasingly complex phrasing.</p>"},{"location":"specs/rudiments/03_single_stroke_seven/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/03_single_stroke_seven/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                    &gt;\nR  L  R  L  R  L  R  (rest)\n</code></pre>"},{"location":"specs/rudiments/03_single_stroke_seven/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     L     R     L   | R     L     R     -   |\nType:    | A     t     t     t   | t     t     A    rest  |\nAccent:  | &gt;                     |             &gt;          |\n</code></pre> <p>Two-cycle view (showing natural hand alternation):</p> <pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   | 4     e     &amp;     a   |\nHand:    | R     L     R     L   | R     L     R     -   | L     R     L     R   | L     R     L     -   |\nType:    | A     t     t     t   | t     t     A    rest  | A     t     t     t   | t     t     A    rest  |\nAccent:  | &gt;                     |             &gt;          | &gt;                     |             &gt;          |\n</code></pre>"},{"location":"specs/rudiments/04_multiple_bounce_roll/","title":"PAS #4: Multiple Bounce Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 4 Name Multiple Bounce Roll Category roll Family buzz Composed Of Alternating buzz strokes (press/controlled multiple-bounce strokes) Related #1 Single Stroke Roll (alternation pattern without buzz), #6 Double Stroke Open Roll (controlled doubles vs. uncontrolled multiple bounces), #5 Triple Stroke Roll (controlled triples per hand) NARD Original Yes (listed as the \"Long Roll\" in closed/buzz form)"},{"location":"specs/rudiments/04_multiple_bounce_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision eighth (primary strokes); bounces fill the subdivision space between primaries Cycle Length 2 beats Strokes Per Cycle Indeterminate (4 primary strokes + 3-8 bounces per primary) Primary Strokes Per Cycle 4 <p>The multiple bounce roll is the only rudiment where the exact stroke count per cycle is indeterminate. Each primary stroke initiates 3 to 8 bounces depending on tempo, dynamic level, head tension, and player technique. The goal is a smooth, sustained sound rather than a counted number of strokes.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The stroke grid below represents the 4 primary (initiating) strokes only. Bounces are not placed on fixed grid positions; they fill the time between primaries as a continuous, decaying series.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R b 2 \u00bd 1&amp; L b 3 1 2 R b 4 1 + \u00bd 2&amp; L b <p>Each primary stroke at its grid position initiates a buzz: the stick is pressed into the head and allowed to bounce multiple times, with the bounces filling the duration until the next primary on the opposite hand.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R(buzz)  L(buzz) | R(buzz)  L(buzz)\n</code></pre>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R buzz primary n/a Initiating press stroke; 3-8 bounces follow 2 L buzz primary n/a Initiating press stroke; 3-8 bounces follow 3 R buzz primary n/a Initiating press stroke; 3-8 bounces follow 4 L buzz primary n/a Initiating press stroke; 3-8 bounces follow <p>Each primary stroke is both the initiator and the sustainer of its buzz. There is no separation between the primary and its bounces; they form a single continuous gesture.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Buzz Bounce Behavior: - Each primary stroke produces a non-fixed number of bounces (typically 3-8) - Bounces are not rhythmically quantized; they are a continuous decay of stick energy against the head - The bounce rate is determined by: fulcrum pressure, stick weight, head tension, dynamic level, and tempo - At slower tempos, more bounces occur per primary (the time gap between primaries is longer) - At faster tempos, fewer bounces occur per primary (less time to fill) - The transition between one hand's buzz and the other must be seamless with no audible gap or accent</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes buzz primary 0.65 - 0.77 The initiating stroke that starts each buzz; unaccented in the base rudiment buzz bounce (1<sup>st</sup>) 0.60 - 0.80 x primary First bounce after primary contact buzz bounce (2<sup>nd</sup>) 0.50 - 0.70 x primary Progressive decay buzz bounce (nth) further decaying Each successive bounce is quieter than the last <p>The velocity ratios for bounces are expressed as multipliers of the primary stroke velocity, not of accent = 1.0. Since the base rudiment has no accents, the primary strokes sit in the tap velocity range (0.65 - 0.77). Each bounce decays further from there.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  - | -  -\n</code></pre> <p>No inherent accent pattern. The multiple bounce roll in its pure form is a sustained, even sound. The primary strokes should be as inaudible as possible within the texture; the goal is to eliminate any pulsation from the hand alternation.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The multiple bounce roll has a flat dynamic contour by design. The musical goal is a single sustained tone, analogous to a bowed string instrument or a wind instrument holding a note. Any audible pulsation (hearing individual primaries) is considered a technical deficiency. The roll may be performed at any dynamic level from pianissimo to fortissimo, but within a given passage the dynamic should remain constant unless a crescendo or decrescendo is indicated. Dynamic shaping (crescendo rolls, decrescendo rolls) is a common musical application but is not part of the rudiment's base definition.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R buzz low rebound 2 L buzz low rebound 3 R buzz low rebound 4 L buzz low rebound <p>The buzz stroke is physically distinct from all other stroke types. The stick is not lifted and dropped in a discrete motion; instead, the player presses the stick into the head with controlled fulcrum pressure and allows the natural rebound of the stick against the head to produce multiple bounces. The height class is low because the stick remains close to the head throughout the gesture.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-90 BPM) Each primary has maximum time to buzz (6-8 bounces typical). The player must sustain fulcrum pressure longer. Hand transitions are more exposed and must be carefully overlapped to avoid gaps. The subdivisions of the primaries are typically eighth notes. Roll quality is hardest here because gaps between hand changes are most audible. Moderate (90-120 BPM) The standard concert/orchestral roll tempo range. Primaries typically on eighth-note spacing yield 4-6 bounces each. The overlap between hands is natural and the roll sounds most sustained. Slight fulcrum pressure adjustments control the density. Fast (120-140 BPM) Fewer bounces per primary (3-4). The roll begins to approximate a double stroke roll in feel. The player relies more on stick speed and less on sustained pressure. At the upper extreme, the distinction between a fast buzz roll and a closed double stroke roll becomes subtle."},{"location":"specs/rudiments/04_multiple_bounce_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Metered buzz roll: Primary strokes placed on specific subdivisions (eighth notes, triplets, or sixteenth notes) to create different roll densities. Eighth-note primaries are the most common in orchestral playing; sixteenth-note primaries produce a denser roll.</li> <li>Orchestral roll (concert roll): The standard application in concert percussion. Seamless, gap-free sustained sound. Often performed with crescendo/decrescendo shaping.</li> <li>Rudimental buzz roll: In field/marching drumming, the buzz roll is sometimes performed with more defined primary pulsation and at louder dynamics, contrasting with the smooth orchestral style.</li> <li>Tied buzz roll: Rolls that begin on one beat and sustain through to a release point, notated with ties. The player must manage the entry, sustain, and release.</li> <li>Dynamic-shaped rolls: Crescendo rolls (pp to ff) and decrescendo rolls (ff to pp) are fundamental orchestral techniques built on the buzz roll.</li> </ul>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#prerequisites","title":"Prerequisites","text":"<ul> <li>Basic rebound control: the player must be able to produce controlled multiple bounces from a single stroke before combining them into a roll</li> </ul>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#1-single-stroke-roll-alternating-hand-control-is-the-foundation","title":"1 Single Stroke Roll (alternating hand control is the foundation)","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Orchestral roll technique (the primary application of this rudiment)</li> <li>Concert snare drum literature (virtually all orchestral snare parts require buzz roll mastery)</li> </ul>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#7-15-counted-stroke-rolls-the-buzz-roll-concept-applied-with-specific-stroke-counts-using-double-strokes","title":"7-#15 Counted Stroke Rolls (the buzz roll concept applied with specific stroke counts using double strokes)","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The multiple bounce roll is one of the most difficult rudiments to master despite its conceptual simplicity. It requires a fundamentally different physical approach from all other rudiments.</p> <p>Common mistakes: - Pressing too hard into the head, which chokes the bounce and produces a \"crunch\" instead of a smooth buzz - Pressing too lightly, which produces an uncontrolled, uneven bounce with audible gaps - Audible hand-change pulsation (hearing the R-L alternation as a rhythmic pattern rather than a sustained tone) - Uneven buzz density between dominant and non-dominant hands - Using wrist motion instead of fulcrum pressure (treating it like a fast single stroke roll rather than a true press roll) - Starting or ending the roll abruptly instead of with a clean attack and release</p> <p>Practice strategies: - Begin by practicing single-hand buzzes: press one stick into the head and sustain a controlled buzz for 2-4 seconds, then switch hands - Practice slow hand-to-hand transitions: R(buzz)...L(buzz)...R(buzz), focusing on seamless overlap - Use a practice pad only for basic coordination; true buzz roll development requires a drum head (practice pads often have too much or too little rebound) - Practice at pianissimo first, as quiet buzzes require the most refined pressure control - Record and listen back to check for pulsation, gaps, and unevenness</p> <p>What to listen for: - A smooth, sustained, continuous tone with no gaps or pulsation - Identical buzz quality from both hands - Clean, defined attack at the beginning and release at the end - Even density throughout the duration of the roll - No \"crunching\" or \"choking\" sounds from excess pressure</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#historical-context","title":"Historical Context","text":"<p>The multiple bounce roll is one of the oldest and most fundamental drumming techniques, with roots in European military drumming dating back centuries. In the NARD original 26 rudiments (1933), it appeared as the \"Long Roll\" in its closed (buzz) form, descending directly from Gardiner Strube's 1870 Drum and Fife Instructor. The technique originated in the field drumming tradition where sustained rolls were necessary to signal troops over long distances and across noisy battlefields. In the PAS 1984 expansion to 40 rudiments, it was given the more descriptive name \"Multiple Bounce Roll\" (PAS #4) to distinguish it clearly from the open (double stroke) roll and the counted rolls. Today, it is the standard roll technique in orchestral and concert band percussion, while the open double stroke roll is preferred in rudimental and marching contexts.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/04_multiple_bounce_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>R(bz)  L(bz)  R(bz)  L(bz)\n</code></pre> <p>The \"bz\" indicates a buzz/press stroke. In standard percussion notation, each note stem carries a \"Z\" through it or three slashes (tremolo marking) to indicate the buzz.</p>"},{"location":"specs/rudiments/04_multiple_bounce_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1           &amp;         | 2           &amp;         |\nHand:    | R           L         | R           L         |\nType:    | b           b         | b           b         |\nAccent:  |                       |                       |\nBuzz:    | ~~~~~~~~~~~^~~~~~~~~~~| ~~~~~~~~~~~^~~~~~~~~~~|\n</code></pre> <p>The <code>~~~</code> represents the continuous buzz sound. The <code>^</code> marks the hand transition point where one hand's buzz ends and the other begins. In a well-executed roll, the transition is inaudible.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/","title":"PAS #5: Triple Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 5 Name Triple Stroke Roll Category roll Family triple stroke Composed Of Groups of three same-hand strokes, alternating hands Related #1 Single Stroke Roll (one per hand instead of three), #6 Double Stroke Open Roll (two per hand instead of three), #4 Multiple Bounce Roll (uncontrolled multiple bounces vs. controlled triples) NARD Original No (added by PAS in 1984)"},{"location":"specs/rudiments/05_triple_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sextuplet Cycle Length 2 beats Strokes Per Cycle 12 Primary Strokes Per Cycle 12 <p>The triple stroke roll divides each beat into six equal parts (sextuplets). Each hand plays three consecutive strokes occupying one beat, then the other hand plays three strokes on the next beat. One full cycle of RRR LLL RRR LLL spans 2 beats and contains 12 strokes.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u2159 1la R t 3 \u2153 1li R t 4 \u00bd 1&amp; L A 5 \u2154 1la L t 6 \u215a 1li L t 7 1 2 R A 8 1 + \u2159 2la R t 9 1 + \u2153 2li R t 10 1 + \u00bd 2&amp; L A 11 1 + \u2154 2la L t 12 1 + \u215a 2li L t <p>Each group of three strokes (e.g., strokes 1-3) occupies exactly one half-beat. The first stroke of each group lands on the strong sextuplet position (beat or \"&amp;\") and carries a natural accent from the wrist initiation.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;           &gt;           | &gt;           &gt;\nR  R  R  L  L  L | R  R  R  L  L  L\n</code></pre>"},{"location":"specs/rudiments/05_triple_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Wrist-initiated first stroke of right-hand group 2 R tap none n/a Finger-controlled second stroke 3 R tap none n/a Finger-controlled third stroke; weakest of the group 4 L accent none n/a Wrist-initiated first stroke of left-hand group 5 L tap none n/a Finger-controlled second stroke 6 L tap none n/a Finger-controlled third stroke; weakest of the group 7 R accent none n/a Wrist-initiated first stroke of right-hand group 8 R tap none n/a Finger-controlled second stroke 9 R tap none n/a Finger-controlled third stroke; weakest of the group 10 L accent none n/a Wrist-initiated first stroke of left-hand group 11 L tap none n/a Finger-controlled second stroke 12 L tap none n/a Finger-controlled third stroke; weakest of the group"},{"location":"specs/rudiments/05_triple_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>No ornaments. All 12 strokes are primary strokes. Each group of three same-hand strokes is evenly spaced within the sextuplet grid at intervals of \u2159 beat.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (stroke 1 of each group) 1.0 Wrist-initiated first stroke; full energy tap (stroke 2 of each group) ~0.95 x stroke 1 Slight decay; finger-controlled bounce tap (stroke 3 of each group) ~0.90 x stroke 1 Further decay; weakest finger bounce <p>The velocity decay within each three-stroke group is a natural consequence of the technique: the wrist initiates the first stroke with full energy, and the second and third strokes are produced by progressively weaker finger rebounds. The 1.0 / 0.95 / 0.90 decay profile reflects this physical reality. In an ideal performance, the player minimizes this decay to produce an even roll, but the inherent decay is always present to some degree.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     -     &gt;     -     - | &gt;     -     -     &gt;     -     -\n</code></pre> <p>The first stroke of each three-stroke group carries a natural accent from the wrist initiation. In the base rudiment, the player aims to minimize this accent for evenness, but the accent pattern is inherent to the technique.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The triple stroke roll has a repeating micro-contour within each three-stroke group: a slight emphasis on stroke 1 followed by a gentle decay through strokes 2 and 3. This creates a subtle pulse at the half-beat level (two pulses per beat). The musical goal is to minimize this pulse as much as possible, producing an even stream of sextuplets. When the rudiment is applied musically, the natural accent pattern can be embraced or deliberately overridden with accent schemes. The overall dynamic contour across the full cycle is flat; the micro-contour is the distinguishing characteristic.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent half wrist 2 R tap low fingers 3 R tap low fingers 4 L accent half wrist 5 L tap low fingers 6 L tap low fingers 7 R accent half wrist 8 R tap low fingers 9 R tap low fingers 10 L accent half wrist 11 L tap low fingers 12 L tap low fingers <p>The triple stroke roll uses a \"throw-dribble-dribble\" motion (described by Bill Bachman as \"alley-oop-oop\"). The wrist throws the stick down for stroke 1, and the fingers control the rebound for strokes 2 and 3. After stroke 3, the hand relaxes and the stick rebounds to the starting position, ready for the next group. This is fundamentally different from a buzz roll (where bounces are uncontrolled) and from playing three individual wrist strokes (which is too slow at performance tempos).</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) All three strokes can be played as individual free strokes using the wrist. The sextuplet spacing is wide enough that each stroke is a discrete, controlled motion. This is the range for learning the rudiment. Finger control is less critical; the player focuses on even spacing and volume matching. Moderate (100-140 BPM) Transition to wrist-finger combination. Stroke 1 is wrist-driven; strokes 2 and 3 are increasingly finger-controlled. The \"throw-dribble-dribble\" motion becomes essential. French grip (thumb on top) may be adopted for better finger access. Stick height drops for strokes 2 and 3. Fast (140-160 BPM) Almost entirely finger-driven for strokes 2 and 3. The wrist motion for stroke 1 becomes minimal. The feel approaches a controlled triple bounce. At the upper extreme, the triple stroke roll begins to resemble a buzz roll with exactly three bounces per primary. The fulcrum must be loose enough to allow rapid rebound."},{"location":"specs/rudiments/05_triple_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Unaccented triple stroke roll: All 12 strokes at uniform dynamic level; eliminates the natural group-initial accent for a smoother roll effect</li> <li>Accented triple stroke roll: Deliberate accent on the first stroke of each group to emphasize the rhythmic grouping</li> <li>Triple stroke roll with accents on other positions: Accent on stroke 2 or stroke 3 for independence exercises</li> <li>Open-close-open: Gradually accelerate from slow (discrete wrist strokes) to fast (finger-controlled bounces) and back, developing the technique transition</li> <li>Metric modulation: Playing triple strokes within eighth-note triplet, sixteenth-note triplet, or sextuplet frameworks to explore different tempos and musical contexts</li> <li>Cross-surface orchestration: Moving between drums/surfaces while maintaining the three-per-hand grouping (drum set application)</li> </ul>"},{"location":"specs/rudiments/05_triple_stroke_roll/#prerequisites","title":"Prerequisites","text":"<ul> <li>Basic finger control technique (the ability to produce controlled rebounds with the fingers)</li> </ul>"},{"location":"specs/rudiments/05_triple_stroke_roll/#1-single-stroke-roll-hand-alternation-is-the-foundation","title":"1 Single Stroke Roll (hand alternation is the foundation)","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#6-double-stroke-open-roll-two-per-hand-control-must-be-mastered-before-extending-to-three","title":"6 Double Stroke Open Roll (two-per-hand control must be mastered before extending to three)","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Advanced multi-bounce control and open/close roll transitions</li> <li>Drum set applications: fast fill patterns, Tom-tom rolls using groups of three</li> </ul>"},{"location":"specs/rudiments/05_triple_stroke_roll/#4-multiple-bounce-roll-the-triple-stroke-roll-at-extreme-speed-approaches-a-buzz-roll-mastering-controlled-triples-builds-toward-controlled-multi-bounce-technique","title":"4 Multiple Bounce Roll (the triple stroke roll at extreme speed approaches a buzz roll; mastering controlled triples builds toward controlled multi-bounce technique)","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The triple stroke roll is a critical bridge between the double stroke roll and the multiple bounce roll. It develops the finger control necessary for all advanced rebound-based techniques.</p> <p>Common mistakes: - Playing all three strokes with the wrist (too slow, too tiring, and prevents development at higher tempos) - Allowing the third stroke to become inaudibly weak or disappear entirely - Uneven spacing within the three-stroke group (typically a gap between stroke 1 and stroke 2, with strokes 2 and 3 too close together) - Gripping too tightly, which prevents the stick from rebounding naturally for strokes 2 and 3 - Uneven groups between dominant and non-dominant hands (the non-dominant hand's third stroke is typically the weakest point) - Rushing the hand change (cutting stroke 3 short to get to the next group)</p> <p>Practice strategies: - Begin with slow, individual wrist strokes (RRR LLL at 60 BPM sextuplets) to establish the spacing - Gradually introduce finger control for strokes 2 and 3 as tempo increases - Practice single-hand groups (RRR stop, RRR stop) before combining hands - Use a mirror or video to compare stick heights between strokes 1, 2, and 3 - Practice on different surfaces: snare drum (high rebound), floor tom (medium rebound), and practice pad (variable rebound) to develop adaptability - Experiment with French grip for better finger access - Record and listen back, specifically checking that stroke 3 is clearly audible and evenly spaced</p> <p>What to listen for: - Even spacing between all three strokes within each group (no galloping) - Stroke 3 is clearly audible and not significantly weaker than strokes 1 and 2 - Smooth hand transitions (no gap or flamming at the changeover) - Identical quality between right-hand and left-hand groups - Consistent sextuplet rhythm across the full cycle</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The triple stroke roll was not part of the NARD original 26 rudiments (1933). It was one of the 14 rudiments added when the Percussive Arts Society expanded the list to 40 in 1984, under the committee led by Jay Wanamaker. The triple stroke roll was included to address a gap in the original list: while the single stroke roll (#1) and the double stroke roll (#6) covered one and two strokes per hand respectively, there was no rudiment codifying the three-per-hand technique that many drummers already practiced informally. The addition formalized the finger control technique that is essential for advanced rudimental and orchestral playing. Bill Bachman, in his Modern Drummer series on the top 10 rudiments, ranks the triple stroke roll as one of the most important rudiments for developing finger technique, noting that mastering controlled triples is the gateway to all multi-bounce techniques.</p>"},{"location":"specs/rudiments/05_triple_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/05_triple_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;           &gt;           &gt;           &gt;\nR  R  R  L  L  L  R  R  R  L  L  L\n</code></pre>"},{"location":"specs/rudiments/05_triple_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     la    li    &amp;     la    li  | 2     la    li    &amp;     la    li  |\nHand:    | R     R     R     L     L     L   | R     R     R     L     L     L   |\nType:    | A     t     t     A     t     t   | A     t     t     A     t     t   |\nAccent:  | &gt;                 &gt;               | &gt;                 &gt;               |\n</code></pre>"},{"location":"specs/rudiments/06_double_stroke_open_roll/","title":"PAS #6: Double Stroke Open Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 6 Name Double Stroke Open Roll Category roll Family double stroke Composed Of Diddles only \u2014 the simplest and most fundamental diddle rudiment Related #1 Single Stroke Roll (singles instead of doubles), #4 Multiple Bounce Roll (buzz instead of doubles), #5 Triple Stroke Roll (triples instead of doubles), #7-15 Counted Stroke Rolls (defined-length excerpts of this pattern with accent endings), #16-19 Paradiddles (combine singles with doubles) NARD Original Yes"},{"location":"specs/rudiments/06_double_stroke_open_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 8 Primary Strokes Per Cycle 8 (all are primary; d1 and d2 are both full strokes)"},{"location":"specs/rudiments/06_double_stroke_open_roll/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2"},{"location":"specs/rudiments/06_double_stroke_open_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L | R R  L L\n</code></pre>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 2 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 3 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 4 L d2 none n/a Second stroke of left-hand diddle, finger-controlled 5 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 6 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 7 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 8 L d2 none n/a Second stroke of left-hand diddle, finger-controlled"},{"location":"specs/rudiments/06_double_stroke_open_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the grid position (downbeat or \"&amp;\") - d2 falls on the following sixteenth subdivision (\"e\" or \"a\") - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes d1 0.65 - 0.77 Matches the passage dynamic (tap-level in the base rudiment; matches accent level when played in accented context) d2 0.90 - 0.98 x d1 Slight natural decay on the second bounce <p>The double stroke open roll is fundamentally an exercise in evenness between d1 and d2. In its pure form, all strokes are at the same dynamic level with no accents. The d1 velocity ratio listed is relative to accent = 1.0 at tap level; since no accents appear in the base rudiment, all d1 strokes share the same absolute velocity target. The d2 velocity decays slightly from d1 because the second stroke is generated by finger rebound rather than a full wrist throw, resulting in marginally less energy. The hallmark of mastery is minimizing the gap between d1 and d2 (pushing the ratio toward 0.98 or even 1.0).</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  - | -  -  -  -\n</code></pre> <p>No inherent accent pattern. All strokes are intended to be dynamically equal.</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The double stroke open roll has a flat dynamic contour by design, identical to the single stroke roll in intent. The musical goal is perfect uniformity: identical volume, tone, and spacing for every stroke regardless of hand or diddle position. In practice, the primary challenge is matching d2 to d1 within each diddle pair. Subtle dynamic variations emerge from: (1) the natural decay of d2 relative to d1, (2) hand-dominance imbalance between R and L diddles, and (3) fatigue at faster tempos. Training this rudiment develops the finger control and rebound sensitivity needed to eliminate these inequalities. When applied musically, accents, crescendos, and dynamic shaping may be overlaid (see Variations section), but the rudiment itself is defined as uniform.</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers <p>The d1 stroke is initiated by the wrist from half height, throwing the stick downward. The d2 stroke is generated by finger control catching the rebound from d1 and directing it back into the head at a lower stick height. The hand then relaxes to allow the stick to return to the starting position, preparing for the next hand's d1.</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Each diddle consists of two distinct, individually controlled wrist strokes. Both d1 and d2 are played with full wrist motion at similar stick heights. The strokes are clearly audible as two separate notes. This is the \"open\" quality that gives the rudiment its name. Focus is on matching d1 and d2 volume precisely. Moderate (100-140 BPM) Transition zone. d1 is played with the wrist, d2 with the fingers catching and directing the rebound. This is the \"alley-oop\" technique: wrist drops the stick (d1), fingers close to snap the second stroke (d2). The stick height for d2 drops below d1. Players must develop the relaxed grip that allows the stick to bounce freely between the two strokes. Fast (140-200 BPM) Closed doubles. Forearms pump with minimal wrist involvement. The first two fingers (index and middle) generate d2 almost entirely from rebound control. Stick heights are low to tap class for both strokes. The two strokes within each diddle become nearly indistinguishable to the ear \u2014 this is the \"closed\" roll sound used in rudimental and marching percussion. The fulcrum loosens to maximize rebound energy."},{"location":"specs/rudiments/06_double_stroke_open_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Accented doubles: Accent the d1 of each diddle (&gt;RR &gt;LL) to build dynamic independence within the diddle pair</li> <li>Open-close-open: Begin slowly with clearly separated strokes, gradually accelerate to maximum speed (closed), then decelerate \u2014 the traditional long roll practice</li> <li>Dynamic contour: Play crescendo and decrescendo across a set number of beats while maintaining even diddle quality</li> <li>Inverted doubles: Lead with the non-dominant hand (LL RR LL RR) for equal development</li> <li>Metric modulation: Play diddles in eighth notes, sixteenths, and 32<sup>nd</sup> notes to practice subdivision shifts</li> <li>Accent patterns: Overlay accent groupings (every 3<sup>rd</sup>, 4<sup>th</sup>, 5<sup>th</sup>, 6<sup>th</sup> stroke, etc.) to develop independence between accent placement and double-stroke mechanics</li> </ul>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#1-single-stroke-roll-clean-alternation-and-hand-balance-must-be-established-before-adding-the-second-stroke-per-hand","title":"1 Single Stroke Roll \u2014 clean alternation and hand balance must be established before adding the second stroke per hand","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>All rudiments containing double strokes (drags, dragadiddles, flam paradiddle-diddles, etc.)</li> </ul>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#7-five-stroke-roll-2-diddles-1-accent-defined-startstop-excerpt","title":"7 Five Stroke Roll (2 diddles + 1 accent = defined start/stop excerpt)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#8-six-stroke-roll-3-diddles-with-accents","title":"8 Six Stroke Roll (3 diddles with accents)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#9-seven-stroke-roll-3-diddles-1-accent","title":"9 Seven Stroke Roll (3 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#10-nine-stroke-roll-4-diddles-1-accent","title":"10 Nine Stroke Roll (4 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#11-ten-stroke-roll-4-diddles-2-accents","title":"11 Ten Stroke Roll (4 diddles + 2 accents)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#12-eleven-stroke-roll-5-diddles-1-accent","title":"12 Eleven Stroke Roll (5 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#13-thirteen-stroke-roll-6-diddles-1-accent","title":"13 Thirteen Stroke Roll (6 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#14-fifteen-stroke-roll-7-diddles-1-accent","title":"14 Fifteen Stroke Roll (7 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#15-seventeen-stroke-roll-8-diddles-1-accent","title":"15 Seventeen Stroke Roll (8 diddles + 1 accent)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#16-single-paradiddle-combines-singles-with-one-diddle","title":"16 Single Paradiddle (combines singles with one diddle)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#17-double-paradiddle-extends-the-paradiddle-pattern","title":"17 Double Paradiddle (extends the paradiddle pattern)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#18-triple-paradiddle-further-extends-the-paradiddle-pattern","title":"18 Triple Paradiddle (further extends the paradiddle pattern)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#19-paradiddle-diddle-paradiddle-additional-diddle","title":"19 Paradiddle-Diddle (paradiddle + additional diddle)","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The double stroke open roll is one of the most important rudiments in all of percussion. It is the foundational double-stroke pattern from which all counted rolls, paradiddles, and diddle-based rudiments derive. Mastering it separates competent drummers from great ones.</p> <p>Common mistakes: - Playing d2 significantly softer than d1 (the \"limp second stroke\") - Using two separate wrist strokes at tempos where the wrist-finger technique should take over - Bouncing the stick uncontrollably rather than directing the rebound with the fingers - Gripping too tightly, which kills the rebound needed for d2 - Uneven spacing between d1 and d2 (rushing the second stroke) or between diddle pairs - Neglecting the non-dominant hand \u2014 the weaker hand's doubles often lag behind</p> <p>Practice strategies: - Begin at very slow tempos (60 BPM sixteenths) with a metronome, playing two deliberate wrist strokes per hand - Focus on matching stick heights: d2 should come up to the same height as d1 after the stroke - Practice the \"open-close-open\" long roll to build the full tempo spectrum - Isolate each hand: play RRRR or LLLL continuously to build finger control independently - Use a practice pad and a mirror to visually monitor stick heights and motion consistency - Record and listen back to identify unevenness between d1/d2 and between R/L hands - Practice with accent patterns to build independence between dynamic control and diddle mechanics</p> <p>What to listen for: - Both strokes of each diddle at identical volume (evenness within the pair) - Identical diddle quality from both hands (no dominant-hand bias) - Perfectly even spacing between all strokes (no flamming, no gaps) - Clean, focused tone on every stroke with no buzzing - Smooth, seamless sound at all tempos from open to closed</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#historical-context","title":"Historical Context","text":"<p>The double stroke open roll is one of the oldest and most fundamental rudiments in Western percussion, included in the original NARD (National Association of Rudimental Drummers) 26 rudiments when NARD was founded in 1933. Its lineage traces back to the earliest military drumming traditions in Europe, where the \"long roll\" (alternating double strokes) was the primary roll technique used for field signals and cadences. Gardiner Strube's 1870 Drum and Fife Instructor features the double stroke roll prominently among its 25 lessons.</p> <p>The distinction between \"open\" and \"closed\" in the rudiment's name is significant. \"Open\" means the individual strokes within each diddle are clearly distinguishable \u2014 each note can be heard separately. This contrasts with the multiple bounce (buzz) roll (#4), where the bounces blur together. At faster tempos, the double stroke roll naturally transitions toward a closed sound, but the intent remains that each stroke is controlled and deliberate, not an uncontrolled bounce.</p> <p>The double stroke open roll holds a unique position in rudimental pedagogy as the foundation for the entire family of counted stroke rolls (#7-15). Every counted roll is simply a defined-length excerpt of the double stroke open roll pattern, terminated with an accent. The five stroke roll is two diddles plus an accent; the seven stroke roll is three diddles plus an accent; and so on up through the seventeen stroke roll. Mastering the continuous double stroke roll makes all counted rolls accessible.</p> <p>In the marching percussion tradition, the \"rudimental roll\" or \"long roll\" refers specifically to the double stroke open roll played continuously, often starting slowly and accelerating. It is considered the defining technique of the rudimental snare drummer and remains a central element of DCI (Drum Corps International) and WGI (Winter Guard International) performance.</p> <p>The rudiment was retained as PAS #6 when the Percussive Arts Society expanded the list to 40 International Drum Rudiments in 1984 under Jay Wanamaker's committee.</p>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/06_double_stroke_open_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>R R  L L  R R  L L\n</code></pre>"},{"location":"specs/rudiments/06_double_stroke_open_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     R     L     L   | R     R     L     L   |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  |\nAccent:  |                       |                       |\n</code></pre>"},{"location":"specs/rudiments/07_five_stroke_roll/","title":"PAS #7: Five Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 7 Name Five Stroke Roll Category roll Family counted roll Composed Of 2 diddles + 1 accent -- the shortest odd-count roll and the prototype for all counted stroke rolls Related #6 Double Stroke Open Roll (parent pattern -- continuous diddles), #8 Six Stroke Roll (adds one accent, making it the even-count counterpart), #9 Seven Stroke Roll (extends to 3 diddles + accent), #10-15 longer counted rolls NARD Original Yes (documented as early as 1797)"},{"location":"specs/rudiments/07_five_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 1.5 beats Strokes Per Cycle 5 Primary Strokes Per Cycle 5 (all are primary; d1, d2, and accent are all full strokes)"},{"location":"specs/rudiments/07_five_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The five stroke roll spans 1.5 beats: two diddle pairs on sixteenth-note subdivisions followed by an accented stroke on the next downbeat or \"&amp;.\"</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R A <p>When repeated, the second cycle starts on the opposite hand (L) because the odd stroke count naturally alternates the leading hand:</p> # Position (beats) Grid Slot Hand Type 1 1 + \u00bd 2&amp; L d1 2 1 + \u00be 2a L d2 3 2 3 R d1 4 2 + \u00bc 3e R d2 5 2 + \u00bd 3&amp; L A"},{"location":"specs/rudiments/07_five_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R&gt; | L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/07_five_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 2 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 3 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 4 L d2 none n/a Second stroke of left-hand diddle, finger-controlled 5 R accent none n/a Terminal accent, full stroke to define the roll's endpoint"},{"location":"specs/rudiments/07_five_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to #6 Double Stroke Open Roll): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the grid position (downbeat or \"&amp;\") - d2 falls on the following sixteenth subdivision (\"e\" or \"a\") - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level; matches passage dynamic during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce (see #6) <p>The five stroke roll's dynamic profile is defined by the contrast between the soft, even diddle body and the strong terminal accent. The diddle strokes (d1/d2) sit at tap level, creating a smooth, sustained sound that the accent punctuates. The d2 decay relative to d1 follows the same physics as the double stroke open roll: the second stroke is generated by finger rebound rather than a full wrist throw.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (5<sup>th</sup>) stroke of each cycle.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The five stroke roll has a two-phase dynamic shape: a flat, low-dynamic body (4 diddle strokes) followed by a single peak (the terminal accent). This \"sustained-then-punctuated\" contour is the hallmark of all odd-count counted rolls. The diddle body should sound like a brief excerpt of the double stroke open roll at consistent, controlled tap-level dynamics. The accent provides rhythmic definition and acts as a musical arrival point. The contrast ratio between diddle body and accent is the primary expressive parameter -- a wider gap creates a more dramatic effect, while a narrower gap produces a smoother, more legato roll.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R accent full wrist + arm <p>The diddle portion uses the same wrist-finger technique described in #6 Double Stroke Open Roll: d1 is wrist-initiated from half height and d2 is finger-controlled from a lower stick position catching the rebound. The terminal accent is a full stroke from maximum stick height using both wrist and arm, providing the dynamic lift that defines the roll's endpoint. The transition from the last d2 (low, finger-controlled) to the accent (full, arm-driven) requires a rapid lift of the stick -- this \"upstroke\" from the final diddle to the accent is the primary technical challenge unique to counted rolls.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Both d1 and d2 are played with full wrist strokes at similar heights, clearly audible as separate notes. The accent is a deliberate full stroke with clear preparation. The roll sounds like four distinct taps followed by a loud accent. Moderate (100-140 BPM) Transition zone. d1 via wrist, d2 via fingers catching rebound (alley-oop technique). The diddle body begins to blur into a sustained sound. The accent preparation (upstroke from d2 to accent) becomes the critical coordination point. Fast (140-200 BPM) Closed doubles. Forearms pump, fingers generate d2 from rebound. The diddle body sounds like a brief, smooth roll. The accent must still project clearly above the roll body despite minimal preparation time. Players often use a Moeller whip motion for the accent to maximize power from a compact motion."},{"location":"specs/rudiments/07_five_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Standard begins RR LL R&gt;; the mirror starts LL RR L&gt;. Both should be practiced equally.</li> <li>Rhythmic placement: Can begin on any sixteenth-note subdivision (beat, \"e,\" \"&amp;,\" or \"a\"), changing the accent's rhythmic landing point. Common placements put the accent on a downbeat or on the \"&amp;.\"</li> <li>Triplet interpretation: At certain tempos, the five stroke roll may be played across a triplet grid rather than sixteenths, yielding a different feel while maintaining the same stroke sequence.</li> <li>Crescendo roll: Rather than flat dynamics through the diddle body, apply a slight crescendo leading into the accent for a more dramatic arrival.</li> <li>Open-close interpretation: In orchestral contexts, the diddles may be replaced with buzz strokes for a smoother, sustained roll sound.</li> </ul>"},{"location":"specs/rudiments/07_five_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#6-double-stroke-open-roll-the-diddle-technique-must-be-solid-before-adding-the-startstop-discipline-of-counted-rolls","title":"6 Double Stroke Open Roll -- the diddle technique must be solid before adding the start/stop discipline of counted rolls","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#1-single-stroke-roll-clean-alternation-and-hand-balance","title":"1 Single Stroke Roll -- clean alternation and hand balance","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>All rudiments requiring controlled roll segments with defined endpoints</li> </ul>"},{"location":"specs/rudiments/07_five_stroke_roll/#9-seven-stroke-roll-extends-the-diddle-body-to-3-pairs","title":"9 Seven Stroke Roll (extends the diddle body to 3 pairs)","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#10-nine-stroke-roll-4-diddle-pairs","title":"10 Nine Stroke Roll (4 diddle pairs)","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#12-15-longer-odd-count-rolls","title":"12-15 longer odd-count rolls","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The five stroke roll is the gateway rudiment for all counted stroke rolls. It teaches the student to start and stop a roll cleanly with a defined stroke count -- a skill that does not exist in the continuous double stroke open roll (#6).</p> <p>Common mistakes: - Rushing through the diddle body to reach the accent (uneven spacing between strokes 1-4) - Playing the accent too softly, failing to differentiate it from the diddle body - Losing the d2 quality under pressure to prepare for the accent - Inconsistent stroke count -- accidentally playing 4 or 6 strokes instead of 5 - Uneven diddle quality between the right-hand pair (strokes 1-2) and left-hand pair (strokes 3-4)</p> <p>Practice strategies: - Begin by playing continuous double stroke rolls (#6), then add an accent every 5<sup>th</sup> stroke - Practice at very slow tempos (60 BPM sixteenths) counting \"1-e-&amp;-a-2\" aloud - Isolate the transition: play just strokes 4 and 5 (d2 to accent) repeatedly to build the upstroke motion - Alternate starting hands every repetition to build symmetry - Use a metronome with the click on the accent to internalize the rhythmic placement</p> <p>What to listen for: - Even spacing between all 5 strokes - Clear dynamic contrast between diddle body and accent - Identical diddle quality from both hands - Clean accent with no buzzing or double-bounce - Smooth transition from d2 to accent with no rhythmic hiccup</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The five stroke roll is one of the earliest documented drum rudiments, appearing in military drumming manuals as early as 1797. It was included in the original NARD (National Association of Rudimental Drummers) standard 26 rudiments when NARD was founded in 1933 and retained as PAS #7 in the 1984 expansion to 40 International Drum Rudiments.</p> <p>As the shortest odd-count roll, the five stroke roll has been a fundamental building block in both military field drumming and orchestral percussion. In military contexts, it served as a brief roll ornament within marching cadences and signals. In orchestral writing, it appears as a short, measured roll in passages requiring precise rhythmic notation rather than an unmeasured tremolo.</p> <p>The five stroke roll is arguably the most commonly used counted stroke roll in drum set playing, where its 1.5-beat length fits naturally into sixteenth-note fills and phrases. Its compact size makes it versatile for musical application across virtually every genre.</p>"},{"location":"specs/rudiments/07_five_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/07_five_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                   &gt;\nR R  L L  R | L L  R R  L\n</code></pre>"},{"location":"specs/rudiments/07_five_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2                 |\nHand:    | R     R     L     L   | R                 |\nType:    | d1    d2    d1    d2  | A                 |\nAccent:  |                       | &gt;                 |\n</code></pre> <p>Repeated (second cycle, left-hand lead):</p> <pre><code>Beat:    | 2     &amp;     a         | 3     e           |\nHand:    | L     L     R     R   | L                 |\nType:    | d1    d2    d1    d2  | A                 |\nAccent:  |                       | &gt;                 |\n</code></pre>"},{"location":"specs/rudiments/08_six_stroke_roll/","title":"PAS #8: Six Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 8 Name Six Stroke Roll Category roll Family counted roll Composed Of 1 accent + 2 diddles + 1 accent -- the unique even-count roll with accents bookending the diddle body Related #6 Double Stroke Open Roll (parent diddle pattern), #7 Five Stroke Roll (odd-count counterpart with same diddle count), #11 Ten Stroke Roll (same accent-diddles-accent structure, extended to 4 diddles), #19 Paradiddle-Diddle (shares the singles-plus-doubles concept) NARD Original Yes (documented as early as 1817)"},{"location":"specs/rudiments/08_six_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 1.5 beats Strokes Per Cycle 6 Primary Strokes Per Cycle 6 (all are primary)"},{"location":"specs/rudiments/08_six_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The six stroke roll spans 1.5 beats. Unlike odd-count rolls, it begins and ends with an accent, with the diddle body sandwiched between.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L d1 3 \u00bd 1&amp; L d2 4 \u00be 1a R d1 5 1 2 R d2 6 1 + \u00bc 2e L A <p>When repeated, the even stroke count means the leading hand does not alternate -- the second cycle also begins with the right hand (in the standard sticking):</p> # Position (beats) Grid Slot Hand Type 1 1 + \u00bd 2&amp; R A 2 1 + \u00be 2a L d1 3 2 3 L d2 4 2 + \u00bc 3e R d1 5 2 + \u00bd 3&amp; R d2 6 2 + \u00be 3a L A <p>Note on diddle placement: The two diddle pairs in the six stroke roll are positioned differently from odd-count rolls. Each diddle pair spans the \"e-&amp;\" or \"a-(next beat)\" grid slots rather than sitting on the beat. The d1 falls on the offbeat sixteenth and d2 on the following sixteenth, placing the diddles between the two accents.</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R&gt;  L L  R R  L&gt; | R&gt;  L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/08_six_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Opening accent, full stroke to initiate the roll 2 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 3 L d2 none n/a Second stroke of left-hand diddle, finger-controlled 4 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 5 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 6 L accent none n/a Closing accent, full stroke to define the roll's endpoint"},{"location":"specs/rudiments/08_six_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to #6 Double Stroke Open Roll and #7 Five Stroke Roll): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the grid position (\"e\" or \"a\") - d2 falls on the following sixteenth subdivision (\"&amp;\" or downbeat) - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Both opening and closing accents at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce (see #6)"},{"location":"specs/rudiments/08_six_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  -  -  &gt;\n</code></pre> <p>Two accents per cycle: one on the first stroke and one on the last stroke. This is the defining characteristic that distinguishes even-count rolls from odd-count rolls.</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>The six stroke roll has a symmetrical \"loud-soft-soft-soft-soft-loud\" contour, creating a bookended dynamic shape. The opening accent establishes the roll, the diddle body sustains at tap level, and the closing accent provides resolution. This contrasts with odd-count rolls (like #7) which have a one-sided \"soft-to-loud\" contour. The symmetrical accent placement gives the six stroke roll a distinct musical character -- it feels more self-contained and resolved than odd-count rolls, which tend to feel directional. The dynamic contrast between accents (1.0) and diddle body (0.65-0.77) should be clear but not exaggerated; the roll should sound like a unified musical gesture, not three disconnected parts.</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L d1 half wrist 3 L d2 low fingers 4 R d1 half wrist 5 R d2 low fingers 6 L accent full wrist + arm <p>The six stroke roll requires two distinct stroke transitions not found in the five stroke roll: (1) accent-to-diddle (stroke 1 to stroke 2), requiring a rapid downstroke that controls the stick to drop from full height to half height on the opposite hand, and (2) diddle-to-accent (stroke 5 to stroke 6), the same upstroke challenge found in #7. The accent-to-diddle transition is the unique technical challenge of even-count rolls -- after playing a full accent, the player must immediately transition to the soft, controlled diddle body on the other hand.</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. All strokes individually controlled. Both accents are full arm + wrist strokes. Diddle d1/d2 are separate wrist strokes. The roll sounds like two loud notes framing four soft notes. Plenty of time to prepare each transition. Moderate (100-140 BPM) Transition zone. Diddles use wrist-finger alley-oop technique. The accent-to-diddle transition requires a quick downstroke after the opening accent. The diddle-to-accent transition uses the same upstroke as in #7. Fast (140-200 BPM) Closed doubles. Diddle body is finger-driven from rebound. Both accent transitions must be executed with Moeller whip motions for maximum efficiency. The roll blurs into a smooth accent-roll-accent gesture."},{"location":"specs/rudiments/08_six_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Inverted six stroke roll: Begin with the diddles and end with accents (LL RR L&gt; R&gt;), sometimes called the \"inverted paradiddle-diddle\" sticking.</li> <li>Sextuplet interpretation: Played as a sextuplet (6 notes per beat) rather than across 1.5 beats of sixteenths, giving a triplet-based feel. This is extremely common in drum set applications.</li> <li>Starting hand: Standard sticking R LL RR L can be mirrored as L RR LL R.</li> <li>Accent relocation: Moving accents to different positions within the six strokes creates hybrid patterns useful in musical contexts.</li> <li>Double six stroke roll: Two six stroke rolls played back-to-back (12 strokes across 3 beats) to create longer phrases.</li> </ul>"},{"location":"specs/rudiments/08_six_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#6-double-stroke-open-roll-solid-diddle-technique","title":"6 Double Stroke Open Roll -- solid diddle technique","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#7-five-stroke-roll-experience-with-starting-and-stopping-rolls-with-defined-endpoints","title":"7 Five Stroke Roll -- experience with starting and stopping rolls with defined endpoints","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#1-single-stroke-roll-clean-accent-to-tap-transitions","title":"1 Single Stroke Roll -- clean accent-to-tap transitions","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Drum set fill vocabulary (the six stroke roll is one of the most commonly applied rudiments on the drum set)</li> </ul>"},{"location":"specs/rudiments/08_six_stroke_roll/#11-ten-stroke-roll-extends-the-even-count-accent-diddles-accent-structure-to-4-diddle-pairs","title":"11 Ten Stroke Roll (extends the even-count accent-diddles-accent structure to 4 diddle pairs)","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The six stroke roll is unique among counted stroke rolls because of its bookend accent structure. Where odd-count rolls have a single directional accent at the end, the six stroke roll frames its diddle body with accents on both sides.</p> <p>Common mistakes: - Uneven diddle spacing, particularly rushing through the diddles to reach the closing accent - Accenting only the final note (treating it like a five stroke roll with an extra stroke) - Losing the opening accent's clarity when repeating the pattern rapidly - Playing the two diddle pairs unevenly (the L-hand diddle is often weaker than the R-hand diddle) - Placing the diddles on incorrect sixteenth-note subdivisions</p> <p>Practice strategies: - Begin with the accent pattern alone: play R - - - - L at the correct rhythmic spacing, then fill in the diddles - Practice the accent-to-diddle downstroke transition in isolation - Play at slow tempos counting \"1-e-&amp;-a-2-e\" with accents on \"1\" and \"2e\" - Compare with #7 Five Stroke Roll to feel how the opening accent changes the roll's character - Practice the sextuplet interpretation alongside the sixteenth-note version to build rhythmic flexibility</p> <p>What to listen for: - Equal dynamic level on both the opening and closing accents - Even, consistent diddle body between the accents - Smooth transitions into and out of the diddle body - Correct rhythmic placement of all six strokes</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The six stroke roll was documented as early as 1817 and was included in the original NARD 26 rudiments. It is one of only two even-count rolls in the PAS 40 (along with the ten stroke roll, #11). Its unique accent-diddles-accent structure has made it one of the most versatile and widely used rudiments in drum set playing, where it is frequently applied to create fills by distributing the accents across toms and cymbals while keeping the diddles on the snare drum.</p> <p>The six stroke roll's relationship to the paradiddle-diddle (#19) is often noted in pedagogical literature -- the paradiddle-diddle uses the same number of strokes (6) with a singles-then-doubles structure (RLRRLL), while the six stroke roll frames the doubles with accented singles. Some educators describe the six stroke roll as an \"inverted paradiddle-diddle\" or a \"paradiddle-diddle variation hybrid.\"</p>"},{"location":"specs/rudiments/08_six_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/08_six_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;       &gt;              &gt;\nR  L L  R R  L | R  L L  R R  L\n</code></pre>"},{"location":"specs/rudiments/08_six_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e           |\nHand:    | R     L     L     R   | R     L           |\nType:    | A     d1    d2    d1  | d2    A           |\nAccent:  | &gt;                     |       &gt;           |\n</code></pre> <p>Repeated (second cycle):</p> <pre><code>Beat:    | 2     &amp;     a         | 3     e     &amp;     |\nHand:    | R     L     L     R   | R     L           |\nType:    | A     d1    d2    d1  | d2    A           |\nAccent:  | &gt;                     |       &gt;           |\n</code></pre>"},{"location":"specs/rudiments/09_seven_stroke_roll/","title":"PAS #9: Seven Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 9 Name Seven Stroke Roll Category roll Family counted roll Composed Of 3 diddles + 1 accent -- extends #7 Five Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #7 Five Stroke Roll (shorter odd-count roll, 2 diddles + accent), #10 Nine Stroke Roll (next longer odd-count roll, 4 diddles + accent), #8 Six Stroke Roll (even-count counterpart at similar length) NARD Original Yes (documented as early as 1797)"},{"location":"specs/rudiments/09_seven_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 7 Primary Strokes Per Cycle 7 (all are primary)"},{"location":"specs/rudiments/09_seven_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The seven stroke roll spans 2 beats: three alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L A <p>When repeated, the odd stroke count naturally alternates the leading hand:</p> # Position (beats) Grid Slot Hand Type 1 2 3 L d1 2 2 + \u00bc 3e L d2 3 2 + \u00bd 3&amp; R d1 4 2 + \u00be 3a R d2 5 3 4 L d1 6 3 + \u00bc 4e L d2 7 3 + \u00bd 4&amp; R A"},{"location":"specs/rudiments/09_seven_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L&gt; | L L  R R  L L  R&gt;\n</code></pre>"},{"location":"specs/rudiments/09_seven_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 2 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 3 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 4 L d2 none n/a Second stroke of left-hand diddle, finger-controlled 5 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 6 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 7 L accent none n/a Terminal accent, full stroke to define the roll's endpoint"},{"location":"specs/rudiments/09_seven_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to #6 and #7): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the downbeat or \"&amp;\" grid position; d2 falls on the \"e\" or \"a\" subdivision - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce (see #6) <p>Identical to #7 Five Stroke Roll. See #7 for detailed discussion of the dynamic relationship between diddle body and terminal accent.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (7<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as #7 Five Stroke Roll, but with a longer sustain phase (6 diddle strokes vs. 4). The extended diddle body gives the seven stroke roll a more \"rolling\" character than the five stroke roll -- there is more time to establish the sustained sound before the accent arrives. This makes the seven stroke roll feel more like a true roll excerpt and less like a quick ornament. See #7 for full discussion of the counted roll dynamic contour.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L accent full wrist + arm <p>Identical stroke mechanics to #7 Five Stroke Roll (diddles at half/low with wrist/fingers, terminal accent at full with wrist + arm). The only difference is the additional diddle pair (strokes 5-6) extending the roll body. See #7 for detailed discussion of the d2-to-accent upstroke transition.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Six distinct taps followed by an accent. Each diddle pair clearly audible. Ample time for accent preparation. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop for diddles. The longer body (3 diddle pairs) requires sustained relaxation through the roll before the accent upstroke. Fast (140-200 BPM) Closed doubles. Finger-driven diddles from rebound. The extended body creates a smooth, sustained roll sound. Moeller whip for the terminal accent."},{"location":"specs/rudiments/09_seven_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking LL RR LL R&gt; for equal development.</li> <li>Rhythmic placement: Commonly placed so the accent lands on a downbeat (starting on the \"a\" of the preceding beat) or on the \"&amp;\" (starting on the beat).</li> <li>Triplet interpretation: Can be played across a triplet grid for a different rhythmic feel.</li> <li>Crescendo roll: Gradual dynamic increase through the body leading to the accent.</li> </ul>"},{"location":"specs/rudiments/09_seven_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#7-five-stroke-roll-the-shorter-odd-count-roll-must-be-mastered-first","title":"7 Five Stroke Roll -- the shorter odd-count roll must be mastered first","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#6-double-stroke-open-roll-sustained-diddle-quality-across-3-pairs","title":"6 Double Stroke Open Roll -- sustained diddle quality across 3 pairs","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Longer counted rolls requiring sustained diddle bodies</li> </ul>"},{"location":"specs/rudiments/09_seven_stroke_roll/#10-nine-stroke-roll-extends-to-4-diddle-pairs-accent","title":"10 Nine Stroke Roll (extends to 4 diddle pairs + accent)","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#12-eleven-stroke-roll-5-diddle-pairs-accent","title":"12 Eleven Stroke Roll (5 diddle pairs + accent)","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The seven stroke roll extends the five stroke roll by one diddle pair, introducing the challenge of sustaining even diddle quality across a longer body while still arriving cleanly on the terminal accent.</p> <p>Common mistakes: - Rushing through the third diddle pair to reach the accent - Uneven dynamics across the three diddle pairs (typically the middle pair is softest) - Losing count and playing 5 or 9 strokes instead of 7 - Decelerating through the body as concentration shifts to the upcoming accent</p> <p>Practice strategies: - Build from #7: play a five stroke roll, then add one more diddle pair before the accent - Practice counting \"1-e-&amp;-a-2-e | 2&amp;\" to internalize the 2-beat structure - Play continuous double stroke rolls (#6) and add an accent every 7<sup>th</sup> stroke - Alternate starting hands every repetition</p> <p>What to listen for: - Even spacing and dynamics across all 6 diddle strokes - Clean, projected accent clearly differentiated from the body - Consistent hand-to-hand diddle quality across all 3 pairs</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The seven stroke roll dates to at least 1797 and was included in the original NARD 26 rudiments. It is one of the most commonly notated counted rolls in concert snare drum and orchestral literature, where its 2-beat length aligns naturally with common time signatures. Retained as PAS #9 in the 1984 expansion. See #7 Five Stroke Roll for broader counted roll historical context.</p>"},{"location":"specs/rudiments/09_seven_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/09_seven_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                  &gt;                       &gt;\nR R  L L  R R  L  |  L L  R R  L L  R\n</code></pre>"},{"location":"specs/rudiments/09_seven_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;           |\nHand:    | R     R     L     L   | R     R     L           |\nType:    | d1    d2    d1    d2  | d1    d2    A           |\nAccent:  |                       |             &gt;           |\n</code></pre> <p>Repeated (second cycle, left-hand lead):</p> <pre><code>Beat:    | 3     e     &amp;     a   | 4     e     &amp;           |\nHand:    | L     L     R     R   | L     L     R           |\nType:    | d1    d2    d1    d2  | d1    d2    A           |\nAccent:  |                       |             &gt;           |\n</code></pre>"},{"location":"specs/rudiments/10_nine_stroke_roll/","title":"PAS #10: Nine Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 10 Name Nine Stroke Roll Category roll Family counted roll Composed Of 4 diddles + 1 accent -- extends #9 Seven Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #9 Seven Stroke Roll (shorter odd-count roll, 3 diddles + accent), #12 Eleven Stroke Roll (next longer odd-count roll, 5 diddles + accent), #11 Ten Stroke Roll (even-count counterpart at similar length) NARD Original Yes (documented as early as 1797)"},{"location":"specs/rudiments/10_nine_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2.5 beats Strokes Per Cycle 9 Primary Strokes Per Cycle 9 (all are primary)"},{"location":"specs/rudiments/10_nine_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The nine stroke roll spans 2.5 beats: four alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2 9 2 3 R A <p>When repeated, the odd stroke count naturally alternates the leading hand:</p> # Position (beats) Grid Slot Hand Type 1 2 + \u00bd 3&amp; L d1 2 2 + \u00be 3a L d2 3 3 4 R d1 4 3 + \u00bc 4e R d2 5 3 + \u00bd 4&amp; L d1 6 3 + \u00be 4a L d2 7 4 1 (next bar) R d1 8 4 + \u00bc 1e R d2 9 4 + \u00bd 1&amp; L A"},{"location":"specs/rudiments/10_nine_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L L  R&gt; | L L  R R  L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/10_nine_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle 2 R d2 none n/a Second stroke of right-hand diddle 3 L d1 none n/a First stroke of left-hand diddle 4 L d2 none n/a Second stroke of left-hand diddle 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 L d1 none n/a First stroke of left-hand diddle 8 L d2 none n/a Second stroke of left-hand diddle 9 R accent none n/a Terminal accent"},{"location":"specs/rudiments/10_nine_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to #6, #7, #9): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 on the downbeat or \"&amp;\"; d2 on the \"e\" or \"a\" - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to #7 and #9. See #7 Five Stroke Roll for detailed dynamic discussion.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (9<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as all odd-count rolls. With 8 diddle strokes in the body (the longest body so far in the odd-count series), the nine stroke roll has a pronounced rolling quality. The extended sustain phase makes the terminal accent feel like a strong resolution after a substantial roll. The challenge is maintaining perfectly even dynamics across all 4 diddle pairs without drift or fatigue-induced decay.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers 9 R accent full wrist + arm <p>Same stroke mechanics as #7 and #9 (see #7 for detailed physical description). The extended body requires sustained relaxation and endurance through 4 diddle pairs before executing the accent upstroke.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Eight distinct taps followed by an accent. Each pair clearly separated. The long body demands concentration to maintain even spacing. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop. The 2-beat body requires sustained relaxation. Fatigue may emerge in the later diddle pairs. Fast (140-200 BPM) Closed doubles. Finger-driven rebound creates a smooth, sustained roll. The 4-pair body now sounds like a genuine measured roll excerpt. Moeller whip for the terminal accent."},{"location":"specs/rudiments/10_nine_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking LL RR LL RR L&gt; for equal development.</li> <li>Rhythmic placement: The 2.5-beat cycle creates interesting syncopation when repeated -- the accent lands alternately on the beat and on the \"&amp;.\"</li> <li>Triplet interpretation: Can span triplet groupings for a different rhythmic context.</li> <li>Crescendo roll: Gradual dynamic build through the 8-stroke body into the accent.</li> </ul>"},{"location":"specs/rudiments/10_nine_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#9-seven-stroke-roll-must-be-able-to-sustain-3-diddle-pairs-evenly","title":"9 Seven Stroke Roll -- must be able to sustain 3 diddle pairs evenly","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#7-five-stroke-roll-fundamental-counted-roll-skill","title":"7 Five Stroke Roll -- fundamental counted roll skill","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#6-double-stroke-open-roll-sustained-diddle-endurance","title":"6 Double Stroke Open Roll -- sustained diddle endurance","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Longer odd-count rolls requiring extended diddle bodies</li> </ul>"},{"location":"specs/rudiments/10_nine_stroke_roll/#12-eleven-stroke-roll-5-diddle-pairs-accent","title":"12 Eleven Stroke Roll (5 diddle pairs + accent)","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#13-thirteen-stroke-roll-6-diddle-pairs-accent","title":"13 Thirteen Stroke Roll (6 diddle pairs + accent)","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The nine stroke roll is the first counted roll where the diddle body is long enough to feel like a genuine roll rather than a quick ornament. This makes it a key transition point in counted roll pedagogy.</p> <p>Common mistakes: - Dynamic drift through the 4 diddle pairs (usually getting softer toward the end) - Rushing to the accent, compressing the final diddle pair - Losing track of the stroke count in the extended body - Uneven quality between R and L diddle pairs across 4 repetitions</p> <p>Practice strategies: - Build from #9: play a seven stroke roll, then add one more diddle pair before the accent - Practice counting \"1-e-&amp;-a-2-e-&amp;-a | 3\" to internalize the 2.5-beat structure - Use a metronome with subdivisions to check internal spacing - Focus on maintaining consistent d1/d2 dynamics through all 4 pairs</p> <p>What to listen for: - Even dynamics and spacing across all 8 diddle strokes (no drift or fatigue) - Clean terminal accent clearly above the roll body - Consistent diddle quality from first pair to last pair</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The nine stroke roll dates to at least 1797 and was included in the original NARD 26 rudiments. It is frequently encountered in concert snare drum literature and march compositions, where its 2.5-beat length provides a substantial roll that fits within common phrase structures. Retained as PAS #10 in the 1984 expansion.</p>"},{"location":"specs/rudiments/10_nine_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/10_nine_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                              &gt;\nR R  L L  R R  L L  R\n</code></pre>"},{"location":"specs/rudiments/10_nine_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3           |\nHand:    | R     R     L     L   | R     R     L     L   | R           |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  | A           |\nAccent:  |                       |                       | &gt;           |\n</code></pre>"},{"location":"specs/rudiments/11_ten_stroke_roll/","title":"PAS #11: Ten Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 11 Name Ten Stroke Roll Category roll Family counted roll Composed Of 1 accent + 4 diddles + 1 accent -- the longer even-count roll with accents bookending the diddle body Related #6 Double Stroke Open Roll (parent diddle pattern), #8 Six Stroke Roll (shorter even-count roll, 1 accent + 2 diddles + 1 accent), #10 Nine Stroke Roll (odd-count counterpart at similar length), #12 Eleven Stroke Roll (odd-count counterpart with one more diddle) NARD Original Yes (documented as early as 1779 -- one of the oldest documented rudiments)"},{"location":"specs/rudiments/11_ten_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2.5 beats Strokes Per Cycle 10 Primary Strokes Per Cycle 10 (all are primary)"},{"location":"specs/rudiments/11_ten_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The ten stroke roll spans 2.5 beats. Like the six stroke roll (#8), it begins and ends with an accent, with the diddle body sandwiched between. It extends the six stroke roll's structure from 2 diddle pairs to 4.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L d1 3 \u00bd 1&amp; L d2 4 \u00be 1a R d1 5 1 2 R d2 6 1 + \u00bc 2e L d1 7 1 + \u00bd 2&amp; L d2 8 1 + \u00be 2a R d1 9 2 3 R d2 10 2 + \u00bc 3e L A <p>When repeated, the even stroke count means the leading hand does not alternate -- the second cycle also begins with the right hand (in the standard sticking):</p> # Position (beats) Grid Slot Hand Type 1 2 + \u00bd 3&amp; R A 2 2 + \u00be 3a L d1 3 3 4 L d2 4 3 + \u00bc 4e R d1 5 3 + \u00bd 4&amp; R d2 6 3 + \u00be 4a L d1 7 4 1 (next bar) L d2 8 4 + \u00bc 1e R d1 9 4 + \u00bd 1&amp; R d2 10 4 + \u00be 1a L A"},{"location":"specs/rudiments/11_ten_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R&gt;  L L  R R  L L  R R  L&gt; | R&gt;  L L  R R  L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/11_ten_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Opening accent, full stroke 2 L d1 none n/a First stroke of left-hand diddle 3 L d2 none n/a Second stroke of left-hand diddle 4 R d1 none n/a First stroke of right-hand diddle 5 R d2 none n/a Second stroke of right-hand diddle 6 L d1 none n/a First stroke of left-hand diddle 7 L d2 none n/a Second stroke of left-hand diddle 8 R d1 none n/a First stroke of right-hand diddle 9 R d2 none n/a Second stroke of right-hand diddle 10 L accent none n/a Closing accent, full stroke"},{"location":"specs/rudiments/11_ten_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to #6, #7, #8): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Both opening and closing accents at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to #8 Six Stroke Roll. See #8 for discussion of the bookend-accent dynamic profile.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Two accents per cycle: one on the first stroke and one on the last stroke. Same bookend structure as #8 Six Stroke Roll.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same symmetrical \"loud-soft-...-soft-loud\" contour as #8 Six Stroke Roll, but with a significantly longer sustain phase (8 diddle strokes vs. 4). The extended diddle body gives the ten stroke roll a more substantial rolling character between the accents. At faster tempos, it sounds like a measured roll passage framed by two accents. The challenge is maintaining perfectly even dynamics across all 4 diddle pairs without drift. See #8 for full discussion of the even-count roll contour.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L d1 half wrist 3 L d2 low fingers 4 R d1 half wrist 5 R d2 low fingers 6 L d1 half wrist 7 L d2 low fingers 8 R d1 half wrist 9 R d2 low fingers 10 L accent full wrist + arm <p>Same two-transition stroke mechanics as #8 Six Stroke Roll (accent-to-diddle downstroke and diddle-to-accent upstroke), with the added challenge of sustaining the diddle body through 4 pairs rather than 2. See #8 for detailed physical description of the even-count roll transitions.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Two accents framing eight distinct taps. All strokes individually controlled. The extended body requires sustained concentration. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop for diddles. The long body (4 pairs) may introduce fatigue. Both accent transitions use the same mechanics as #8. Fast (140-200 BPM) Closed doubles. Finger-driven diddles with a smooth, sustained roll between the two accents. The 4-pair body sounds like a genuine measured roll. Moeller whip for both accents."},{"location":"specs/rudiments/11_ten_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking L&gt; RR LL RR LL R&gt; for equal development.</li> <li>Placement variations: The opening accent can land on the beat, \"&amp;\", or any subdivision, changing the closing accent's rhythmic position.</li> <li>Both accents at the end: An alternative interpretation places both accented singles at the end of the roll (RR LL RR LL R L) rather than bookending. This is less common in the PAS standard but appears in some literature.</li> <li>Both accents at the beginning: Another variant (R L LL RR LL RR), also less common.</li> <li>Crescendo through body: Building dynamics through the diddle body toward the closing accent.</li> </ul>"},{"location":"specs/rudiments/11_ten_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#8-six-stroke-roll-the-shorter-even-count-roll-with-the-same-accent-diddles-accent-structure","title":"8 Six Stroke Roll -- the shorter even-count roll with the same accent-diddles-accent structure","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#10-nine-stroke-roll-sustained-diddle-quality-across-4-pairs","title":"10 Nine Stroke Roll -- sustained diddle quality across 4 pairs","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#6-double-stroke-open-roll-diddle-endurance","title":"6 Double Stroke Open Roll -- diddle endurance","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended musical phrases combining even-count rolls with odd-count rolls</li> <li>Concert and marching literature requiring measured rolls of specific durations</li> </ul>"},{"location":"specs/rudiments/11_ten_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The ten stroke roll combines the bookend accent structure of #8 Six Stroke Roll with the extended body length of #10 Nine Stroke Roll. It is the longer of the two even-count rolls in the PAS 40 and presents the challenge of maintaining even diddle quality across a substantial body while executing clean accent transitions at both ends.</p> <p>Common mistakes: - All mistakes from #8 Six Stroke Roll (see #8), amplified by the longer body - Dynamic drift through the 4 diddle pairs - Losing count in the extended body (playing 8 or 12 strokes instead of 10) - Uneven accent dynamics -- the closing accent is often louder than the opening accent, or vice versa</p> <p>Practice strategies: - Build from #8: play a six stroke roll, then extend the diddle body by two more pairs - Count \"1-e-&amp;-a-2-e-&amp;-a-3-e\" to internalize the 2.5-beat structure - Practice the opening accent-to-diddle transition in isolation - Ensure both accents are at identical dynamic levels</p> <p>What to listen for: - Equal dynamic level on both opening and closing accents - Even dynamics and spacing across all 8 diddle strokes - Smooth transitions into and out of the diddle body at both ends - Correct stroke count (10, not 8, 9, 11, or 12)</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The ten stroke roll is documented as early as 1779, making it one of the oldest recorded drum rudiments. It was included in the original NARD 26 rudiments. Along with the six stroke roll (#8), it is one of only two even-count rolls in the PAS 40, distinguished by its bookend accent structure (accent-diddles-accent) rather than the diddles-then-accent structure of odd-count rolls. Retained as PAS #11 in the 1984 expansion.</p>"},{"location":"specs/rudiments/11_ten_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/11_ten_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                              &gt;\nR  L L  R R  L L  R R  L\n</code></pre>"},{"location":"specs/rudiments/11_ten_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e           |\nHand:    | R     L     L     R   | R     L     L     R   | R     L           |\nType:    | A     d1    d2    d1  | d2    d1    d2    d1  | d2    A           |\nAccent:  | &gt;                     |                       |       &gt;           |\n</code></pre>"},{"location":"specs/rudiments/12_eleven_stroke_roll/","title":"PAS #12: Eleven Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 12 Name Eleven Stroke Roll Category roll Family counted roll Composed Of 5 diddles + 1 accent -- extends #10 Nine Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #10 Nine Stroke Roll (shorter odd-count roll, 4 diddles + accent), #13 Thirteen Stroke Roll (next longer odd-count roll, 6 diddles + accent), #11 Ten Stroke Roll (even-count counterpart at similar length) NARD Original Yes (documented as early as 1804)"},{"location":"specs/rudiments/12_eleven_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 11 Primary Strokes Per Cycle 11 (all are primary)"},{"location":"specs/rudiments/12_eleven_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The eleven stroke roll spans 3 beats: five alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2 9 2 3 R d1 10 2 + \u00bc 3e R d2 11 2 + \u00bd 3&amp; L A <p>When repeated, the odd stroke count naturally alternates the leading hand:</p> # Position (beats) Grid Slot Hand Type 1 3 4 L d1 2 3 + \u00bc 4e L d2 3 3 + \u00bd 4&amp; R d1 4 ... ... ... ... 11 5 + \u00bd 2&amp; (bar 2) R A"},{"location":"specs/rudiments/12_eleven_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L L  R R  L&gt; | L L  R R  L L  R R  L L  R&gt;\n</code></pre>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle 2 R d2 none n/a Second stroke of right-hand diddle 3 L d1 none n/a First stroke of left-hand diddle 4 L d2 none n/a Second stroke of left-hand diddle 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 L d1 none n/a First stroke of left-hand diddle 8 L d2 none n/a Second stroke of left-hand diddle 9 R d1 none n/a First stroke of right-hand diddle 10 R d2 none n/a Second stroke of right-hand diddle 11 L accent none n/a Terminal accent"},{"location":"specs/rudiments/12_eleven_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to all previous counted rolls; see #7): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to all odd-count rolls. See #7 Five Stroke Roll for detailed dynamic discussion.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (11<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as all odd-count rolls, with a 10-stroke diddle body -- the longest body encountered so far in the odd-count series. The extended sustain phase produces a substantial roll sound that closely approximates the continuous double stroke open roll (#6), with the terminal accent providing the defined endpoint. Maintaining perfectly even dynamics across 5 diddle pairs becomes the central challenge. See #7 for full contour discussion.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers 9 R d1 half wrist 10 R d2 low fingers 11 L accent full wrist + arm <p>Same stroke mechanics as all odd-count rolls (see #7). The 5-pair body requires endurance and sustained relaxation. At faster tempos, fatigue becomes a significant factor in the later diddle pairs.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Ten distinct taps followed by an accent. The 3-beat body is long enough to require concentration on maintaining even spacing and dynamics throughout. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop. Fatigue may become noticeable in the 4<sup>th</sup> and 5<sup>th</sup> diddle pairs. Maintaining relaxation is critical. Fast (140-200 BPM) Closed doubles. The 5-pair body sounds like a genuine measured roll. Finger-driven rebound technique is essential for endurance through the extended body."},{"location":"specs/rudiments/12_eleven_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking LL RR LL RR LL R&gt; for equal development.</li> <li>Rhythmic placement: The 3-beat cycle aligns evenly with \u00be time and the first three beats of 4/4.</li> <li>Crescendo roll: Gradual dynamic build through the extended body into the accent.</li> </ul>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#10-nine-stroke-roll-sustained-diddle-quality-across-4-pairs","title":"10 Nine Stroke Roll -- sustained diddle quality across 4 pairs","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#7-five-stroke-roll-fundamental-counted-roll-skill","title":"7 Five Stroke Roll -- fundamental counted roll skill","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#6-double-stroke-open-roll-endurance-across-extended-diddle-passages","title":"6 Double Stroke Open Roll -- endurance across extended diddle passages","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended roll passages in concert and marching literature</li> </ul>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#13-thirteen-stroke-roll-6-diddle-pairs-accent","title":"13 Thirteen Stroke Roll (6 diddle pairs + accent)","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#14-fifteen-stroke-roll-7-diddle-pairs-accent","title":"14 Fifteen Stroke Roll (7 diddle pairs + accent)","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The eleven stroke roll marks the transition point where counted rolls begin to feel like genuine roll passages rather than quick ornaments. Its 3-beat length means the diddle body occupies a musically significant duration.</p> <p>Common mistakes: - Dynamic drift (getting softer or louder through the 5 diddle pairs) - Fatigue-induced unevenness in the later pairs (pairs 4 and 5) - Losing the stroke count -- 11 is commonly confused with 9 or 13 - Rushing through the body to reach the accent</p> <p>Practice strategies: - Build incrementally: master #10 Nine Stroke Roll, then add one more diddle pair - Count \"1-e-&amp;-a-2-e-&amp;-a-3-e | 3&amp;\" to internalize the 3-beat structure - Practice the continuous double stroke open roll (#6) for endurance, then add accents every 11<sup>th</sup> stroke - Focus on the 4<sup>th</sup> and 5<sup>th</sup> diddle pairs where fatigue typically emerges</p> <p>What to listen for: - Even dynamics and spacing across all 10 diddle strokes - No fatigue-induced decay in the later diddle pairs - Clean terminal accent clearly above the body - Correct stroke count (11)</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The eleven stroke roll is documented as early as 1804 and was included in the original NARD 26 rudiments. Its 3-beat length makes it particularly useful in concert literature where measured rolls of specific durations are required. Retained as PAS #12 in the 1984 expansion.</p>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/12_eleven_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                                    &gt;\nR R  L L  R R  L L  R R  L\n</code></pre>"},{"location":"specs/rudiments/12_eleven_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;           |\nHand:    | R     R     L     L   | R     R     L     L   | R     R     L           |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    A           |\nAccent:  |                       |                       |             &gt;           |\n</code></pre>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/","title":"PAS #13: Thirteen Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 13 Name Thirteen Stroke Roll Category roll Family counted roll Composed Of 6 diddles + 1 accent -- extends #12 Eleven Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #12 Eleven Stroke Roll (shorter odd-count roll, 5 diddles + accent), #14 Fifteen Stroke Roll (next longer odd-count roll, 7 diddles + accent) NARD Original Yes (documented as early as 1862)"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3.5 beats Strokes Per Cycle 13 Primary Strokes Per Cycle 13 (all are primary)"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The thirteen stroke roll spans 3.5 beats: six alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2 9 2 3 R d1 10 2 + \u00bc 3e R d2 11 2 + \u00bd 3&amp; L d1 12 2 + \u00be 3a L d2 13 3 4 R A <p>When repeated, the odd stroke count naturally alternates the leading hand.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L L  R R  L L  R&gt; | L L  R R  L L  R R  L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle 2 R d2 none n/a Second stroke of right-hand diddle 3 L d1 none n/a First stroke of left-hand diddle 4 L d2 none n/a Second stroke of left-hand diddle 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 L d1 none n/a First stroke of left-hand diddle 8 L d2 none n/a Second stroke of left-hand diddle 9 R d1 none n/a First stroke of right-hand diddle 10 R d2 none n/a Second stroke of right-hand diddle 11 L d1 none n/a First stroke of left-hand diddle 12 L d2 none n/a Second stroke of left-hand diddle 13 R accent none n/a Terminal accent"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to all previous counted rolls; see #7): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to all odd-count rolls. See #7 Five Stroke Roll for detailed dynamic discussion.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (13<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as all odd-count rolls. The 12-stroke diddle body (6 pairs) is long enough that the roll closely resembles a continuous double stroke open roll with a defined endpoint. The primary expressive challenge shifts from \"defining the roll\" to \"sustaining even quality over a long passage.\" See #7 for full contour discussion.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers 9 R d1 half wrist 10 R d2 low fingers 11 L d1 half wrist 12 L d2 low fingers 13 R accent full wrist + arm <p>Same stroke mechanics as all odd-count rolls (see #7). The 6-pair body demands sustained endurance and relaxation. Fatigue management becomes the primary physical concern at this length.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Twelve distinct taps followed by an accent. The 3.5-beat body requires significant concentration to count accurately and maintain even dynamics. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop. Fatigue is a real concern across 6 pairs. Breath control and arm relaxation become important. Fast (140-200 BPM) Closed doubles. The 6-pair body sounds like a sustained measured roll. Efficient finger-driven rebound technique is essential to avoid fatigue."},{"location":"specs/rudiments/13_thirteen_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking for equal development.</li> <li>Rhythmic placement: The 3.5-beat cycle creates syncopation when repeated in 4/4 -- accent lands alternately on the beat and the \"&amp;.\"</li> <li>Crescendo roll: Gradual dynamic build through the 12-stroke body, arriving at the accent as the dynamic peak.</li> </ul>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#12-eleven-stroke-roll-sustained-quality-across-5-diddle-pairs","title":"12 Eleven Stroke Roll -- sustained quality across 5 diddle pairs","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#10-nine-stroke-roll-intermediate-length-odd-count-roll","title":"10 Nine Stroke Roll -- intermediate-length odd-count roll","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#6-double-stroke-open-roll-diddle-endurance","title":"6 Double Stroke Open Roll -- diddle endurance","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended measured roll passages in concert literature</li> </ul>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#14-fifteen-stroke-roll-7-diddle-pairs-accent","title":"14 Fifteen Stroke Roll (7 diddle pairs + accent)","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#15-seventeen-stroke-roll-8-diddle-pairs-accent","title":"15 Seventeen Stroke Roll (8 diddle pairs + accent)","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The thirteen stroke roll is the point in the counted roll series where the body is long enough to feel like a true sustained roll rather than a measured figure. Counting accuracy and endurance become paramount.</p> <p>Common mistakes: - Losing the stroke count -- 13 strokes is commonly confused with 11 or 15 - Fatigue-induced unevenness in the later diddle pairs (pairs 5 and 6) - Gradual tempo drift (acceleration or deceleration) through the long body - Dynamic drift across 6 diddle pairs</p> <p>Practice strategies: - Build incrementally from #12 Eleven Stroke Roll by adding one more diddle pair - Count beats aloud (\"1-e-&amp;-a-2-e-&amp;-a-3-e-&amp;-a | 4\") to track position within the roll - Practice the continuous double stroke open roll (#6) for endurance, inserting accents every 13<sup>th</sup> stroke - Use the metronome to check for tempo drift through the body</p> <p>What to listen for: - Even dynamics and spacing across all 12 diddle strokes - No tempo drift or fatigue-induced decay - Clean terminal accent clearly above the body - Correct stroke count (13)</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The thirteen stroke roll is documented as early as 1862 and was included in the original NARD 26 rudiments. In concert and orchestral snare drum literature, it provides a roll lasting nearly a full bar of 4/4 time, making it useful for composers specifying measured rolls of precise duration. Retained as PAS #13 in the 1984 expansion.</p>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/13_thirteen_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                                                &gt;\nR R  L L  R R  L L  R R  L L  R\n</code></pre>"},{"location":"specs/rudiments/13_thirteen_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   | 4           |\nHand:    | R     R     L     L   | R     R     L     L   | R     R     L     L   | R           |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    d1    d2  | A           |\nAccent:  |                       |                       |                       | &gt;           |\n</code></pre>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/","title":"PAS #14: Fifteen Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 14 Name Fifteen Stroke Roll Category roll Family counted roll Composed Of 7 diddles + 1 accent -- extends #13 Thirteen Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #13 Thirteen Stroke Roll (shorter odd-count roll, 6 diddles + accent), #15 Seventeen Stroke Roll (next longer odd-count roll, 8 diddles + accent) NARD Original Yes (documented as early as 1810)"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 4 beats Strokes Per Cycle 15 Primary Strokes Per Cycle 15 (all are primary)"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The fifteen stroke roll spans exactly 4 beats (one full bar of 4/4): seven alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2 9 2 3 R d1 10 2 + \u00bc 3e R d2 11 2 + \u00bd 3&amp; L d1 12 2 + \u00be 3a L d2 13 3 4 R d1 14 3 + \u00bc 4e R d2 15 3 + \u00bd 4&amp; L A <p>When repeated, the odd stroke count naturally alternates the leading hand.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L L  R R  L L  R R  L&gt; | L L  R R  L L  R R  L L  R R  L L  R&gt;\n</code></pre>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle 2 R d2 none n/a Second stroke of right-hand diddle 3 L d1 none n/a First stroke of left-hand diddle 4 L d2 none n/a Second stroke of left-hand diddle 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 L d1 none n/a First stroke of left-hand diddle 8 L d2 none n/a Second stroke of left-hand diddle 9 R d1 none n/a First stroke of right-hand diddle 10 R d2 none n/a Second stroke of right-hand diddle 11 L d1 none n/a First stroke of left-hand diddle 12 L d2 none n/a Second stroke of left-hand diddle 13 R d1 none n/a First stroke of right-hand diddle 14 R d2 none n/a Second stroke of right-hand diddle 15 L accent none n/a Terminal accent"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to all previous counted rolls; see #7): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to all odd-count rolls. See #7 Five Stroke Roll for detailed dynamic discussion.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  -  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (15<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as all odd-count rolls. The 14-stroke diddle body (7 pairs) spanning nearly a full bar of 4/4 means this roll is functionally a measured whole-note roll with a defined accent endpoint. The body is long enough that it is essentially indistinguishable from a continuous double stroke open roll excerpt. See #7 for full contour discussion.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers 9 R d1 half wrist 10 R d2 low fingers 11 L d1 half wrist 12 L d2 low fingers 13 R d1 half wrist 14 R d2 low fingers 15 L accent full wrist + arm <p>Same stroke mechanics as all odd-count rolls (see #7). The 7-pair body requires significant endurance. Efficient technique and relaxation are essential to avoid fatigue-induced deterioration across the extended body.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Fourteen distinct taps followed by an accent. At 60 BPM, the body spans 3.5 seconds -- a significant duration requiring both physical endurance and mental counting discipline. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop. The 7-pair body demands sustained relaxation. Fatigue management and breath control are important for maintaining quality through the final pairs. Fast (140-200 BPM) Closed doubles. The extended body sounds like a full, sustained measured roll. Efficient rebound-based technique is mandatory at this length."},{"location":"specs/rudiments/14_fifteen_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking for equal development.</li> <li>Rhythmic placement: At 4 beats, the cycle aligns perfectly with one bar of 4/4, making it the natural \"one-bar roll\" in common time.</li> <li>Crescendo roll: A natural application -- crescendo through the 14-stroke body to arrive at the accent as the dynamic climax.</li> <li>Decrescendo entry: Start the accent loud, then diminish through the body for a \"fading roll\" effect.</li> </ul>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#13-thirteen-stroke-roll-sustained-quality-across-6-diddle-pairs","title":"13 Thirteen Stroke Roll -- sustained quality across 6 diddle pairs","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#12-eleven-stroke-roll-endurance-at-5-diddle-pairs","title":"12 Eleven Stroke Roll -- endurance at 5 diddle pairs","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#6-double-stroke-open-roll-long-form-diddle-endurance","title":"6 Double Stroke Open Roll -- long-form diddle endurance","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended measured roll passages spanning multiple bars</li> </ul>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#15-seventeen-stroke-roll-8-diddle-pairs-accent-the-longest-counted-roll","title":"15 Seventeen Stroke Roll (8 diddle pairs + accent -- the longest counted roll)","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The fifteen stroke roll is the standard \"one-bar roll\" in 4/4 time. Its 4-beat length makes it one of the most practically useful long counted rolls in concert and marching literature.</p> <p>Common mistakes: - All endurance-related issues from shorter rolls, amplified by the 7-pair body - Losing count -- 15 strokes is commonly confused with 13 or 17 - Gradual tempo drift across the 4-beat body - Fatigue-induced decay in the final pairs (pairs 6 and 7)</p> <p>Practice strategies: - Build incrementally from #13 Thirteen Stroke Roll - Think of the roll as \"one full bar of sixteenth-note diddles plus an accent\" - Count beats aloud throughout: \"1-e-&amp;-a-2-e-&amp;-a-3-e-&amp;-a-4-e | 4&amp;\" - Practice in the context of music -- play 3 bars of time, then one bar of fifteen stroke roll - Train the continuous double stroke open roll (#6) for endurance, then section off 15-stroke excerpts</p> <p>What to listen for: - Even dynamics and spacing across all 14 diddle strokes - No tempo drift or fatigue-induced decay through the 4-beat body - Clean terminal accent on the \"&amp;\" of beat 4 - Correct stroke count (15)</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The fifteen stroke roll is documented as early as 1810 and was included in the original NARD 26 rudiments. As the natural one-bar roll in 4/4 time, it is one of the most frequently encountered counted rolls in orchestral and concert snare drum literature. Composers who write a whole-note with a roll sign in 4/4 are implicitly requesting a fifteen stroke roll (7 diddle pairs filling the bar, accenting the downbeat of the next bar). Retained as PAS #14 in the 1984 expansion.</p>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/14_fifteen_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                                                          &gt;\nR R  L L  R R  L L  R R  L L  R R  L\n</code></pre>"},{"location":"specs/rudiments/14_fifteen_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   | 4     e     &amp;           |\nHand:    | R     R     L     L   | R     R     L     L   | R     R     L     L   | R     R     L           |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    A           |\nAccent:  |                       |                       |                       |             &gt;           |\n</code></pre>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/","title":"PAS #15: Seventeen Stroke Roll","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#1-identity","title":"1. Identity","text":"Field Value PAS Number 15 Name Seventeen Stroke Roll Category roll Family counted roll Composed Of 8 diddles + 1 accent -- the longest counted roll in the PAS 40, extending #14 Fifteen Stroke Roll by one additional diddle pair Related #6 Double Stroke Open Roll (parent pattern), #14 Fifteen Stroke Roll (shorter odd-count roll, 7 diddles + accent), #13 Thirteen Stroke Roll (6 diddles + accent) NARD Original No -- added by PAS in 1984 (the only counted roll not in the original NARD 26; first documented ca. 1931)"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 4.5 beats Strokes Per Cycle 17 Primary Strokes Per Cycle 17 (all are primary)"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#stroke-grid","title":"Stroke Grid","text":"<p>The seventeen stroke roll spans 4.5 beats: eight alternating diddle pairs on sixteenth-note subdivisions followed by a terminal accent. This exceeds one bar of 4/4, making it the only standard counted roll that crosses a barline in common time.</p> # Position (beats) Grid Slot Hand Type 1 0 1 R d1 2 \u00bc 1e R d2 3 \u00bd 1&amp; L d1 4 \u00be 1a L d2 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2 9 2 3 R d1 10 2 + \u00bc 3e R d2 11 2 + \u00bd 3&amp; L d1 12 2 + \u00be 3a L d2 13 3 4 R d1 14 3 + \u00bc 4e R d2 15 3 + \u00bd 4&amp; L d1 16 3 + \u00be 4a L d2 17 4 1 (next bar) R A <p>When repeated, the odd stroke count naturally alternates the leading hand.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>R R  L L  R R  L L  R R  L L  R R  L L  R&gt; | L L  R R  L L  R R  L L  R R  L L  R R  L&gt;\n</code></pre>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R d1 none n/a First stroke of right-hand diddle 2 R d2 none n/a Second stroke of right-hand diddle 3 L d1 none n/a First stroke of left-hand diddle 4 L d2 none n/a Second stroke of left-hand diddle 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 L d1 none n/a First stroke of left-hand diddle 8 L d2 none n/a Second stroke of left-hand diddle 9 R d1 none n/a First stroke of right-hand diddle 10 R d2 none n/a Second stroke of right-hand diddle 11 L d1 none n/a First stroke of left-hand diddle 12 L d2 none n/a Second stroke of left-hand diddle 13 R d1 none n/a First stroke of right-hand diddle 14 R d2 none n/a Second stroke of right-hand diddle 15 L d1 none n/a First stroke of left-hand diddle 16 L d2 none n/a Second stroke of left-hand diddle 17 R accent none n/a Terminal accent"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing (identical to all previous counted rolls; see #7): - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Open at slow tempos; closed at fast tempos</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Terminal accent at full dynamic level d1 0.65 - 0.77 Tap-level during the diddle body d2 0.90 - 0.98 x d1 Slight natural decay on second bounce <p>Identical to all odd-count rolls. See #7 Five Stroke Roll for detailed dynamic discussion.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  &gt;\n</code></pre> <p>Single accent on the final (17<sup>th</sup>) stroke.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#dynamic-contour","title":"Dynamic Contour","text":"<p>Same \"sustained-then-punctuated\" contour as all odd-count rolls. The 16-stroke diddle body (8 pairs) spanning a full bar plus one beat makes this the longest sustained roll in the counted roll family. At this length, the roll is functionally equivalent to a measured long roll excerpt from #6 with a defined accent ending. The primary challenge is pure endurance -- maintaining perfectly even dynamics and spacing across 8 diddle pairs without any drift or deterioration. See #7 for full contour discussion.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R d1 half wrist 2 R d2 low fingers 3 L d1 half wrist 4 L d2 low fingers 5 R d1 half wrist 6 R d2 low fingers 7 L d1 half wrist 8 L d2 low fingers 9 R d1 half wrist 10 R d2 low fingers 11 L d1 half wrist 12 L d2 low fingers 13 R d1 half wrist 14 R d2 low fingers 15 L d1 half wrist 16 L d2 low fingers 17 R accent full wrist + arm <p>Same stroke mechanics as all odd-count rolls (see #7). The 8-pair body is the most physically demanding counted roll. Efficient rebound technique and relaxation are absolutely essential -- any tension accumulates over 16 strokes and produces audible deterioration.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Open doubles. Sixteen distinct taps followed by an accent. At 60 BPM, the body spans 4 seconds -- a very long duration requiring exceptional physical endurance and mental counting discipline. Breath control and arm relaxation are critical. Moderate (100-140 BPM) Transition zone. Wrist-finger alley-oop. The 8-pair body is the ultimate endurance test for the wrist-finger technique. Any inefficiency in the diddle motion will produce audible fatigue by pairs 6-8. Fast (140-200 BPM) Closed doubles. The extended body sounds like a full, sustained long roll. Purely rebound-based technique is the only physically sustainable approach at this length and tempo."},{"location":"specs/rudiments/15_seventeen_stroke_roll/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#common-variations","title":"Common Variations","text":"<ul> <li>Starting hand: Mirror sticking for equal development.</li> <li>Rhythmic placement: At 4.5 beats, the cycle crosses the barline in 4/4, with the accent landing on the downbeat of the next bar -- a natural phrasing for full-bar rolls resolving to the next measure.</li> <li>Crescendo roll: The long body is ideal for crescendo application, building from pianissimo to the fortissimo accent.</li> <li>Tied-note roll: In notation, often written as a dotted whole note with a roll sign, resolving to the next downbeat.</li> </ul>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#14-fifteen-stroke-roll-sustained-quality-across-7-diddle-pairs","title":"14 Fifteen Stroke Roll -- sustained quality across 7 diddle pairs","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#13-thirteen-stroke-roll-endurance-at-6-diddle-pairs","title":"13 Thirteen Stroke Roll -- endurance at 6 diddle pairs","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#6-double-stroke-open-roll-long-form-diddle-endurance-at-maximum-capacity","title":"6 Double Stroke Open Roll -- long-form diddle endurance at maximum capacity","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended measured roll passages exceeding one bar</li> <li>The continuous double stroke open roll (#6) at any length -- the seventeen stroke roll is the final step before unlimited-length rolling</li> </ul>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#teaching-notes","title":"Teaching Notes","text":"<p>The seventeen stroke roll is the capstone of the counted roll series. It was the only counted roll added to the PAS list in 1984 that was not in the original NARD 26, reflecting its status as the natural extension of the counted roll progression to its practical upper limit.</p> <p>Common mistakes: - Fatigue-induced deterioration in the later diddle pairs (pairs 6, 7, and 8) - Tempo drift (almost always acceleration) across the 4+ beat body - Losing count -- 17 is easily confused with 15 - Tension buildup through the arms and hands, killing rebound quality</p> <p>Practice strategies: - Build incrementally from #14 Fifteen Stroke Roll -- add one more diddle pair - Think of the roll as \"one full bar of sixteenth-note diddles, plus one more pair, plus accent on the next downbeat\" - Count beats aloud throughout: \"1-e-&amp;-a-2-e-&amp;-a-3-e-&amp;-a-4-e-&amp;-a | 1\" - Practice with a metronome set to quarter notes to check for tempo drift - Train the continuous double stroke open roll (#6) for endurance -- if you can play #6 comfortably for 8+ bars, the seventeen stroke roll will be achievable - Focus on physical relaxation: consciously release tension in the forearms between each diddle pair</p> <p>What to listen for: - Even dynamics and spacing across all 16 diddle strokes with no fatigue-induced decay - No tempo drift (acceleration or deceleration) through the 4.5-beat body - Clean terminal accent on the downbeat of the next bar - Correct stroke count (17) - Smooth, sustained roll quality throughout the entire body</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#historical-context","title":"Historical Context","text":"<p>The seventeen stroke roll was first documented around 1931 and was not included in the original NARD 26 rudiments. It was added by the Percussive Arts Society in 1984 as part of the expansion from 26 to 40 International Drum Rudiments, under Jay Wanamaker's committee. It is the only counted stroke roll that was a PAS addition rather than a NARD original.</p> <p>The seventeen stroke roll represents the practical upper limit of counted stroke rolls. Beyond 17 strokes, rolls are typically notated as unmeasured tremolos or long rolls of indefinite duration. Its 4.5-beat length crosses the barline in 4/4 time, making it the natural choice for rolls that span a full bar and resolve on the following downbeat -- a common phrasing in both concert and marching percussion literature.</p>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/15_seventeen_stroke_roll/#stick-notation","title":"Stick Notation","text":"<pre><code>                                                                    &gt;\nR R  L L  R R  L L  R R  L L  R R  L L  R\n</code></pre>"},{"location":"specs/rudiments/15_seventeen_stroke_roll/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   | 4     e     &amp;     a   | 1 (next)    |\nHand:    | R     R     L     L   | R     R     L     L   | R     R     L     L   | R     R     L     L   | R           |\nType:    | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    d1    d2  | d1    d2    d1    d2  | A           |\nAccent:  |                       |                       |                       |                       | &gt;           |\n</code></pre>"},{"location":"specs/rudiments/16_single_paradiddle/","title":"PAS #16: Single Paradiddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 16 Name Single Paradiddle Category diddle Family paradiddle Composed Of 2 single strokes + 1 diddle per half-cycle (the \"para\" = single alternation, \"diddle\" = double) Related #1 Single Stroke Roll (the alternating singles component), #6 Double Stroke Open Roll (the diddle component), #17 Double Paradiddle (adds two more singles), #18 Triple Paradiddle (adds four more singles), #19 Paradiddle-Diddle (adds a second diddle) NARD Original Yes"},{"location":"specs/rudiments/16_single_paradiddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 8 Primary Strokes Per Cycle 8"},{"location":"specs/rudiments/16_single_paradiddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L t 3 \u00bd 1&amp; R d1 4 \u00be 1a R d2 5 1 2 L A 6 1 + \u00bc 2e R t 7 1 + \u00bd 2&amp; L d1 8 1 + \u00be 2a L d2"},{"location":"specs/rudiments/16_single_paradiddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/16_single_paradiddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;\nR  L  R R | L  R  L L\n</code></pre>"},{"location":"specs/rudiments/16_single_paradiddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented lead stroke, defines the start of the right-hand half 2 L tap none n/a Unaccented single, the second \"para\" stroke 3 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 4 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 5 L accent none n/a Accented lead stroke, defines the start of the left-hand half 6 R tap none n/a Unaccented single, the second \"para\" stroke 7 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 8 L d2 none n/a Second stroke of left-hand diddle, finger-controlled"},{"location":"specs/rudiments/16_single_paradiddle/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the \"&amp;\" of the beat (grid position 1&amp; or 2&amp;) - d2 falls on the \"a\" of the beat (grid position 1a or 2a) - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/16_single_paradiddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/16_single_paradiddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Full-stroke lead note at the top of each half-cycle tap 0.65 - 0.77 Unaccented single stroke; must contrast clearly against the accent d1 0.65 - 0.77 First diddle stroke at tap level; matches the passage dynamic d2 0.90 - 0.98 x d1 Slight natural decay on the second bounce <p>The accent-tap contrast is the defining dynamic feature of the single paradiddle. The accented first stroke of each half-cycle creates a clear rhythmic pulse, while the tap and diddle strokes fill the space between accents at a noticeably lower dynamic. The d1 of each diddle matches the surrounding tap level, and d2 decays slightly from d1 due to the finger-controlled rebound. The listener should hear a strong \"one\" followed by three quieter strokes in each half-cycle.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  - | &gt;  -  -  -\n</code></pre> <p>One accent per half-cycle, always on the lead stroke (stroke 1 and stroke 5). The accent alternates hands each half-cycle, which is the key pedagogical feature of all paradiddles: forced hand-lead switching.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single paradiddle has a repeating two-beat dynamic contour with a strong attack on beat 1 and beat 2, followed by three quieter strokes. This creates a pulse-like feel that makes paradiddles effective as groove patterns in drum set playing. The accent-tap contrast ratio (roughly 1.0 : 0.70) should remain consistent between the right-lead and left-lead halves. A hallmark of mastery is identical accent strength and tap evenness regardless of which hand leads. The diddle at the end of each half naturally sits at the tap dynamic level, creating a smooth transition into the next accent.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/16_single_paradiddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R d1 low wrist 4 R d2 tap fingers 5 L accent full wrist + arm 6 R tap low wrist 7 L d1 low wrist 8 L d2 tap fingers <p>The accent (stroke 1, 5) is played from full height with a combined wrist and arm motion (Moeller whip at moderate tempos). After the accent, the stick must drop to low height for the tap and the diddle d1. The diddle d2 is generated by finger control catching the rebound of d1. The hand that just completed its diddle must then lift to full height in preparation for its next accent two beats later, while the opposite hand executes its accented lead stroke.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm strokes for accents with a clear height differential between accents and taps. Diddles are open \u2014 two distinct wrist strokes on the same hand. Focus on accent-tap contrast and even diddle quality. Each stroke is deliberately placed. Moderate (100-160 BPM) Accents transition to wrist-driven with Moeller whip motion for efficiency. Taps remain at low height. Diddles shift to the wrist-finger technique: d1 is a wrist drop, d2 is a finger-controlled rebound catch. The accent naturally prepares the stick height for the following tap via a controlled downstroke. Fast (160-200 BPM) All motions become compact. Accents are wrist-only from half height; the full arm motion is too slow. Taps and diddles are finger-controlled at tap height. The accent-tap dynamic contrast narrows but must remain audible. Diddles are essentially closed. The pattern becomes a fluid continuous motion with minimal stick lift."},{"location":"specs/rudiments/16_single_paradiddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/16_single_paradiddle/#common-variations","title":"Common Variations","text":"<ul> <li>Inverted paradiddle: Reorder to RRLR LLRL \u2014 the diddle moves to the beginning instead of the end</li> <li>Reverse paradiddle: RRLR LLRL or RRLL RRLL variations that shift the accent placement relative to the diddle</li> <li>Paradiddle with accents on other strokes: Move the accent to strokes 2, 3, or 4 for coordination development</li> <li>Paradiddle as a groove: Distribute hands between hi-hat, snare, and bass drum to create linear patterns (common in funk and jazz)</li> <li>Paradiddle between surfaces: Alternate the accent on a different drum/cymbal than the taps for melodic phrasing</li> <li>Continuous hand-switching exercise: Play many measures continuously, noting how the lead hand alternates every beat</li> </ul>"},{"location":"specs/rudiments/16_single_paradiddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/16_single_paradiddle/#1-single-stroke-roll-clean-even-alternating-singles","title":"1 Single Stroke Roll \u2014 clean, even alternating singles","text":""},{"location":"specs/rudiments/16_single_paradiddle/#6-double-stroke-open-roll-controlled-diddles-with-matched-d1d2-quality","title":"6 Double Stroke Open Roll \u2014 controlled diddles with matched d1/d2 quality","text":""},{"location":"specs/rudiments/16_single_paradiddle/#builds-toward","title":"Builds Toward","text":""},{"location":"specs/rudiments/16_single_paradiddle/#17-double-paradiddle-extends-with-two-additional-singles-before-the-diddle","title":"17 Double Paradiddle (extends with two additional singles before the diddle)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#18-triple-paradiddle-extends-with-four-additional-singles-before-the-diddle","title":"18 Triple Paradiddle (extends with four additional singles before the diddle)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#19-paradiddle-diddle-adds-a-second-diddle","title":"19 Paradiddle-Diddle (adds a second diddle)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#24-flam-paradiddle-adds-a-flam-grace-note-to-the-paradiddle-accent","title":"24 Flam Paradiddle (adds a flam grace note to the paradiddle accent)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#25-single-flammed-mill-flammed-singles-within-a-paradiddle-like-structure","title":"25 Single Flammed Mill (flammed singles within a paradiddle-like structure)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#26-flam-paradiddle-diddle-flam-paradiddle-diddle","title":"26 Flam Paradiddle-Diddle (flam + paradiddle-diddle)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#35-single-dragadiddle-drag-diddle-in-a-paradiddle-frame","title":"35 Single Dragadiddle (drag + diddle in a paradiddle frame)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#36-drag-paradiddle-1-drag-ornaments-on-paradiddle-accents","title":"36 Drag Paradiddle #1 (drag ornaments on paradiddle accents)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#37-drag-paradiddle-2-extended-drag-paradiddle","title":"37 Drag Paradiddle #2 (extended drag paradiddle)","text":""},{"location":"specs/rudiments/16_single_paradiddle/#teaching-notes","title":"Teaching Notes","text":"<p>The single paradiddle is the most fundamental pattern in the diddle category and one of the most important rudiments in all of drumming. Its unique value lies in the hand-lead switching property: because the pattern is RLRR LRLL, each half-cycle ends with a diddle on the same hand that accented, forcing the opposite hand to lead the next half-cycle. This automatic alternation of the lead hand is not present in simple alternating patterns (single stroke roll) or same-hand patterns (double stroke roll), making the paradiddle an essential tool for developing ambidextrous control.</p> <p>Common mistakes: - Weak accent-tap contrast \u2014 the accents should be noticeably louder than the taps and diddle - Uneven diddle \u2014 d2 significantly softer or rushed relative to d1 - Rhythmic unevenness between the two single strokes and the diddle pair - One hand's accent consistently louder than the other (hand dominance leaking through) - Losing the sense of pulse \u2014 the accent on stroke 1 of each half should always feel like a downbeat</p> <p>Practice strategies: - Begin at slow tempos (60 BPM) with a metronome, emphasizing the accent-tap contrast - Practice each half-cycle separately: RLRR (right lead) and LRLL (left lead) in isolation - Play on a practice pad watching stick heights \u2014 accent strokes should visibly rise higher - Alternate between paradiddle and straight singles to feel the hand-switching moment - Practice paradiddles in groupings of 2, 4, and 8 repetitions, verifying consistency - Record and listen for accent balance between right-lead and left-lead halves</p> <p>What to listen for: - Clear, consistent accent on the first stroke of each half-cycle - Even volume across the three unaccented strokes (tap, d1, d2) - Identical rhythmic spacing across all four sixteenth-note positions - Equal accent strength from both hands - Smooth, continuous flow without hesitation at the hand-switching point</p>"},{"location":"specs/rudiments/16_single_paradiddle/#historical-context","title":"Historical Context","text":"<p>The paradiddle is a uniquely English rudiment in origin, with its earliest documented appearances in English military drumming manuscripts from the 17<sup>th</sup> and 18<sup>th</sup> centuries. The name \"paradiddle\" is likely onomatopoeic, imitating the sound of the pattern: \"pa-ra\" for the two single strokes and \"did-dle\" for the double. The Greek prefix \"para-\" (beside, beyond) combined with \"diddle\" (to move with short rapid motions) also contributes to the etymology.</p> <p>The single paradiddle was included in the NARD (National Association of Rudimental Drummers) original 26 rudiments when NARD was established in 1933, and its lineage can be traced back through Gardiner Strube's 1870 Drum and Fife Instructor and earlier American rudimental texts. It was retained as PAS #16 when the Percussive Arts Society expanded the list to 40 International Drum Rudiments in 1984 under Jay Wanamaker's committee, positioned as the first rudiment in the diddle category.</p> <p>The paradiddle family holds a special place in modern drum set playing. The hand-lead switching property makes paradiddles uniquely suited for creating linear grooves, fills, and orchestrations around the kit. Virtually every jazz, funk, and rock drummer relies on paradiddle-based patterns. The concept of \"paradiddle inversions\" \u2014 starting the pattern from different points in the cycle \u2014 has become a fundamental creative tool in contemporary drumming.</p>"},{"location":"specs/rudiments/16_single_paradiddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/16_single_paradiddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;\nR  L  R R    L  R  L L\n</code></pre>"},{"location":"specs/rudiments/16_single_paradiddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     L     R     R   | L     R     L     L   |\nType:    | A     t     d1    d2  | A     t     d1    d2  |\nAccent:  | &gt;                     | &gt;                     |\n</code></pre>"},{"location":"specs/rudiments/17_double_paradiddle/","title":"PAS #17: Double Paradiddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 17 Name Double Paradiddle Category diddle Family paradiddle Composed Of 4 single strokes + 1 diddle per half-cycle (\"double\" refers to two pairs of alternating singles before the diddle) Related #16 Single Paradiddle (shorter version with 2 singles + 1 diddle), #18 Triple Paradiddle (longer version with 6 singles + 1 diddle), #19 Paradiddle-Diddle (2 singles + 2 diddles), #1 Single Stroke Roll (the alternating singles component), #6 Double Stroke Open Roll (the diddle component) NARD Original Yes (listed among the NARD 13 Essential Rudiments)"},{"location":"specs/rudiments/17_double_paradiddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 12 Primary Strokes Per Cycle 12"},{"location":"specs/rudiments/17_double_paradiddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L t 3 \u00bd 1&amp; R t 4 \u00be 1a L t 5 1 2 R d1 6 1 + \u00bc 2e R d2 7 1 + \u00bd 2&amp; L A 8 1 + \u00be 2a R t 9 2 3 L t 10 2 + \u00bc 3e R t 11 2 + \u00bd 3&amp; L d1 12 2 + \u00be 3a L d2"},{"location":"specs/rudiments/17_double_paradiddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/17_double_paradiddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                       &gt;\nR  L  R  L | R R  L  R | L  R  L L\n</code></pre>"},{"location":"specs/rudiments/17_double_paradiddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented lead stroke, right-hand half begins 2 L tap none n/a Unaccented single, first alternation 3 R tap none n/a Unaccented single, second alternation 4 L tap none n/a Unaccented single, third alternation 5 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 6 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 7 L accent none n/a Accented lead stroke, left-hand half begins 8 R tap none n/a Unaccented single, first alternation 9 L tap none n/a Unaccented single, second alternation 10 R tap none n/a Unaccented single, third alternation 11 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 12 L d2 none n/a Second stroke of left-hand diddle, finger-controlled"},{"location":"specs/rudiments/17_double_paradiddle/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Right-hand diddle: d1 on beat 2, d2 on 2e - Left-hand diddle: d1 on 3&amp;, d2 on 3a - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/17_double_paradiddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/17_double_paradiddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Full-stroke lead note at the top of each half-cycle tap 0.65 - 0.77 Unaccented single strokes; must contrast clearly against the accent d1 0.65 - 0.77 First diddle stroke at tap level; matches the passage dynamic d2 0.90 - 0.98 x d1 Slight natural decay on the second bounce <p>The accent-tap contrast in the double paradiddle follows the same principle as the single paradiddle, but with four taps between accents instead of two. The longer run of unaccented strokes makes the accent feel more emphatic by contrast. The diddle at the end of each half-cycle sits at the same dynamic level as the taps, providing a smooth transition into the next accented lead stroke.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  - | -  -  &gt;  - | -  -  -  -\n</code></pre> <p>One accent per half-cycle, always on the lead stroke (stroke 1 and stroke 7). The accent alternates hands every 6 strokes (1.5 beats). The 6-stroke grouping creates a natural cross-rhythm against the 4/4 meter when played continuously, giving the double paradiddle its characteristic \"rolling over the barline\" feel.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The double paradiddle has a repeating six-note dynamic contour: one strong accent followed by five quieter strokes. The longer space between accents (compared to the single paradiddle) creates a more flowing, rolling character. The accent functions as a rhythmic anchor every 1.5 beats. When played continuously in 4/4, the accent pattern cycles through different beat positions (beat 1, the \"&amp;\" of beat 2, beat 4, the \"e\" of beat 5, etc.), creating a polyrhythmic effect that makes the double paradiddle particularly useful for building complex musical phrases. The d2 decay at the end of each half provides a natural diminuendo leading into the next accent.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/17_double_paradiddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R tap low wrist 4 L tap low wrist 5 R d1 low wrist 6 R d2 tap fingers 7 L accent full wrist + arm 8 R tap low wrist 9 L tap low wrist 10 R tap low wrist 11 L d1 low wrist 12 L d2 tap fingers <p>The accent is played from full height with a combined wrist and arm motion. After the accent, the stick drops immediately to low height for the four taps and d1. The d2 is generated by finger rebound from d1. The hand completing the diddle then has a full 1.5 beats (6 strokes) before its next accent, providing ample time to lift back to full height. This longer preparation window (compared to the single paradiddle's 1 beat) makes the accent preparation slightly more forgiving.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm strokes for accents with clear height contrast. All four single strokes are deliberate wrist motions at low height. Diddles are open with two distinct wrist strokes. Focus on maintaining even spacing across all six strokes per half-cycle and clear accent-tap differentiation. Moderate (100-150 BPM) Accents employ Moeller whip technique. Taps are relaxed wrist strokes. Diddles transition to wrist-finger technique (d1 wrist, d2 finger rebound). The four alternating singles should flow smoothly with minimal arm movement, allowing the wrist to settle into a metronomic pattern before the diddle. Fast (150-180 BPM) All motions become compact. Accents are wrist-only from half height. Taps and diddles are finger-controlled at tap height. The long run of four singles tends to stabilize the tempo, making the double paradiddle somewhat easier to play evenly at speed than the single paradiddle. Diddles are essentially closed. The accent-tap contrast narrows but must remain perceptible."},{"location":"specs/rudiments/17_double_paradiddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/17_double_paradiddle/#common-variations","title":"Common Variations","text":"<ul> <li>Accents on different strokes: Move the accent to strokes 2, 3, 4, 5, or 6 for coordination development and different musical effects</li> <li>Double paradiddle in 6/8: Play as eighth notes in 6/8 time, one full half-cycle per measure \u2014 the six-note grouping fits compound time naturally</li> <li>Orchestrated around the kit: Distribute accents on toms or cymbals with taps on the snare for fill patterns</li> <li>Continuous double paradiddles over a barline: Accent pattern shifts through different beat positions in 4/4, creating polyrhythmic effects</li> <li>Double paradiddle with flams: Add flam grace notes to the accents (approaches #26 Flam Paradiddle-Diddle territory)</li> </ul>"},{"location":"specs/rudiments/17_double_paradiddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/17_double_paradiddle/#1-single-stroke-roll-clean-even-alternating-singles-across-four-stroke-runs","title":"1 Single Stroke Roll \u2014 clean, even alternating singles across four-stroke runs","text":""},{"location":"specs/rudiments/17_double_paradiddle/#6-double-stroke-open-roll-controlled-diddles-with-matched-d1d2-quality","title":"6 Double Stroke Open Roll \u2014 controlled diddles with matched d1/d2 quality","text":""},{"location":"specs/rudiments/17_double_paradiddle/#16-single-paradiddle-the-accent-tap-diddle-pattern-in-its-simplest-form","title":"16 Single Paradiddle \u2014 the accent-tap-diddle pattern in its simplest form","text":""},{"location":"specs/rudiments/17_double_paradiddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Compound rudiments that combine paradiddle sticking with other ornaments</li> </ul>"},{"location":"specs/rudiments/17_double_paradiddle/#18-triple-paradiddle-extends-with-two-more-singles-per-half-cycle","title":"18 Triple Paradiddle (extends with two more singles per half-cycle)","text":""},{"location":"specs/rudiments/17_double_paradiddle/#26-flam-paradiddle-diddle-adds-flams-and-an-extra-diddle","title":"26 Flam Paradiddle-Diddle (adds flams and an extra diddle)","text":""},{"location":"specs/rudiments/17_double_paradiddle/#teaching-notes","title":"Teaching Notes","text":"<p>The double paradiddle extends the single paradiddle by adding two more alternating single strokes before the diddle. This creates a six-note grouping that naturally fits compound meters (6/8, 12/8) when played as eighth notes. The hand-lead switching property is preserved: RLRLRR ends on R, so L must lead the next half; LRLRLL ends on L, so R must lead the next half.</p> <p>The \"double\" in the name refers to the two pairs of alternating singles (RL RL) before the diddle (RR), not to the number of times the pattern repeats. This naming convention extends through the paradiddle family: single = one pair of singles (RL), double = two pairs (RLRL), triple = three pairs (RLRLRL).</p> <p>Common mistakes: - Uneven spacing among the four single strokes \u2014 the alternating singles should be perfectly metronomic - Rushing the diddle after four singles, or dragging the diddle to compensate - Accent inconsistency between right-lead and left-lead halves - Losing track of the 6-stroke grouping when playing in 4/4 (the accent shifts beat position each cycle) - Weak d2 at the end of each half \u2014 the diddle must be as clean as in the single paradiddle</p> <p>Practice strategies: - Begin at slow tempos with a metronome, counting \"1-e-&amp;-a-2-e\" for each 6-stroke half - Practice each half-cycle separately: RLRLRR (right lead) and LRLRLL (left lead) - Play in 6/8 time at first \u2014 this aligns the accent with the natural pulse and simplifies counting - Then play in 4/4 to experience the polyrhythmic accent shifting - Compare to the single paradiddle: play 4 bars of singles followed by 4 bars of doubles, feeling how the extra singles change the momentum - Record and listen for accent balance and diddle quality between halves</p> <p>What to listen for: - Clear, consistent accent on the first stroke of each 6-stroke group - Even volume and spacing across the four alternating single strokes - Clean diddle with matched d1/d2 quality - Equal accent strength from both hands - Smooth transition between halves without hesitation</p>"},{"location":"specs/rudiments/17_double_paradiddle/#historical-context","title":"Historical Context","text":"<p>The double paradiddle holds the distinction of being included in the NARD 13 Essential Rudiments, a core subset of the 26 Standard American Drum Rudiments designated by the National Association of Rudimental Drummers in 1933. This places it among the most fundamental patterns in the American rudimental tradition. Its inclusion in the Essential 13 (while the single paradiddle was in the broader 26 but not the Essential 13) reflects the double paradiddle's historical importance in military field drumming, where the six-note grouping is naturally suited to the compound meters common in marches and quicksteps.</p> <p>The double paradiddle's six-stroke grouping makes it one of the most versatile paradiddle variants. In contemporary drum set playing, it is frequently used in 6/8 and 12/8 time signatures, Afro-Cuban-influenced grooves, and jazz waltz patterns. The natural polyrhythmic tension created when playing the six-note pattern in 4/4 time has been exploited by drummers from Buddy Rich to Vinnie Colaiuta.</p> <p>The rudiment was retained as PAS #17 when the Percussive Arts Society expanded the list to 40 International Drum Rudiments in 1984.</p>"},{"location":"specs/rudiments/17_double_paradiddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/17_double_paradiddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                          &gt;\nR  L  R  L  R R    L  R  L  R  L L\n</code></pre>"},{"location":"specs/rudiments/17_double_paradiddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   |\nHand:    | R     L     R     L   | R     R     L     R   | L     R     L     L   |\nType:    | A     t     t     t   | d1    d2    A     t   | t     t     d1    d2  |\nAccent:  | &gt;                     |             &gt;         |                       |\n</code></pre>"},{"location":"specs/rudiments/18_triple_paradiddle/","title":"PAS #18: Triple Paradiddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 18 Name Triple Paradiddle Category diddle Family paradiddle Composed Of 6 single strokes + 1 diddle per half-cycle (\"triple\" refers to three pairs of alternating singles before the diddle) Related #16 Single Paradiddle (2 singles + 1 diddle), #17 Double Paradiddle (4 singles + 1 diddle), #19 Paradiddle-Diddle (2 singles + 2 diddles), #1 Single Stroke Roll (the alternating singles component), #6 Double Stroke Open Roll (the diddle component) NARD Original No (first published by J. Burns Moore in Art of Drumming, 1937; added to PAS 40 in 1984)"},{"location":"specs/rudiments/18_triple_paradiddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 4 beats Strokes Per Cycle 16 Primary Strokes Per Cycle 16"},{"location":"specs/rudiments/18_triple_paradiddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u00bc 1e L t 3 \u00bd 1&amp; R t 4 \u00be 1a L t 5 1 2 R t 6 1 + \u00bc 2e L t 7 1 + \u00bd 2&amp; R d1 8 1 + \u00be 2a R d2 9 2 3 L A 10 2 + \u00bc 3e R t 11 2 + \u00bd 3&amp; L t 12 2 + \u00be 3a R t 13 3 4 L t 14 3 + \u00bc 4e R t 15 3 + \u00bd 4&amp; L d1 16 3 + \u00be 4a L d2"},{"location":"specs/rudiments/18_triple_paradiddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                                &gt;\nR  L  R  L | R  L  R R | L  R  L  R | L  R  L L\n</code></pre>"},{"location":"specs/rudiments/18_triple_paradiddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented lead stroke, right-hand half begins 2 L tap none n/a Unaccented single, first alternation 3 R tap none n/a Unaccented single, second alternation 4 L tap none n/a Unaccented single, third alternation 5 R tap none n/a Unaccented single, fourth alternation 6 L tap none n/a Unaccented single, fifth alternation 7 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 8 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 9 L accent none n/a Accented lead stroke, left-hand half begins 10 R tap none n/a Unaccented single, first alternation 11 L tap none n/a Unaccented single, second alternation 12 R tap none n/a Unaccented single, third alternation 13 L tap none n/a Unaccented single, fourth alternation 14 R tap none n/a Unaccented single, fifth alternation 15 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 16 L d2 none n/a Second stroke of left-hand diddle, finger-controlled"},{"location":"specs/rudiments/18_triple_paradiddle/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - Right-hand diddle: d1 on 2&amp;, d2 on 2a - Left-hand diddle: d1 on 4&amp;, d2 on 4a - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes are closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Full-stroke lead note at the top of each half-cycle tap 0.65 - 0.77 Unaccented single strokes; must contrast clearly against the accent d1 0.65 - 0.77 First diddle stroke at tap level; matches the passage dynamic d2 0.90 - 0.98 x d1 Slight natural decay on the second bounce <p>The triple paradiddle has the longest run of unaccented strokes in the paradiddle family: six taps plus the diddle (seven unaccented strokes) between each accent. This extended quiet passage makes each accent feel particularly emphatic. The dynamic contrast between the accent and the surrounding taps must be maintained consistently across both halves despite the longer phrase length.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  - | -  -  -  - | &gt;  -  -  - | -  -  -  -\n</code></pre> <p>One accent per half-cycle, always on the lead stroke (stroke 1 and stroke 9). The accent falls on beat 1 and beat 3, creating an accent pattern that aligns neatly with half-note pulse in 4/4 time. This is unique among the paradiddle family: the triple paradiddle's 8-stroke half-cycle fills exactly one half-bar of 4/4, so the accent pattern does not create cross-rhythms when played continuously.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The triple paradiddle has a broad, arching dynamic contour: a strong accent followed by a long plateau of seven even unaccented strokes, then another strong accent. The 8-stroke (2-beat) half-cycle creates a slow, stately pulse when accents are emphasized. Unlike the single paradiddle (which pulses every beat) or the double paradiddle (which creates 6-against-4 polyrhythms), the triple paradiddle aligns naturally with the 4/4 meter and creates a half-note accent feel. The extended run of singles between accents demands endurance and consistency, while the diddle at the end of each half provides a brief moment of same-hand activity before the hand switch.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R tap low wrist 4 L tap low wrist 5 R tap low wrist 6 L tap low wrist 7 R d1 low wrist 8 R d2 tap fingers 9 L accent full wrist + arm 10 R tap low wrist 11 L tap low wrist 12 R tap low wrist 13 L tap low wrist 14 R tap low wrist 15 L d1 low wrist 16 L d2 tap fingers <p>The accent is played from full height with combined wrist and arm motion. After the accent, the stick drops to low height for the six alternating taps and the diddle d1. The d2 is generated by finger rebound. The hand completing its diddle has a full 2 beats (8 strokes) before its next accent, providing the most generous preparation window in the paradiddle family. This extended recovery time makes the triple paradiddle somewhat forgiving for accent preparation, but the long run of six alternating singles demands sustained evenness and endurance.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm accents with a clear height differential. All six singles are deliberate, even wrist strokes at low height. Diddles are open \u2014 two distinct wrist strokes. The long single-stroke run feels similar to practicing the single stroke roll with a deliberate accent every 8 strokes. Focus on maintaining metronomic evenness across all eight positions in each half. Moderate (100-140 BPM) Accents use Moeller whip technique. The six alternating singles settle into a relaxed wrist pattern at low height \u2014 essentially a short single stroke roll excerpt. Diddles shift to wrist-finger technique. The extended single-stroke run provides natural rhythmic stability, making moderate tempos comfortable. Fast (140-160 BPM) All motions become compact. Accents are wrist-only from half height. Singles and diddles are finger-controlled at tap height. The long phrase length becomes a physical endurance challenge at speed. The accent-tap contrast narrows but must remain audible. Diddles are essentially closed. Arm fatigue from the continuous single-stroke run is the primary limiting factor."},{"location":"specs/rudiments/18_triple_paradiddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#common-variations","title":"Common Variations","text":"<ul> <li>Accents on alternate strokes: Move the accent to different positions within the 8-stroke half for coordination and musical variety</li> <li>Triple paradiddle in 4/4: The natural alignment of the 8-stroke half with 2 beats of 4/4 makes this rudiment particularly well-suited for standard time signature applications</li> <li>Orchestrated fills: Distribute the accent on toms or cymbals while keeping taps on the snare \u2014 the 2-beat accent spacing creates quarter-note or half-note tom patterns</li> <li>Paradiddle family progression: Play single, double, then triple paradiddles in sequence as a warm-up to develop all three phrase lengths</li> <li>Dynamic shaping within the half: Apply a crescendo or decrescendo across the six singles leading to the diddle for additional musical expression</li> </ul>"},{"location":"specs/rudiments/18_triple_paradiddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#1-single-stroke-roll-extended-runs-of-even-alternating-singles-six-singles-is-a-significant-endurance-requirement","title":"1 Single Stroke Roll \u2014 extended runs of even alternating singles (six singles is a significant endurance requirement)","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#6-double-stroke-open-roll-controlled-diddles-with-matched-d1d2-quality","title":"6 Double Stroke Open Roll \u2014 controlled diddles with matched d1/d2 quality","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#16-single-paradiddle-the-accent-tap-diddle-concept-in-its-simplest-form","title":"16 Single Paradiddle \u2014 the accent-tap-diddle concept in its simplest form","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#17-double-paradiddle-the-intermediate-phrase-length","title":"17 Double Paradiddle \u2014 the intermediate phrase length","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended paradiddle exercises combining all three paradiddle lengths (single, double, triple)</li> <li>Complex fill patterns in drum set playing that exploit the 2-beat half-cycle accent spacing</li> <li>Compound rudiments that overlay flam or drag ornaments on the paradiddle structure</li> </ul>"},{"location":"specs/rudiments/18_triple_paradiddle/#teaching-notes","title":"Teaching Notes","text":"<p>The triple paradiddle is the longest member of the standard paradiddle family, with six alternating single strokes before each diddle. The \"triple\" refers to three pairs of alternating singles (RL RL RL) preceding the diddle (RR), following the paradiddle naming convention: single = 1 pair (RL), double = 2 pairs (RLRL), triple = 3 pairs (RLRLRL). The hand-lead switching property is preserved: RLRLRLRR ends on R, so L must lead the next half; LRLRLRLL ends on L, so R must lead.</p> <p>Common mistakes: - Uneven spacing among the six alternating singles \u2014 the long run exposes any rhythmic inconsistency - Rushing or dragging the diddle relative to the surrounding singles - Fatigue causing the taps to become louder or uneven toward the end of each half - Accent imbalance between hands, especially as fatigue sets in during extended practice - Losing the phrase structure \u2014 the accent on stroke 1 must always feel like the \"one\" of each half</p> <p>Practice strategies: - Build up from the single paradiddle: play RLRR, then RLRLRR, then RLRLRLRR, adding one pair of singles at a time - Practice the 8-stroke half in isolation: RLRLRLRR (right lead) and LRLRLRLL (left lead) - Begin at very slow tempos (60 BPM) to develop endurance across the 6-stroke single run - Use the natural 4/4 alignment: accent on beats 1 and 3 serves as a helpful metronome anchor - Compare with the single stroke roll: play 8 bars of singles, then 8 bars of triple paradiddles, feeling how the diddle and accent create structure within the alternating pattern - Record and critically listen for any unevenness in the long single-stroke runs</p> <p>What to listen for: - Clear, consistent accent on stroke 1 and stroke 9 - Perfectly even spacing and volume across all six alternating singles - Clean diddle with matched d1/d2 quality - Equal accent and tap quality from both hands - No rhythmic distortion at the single-to-diddle transition or the diddle-to-accent transition</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#historical-context","title":"Historical Context","text":"<p>The triple paradiddle is the only member of the paradiddle family that was not included in the NARD (National Association of Rudimental Drummers) original 26 rudiments of 1933. It was first published by J. Burns Moore in his Art of Drumming in 1937, just four years after the NARD standardization. Moore's text featured just one rudiment not found in the NARD 26, and this was it. The triple paradiddle was subsequently adopted into common rudimental practice and was included when the Percussive Arts Society expanded the list to 40 International Drum Rudiments in 1984 under Jay Wanamaker's committee, where it was assigned PAS #18.</p> <p>The triple paradiddle's 8-stroke half-cycle aligns naturally with 2 beats of 4/4 time, making it metrically simpler than the single paradiddle (4-stroke half = 1 beat, which can feel too short for phrasing) or the double paradiddle (6-stroke half = 1.5 beats, which creates polyrhythmic tension). This clean metric alignment makes the triple paradiddle a practical choice for drum set fills and marching percussion cadences where musical clarity is important.</p>"},{"location":"specs/rudiments/18_triple_paradiddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/18_triple_paradiddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                                      &gt;\nR  L  R  L  R  L  R R    L  R  L  R  L  R  L L\n</code></pre>"},{"location":"specs/rudiments/18_triple_paradiddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   | 3     e     &amp;     a   | 4     e     &amp;     a   |\nHand:    | R     L     R     L   | R     L     R     R   | L     R     L     R   | L     R     L     L   |\nType:    | A     t     t     t   | t     t     d1    d2  | A     t     t     t   | t     t     d1    d2  |\nAccent:  | &gt;                     |                       | &gt;                     |                       |\n</code></pre>"},{"location":"specs/rudiments/19_paradiddle_diddle/","title":"PAS #19: Paradiddle-Diddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 19 Name Paradiddle-Diddle Category diddle Family paradiddle Composed Of 2 single strokes + 2 diddles per half-cycle (a paradiddle with an additional diddle appended) Related #16 Single Paradiddle (2 singles + 1 diddle \u2014 the paradiddle-diddle adds a second diddle), #17 Double Paradiddle (shares the 6-stroke grouping), #6 Double Stroke Open Roll (the diddle component), #26 Flam Paradiddle-Diddle (adds flam ornaments to this pattern) NARD Original Yes"},{"location":"specs/rudiments/19_paradiddle_diddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 (or 6/8 \u2014 the 6-stroke grouping fits compound meters naturally) Base Subdivision sextuplet (six notes per beat) Cycle Length 2 beats Strokes Per Cycle 12 Primary Strokes Per Cycle 12"},{"location":"specs/rudiments/19_paradiddle_diddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 R A 2 \u2159 1la L t 3 2/6 1li R d1 4 3/6 1&amp; R d2 5 4/6 1la L d1 6 \u215a 1li L d2 7 1 2 L A 8 1 + \u2159 2la R t 9 1 + 2/6 2li L d1 10 1 + 3/6 2&amp; L d2 11 1 + 4/6 2la R d1 12 1 + \u215a 2li R d2"},{"location":"specs/rudiments/19_paradiddle_diddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                    &gt;\nR  L  R R  L L | L  R  L L  R R\n</code></pre>"},{"location":"specs/rudiments/19_paradiddle_diddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 R accent none n/a Accented lead stroke, right-hand half begins 2 L tap none n/a Unaccented single, the second \"para\" stroke 3 R d1 none n/a First stroke of first diddle (right hand), wrist-initiated 4 R d2 none n/a Second stroke of first diddle (right hand), finger-controlled 5 L d1 none n/a First stroke of second diddle (left hand), wrist-initiated 6 L d2 none n/a Second stroke of second diddle (left hand), finger-controlled 7 L accent none n/a Accented lead stroke, left-hand half begins 8 R tap none n/a Unaccented single, the second \"para\" stroke 9 L d1 none n/a First stroke of first diddle (left hand), wrist-initiated 10 L d2 none n/a Second stroke of first diddle (left hand), finger-controlled 11 R d1 none n/a First stroke of second diddle (right hand), wrist-initiated 12 R d2 none n/a Second stroke of second diddle (right hand), finger-controlled"},{"location":"specs/rudiments/19_paradiddle_diddle/#ornament-timing","title":"Ornament Timing","text":"<p>Diddle Timing: - Each diddle pair occupies one sextuplet-note duration (\u2153 beat) - Each individual diddle stroke occupies \u2159 beat (one sextuplet note) - Right-hand half: first diddle (R) on 1li-1&amp;, second diddle (L) on 1la-1li - Left-hand half: first diddle (L) on 2li-2&amp;, second diddle (R) on 2la-2li - The two consecutive diddles alternate hands (RR LL or LL RR), creating a brief excerpt of double-stroke roll texture - At slow tempos: all four diddle strokes are distinct and clearly separated (open) - At fast tempos: the diddle pairs blur into a smooth roll-like texture (closed)</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 Full-stroke lead note at the top of each half-cycle tap 0.65 - 0.77 Unaccented single stroke; must contrast clearly against the accent d1 (first diddle) 0.65 - 0.77 First stroke of each diddle at tap level d2 (first diddle) 0.90 - 0.98 x d1 Slight decay on the second stroke of the first diddle d1 (second diddle) 0.65 - 0.77 First stroke of the second diddle at tap level d2 (second diddle) 0.90 - 0.98 x d1 Slight decay on the second stroke of the second diddle <p>The paradiddle-diddle features two consecutive diddles after the two singles. The first diddle follows the same accent-to-tap transition as in the single paradiddle. The second diddle occurs on the opposite hand, creating a brief double-stroke roll excerpt (RR LL or LL RR). Both diddles should be at the same dynamic level, with the d2 of each decaying slightly from its d1. The consecutive diddles create a subtle \"rolling\" dynamic texture that distinguishes this pattern from other paradiddles.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;  -  -  -  -  - | &gt;  -  -  -  -  -\n</code></pre> <p>One accent per half-cycle, always on the lead stroke (stroke 1 and stroke 7). Unlike the first three paradiddles (which all use sixteenth-note subdivision), the paradiddle-diddle's sextuplet subdivision places 6 strokes per beat, so the accent falls on each beat. The lead hand alternates each half: R leads beat 1, L leads beat 2, R leads beat 3, and so on.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The paradiddle-diddle has a six-note dynamic contour: one strong accent, one tap, then four diddle strokes (two diddles of two strokes each). The two consecutive diddles create a \"rolling\" effect that distinguishes this rudiment from the other paradiddles, where only one diddle separates each accent. The dynamic shape is: accent peak, quick drop to tap level, then a sustained low-dynamic plateau through the four diddle strokes with subtle d2 decay within each pair. The two-diddle ending gives the pattern a compound feel that sits naturally in triplet-based and sextuplet-based rhythmic contexts (6/8, 12/8). When played at speed, the consecutive diddles produce a brief buzz-like texture that contrasts with the clean single strokes at the beginning of each half.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 R accent full wrist + arm 2 L tap low wrist 3 R d1 low wrist 4 R d2 tap fingers 5 L d1 low wrist 6 L d2 tap fingers 7 L accent full wrist + arm 8 R tap low wrist 9 L d1 low wrist 10 L d2 tap fingers 11 R d1 low wrist 12 R d2 tap fingers <p>The accent is played from full height with combined wrist and arm motion. After the accent, the stick drops to low height for the tap and the first diddle d1. The first diddle d2 is generated by finger rebound. The second diddle begins on the opposite hand at low height (d1 from wrist, d2 from fingers). The hand that played the accent has a full beat (6 strokes) before it needs to play its next accent, which occurs when the pattern repeats after the mirror half. The two consecutive diddles (RR LL or LL RR) require the player to execute a double-stroke roll fragment at sextuplet speed, demanding solid finger control.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm accents with clear height contrast. Singles and diddle d1 strokes are controlled wrist motions. All four diddle strokes (two d1 + two d2) are individually articulated and clearly audible as four separate notes. Focus on maintaining even spacing across all six sextuplet positions and crisp hand transitions between the two consecutive diddles. Moderate (100-150 BPM) Accents employ Moeller whip technique. Diddles transition to wrist-finger technique (d1 wrist, d2 finger rebound). The consecutive diddles (RR LL) begin to feel like a brief double-stroke roll excerpt. The sextuplet subdivision produces notes at the same rate as sixteenth notes at 150% of the BPM, demanding substantial finger control at moderate tempos. Fast (150-180 BPM) All motions become compact. Accents are wrist-only from half height. All diddle strokes are finger-controlled at tap height. The two consecutive diddles merge into a smooth, roll-like texture. The sextuplet subdivision at 180 BPM produces 18 notes per second, requiring advanced finger technique. The accent-tap contrast narrows but must remain perceptible to preserve the pattern's identity."},{"location":"specs/rudiments/19_paradiddle_diddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#common-variations","title":"Common Variations","text":"<ul> <li>Paradiddle-diddle in 6/8: Play as eighth notes in 6/8 time \u2014 one complete half-cycle fills one measure, and the accent naturally falls on the downbeat of each bar</li> <li>Paradiddle-diddle as sixteenth notes in 4/4: Reinterpret the 6-stroke group in straight sixteenth notes for a 3-against-4 polyrhythmic effect (same approach as the double paradiddle)</li> <li>Orchestrated around the kit: Distribute accent on cymbal/tom and taps on snare; the consecutive diddles create a rapid fill between accent points</li> <li>Paradiddle-diddle with hand reversal: Practice leading with the non-dominant hand exclusively (LRLLRR) for balanced development</li> <li>Double-time paradiddle-diddles: Play at sextuplet speed over a half-time feel for advanced coordination</li> </ul>"},{"location":"specs/rudiments/19_paradiddle_diddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#1-single-stroke-roll-clean-alternating-singles","title":"1 Single Stroke Roll \u2014 clean alternating singles","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#6-double-stroke-open-roll-controlled-diddles-with-matched-d1d2-quality-especially-consecutive-diddles-alternating-between-hands-the-rr-ll-fragment","title":"6 Double Stroke Open Roll \u2014 controlled diddles with matched d1/d2 quality, especially consecutive diddles alternating between hands (the RR LL fragment)","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#16-single-paradiddle-the-accent-singles-diddle-concept-the-paradiddle-diddle-adds-one-more-diddle","title":"16 Single Paradiddle \u2014 the accent-singles-diddle concept (the paradiddle-diddle adds one more diddle)","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Complex compound rudiments that combine paradiddle-diddle sticking with drag ornaments</li> <li>Advanced drum set applications in compound time signatures</li> </ul>"},{"location":"specs/rudiments/19_paradiddle_diddle/#26-flam-paradiddle-diddle-adds-flam-grace-notes-to-this-patterns-accents","title":"26 Flam Paradiddle-Diddle (adds flam grace notes to this pattern's accents)","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#teaching-notes","title":"Teaching Notes","text":"<p>The paradiddle-diddle is structurally distinct from the other three paradiddles. While the single, double, and triple paradiddles all follow the pattern of N single strokes + 1 diddle, the paradiddle-diddle has 2 singles + 2 diddles. The second diddle is what sets it apart: the \"diddle-diddle\" suffix in the name refers to the two consecutive double strokes at the end of each half-cycle. This makes it a hybrid between a paradiddle and a double-stroke roll fragment.</p> <p>A critical distinction: the paradiddle-diddle does not naturally alternate the lead hand when played as a single half-cycle (RLRRLL starts on R and ends on L \u2014 if repeated, R would lead again). To achieve the hand-lead switching that is characteristic of the paradiddle family, the full cycle must include both the right-lead half (RLRRLL) and the left-lead half (LRLLRR). The YAML definition for SOUSA includes both halves in a single 2-beat cycle to ensure this alternation.</p> <p>The sextuplet subdivision is the standard interpretation for the paradiddle-diddle. The six-note grouping divides evenly into sextuplets (6 notes per beat), placing one complete half-cycle per beat. This differs from the other paradiddles, which all use sixteenth-note subdivision. The sextuplet feel gives the paradiddle-diddle a distinctly different rhythmic character: flowing and triplet-based rather than square and sixteenth-note-based.</p> <p>Common mistakes: - Uneven diddle quality between the first and second diddle \u2014 both must match - The transition between the two consecutive diddles (R-to-L or L-to-R hand switch within the diddle pair) creating a \"gap\" or \"flam\" - Treating the sextuplets as sixteenth notes (4 per beat instead of 6), losing the compound feel - One hand's diddles consistently weaker than the other - Losing the accent-tap contrast within the fast sextuplet subdivision</p> <p>Practice strategies: - Begin by playing the double-stroke roll (RRLL RRLL) continuously, then add the accent and single stroke at the beginning of each group - Practice at slow tempos in 6/8 time to internalize the compound meter feel - Isolate the two-diddle fragment (RRLL) as a double-stroke roll exercise - Practice right-lead (RLRRLL) and left-lead (LRLLRR) halves separately, then combine - Use a metronome set to dotted quarter notes in 6/8 to anchor the accent pattern - Record and listen for the smoothness of the hand transition between consecutive diddles</p> <p>What to listen for: - Clear, consistent accent on the first stroke of each 6-note group - Even, matched diddle quality across both consecutive diddles - Smooth hand transition between the first and second diddle (no gap or flam) - Correct sextuplet feel \u2014 the six notes should be evenly spaced within each beat - Equal accent and diddle quality from both right-lead and left-lead halves</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#historical-context","title":"Historical Context","text":"<p>The paradiddle-diddle was included in the NARD (National Association of Rudimental Drummers) original 26 rudiments when NARD was established in 1933. It is sometimes referred to as the \"single paradiddle-diddle\" to distinguish it from potential compound forms, though PAS simply calls it \"Paradiddle-Diddle.\"</p> <p>The paradiddle-diddle's six-note grouping makes it a natural fit for compound time signatures (6/8, 9/8, 12/8), and it has been a staple of rudimental marching percussion in these meters for centuries. In the drum corps tradition, paradiddle-diddles are frequently used in 6/8 street beats and roll-offs. The two consecutive diddles give the pattern a \"rolling\" quality distinct from other paradiddles.</p> <p>In modern drum set playing, the paradiddle-diddle is widely used in shuffle and swing contexts where the triplet-based subdivision aligns with the rhythmic feel. It also appears frequently in Afro-Cuban 6/8 patterns, jazz waltz grooves, and any musical context that calls for compound-meter fluency. The rudiment was retained as PAS #19 when the Percussive Arts Society expanded the list to 40 International Drum Rudiments in 1984 under Jay Wanamaker's committee, positioned as the final rudiment in the diddle category.</p>"},{"location":"specs/rudiments/19_paradiddle_diddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/19_paradiddle_diddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                       &gt;\nR  L  R R  L L    L  R  L L  R R\n</code></pre>"},{"location":"specs/rudiments/19_paradiddle_diddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     la    li    &amp;     la    li  | 2     la    li    &amp;     la    li  |\nHand:    | R     L     R     R     L     L   | L     R     L     L     R     R   |\nType:    | A     t     d1    d2    d1    d2  | A     t     d1    d2    d1    d2  |\nAccent:  | &gt;                                 | &gt;                                 |\n</code></pre>"},{"location":"specs/rudiments/20_flam/","title":"PAS #20: Flam","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/20_flam/#1-identity","title":"1. Identity","text":"Field Value PAS Number 20 Name Flam Category flam Family basic flam Composed Of None -- this is the primitive flam ornament, a single grace note preceding a primary stroke Related #21 Flam Accent (flam + triplet taps), #22 Flam Tap (flam + tap, double-stroke framework), #31 Drag (double grace note counterpart) NARD Original Yes"},{"location":"specs/rudiments/20_flam/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision eighth Cycle Length 1 beat Strokes Per Cycle 4 (2 grace notes + 2 primary strokes) Primary Strokes Per Cycle 2"},{"location":"specs/rudiments/20_flam/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bd - 1/32 (grace before 1&amp;) R g 4 \u00bd 1&amp; L A"},{"location":"specs/rudiments/20_flam/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/20_flam/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;       &gt;\nlR      rL\n</code></pre>"},{"location":"specs/rudiments/20_flam/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand primary 2 R accent primary n/a Right-hand flam primary stroke 3 R grace grace #4 Grace note preceding left-hand primary 4 L accent primary n/a Left-hand flam primary stroke"},{"location":"specs/rudiments/20_flam/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - The grace note and primary are heard as a single unified \"fatter\" note, not two distinct notes - The grace should \"kiss\" the drumhead just before the primary lands</p>"},{"location":"specs/rudiments/20_flam/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/20_flam/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (primary) 1.0 Full stroke, the dominant sound of the flam grace (flam) 0.50 - 0.70 Soft lead-in; should be noticeably quieter than the primary <p>The dynamic contrast between grace and primary is fundamental to the flam's character. If the grace note is too loud, the two strokes sound like a double stop (flat flam) rather than the characteristic \"breadth\" of a well-executed flam. If too quiet, the grace becomes inaudible and the ornament effect is lost.</p>"},{"location":"specs/rudiments/20_flam/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     &gt;\nlR    rL\n</code></pre> <p>Both primary strokes are accented. The grace notes are inherently soft and do not receive accent treatment.</p>"},{"location":"specs/rudiments/20_flam/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam has a symmetrical dynamic contour: each half-beat contains one soft-loud pair (grace-primary). The pattern is identical on both halves but alternates between hands. The dynamic shape is best described as two matched impulses per beat, each preceded by a soft onset. There is no crescendo or decrescendo across the cycle; the pattern repeats identically.</p>"},{"location":"specs/rudiments/20_flam/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/20_flam/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 R grace tap (&lt; 2\") fingers 4 L accent full (12\"+) wrist + arm <p>The physical essence of the flam is simultaneous preparation at two different stick heights: one hand low (grace) and the other high (primary). Both hands begin their downstroke at the same moment, but the low stick contacts the head first because it has less distance to travel, producing the characteristic grace-before-primary sound.</p>"},{"location":"specs/rudiments/20_flam/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Wide separation between grace and primary. Grace note is clearly audible as a distinct soft stroke before the primary. Full wrist + arm motion for primary, deliberate finger placement for grace. The \"gap\" between grace and primary can approach 1/16 beat. Moderate (100-140 BPM) Standard flam spacing. Grace and primary are close together but distinguishable. Grace offset settles at approximately 1/32 beat. Primary uses wrist motion; grace is finger-controlled. Fast (140-180 BPM) Tight flam spacing approaching 1/64 beat. Grace and primary nearly simultaneous but still perceptibly ordered. Primary height drops to half class; grace remains at tap. The stick height differential decreases but must not collapse to a flat flam (double stop)."},{"location":"specs/rudiments/20_flam/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/20_flam/#common-variations","title":"Common Variations","text":"<ul> <li>Flat flam (undesirable): Grace and primary strike simultaneously, producing a double stop. This is a common beginner error, not a valid variation.</li> <li>Open flam: Exaggerated spacing between grace and primary for stylistic effect, common in field drumming and rudimental solos.</li> <li>Closed flam: Very tight grace-to-primary spacing, used at fast tempos and in orchestral contexts.</li> <li>Grace note on the beat: In some interpretations (particularly Swiss and Basel drumming), the grace note is placed on the beat and the primary follows. This is the inverse of the standard PAS interpretation.</li> <li>Repeated same-hand flam: All flams led by the same hand (all lR or all rL), used as an exercise but not the standard rudiment.</li> </ul>"},{"location":"specs/rudiments/20_flam/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ability to play at different stick heights with control (height differentiation between grace and primary)</li> </ul>"},{"location":"specs/rudiments/20_flam/#1-single-stroke-roll-basic-hand-alternation-and-stroke-control","title":"1 Single Stroke Roll -- basic hand alternation and stroke control","text":""},{"location":"specs/rudiments/20_flam/#builds-toward","title":"Builds Toward","text":"<ul> <li>All flam-category rudiments (PAS #20-30) build directly on this primitive</li> </ul>"},{"location":"specs/rudiments/20_flam/#21-flam-accent-flam-triplet-taps","title":"21 Flam Accent (flam + triplet taps)","text":""},{"location":"specs/rudiments/20_flam/#22-flam-tap-flam-tap-in-eighth-note-framework","title":"22 Flam Tap (flam + tap in eighth-note framework)","text":""},{"location":"specs/rudiments/20_flam/#23-flamacue-flam-accent-pattern-in-sixteenth-notes","title":"23 Flamacue (flam + accent pattern in sixteenth notes)","text":""},{"location":"specs/rudiments/20_flam/#24-flam-paradiddle-flam-paradiddle","title":"24 Flam Paradiddle (flam + paradiddle)","text":""},{"location":"specs/rudiments/20_flam/#25-single-flammed-mill-flam-mill-pattern","title":"25 Single Flammed Mill (flam + mill pattern)","text":""},{"location":"specs/rudiments/20_flam/#27-pataflafla-compound-flam-pattern","title":"27 Pataflafla (compound flam pattern)","text":""},{"location":"specs/rudiments/20_flam/#29-inverted-flam-tap-inverted-version-of-flam-tap","title":"29 Inverted Flam Tap (inverted version of flam tap)","text":""},{"location":"specs/rudiments/20_flam/#30-flam-drag-flam-combined-with-drag","title":"30 Flam Drag (flam combined with drag)","text":""},{"location":"specs/rudiments/20_flam/#teaching-notes","title":"Teaching Notes","text":"<p>The flam is the most fundamental ornament in rudimental drumming and the basis of all flam-category rudiments. Despite its apparent simplicity, achieving consistent, well-balanced flams is a skill that requires extensive practice.</p> <p>Common mistakes: - Flat flams (double stops): both sticks striking simultaneously, producing a \"clap\" rather than a \"flam\" sound - Inconsistent spacing: the gap between grace and primary varies from flam to flam - Grace note too loud: the grace overpowers or competes with the primary, destroying the single-note illusion - Grace note too quiet or absent: the stick is too low to produce an audible grace note - Same-width flams on both hands: the non-dominant hand often produces wider or tighter flams than the dominant hand - Rushing the grace: placing the grace too far ahead of the primary, creating a diddle-like sound</p> <p>Practice strategies: - Start with the \"stick height\" approach: hold one stick at tap height and the other at full height, then drop both simultaneously - Practice each hand's flam separately (all lR, then all rL) before alternating - Use a metronome and place the primary on the click; the grace should fall naturally just before - Record and listen back, checking that left-lead and right-lead flams sound identical - Practice at very slow tempos to develop the correct muscle memory for height differentiation</p> <p>What to listen for: - Each flam should sound like one \"fat\" note, not two separate notes - Left-lead and right-lead flams should be indistinguishable in quality - Consistent spacing from flam to flam - Clear dynamic separation between grace (soft) and primary (full)</p>"},{"location":"specs/rudiments/20_flam/#historical-context","title":"Historical Context","text":"<p>The flam is one of the oldest and most fundamental drum ornaments, predating any formal rudiment codification. The word \"flam\" likely derives from the onomatopoeic representation of the sound it produces. The flam was included in the original NARD (National Association of Rudimental Drummers) standard 26 rudiments when NARD was founded in 1933, and its roots trace back through centuries of military field drumming in both European and American traditions. Charles Stewart Ashworth's A New, Useful and Complete System of Drum Beating (1812) includes flam patterns, and the ornament appears in even earlier European military manuals. The flam was retained as PAS #20 (first of the flam rudiments) when the Percussive Arts Society expanded the list to 40 in 1984. It serves as the primitive building block for all 11 flam-category rudiments (PAS #20-30), just as the single stroke (#1) is the primitive for all roll rudiments.</p>"},{"location":"specs/rudiments/20_flam/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/20_flam/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;           &gt;\nlR          rL\n</code></pre>"},{"location":"specs/rudiments/20_flam/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1           &amp;         |\nHand:    | (l)R        (r)L      |\nType:    |  g  A        g  A     |\nAccent:  |     &gt;           &gt;     |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The primary strokes land on the grid positions 1 and &amp;.</p>"},{"location":"specs/rudiments/21_flam_accent/","title":"PAS #21: Flam Accent","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/21_flam_accent/#1-identity","title":"1. Identity","text":"Field Value PAS Number 21 Name Flam Accent Category flam Family basic flam Composed Of Flam (#20) + single stroke taps in triplet subdivision Related #20 Flam (the primitive flam ornament), #22 Flam Tap (flam + tap in eighth notes), #28 Swiss Army Triplet (another triplet-based flam rudiment, but with diddles) NARD Original Yes"},{"location":"specs/rudiments/21_flam_accent/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision triplet Cycle Length 2 beats Strokes Per Cycle 8 (6 primary strokes + 2 grace notes) Primary Strokes Per Cycle 6 <p>The flam accent is one of the few standard rudiments written in triplet subdivision (3 notes per beat rather than 4). Each beat contains one triplet group of 3 primary strokes, with a flam on the first note of each group. The triplet feel gives this rudiment its characteristic flowing, rolling quality that distinguishes it from the more angular sixteenth-note-based flam rudiments.</p>"},{"location":"specs/rudiments/21_flam_accent/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u2153 1&amp; L t 4 \u2154 1a R t 5 1 - 1/32 (grace before 2) R g 6 1 2 L A 7 1 + \u2153 2&amp; R t 8 1 + \u2154 2a L t"},{"location":"specs/rudiments/21_flam_accent/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/21_flam_accent/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;              &gt;\nlR   L   R  |  rL   R   L\n</code></pre> <p>Each group of three is one beat of triplets. The flam falls on beat 1 of each triplet group, followed by two single-stroke taps that complete the triplet.</p>"},{"location":"specs/rudiments/21_flam_accent/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Accented primary -- beat 1 of first triplet 3 L tap none n/a Unaccented tap -- beat 2 of first triplet 4 R tap none n/a Unaccented tap -- beat 3 of first triplet 5 R grace grace #6 Grace note preceding left-hand flam 6 L accent primary n/a Accented primary -- beat 1 of second triplet 7 R tap none n/a Unaccented tap -- beat 2 of second triplet 8 L tap none n/a Unaccented tap -- beat 3 of second triplet"},{"location":"specs/rudiments/21_flam_accent/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #5 (R grace) precedes stroke #6 (L primary) - The grace note falls before the triplet downbeat, not on a triplet subdivision position - Because the triplet grid is wider than sixteenth grids (\u2153 beat between positions vs \u00bc), the grace note offset of -1/32 is well clear of the preceding triplet note</p>"},{"location":"specs/rudiments/21_flam_accent/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/21_flam_accent/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (primary) 1.0 Flam primary strokes on beat 1 of each triplet tap 0.65 - 0.77 The two taps following each flam grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The flam accent has three distinct dynamic levels: the loud primary (accent), the moderate taps, and the soft grace notes. This three-level dynamic hierarchy is central to the rudiment's musical character.</p>"},{"location":"specs/rudiments/21_flam_accent/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     -  |  &gt;     -     -\nlR    L     R  |  rL    R     L\n</code></pre> <p>One accent per beat, always on the first triplet note (which is the flam). The two taps that follow are unaccented.</p>"},{"location":"specs/rudiments/21_flam_accent/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam accent produces a repeating \"strong-weak-weak\" pattern within each beat, mirroring the natural stress pattern of triple meter. The accented flam provides a clear rhythmic anchor, while the two following taps create a sense of motion and flow toward the next accent. This accent-tap-tap contour gives the flam accent its characteristic lilting, waltz-like feel. The alternating lead hand (R on beat 1, L on beat 2) ensures the pattern feels balanced and naturally cyclic. The overall contour across the 2-beat cycle is symmetrical: each beat has the same strong-weak-weak shape, but with opposite hand leading.</p>"},{"location":"specs/rudiments/21_flam_accent/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/21_flam_accent/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R tap low (2-6\") wrist 5 R grace tap (&lt; 2\") fingers 6 L accent full (12\"+) wrist + arm 7 R tap low (2-6\") wrist 8 L tap low (2-6\") wrist <p>The physical challenge of the flam accent lies in the transition sequence within each hand. Consider the right hand's path through one full cycle: it plays a full-height primary (stroke #2), immediately drops to low-height tap (stroke #4), then must prepare as a grace note (stroke #5) before the left hand's primary. This full-to-low-to-tap height sequence requires smooth, controlled stick management.</p>"},{"location":"specs/rudiments/21_flam_accent/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-90 BPM) Each triplet note is distinctly articulated. Full wrist + arm motion for accented flams, deliberate wrist strokes for taps. Grace notes clearly audible with wide spacing from primary. The triplet subdivision is felt as three distinct events per beat. Practice focus: accent-tap dynamic contrast and flam quality. Moderate (90-130 BPM) Standard performance tempo. Wrist-driven strokes predominate. The accent stroke uses a controlled downstroke (accent, then stop the stick low for the following tap). The two taps flow naturally with wrist motion. Grace note spacing tightens to standard -1/32 offset. The rolling triplet feel becomes apparent. Fast (130-160 BPM) Finger control becomes primary for taps. The accent stroke transitions to a Moeller whip to maintain dynamic contrast at speed. Stick heights compress: accent drops to half class, taps to tap class. Grace note spacing approaches -1/64. The rudiment begins to feel like a continuous flowing motion rather than discrete triplet groups."},{"location":"specs/rudiments/21_flam_accent/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/21_flam_accent/#common-variations","title":"Common Variations","text":"<ul> <li>Flam accent in 6/8: The same pattern fits naturally into compound time, with two flam accent groups per bar of 6/8</li> <li>Inverted flam accent: The flam is placed on the third triplet note instead of the first, creating a pickup-style feel</li> <li>Accented taps variation: Adding accents to the second or third triplet notes for dynamic independence training</li> <li>Flam accent with diddles: Replacing taps with diddles for a more complex variation (related to flam paradiddle-diddle)</li> <li>No-flam preparation: Practice the accent-tap-tap pattern as plain triplets (without grace notes) to isolate the accent pattern from the ornament</li> </ul>"},{"location":"specs/rudiments/21_flam_accent/#prerequisites","title":"Prerequisites","text":"<ul> <li>Comfort with triplet subdivision -- the player must be able to feel and count in groups of three</li> </ul>"},{"location":"specs/rudiments/21_flam_accent/#20-flam-the-basic-flam-ornament-must-be-solid-before-adding-the-triplet-context","title":"20 Flam -- the basic flam ornament must be solid before adding the triplet context","text":""},{"location":"specs/rudiments/21_flam_accent/#1-single-stroke-roll-alternating-single-strokes-form-the-tap-portions","title":"1 Single Stroke Roll -- alternating single strokes form the tap portions","text":""},{"location":"specs/rudiments/21_flam_accent/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in jazz comping, waltz-time fills, and compound-meter passages</li> </ul>"},{"location":"specs/rudiments/21_flam_accent/#28-swiss-army-triplet-triplet-based-flam-with-diddle-instead-of-two-taps","title":"28 Swiss Army Triplet (triplet-based flam with diddle instead of two taps)","text":""},{"location":"specs/rudiments/21_flam_accent/#23-flamacue-more-complex-accent-pattern-with-flams","title":"23 Flamacue (more complex accent pattern with flams)","text":""},{"location":"specs/rudiments/21_flam_accent/#30-flam-drag-flam-combined-with-drag-ornament","title":"30 Flam Drag (flam combined with drag ornament)","text":""},{"location":"specs/rudiments/21_flam_accent/#teaching-notes","title":"Teaching Notes","text":"<p>The flam accent is one of the most musical of the 40 rudiments, and its triplet feel makes it immediately applicable to jazz, 6/8 time, and Afro-Cuban styles. It is often the first triplet-based rudiment students encounter.</p> <p>Common mistakes: - Playing in sixteenth notes instead of triplets -- the flam accent is NOT in 4/4 sixteenth-note subdivision; it is in triplet subdivision (3 evenly spaced notes per beat) - Even dynamics across all three triplet notes -- the accent on the flam must be noticeably louder than the two taps - Rushing the two taps after the accent -- the taps should be evenly spaced within the triplet, not crammed toward the next beat - Flat flams on the accent -- the grace note must be clearly softer and earlier than the primary - Losing the alternation -- the lead hand must switch every beat (R-lead, then L-lead) - Uneven triplet spacing -- all three notes in each triplet group should be equidistant in time</p> <p>Practice strategies: - Begin by playing accented triplets (no flams): &gt;R L R | &gt;L R L, focusing on the accent pattern - Add the grace notes only after the accent-tap-tap pattern is comfortable - Practice with a metronome set to the triplet subdivision to lock in spacing - Use the counting \"1-&amp;-a, 2-&amp;-a\" for each beat to internalize the triplet grid - Practice each hand's lead separately before alternating</p> <p>What to listen for: - Clear three-level dynamic hierarchy: grace (soft) &lt; tap (medium) &lt; accent (loud) - Even triplet spacing -- no rushing or dragging within the group - Identical sound quality regardless of which hand leads - The flam on beat 1 of each group should sound unified (grace + primary as one event) - A smooth, flowing feel that does not sound choppy or angular</p>"},{"location":"specs/rudiments/21_flam_accent/#historical-context","title":"Historical Context","text":"<p>The flam accent was included in the original NARD 26 rudiments and has deep roots in American and European field drumming traditions. Its triplet feel connects it to the Swiss and Basel drumming traditions, where triple-meter patterns are fundamental. The rudiment was retained as PAS #21 in the 1984 expansion to 40 rudiments. The flam accent is particularly important in jazz drumming, where the triplet feel aligns naturally with swing rhythm. Legendary jazz drummer Joe Morello was known for his impeccable flam accents, and the rudiment appears frequently in George Lawrence Stone's Stick Control (1935) and Charles Wilcoxon's rudimental method books. In the drum corps tradition, the flam accent is a staple of snare drum ensemble writing, often used in compound-meter passages and transitions.</p>"},{"location":"specs/rudiments/21_flam_accent/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/21_flam_accent/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;\nlR   L   R  |  rL   R   L\n</code></pre>"},{"location":"specs/rudiments/21_flam_accent/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1        &amp;        a     | 2        &amp;        a     |\nHand:    | (l)R     L        R     | (r)L     R        L     |\nType:    |  g  A    t        t     |  g  A    t        t     |\nAccent:  |     &gt;                   |     &gt;                   |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The triplet grid divides each beat into three equal parts at positions 0, \u2153, and \u2154 of each beat.</p>"},{"location":"specs/rudiments/22_flam_tap/","title":"PAS #22: Flam Tap","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/22_flam_tap/#1-identity","title":"1. Identity","text":"Field Value PAS Number 22 Name Flam Tap Category flam Family basic flam Composed Of Flam (#20) + tap, built on a double stroke roll (#6) framework with the first of each double flammed Related #20 Flam (the primitive flam ornament), #21 Flam Accent (flam + taps in triplets), #6 Double Stroke Open Roll (same RR LL hand pattern without grace notes), #29 Inverted Flam Tap (flam on the second stroke of each double instead of the first) NARD Original Yes"},{"location":"specs/rudiments/22_flam_tap/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision eighth Cycle Length 1 beat Strokes Per Cycle 6 (4 primary strokes + 2 grace notes) Primary Strokes Per Cycle 4 <p>The flam tap is structured as a double stroke roll (RR LL) with a flam added to the first stroke of each double. Each hand plays three consecutive events: grace note (opposite hand), accented primary, then tap. The pattern alternates between hands every half beat.</p>"},{"location":"specs/rudiments/22_flam_tap/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bc 1e R t 4 \u00bd - 1/32 (grace before 1&amp;) R g 5 \u00bd 1&amp; L A 6 \u00be 1a L t <p>Note: Although the base subdivision is eighth notes (flams land on eighth-note positions 1 and &amp;), the tap strokes subdivide each half beat, placing them on the sixteenth-note \"e\" and \"a\" positions. The flam tap thus occupies a sixteenth-note grid in practice, but its primary rhythmic anchors are the eighth-note flam placements.</p>"},{"location":"specs/rudiments/22_flam_tap/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/22_flam_tap/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;\nlR  R  | rL  L\n</code></pre> <p>Each group consists of a flam (grace + accented primary) followed by a tap on the same hand as the primary. The lead hand alternates every half beat.</p>"},{"location":"specs/rudiments/22_flam_tap/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Right-hand flam primary stroke (accented) 3 R tap none n/a Right-hand tap following the flam 4 R grace grace #5 Grace note preceding left-hand flam 5 L accent primary n/a Left-hand flam primary stroke (accented) 6 L tap none n/a Left-hand tap following the flam"},{"location":"specs/rudiments/22_flam_tap/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #4 (R grace) precedes stroke #5 (L primary) - The grace note and primary are heard as a single unified note - Important: the grace note for the second flam (stroke #4) is played by the right hand, which just played the tap (stroke #3). This rapid transition from tap to grace on the same hand is a key technical challenge.</p>"},{"location":"specs/rudiments/22_flam_tap/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/22_flam_tap/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (primary) 1.0 Flam primary strokes on the eighth-note positions tap 0.65 - 0.77 The tap following each flam, on the same hand grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The flam tap features the same three-level dynamic hierarchy as the flam accent: grace (soft), tap (medium), accent (loud). However, the dynamic contour differs because the tap follows the accent on the same hand, creating an accent-to-tap transition within a single hand rather than between hands.</p>"},{"location":"specs/rudiments/22_flam_tap/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     &gt;     -\nlR    R     rL    L\n</code></pre> <p>Accents fall on every other primary stroke (the flammed notes), with taps between.</p>"},{"location":"specs/rudiments/22_flam_tap/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam tap produces a repeating \"strong-weak\" pattern at the eighth-note level: accented flam, then unaccented tap, alternating between hands. This creates a steady pulse of accented strokes on the eighth-note grid, with the taps filling in the sixteenth-note subdivisions between. The overall feel is more driving and rhythmic than the flam accent's flowing triplet character. The accent-tap pair on each hand mimics the feel of a double stroke roll, but with the added weight of the flam on the first stroke.</p>"},{"location":"specs/rudiments/22_flam_tap/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/22_flam_tap/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 R tap low (2-6\") wrist 4 R grace tap (&lt; 2\") fingers 5 L accent full (12\"+) wrist + arm 6 L tap low (2-6\") wrist <p>The primary physical challenge of the flam tap is the rapid height transition within each hand across the cycle. Consider the right hand's path: it plays a full-height accented primary (#2), immediately drops to a low-height tap (#3), then must transition to a tap-height grace note (#4). This full-to-low-to-tap height sequence happens within a single beat and requires a controlled \"downstroke-tap-upstroke\" stick motion. The accent is a downstroke (start high, stop low), the tap stays low, and the grace requires the stick to be near the head for the next hand's primary.</p>"},{"location":"specs/rudiments/22_flam_tap/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. Clear separation between the flam and the following tap. The double-stroke nature (RR, LL) is clearly audible. Grace notes have wide spacing from primary (-1/16 range). Focus on matching left-hand and right-hand flam quality. Moderate (100-140 BPM) Wrist-driven strokes. The accent uses a controlled downstroke technique: the stick comes from full height for the accent and is caught low for the tap. Grace note spacing at standard -1/32. The rudiment begins to flow as a continuous alternating pattern. The transition from tap to grace (same hand) becomes the critical control point. Fast (140-180 BPM) Finger control for taps and grace notes. The accent drops to half height class. The double-stroke feel increases as the pattern approaches a flammed double stroke roll. Grace note spacing tightens to -1/64. Moeller technique (whip motion) may be employed for the accent strokes to maintain dynamic contrast. The stick path becomes a continuous, circular motion."},{"location":"specs/rudiments/22_flam_tap/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/22_flam_tap/#common-variations","title":"Common Variations","text":"<ul> <li>Inverted flam tap (#29): The flam is placed on the second stroke of each double instead of the first (R lR | L rL), creating a distinctly different accent pattern and hand coordination challenge</li> <li>Flam tap with buzz: Replace the tap with a buzz stroke for a more sustained sound (less common, but used in some corps-style literature)</li> <li>Double flam tap: Two flam taps followed by a different rudiment or pattern break</li> <li>No-flam preparation: Practice as a double stroke roll with accents on the first of each double (&gt;R R &gt;L L) to isolate the accent-tap hand motion before adding grace notes</li> <li>Swiss-style flam tap: Played with wider, more open flam spacing in the Basel drumming tradition</li> </ul>"},{"location":"specs/rudiments/22_flam_tap/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke control -- the ability to play an accent and stop the stick low for the following tap</li> </ul>"},{"location":"specs/rudiments/22_flam_tap/#20-flam-the-basic-flam-ornament-must-be-consistent-on-both-hands","title":"20 Flam -- the basic flam ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/22_flam_tap/#6-double-stroke-open-roll-the-rr-ll-alternation-pattern-is-the-structural-foundation","title":"6 Double Stroke Open Roll -- the RR LL alternation pattern is the structural foundation","text":""},{"location":"specs/rudiments/22_flam_tap/#1-single-stroke-roll-basic-hand-alternation","title":"1 Single Stroke Roll -- basic hand alternation","text":""},{"location":"specs/rudiments/22_flam_tap/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in rudimental solos, drum corps snare parts, and drumset fills</li> </ul>"},{"location":"specs/rudiments/22_flam_tap/#29-inverted-flam-tap-inverted-version-with-flam-on-the-second-double","title":"29 Inverted Flam Tap (inverted version with flam on the second double)","text":""},{"location":"specs/rudiments/22_flam_tap/#24-flam-paradiddle-flam-combined-with-paradiddle-sticking","title":"24 Flam Paradiddle (flam combined with paradiddle sticking)","text":""},{"location":"specs/rudiments/22_flam_tap/#27-pataflafla-complex-compound-flam-pattern","title":"27 Pataflafla (complex compound flam pattern)","text":""},{"location":"specs/rudiments/22_flam_tap/#25-single-flammed-mill-continuous-same-hand-flam-tap-pattern","title":"25 Single Flammed Mill (continuous same-hand flam + tap pattern)","text":""},{"location":"specs/rudiments/22_flam_tap/#teaching-notes","title":"Teaching Notes","text":"<p>The flam tap is one of the most practical and widely used flam rudiments. Its connection to the double stroke roll makes it an excellent vehicle for developing stick control, downstroke technique, and hand independence.</p> <p>Common mistakes: - Flat flams: Both sticks striking simultaneously, especially at faster tempos where the grace-to-primary spacing collapses - Accent and tap at the same volume: The dynamic contrast between the flam (accent) and the following tap must be clear - Uneven doubles: The spacing between the accent and the tap should be even (each occupying a sixteenth-note position), not rushed or lagging - Grace note on the wrong hand: The grace is always played by the opposite hand from the primary -- left grace before right primary, right grace before left primary - \"Galloping\" rhythm: The accent-tap pairs should be evenly spaced, not lopsided - Losing the tap-to-grace transition: The hand that just played a tap must immediately prepare as a grace note for the other hand's flam. This is the hardest coordination point and often breaks down at speed.</p> <p>Practice strategies: - Start with accented doubles (no flams): &gt;R R &gt;L L, focusing on the downstroke-tap stick motion - Add grace notes only after the accented double pattern is even and controlled - Practice slowly with a metronome on the eighth-note pulse (flams on the click) - Isolate the \"tap to grace\" transition: play the tap, pause, then execute the grace + opposite primary - Practice at a wide range of tempos to develop both the open (slow) and closed (fast) versions - Compare the sound of your right-lead flam (lR) with your left-lead flam (rL) and work to match them</p> <p>What to listen for: - Clear dynamic separation: grace (soft) &lt; tap (medium) &lt; accent (loud) - Even spacing between accent and tap within each double - Identical flam quality on both hands (left-lead and right-lead flams should sound the same) - Smooth alternation -- the transition from one hand's tap to the other hand's grace should be seamless - The overall pattern should have a steady, driving eighth-note pulse from the accented flams</p>"},{"location":"specs/rudiments/22_flam_tap/#historical-context","title":"Historical Context","text":"<p>The flam tap was included in the original NARD 26 rudiments and is one of the most commonly encountered rudiments in both rudimental and orchestral percussion. Its direct relationship to the double stroke roll makes it a natural extension of fundamental technique. The rudiment was retained as PAS #22 in the 1984 expansion to 40 rudiments. The flam tap is ubiquitous in drum corps snare drum literature, where it serves as a building block for more complex passages. Its inverted form (#29, Inverted Flam Tap) was one of the 14 new rudiments added in the 1984 PAS expansion, demonstrating the flam tap's importance as a pattern worthy of inversion and further study. In John S. Pratt's 14 Modern Contest Solos (1959), the flam tap features prominently and is considered essential repertoire for competitive rudimental snare drumming.</p>"},{"location":"specs/rudiments/22_flam_tap/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/22_flam_tap/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;           &gt;\nlR   R   |  rL   L\n</code></pre>"},{"location":"specs/rudiments/22_flam_tap/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   |\nHand:    | (l)R  R     (r)L  L   |\nType:    |  g A  t      g A  t   |\nAccent:  |    &gt;            &gt;     |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). Primary strokes land on eighth-note positions (1 and &amp;), while taps fall on the sixteenth-note subdivisions (e and a).</p>"},{"location":"specs/rudiments/23_flamacue/","title":"PAS #23: Flamacue","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/23_flamacue/#1-identity","title":"1. Identity","text":"Field Value PAS Number 23 Name Flamacue Category flam Family compound flam Composed Of Flam (#20) + five-note single stroke pattern with accents on first and last primary strokes Related #20 Flam (the primitive flam ornament), #21 Flam Accent (flam + triplet taps), #1 Single Stroke Roll (the underlying alternating singles), #22 Flam Tap (another compound flam with accent-tap framework) NARD Original Yes"},{"location":"specs/rudiments/23_flamacue/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 12 (10 primary strokes + 2 grace notes) Primary Strokes Per Cycle 10 <p>The flamacue is built on a five-note single stroke pattern per half-cycle, bookended by two accented strokes: the first is a flam (grace + accented primary) and the fifth is a standalone accent. Three unaccented taps fill the space between. The full cycle contains two mirror-image halves (right-lead and left-lead), yielding 10 primary strokes across 3 beats (12 sixteenth-note slots). The distinctive feature of the flamacue is the accent at the END of each group rather than solely at the beginning, giving the rudiment a characteristic sense of resolution or \"landing\" at the end of each phrase.</p>"},{"location":"specs/rudiments/23_flamacue/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bc 1e L t 4 \u00bd 1&amp; R t 5 \u00be 1a L t 6 1 2 R A 7 1 + \u00bd - 1/32 (grace before 2&amp;) R g 8 1 + \u00bd 2&amp; L A 9 1 + \u00be 2a R t 10 2 3 L t 11 2 + \u00bc 3e R t 12 2 + \u00bd 3&amp; L A <p>Note: The first half (strokes 1-6) occupies beats 1-2 with the flam on beat 1 and the accent on beat 2. The second half (strokes 7-12) occupies beats 2&amp;-3&amp; with the flam on beat 2&amp; and the accent on beat 3&amp;. The two halves are separated by an eighth-note gap (beat 2e is empty), giving each group a pickup-like entry after the preceding accent.</p>"},{"location":"specs/rudiments/23_flamacue/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/23_flamacue/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;              &gt;           &gt;              &gt;\nlR   L   R   L   R    |   rL   R   L   R   L\n</code></pre> <p>Each group of five primary strokes begins with a flam (accented) and ends with a standalone accent. The three middle strokes are unaccented taps alternating hands.</p>"},{"location":"specs/rudiments/23_flamacue/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Accented flam primary -- opening of right-lead half 3 L tap none n/a First unaccented tap 4 R tap none n/a Second unaccented tap 5 L tap none n/a Third unaccented tap 6 R accent none n/a Closing accent of right-lead half (no flam) 7 R grace grace #8 Grace note preceding left-hand flam 8 L accent primary n/a Accented flam primary -- opening of left-lead half 9 R tap none n/a First unaccented tap 10 L tap none n/a Second unaccented tap 11 R tap none n/a Third unaccented tap 12 L accent none n/a Closing accent of left-lead half (no flam)"},{"location":"specs/rudiments/23_flamacue/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #7 (R grace) precedes stroke #8 (L primary) - Only the FIRST primary stroke of each half-cycle receives a flam; the final accent (strokes #6 and #12) is a clean accent without a grace note</p>"},{"location":"specs/rudiments/23_flamacue/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/23_flamacue/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Accented primary of the opening flam accent (closing) 1.0 Standalone accent at the end of each group tap 0.65 - 0.77 The three unaccented taps between the accents grace (flam) 0.50 - 0.70 Soft grace note preceding each flam primary <p>The flamacue has a distinctive two-accent dynamic architecture: each half-cycle begins AND ends with a full-velocity accent, with three taps at reduced velocity in between. This \"accent-tap-tap-tap-accent\" contour creates a sense of departure and arrival that distinguishes the flamacue from other flam rudiments. The grace note on the opening flam adds weight to the first accent, while the closing accent is clean and sharp.</p>"},{"location":"specs/rudiments/23_flamacue/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;              &gt;           &gt;              &gt;\nlR   L   R   L   R    |   rL   R   L   R   L\n</code></pre> <p>Two accents per half-cycle: one on the opening flam and one on the closing stroke. The three taps in between are unaccented.</p>"},{"location":"specs/rudiments/23_flamacue/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flamacue produces a symmetrical \"bookend\" accent pattern within each 5-note group: a strong, flammed opening accent, three even taps at a reduced dynamic, and a strong closing accent. This creates a distinctive arc -- loud, soft, soft, soft, loud -- that gives the rudiment its unique musical character. The closing accent provides a sense of resolution that differentiates the flamacue from most other rudiments, where the accent typically falls only at the beginning of each group. The two halves of the cycle mirror each other with opposite hand leads, ensuring balanced development. The overall 3-beat cycle has a slightly asymmetric feel, as each half does not align with a simple 1-beat or 2-beat boundary.</p>"},{"location":"specs/rudiments/23_flamacue/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/23_flamacue/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R tap low (2-6\") wrist 5 L tap low (2-6\") wrist 6 R accent full (12\"+) wrist + arm 7 R grace tap (&lt; 2\") fingers 8 L accent full (12\"+) wrist + arm 9 R tap low (2-6\") wrist 10 L tap low (2-6\") wrist 11 R tap low (2-6\") wrist 12 L accent full (12\"+) wrist + arm <p>The primary physical challenge of the flamacue is the rapid height transitions within each hand. The right hand, for example, plays a full-height accented flam primary (#2), drops to low-height taps (#4), rises back to full-height for the closing accent (#6), then immediately transitions to a tap-height grace note (#7). This full-low-full-tap height sequence demands excellent stick control and downstroke/upstroke technique. The closing accent followed immediately by a grace note (same hand: R plays accent #6, then grace #7) is particularly challenging -- the hand must go from a full-height accent to a near-motionless grace position in a single sixteenth-note interval.</p>"},{"location":"specs/rudiments/23_flamacue/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for both accents. Clear separation between grace and primary on the opening flam. The three taps are deliberate wrist strokes at low height. The accent-to-grace transition (strokes 6-7) can be executed with controlled upstroke motion. Each stroke is individually articulated. Moderate (100-140 BPM) Wrist-driven strokes predominate. The opening flam accent uses a controlled downstroke. Taps flow naturally between accents. The closing accent employs an upstroke preparation leading into the next group's grace note. Grace note spacing at standard -1/32. The overall five-note pattern begins to feel like a single musical gesture. Fast (140-160 BPM) Finger control for taps. Both accents drop to half height class. The grace note spacing tightens toward -1/64. The accent-to-grace transition requires Moeller whip technique to maintain the height differential. The five-note groups flow continuously with minimal separation between halves."},{"location":"specs/rudiments/23_flamacue/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/23_flamacue/#common-variations","title":"Common Variations","text":"<ul> <li>Flamacue with flam on the closing accent: In some traditional interpretations, the final accent also receives a flam, making the last note of one group overlap with the first of the next (the shared-flam interpretation)</li> <li>Flamacue as a pickup figure: The five-note group can be treated as a pickup into a downbeat, placing the closing accent on a strong beat</li> <li>Accented flamacue: Adding dynamic shaping to the three taps (crescendo toward the closing accent) for musical phrasing</li> <li>No-flam preparation: Practice the five-note accent pattern (&gt;R L R L R&gt;) as alternating singles with accents to isolate the accent pattern from the ornament</li> </ul>"},{"location":"specs/rudiments/23_flamacue/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke and upstroke control -- the ability to play an accent and immediately transition to a grace note position (accent-to-grace on the same hand)</li> </ul>"},{"location":"specs/rudiments/23_flamacue/#20-flam-the-basic-flam-ornament-must-be-consistent-on-both-hands","title":"20 Flam -- the basic flam ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/23_flamacue/#1-single-stroke-roll-alternating-single-strokes-at-various-dynamics","title":"1 Single Stroke Roll -- alternating single strokes at various dynamics","text":""},{"location":"specs/rudiments/23_flamacue/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in rudimental solos where a strong phrase ending is needed</li> <li>The accent-to-grace transition skill developed here transfers to all advanced flam rudiments</li> </ul>"},{"location":"specs/rudiments/23_flamacue/#27-pataflafla-more-complex-compound-flam-pattern","title":"27 Pataflafla (more complex compound flam pattern)","text":""},{"location":"specs/rudiments/23_flamacue/#30-flam-drag-flam-combined-with-drag","title":"30 Flam Drag (flam combined with drag)","text":""},{"location":"specs/rudiments/23_flamacue/#teaching-notes","title":"Teaching Notes","text":"<p>The flamacue is often underappreciated among the compound flam rudiments, but it develops a critical skill: the accent-to-grace transition on the same hand. This transition (closing accent immediately followed by a grace note for the next group) is one of the most demanding coordination challenges in rudimental drumming and transfers directly to many advanced patterns.</p> <p>Common mistakes: - Losing the closing accent: players often treat the last stroke as a tap, eliminating the distinctive \"bookend\" accent pattern - Flat flam on the opening: the grace note must be clearly softer and earlier than the primary - Uneven taps: the three taps between accents should be evenly spaced at the sixteenth-note grid positions - Same dynamic for both accents: while both are at accent velocity, the opening flam should sound different from the closing clean accent due to the grace note adding breadth - Rushing through the taps to reach the closing accent</p> <p>Practice strategies: - Begin with the five-note accent pattern without flams: &gt;R L R L R&gt; | &gt;L R L R L&gt; - Add the grace note to the opening accent only after the accent pattern is comfortable - Isolate the accent-to-grace transition: play the closing accent, pause, then execute the grace + opposite primary - Practice at very slow tempos to develop the stick height transitions (full-low-low-low-full-tap) - Count \"1-e-&amp;-a-2\" for the first half to internalize the sixteenth-note grid positions</p> <p>What to listen for: - Clear two-accent bookend structure in each five-note group - Even taps between the accents at a noticeably lower dynamic - Clean flam on the opening (grace clearly preceding primary) - Clean accent on the closing (no unintended grace or flam) - Identical quality regardless of which hand leads</p>"},{"location":"specs/rudiments/23_flamacue/#historical-context","title":"Historical Context","text":"<p>The flamacue was included in the original NARD 26 rudiments when NARD was established in 1933, and its roots trace back to early American military drumming traditions. The name \"flamacue\" is likely a contraction of \"flam\" and \"cue,\" reflecting its historical use as a signal or cue pattern in field drumming. Some historians attribute its codification to Bruce and Emmett's drumming manuals. The flamacue appears in Ashworth's A New, Useful and Complete System of Drum Beating (1812) in an early form. It was retained as PAS #23 in the 1984 expansion to 40 rudiments, positioned as the first compound flam rudiment. The flamacue's distinctive closing accent makes it one of the most recognizable rudiments in the flam family, and it remains a staple of competitive rudimental solos and drum corps snare drum parts.</p>"},{"location":"specs/rudiments/23_flamacue/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/23_flamacue/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;           &gt;              &gt;\nlR   L   R   L   R    |   rL   R   L   R   L\n</code></pre>"},{"location":"specs/rudiments/23_flamacue/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2                 &amp;     a   | 3     e     &amp;         |\nHand:    | (l)R  L     R     L   | R                 (r)L  R   | L     R     L         |\nType:    |  g A  t     t     t   | A                  g A  t   | t     t     A         |\nAccent:  |    &gt;                  | &gt;                    &gt;      |                 &gt;     |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The first half occupies beats 1-2 (flam on 1, accent on 2). The second half occupies beats 2&amp;-3&amp; (flam on 2&amp;, accent on 3&amp;).</p>"},{"location":"specs/rudiments/24_flam_paradiddle/","title":"PAS #24: Flam Paradiddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 24 Name Flam Paradiddle Category flam Family compound flam Composed Of Flam (#20) + Single Paradiddle (#16) -- a paradiddle with the accented lead stroke flammed Related #20 Flam (the primitive flam ornament), #16 Single Paradiddle (the underlying sticking pattern), #22 Flam Tap (another flam + double-stroke combination), #26 Flam Paradiddle-Diddle (extends this pattern with a second diddle), #6 Double Stroke Open Roll (the diddle component) NARD Original Yes"},{"location":"specs/rudiments/24_flam_paradiddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2.5 beats Strokes Per Cycle 10 (8 primary strokes + 2 grace notes) Primary Strokes Per Cycle 8 <p>The flam paradiddle is structurally identical to the single paradiddle (R L R R | L R L L) with a flam added to the accented lead stroke of each half-cycle. Each half has 4 primary strokes (1 accent + 1 tap + 2 diddle strokes) plus 1 grace note. The 2.5-beat cycle distributes 8 primary strokes across 10 sixteenth-note slots, with the fifth slot of each half being the diddle d2 landing on the \"a\" of the beat. The hand-lead switching property of the paradiddle is preserved: the diddle at the end of each half forces the opposite hand to lead the next half.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bc 1e L t 4 \u00bd 1&amp; R d1 5 \u00be 1a R d2 6 1 + \u00bc - 1/32 (grace before 2e) R g 7 1 + \u00bc 2e L A 8 1 + \u00bd 2&amp; R t 9 1 + \u00be 2a L d1 10 2 3 L d2 <p>Note: The YAML defines beats_per_cycle as 2.5, which provides 10 sixteenth-note slots for 8 primary strokes plus 2 grace notes. The first half occupies beat 1 (slots 1, 1e, 1&amp;, 1a) and the second half occupies beats 2e through 3 (slots 2e, 2&amp;, 2a, 3), with beat 2 being a rest or transition between the two halves.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                 &gt;\nlR   L   R R  |  rL   R   L L\n</code></pre> <p>Each group is a single paradiddle (accent, tap, diddle) with a flam on the accented lead stroke. The lead hand alternates each half-cycle.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Accented flam primary -- right-hand paradiddle lead 3 L tap none n/a Unaccented tap -- the \"para\" alternation stroke 4 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 5 R d2 none n/a Second stroke of right-hand diddle, finger-controlled 6 R grace grace #7 Grace note preceding left-hand flam 7 L accent primary n/a Accented flam primary -- left-hand paradiddle lead 8 R tap none n/a Unaccented tap -- the \"para\" alternation stroke 9 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 10 L d2 none n/a Second stroke of left-hand diddle, finger-controlled"},{"location":"specs/rudiments/24_flam_paradiddle/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #6 (R grace) precedes stroke #7 (L primary) - The grace note for the second flam (stroke #6) is played by the right hand, which just completed its diddle (strokes #4-5). This transition from diddle d2 to grace on the same hand is a key technical challenge.</p> <p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the \"&amp;\" of the beat; d2 falls on the \"a\" of the beat - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Full-stroke flam primary at the top of each half-cycle tap 0.65 - 0.77 Unaccented single stroke following the flam d1 0.65 - 0.77 First diddle stroke at tap level d2 0.90 - 0.98 x d1 Slight decay on the second bounce of the diddle grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The flam paradiddle combines the three-level dynamic hierarchy of the flam (grace-accent) with the accent-tap-diddle contour of the paradiddle. The flam adds weight and breadth to the paradiddle's accented lead stroke, making the accent-to-tap contrast even more pronounced than in the plain single paradiddle. The diddle strokes sit at the tap dynamic level, with d2 decaying slightly from d1.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;              &gt;\nlR   L   RR | rL   R   LL\n</code></pre> <p>One accent per half-cycle, always on the flammed lead stroke. The tap and diddle strokes are all unaccented. This matches the single paradiddle's accent pattern with the added weight of the flam.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam paradiddle produces a repeating contour of one strong, flammed accent followed by three lighter strokes (tap + diddle). The flam grace note adds a soft onset before each accent, creating a \"dip-then-peak\" dynamic shape at the start of each half-cycle. The three unaccented strokes (tap, d1, d2) create a gradual dynamic decay toward the next accent. The diddle at the end provides a smooth rhythmic transition into the next half-cycle's flam. The overall feel is a strong, weighted pulse on each accent, with the flam adding breadth that makes each accent feel bigger than a plain paradiddle accent.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R d1 low (2-6\") wrist 5 R d2 tap (&lt; 2\") fingers 6 R grace tap (&lt; 2\") fingers 7 L accent full (12\"+) wrist + arm 8 R tap low (2-6\") wrist 9 L d1 low (2-6\") wrist 10 L d2 tap (&lt; 2\") fingers <p>The physical challenge of the flam paradiddle combines the demands of the flam and the paradiddle. The right hand's path through the first half-cycle illustrates the complexity: it plays a full-height accented primary (#2), drops to low-height for the diddle d1 (#4), finger-controls the d2 (#5), and then immediately transitions to a tap-height grace note (#6) for the opposite hand's flam. The diddle-d2-to-grace transition (strokes #5-6 on the same hand) requires the stick to remain near the head after the diddle rebound and produce a controlled grace note -- essentially staying at tap height across both strokes.</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. Clear separation between grace and primary. The paradiddle sticking (accent, tap, diddle) is individually articulated. Diddles are open -- two distinct wrist strokes. Focus on matching flam quality between right-lead and left-lead halves. The diddle-to-grace transition can be executed deliberately. Moderate (100-140 BPM) Wrist-driven strokes. The accent uses a controlled downstroke, catching the stick low for the following tap. Diddles shift to wrist-finger technique (d1 wrist, d2 finger rebound). Grace note spacing at standard -1/32. The d2-to-grace transition becomes the critical control point -- the same hand must produce a finger-controlled diddle rebound and then immediately serve as a grace note. Fast (140-180 BPM) Finger control for taps, diddles, and grace notes. Accents drop to half height. The paradiddle flow becomes continuous, with the flam adding a slight rhythmic \"push\" at the start of each group. Grace note spacing tightens to -1/64. Moeller technique for accents to maintain dynamic contrast. The diddle-to-grace transition on the same hand becomes nearly automatic through the finger rebound."},{"location":"specs/rudiments/24_flam_paradiddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#common-variations","title":"Common Variations","text":"<ul> <li>Flamadiddle: An alternate name for this rudiment used colloquially, emphasizing its flam + paradiddle construction</li> <li>Flam paradiddle with inverted diddle: Moving the diddle to the beginning of the group instead of the end</li> <li>Double flam paradiddle: Adding more single strokes before the diddle (analogous to the relationship between single and double paradiddle)</li> <li>No-flam preparation: Practice as a plain single paradiddle (R L R R | L R L L) with accents to isolate the accent-tap-diddle pattern before adding grace notes</li> <li>Paradiddle with flam on different beats: Moving the flam to the tap or diddle for coordination development (non-standard exercise)</li> </ul>"},{"location":"specs/rudiments/24_flam_paradiddle/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke control -- the ability to play an accented flam and stop the stick low for the following tap</li> </ul>"},{"location":"specs/rudiments/24_flam_paradiddle/#20-flam-consistent-flams-on-both-hands","title":"20 Flam -- consistent flams on both hands","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#16-single-paradiddle-the-accent-tap-diddle-pattern-must-be-secure","title":"16 Single Paradiddle -- the accent-tap-diddle pattern must be secure","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#22-flam-tap-develops-the-flam-within-a-double-stroke-context-skill","title":"22 Flam Tap -- develops the flam-within-a-double-stroke-context skill","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps snare drum parts, rudimental solos, and drum set fills</li> </ul>"},{"location":"specs/rudiments/24_flam_paradiddle/#26-flam-paradiddle-diddle-extends-with-a-second-diddle","title":"26 Flam Paradiddle-Diddle (extends with a second diddle)","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#27-pataflafla-complex-compound-flam-pattern","title":"27 Pataflafla (complex compound flam pattern)","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#36-drag-paradiddle-1-drag-ornament-version-of-the-paradiddle","title":"36 Drag Paradiddle #1 (drag ornament version of the paradiddle)","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#teaching-notes","title":"Teaching Notes","text":"<p>The flam paradiddle is one of the most intuitive compound flam rudiments: simply add a flam to the existing single paradiddle accent. This makes it an excellent entry point into compound flam rudiments for students who already have solid paradiddle and flam fundamentals.</p> <p>Common mistakes: - Flat flam on the accented lead stroke: the grace must be clearly softer and earlier than the primary, especially at faster tempos where the added complexity of the paradiddle can distract from flam quality - Losing paradiddle accent pattern: the flam should enhance the existing accent, not change the underlying accent-tap-diddle structure - Uneven diddle: d2 significantly softer or rushed relative to d1 - Diddle-to-grace transition breakdown: the hand finishing its diddle must immediately prepare as a grace note for the opposite hand's flam -- this is the hardest coordination point - One hand's flam consistently wider or tighter than the other</p> <p>Practice strategies: - Start with plain paradiddles with strong accents, then add the grace note - Practice the diddle-to-grace transition in isolation: play RR (diddle), then immediately play the grace for the left-hand flam - Use a metronome with the click on the paradiddle accents (every half-cycle) - Practice each hand's lead separately before alternating - Compare the sound of right-lead (lR L RR) and left-lead (rL R LL) halves for consistency</p> <p>What to listen for: - Clean, consistent flams on both right-lead and left-lead halves - Clear accent-tap dynamic contrast (the flam accent should be noticeably louder than the tap and diddle) - Even diddle quality with natural d2 decay - Smooth flow through the diddle-to-grace transition - The paradiddle's characteristic hand-switching feel with the added weight of the flam</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#historical-context","title":"Historical Context","text":"<p>The flam paradiddle was included in the original NARD 26 rudiments when NARD was established in 1933, and its ancestry can be traced back through early American field drumming manuals. Charles Stewart Ashworth's 1812 A New, Useful and Complete System of Drum Beating includes patterns recognizable as flam paradiddles, and the rudiment appears in Strube's 1870 Drum and Fife Instructor. The flam paradiddle was retained as PAS #24 in the 1984 expansion to 40 rudiments, positioned as the second compound flam rudiment. In drum corps, the flam paradiddle is ubiquitous in snare drum book writing, where the flam adds rhythmic weight to the paradiddle's natural accent pattern. The rudiment is sometimes referred to colloquially as the \"flamadiddle.\"</p>"},{"location":"specs/rudiments/24_flam_paradiddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/24_flam_paradiddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                   &gt;\nlR   L   R R    |   rL   R   L L\n</code></pre>"},{"location":"specs/rudiments/24_flam_paradiddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | .     2e    2&amp;    2a  | 3         |\nHand:    | (l)R  L     R     R   |       (r)L  R     L   | L         |\nType:    |  g A  t     d1    d2  |        g A  t     d1  | d2        |\nAccent:  |    &gt;                  |           &gt;           |           |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The first half occupies beat 1 (4 sixteenth slots). The second half begins on beat 2e and ends on beat 3. The diddle pairs occupy the \"&amp;\" and \"a\" positions of each half's final beat.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/","title":"PAS #25: Single Flammed Mill","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#1-identity","title":"1. Identity","text":"Field Value PAS Number 25 Name Single Flammed Mill Category flam Family compound flam Composed Of Flam (#20) + diddle on the opposite hand -- a flam followed by a double stroke (diddle) on the hand opposite to the flam primary Related #20 Flam (the primitive flam ornament), #6 Double Stroke Open Roll (the diddle component), #22 Flam Tap (another flam + double-stroke combination), #24 Flam Paradiddle (flam + paradiddle, a related compound pattern), #16 Single Paradiddle (the mill is a reverse paradiddle variant) NARD Original No (added by PAS in 1984)"},{"location":"specs/rudiments/25_single_flammed_mill/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 8 (6 primary strokes + 2 grace notes) Primary Strokes Per Cycle 6 <p>The single flammed mill consists of two mirror-image halves, each containing a flam (grace + accented primary) followed by a diddle on the opposite hand. Each half has 3 primary strokes (1 accent + 2 diddle strokes) plus 1 grace note, for a total of 6 primary strokes and 2 grace notes across the full 2-beat cycle. The pattern is compact: each half occupies 3 sixteenth-note slots (accent + d1 + d2), with the fourth slot in each beat left empty or serving as the start of the next half.</p> <p>The term \"mill\" in drumming refers to a reverse paradiddle pattern (e.g., R R L R instead of R L R R). The single flammed mill takes the concept of doubling on the same hand and adds a flam to the lead stroke. In the SOUSA YAML definition, the pattern is simplified to flam + opposite-hand diddle, emphasizing the flam-then-diddle alternation.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bc 1e L d1 4 \u00bd 1&amp; L d2 5 1 - 1/32 (grace before 2) R g 6 1 2 L A 7 1 + \u00bc 2e R d1 8 1 + \u00bd 2&amp; R d2 <p>Note: Each half occupies 3 sixteenth-note positions (the accent on the beat, d1 on the \"e\", and d2 on the \"&amp;\"), leaving the \"a\" position empty before the next half begins. This creates a characteristic rhythmic gap -- a dotted-eighth + sixteenth feel -- that distinguishes the single flammed mill from denser rudiments.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;           &gt;\nlR   L L |  rL   R R\n</code></pre> <p>Each group is a flam followed by a diddle on the opposite hand. The pattern alternates: right-hand flam with left-hand diddle, then left-hand flam with right-hand diddle.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Accented flam primary -- right-hand lead 3 L d1 none n/a First stroke of left-hand diddle, wrist-initiated 4 L d2 none n/a Second stroke of left-hand diddle, finger-controlled 5 R grace grace #6 Grace note preceding left-hand flam 6 L accent primary n/a Accented flam primary -- left-hand lead 7 R d1 none n/a First stroke of right-hand diddle, wrist-initiated 8 R d2 none n/a Second stroke of right-hand diddle, finger-controlled"},{"location":"specs/rudiments/25_single_flammed_mill/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #5 (R grace) precedes stroke #6 (L primary) - The grace note for the second flam (stroke #5) is played by the right hand, which is the same hand that played the flam primary in the first half (stroke #2). This means the right hand transitions from accent (#2) to grace (#5) over the course of one beat.</p> <p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the \"e\" of the beat; d2 falls on the \"&amp;\" of the beat - The diddle is on the opposite hand from the flam primary, which is a distinctive feature of this rudiment - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Full-stroke flam primary at the start of each half-cycle d1 0.65 - 0.77 First diddle stroke at tap level on the opposite hand d2 0.90 - 0.98 x d1 Slight decay on the second bounce of the diddle grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The single flammed mill has a simple two-level primary dynamic: accented flam, then unaccented diddle. Unlike the paradiddle family where the diddle is on the same hand as the accent, here the diddle is on the opposite hand, which affects the dynamic transition. The hand that plays the flam primary can fully relax after its accent, while the opposite hand executes the diddle at tap level. This creates a clear accent-then-decay contour with the dynamic weight concentrated at the beginning of each half-cycle.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;           &gt;\nlR   LL  |  rL   RR\n</code></pre> <p>One accent per half-cycle, always on the flammed lead stroke. The diddle strokes are unaccented. The pattern is simple and regular: accent every beat.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single flammed mill produces a clean, regular pulse: each beat begins with a strong, flammed accent, followed by a softer diddle that decays into a brief silence before the next flam. The grace note adds a soft onset before each accent, creating a \"dip-peak-decay\" shape per half-cycle. The rhythmic gap on the \"a\" of each beat (no stroke in that position) allows a moment of rest that makes each flam-diddle group feel like a distinct musical event. This gives the single flammed mill a more spacious, less dense feel compared to rudiments that fill all four sixteenth-note positions.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L d1 low (2-6\") wrist 4 L d2 tap (&lt; 2\") fingers 5 R grace tap (&lt; 2\") fingers 6 L accent full (12\"+) wrist + arm 7 R d1 low (2-6\") wrist 8 R d2 tap (&lt; 2\") fingers <p>The physical motion of the single flammed mill involves a distinctive coordination pattern. While one hand plays a full-height accented primary, the other hand is positioned low for the grace note it just played, then must immediately initiate a diddle. The grace-hand transitions directly from its grace note role (tap height, fingers) to d1 (low height, wrist) -- essentially upgrading its motion from a gentle grace touch to an active wrist-driven diddle stroke. Meanwhile, the accent hand descends from full height to tap height to prepare as the grace for the next flam. The pattern can be thought of as a continuous exchange: each hand alternates between \"accent duty\" (high, powerful) and \"diddle duty\" (low, controlled).</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. Clear separation between grace and primary. Diddles are open -- two distinct wrist strokes on the opposite hand. The rhythmic gap on the \"a\" position is clearly audible. Focus on the grace-to-diddle transition on the same hand and matching flam quality between halves. Moderate (100-140 BPM) Wrist-driven strokes. The flam primary uses a downstroke to set up the opposite hand's diddle. Diddles shift to wrist-finger technique (d1 wrist, d2 finger rebound). Grace note spacing at standard -1/32. The accent-to-grace transition on the same hand becomes smoother. The rhythmic gap is less prominent but still present. Fast (140-160 BPM) Finger control for diddles and grace notes. Accents drop to half height. The flam-diddle groups flow into each other with minimal separation. Grace note spacing tightens to -1/64. The diddle rebound from d2 can feed directly into the grace note for the next flam (since d2 is on the same hand as the upcoming grace), creating a nearly continuous motion."},{"location":"specs/rudiments/25_single_flammed_mill/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#common-variations","title":"Common Variations","text":"<ul> <li>Full mill (reverse paradiddle) interpretation: Some traditions interpret the single flammed mill as a flammed reverse paradiddle (lR R L R | rL L R L), with an additional single stroke after the diddle. The SOUSA YAML uses the simpler flam + diddle interpretation.</li> <li>Double flammed mill: Two flammed mill groups before switching hands (not a standard PAS rudiment)</li> <li>No-flam preparation: Practice as accented strokes followed by diddles (&gt;R LL | &gt;L RR) to isolate the accent-diddle pattern</li> <li>Continuous mills: Playing the pattern continuously at speed to develop the accent-to-grace-to-diddle hand exchange</li> </ul>"},{"location":"specs/rudiments/25_single_flammed_mill/#prerequisites","title":"Prerequisites","text":"<ul> <li>Understanding of the reverse paradiddle (mill) sticking concept</li> </ul>"},{"location":"specs/rudiments/25_single_flammed_mill/#20-flam-consistent-flams-on-both-hands","title":"20 Flam -- consistent flams on both hands","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#6-double-stroke-open-roll-controlled-diddles-with-matched-d1d2-quality","title":"6 Double Stroke Open Roll -- controlled diddles with matched d1/d2 quality","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#22-flam-tap-develops-the-flam-within-a-double-stroke-context-skill","title":"22 Flam Tap -- develops the flam-within-a-double-stroke-context skill","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps solo literature and advanced rudimental etudes</li> </ul>"},{"location":"specs/rudiments/25_single_flammed_mill/#27-pataflafla-complex-compound-flam-pattern-with-multiple-flams-per-group","title":"27 Pataflafla (complex compound flam pattern with multiple flams per group)","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#29-inverted-flam-tap-related-pattern-with-flam-placement-on-the-second-stroke","title":"29 Inverted Flam Tap (related pattern with flam placement on the second stroke)","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#teaching-notes","title":"Teaching Notes","text":"<p>The single flammed mill was one of the 14 new rudiments added when the PAS expanded the standard list from 26 to 40 in 1984. It is sometimes overlooked in favor of more familiar compound flam rudiments like the flam paradiddle, but it develops a unique coordination skill: the simultaneous management of a flam on one hand and a diddle on the other.</p> <p>Common mistakes: - Grace note and d1 colliding: the grace note (opposite hand from diddle) and the first diddle stroke (same hand as grace) happen in quick succession -- the grace must lead the primary clearly before the diddle hand begins - Uneven diddle: d2 significantly softer or rushed relative to d1 - Losing the rhythmic gap: players may rush through the \"a\" position to reach the next flam, destroying the characteristic spacing - Flat flams: the grace must remain clearly softer and earlier than the primary - Inconsistent hand balance: one hand's accent-to-diddle transition consistently smoother than the other</p> <p>Practice strategies: - Begin with plain accented strokes followed by opposite-hand diddles: &gt;R LL | &gt;L RR (no flams) - Add grace notes only after the accent-diddle pattern is comfortable and even - Isolate the hand exchange: play the full right-lead group (lR LL), pause, then the left-lead group (rL RR) - Practice the grace-to-d1 transition in isolation: play a grace note, then immediately play a wrist-controlled diddle on the same hand - Use a metronome on the beat to anchor the flam placements</p> <p>What to listen for: - Clean, consistent flams on both right-lead and left-lead halves - Even, matched diddle quality across both halves - Clear rhythmic gap on the \"a\" position (the rudiment should not sound like continuous sixteenth notes) - Smooth hand exchange between the accent-hand and the diddle-hand roles - The flam should sound like a single weighted event, not two separate notes</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#historical-context","title":"Historical Context","text":"<p>The single flammed mill was one of the 14 rudiments added to the PAS standard list in 1984 when the Percussive Arts Society expanded from the NARD 26 to 40 International Drum Rudiments. The term \"mill\" derives from \"windmill\" and refers to the reverse paradiddle sticking pattern (RRLR instead of RLRR). Adding a flam to the lead stroke creates the \"flammed mill.\" Although not part of the original NARD 26, the concept of the mill pattern has roots in early American and European drumming traditions. The single flammed mill was categorized by PAS under the flam rudiment family rather than the diddle family, emphasizing the flam ornament as its primary defining feature. In competitive rudimental drumming, the single flammed mill appears in advanced solo literature and drum corps snare drum parts, where the alternating flam-diddle texture creates a distinctive rhythmic effect.</p>"},{"location":"specs/rudiments/25_single_flammed_mill/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/25_single_flammed_mill/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;               &gt;\nlR   L L    |   rL   R R\n</code></pre>"},{"location":"specs/rudiments/25_single_flammed_mill/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | (l)R  L     L         | (r)L  R     R         |\nType:    |  g A  d1    d2   rest |  g A  d1    d2   rest |\nAccent:  |    &gt;                  |    &gt;                  |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). Each half-cycle occupies 3 of the 4 sixteenth-note positions within a beat, leaving the \"a\" position empty. The diddle pairs occupy the \"e\" and \"&amp;\" positions following each flam.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/","title":"PAS #26: Flam Paradiddle-Diddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 26 Name Flam Paradiddle-Diddle Category flam Family compound flam Composed Of Flam (#20) + Paradiddle-Diddle (#19) -- a paradiddle-diddle with the accented lead stroke flammed Related #20 Flam (the primitive flam ornament), #19 Paradiddle-Diddle (the underlying sticking pattern), #24 Flam Paradiddle (flam + single paradiddle, the simpler variant), #16 Single Paradiddle (root paradiddle pattern), #6 Double Stroke Open Roll (the diddle component) NARD Original Yes"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 (or 6/8 -- the 6-stroke grouping fits compound meters naturally) Base Subdivision sextuplet (six notes per beat) Cycle Length 2 beats Strokes Per Cycle 14 (12 primary strokes + 2 grace notes) Primary Strokes Per Cycle 12 <p>The flam paradiddle-diddle is structurally identical to the paradiddle-diddle (R L R R L L | L R L L R R) with a flam added to the accented lead stroke of each half-cycle. Each half has 6 primary strokes (1 accent + 1 tap + 4 diddle strokes in 2 diddle pairs) plus 1 grace note. The sextuplet subdivision places 6 primary strokes per beat, with one complete half-cycle fitting within a single beat. The two consecutive diddles at the end of each half (RR LL or LL RR) create a brief double-stroke roll excerpt, giving the rudiment its characteristic \"rolling\" quality. The flam on the lead stroke adds weight and breadth to the natural paradiddle-diddle accent.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u2159 1la L t 4 2/6 1li R d1 5 3/6 1&amp; R d2 6 4/6 1la L d1 7 \u215a 1li L d2 8 1 - 1/32 (grace before 2) R g 9 1 2 L A 10 1 + \u2159 2la R t 11 1 + 2/6 2li L d1 12 1 + 3/6 2&amp; L d2 13 1 + 4/6 2la R d1 14 1 + \u215a 2li R d2"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                          &gt;\nlR   L   R R   L L    |   rL   R   L L   R R\n</code></pre> <p>Each group is a paradiddle-diddle (accent, tap, diddle, diddle) with a flam on the accented lead stroke. The lead hand alternates each half-cycle.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Accented flam primary -- right-hand lead 3 L tap none n/a Unaccented tap -- the \"para\" alternation stroke 4 R d1 none n/a First stroke of first diddle (right hand), wrist-initiated 5 R d2 none n/a Second stroke of first diddle (right hand), finger-controlled 6 L d1 none n/a First stroke of second diddle (left hand), wrist-initiated 7 L d2 none n/a Second stroke of second diddle (left hand), finger-controlled 8 R grace grace #9 Grace note preceding left-hand flam 9 L accent primary n/a Accented flam primary -- left-hand lead 10 R tap none n/a Unaccented tap -- the \"para\" alternation stroke 11 L d1 none n/a First stroke of first diddle (left hand), wrist-initiated 12 L d2 none n/a Second stroke of first diddle (left hand), finger-controlled 13 R d1 none n/a First stroke of second diddle (right hand), wrist-initiated 14 R d2 none n/a Second stroke of second diddle (right hand), finger-controlled"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #8 (R grace) precedes stroke #9 (L primary) - The grace note for the second flam (stroke #8) is played by the right hand, which just completed its diddle d2 (stroke #5) three sextuplet positions earlier. There is time to prepare, but the hand must transition from a low diddle position back to grace-note readiness. - Because the sextuplet grid has narrower spacing (\u2159 beat between positions), the grace note offset of -1/32 is relatively large -- it falls well before the preceding sextuplet position, so there is no risk of collision with the previous note.</p> <p>Diddle Timing: - Each diddle pair occupies one sextuplet-note duration (\u2153 beat) - Each individual diddle stroke occupies \u2159 beat (one sextuplet note) - The two consecutive diddles alternate hands (RR LL or LL RR), creating a brief double-stroke roll excerpt - Right-hand half: first diddle (R) on 1li-1&amp;, second diddle (L) on 1la-1li - Left-hand half: first diddle (L) on 2li-2&amp;, second diddle (R) on 2la-2li - At slow tempos: all four diddle strokes are distinct and clearly separated (open) - At fast tempos: the diddle pairs blur into a smooth roll-like texture (closed)</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Full-stroke flam primary at the top of each half-cycle tap 0.65 - 0.77 Unaccented single stroke following the flam d1 (first diddle) 0.65 - 0.77 First stroke of each diddle at tap level d2 (first diddle) 0.90 - 0.98 x d1 Slight decay on the second stroke of the first diddle d1 (second diddle) 0.65 - 0.77 First stroke of the second diddle at tap level d2 (second diddle) 0.90 - 0.98 x d1 Slight decay on the second stroke of the second diddle grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The flam paradiddle-diddle combines the three-level flam dynamic (grace-primary contrast) with the paradiddle-diddle's accent-tap-diddle-diddle contour. The flam adds weight and breadth to the paradiddle-diddle's accent, making it the most dynamically prominent rudiment in the compound flam family. The four consecutive diddle strokes (two diddles alternating hands) sit at tap level and create a sustained low-dynamic plateau that contrasts strongly with the flammed accent.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;                       &gt;\nlR   L   RR  LL    |   rL   R   LL  RR\n</code></pre> <p>One accent per half-cycle (per beat), always on the flammed lead stroke. The tap and all four diddle strokes are unaccented. The accent falls on every beat, creating a clear rhythmic pulse.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam paradiddle-diddle produces a six-note dynamic contour: one strong, flammed accent, one tap, then four diddle strokes (two diddles of two strokes each). The flam grace note creates a soft onset before the peak accent, followed by a quick drop to tap level and a sustained low-dynamic plateau through the four diddle strokes. Each diddle pair has subtle internal decay (d2 slightly softer than d1). The two consecutive diddles at the end produce a \"rolling\" texture that distinguishes this rudiment from the flam paradiddle (which has only one diddle). The overall feel within each beat is: rise (grace), peak (accent), drop (tap), plateau (diddle-diddle). The alternating hand lead ensures symmetrical dynamic treatment across the cycle.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R d1 low (2-6\") wrist 5 R d2 tap (&lt; 2\") fingers 6 L d1 low (2-6\") wrist 7 L d2 tap (&lt; 2\") fingers 8 R grace tap (&lt; 2\") fingers 9 L accent full (12\"+) wrist + arm 10 R tap low (2-6\") wrist 11 L d1 low (2-6\") wrist 12 L d2 tap (&lt; 2\") fingers 13 R d1 low (2-6\") wrist 14 R d2 tap (&lt; 2\") fingers <p>The physical demands of the flam paradiddle-diddle combine flam technique with the two-consecutive-diddle challenge of the paradiddle-diddle. The right hand's path through the first half illustrates: full-height accent (#2), drop to low for diddle d1 (#4), finger-controlled d2 (#5), then prepare as grace note (#8) for the next flam. The hand must transition from a finger-controlled diddle rebound to a grace note position, which is facilitated by the d2 naturally leaving the stick near the head. The two consecutive diddles (RR LL or LL RR) require executing a double-stroke roll fragment at sextuplet speed, demanding strong finger control. The hand exchange between the two consecutive diddles (R-to-L or L-to-R) is the critical control point.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm accents with clear height contrast. Grace notes clearly audible with wide spacing. The sextuplet subdivision is felt as six distinct events per beat. All four diddle strokes are individually articulated. Focus on the hand exchange between the two consecutive diddles and on matching flam quality between halves. Moderate (100-140 BPM) Wrist-driven strokes. The accent employs Moeller whip technique. Diddles transition to wrist-finger technique (d1 wrist, d2 finger rebound). Grace note spacing at standard -1/32. The consecutive diddles begin to feel like a brief double-stroke roll excerpt. The sextuplet subdivision produces notes at the same rate as sixteenth notes at 150% of the BPM, demanding substantial finger control. Fast (140-160 BPM) All motions become compact. Accents are wrist-only from half height. All diddle strokes are finger-controlled at tap height. The two consecutive diddles merge into a smooth, roll-like texture. Grace note spacing tightens to -1/64. The flam paradiddle-diddle at fast tempos feels like a flowing, continuous pattern with accented pulses on each beat. The d2-to-grace transition becomes nearly automatic through finger rebound momentum."},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#common-variations","title":"Common Variations","text":"<ul> <li>Flamadiddle-diddle: An alternate name for this rudiment used colloquially</li> <li>Flam paradiddle-diddle in 6/8: The six-note grouping fits naturally into compound time, with the flam accent on the downbeat of each bar</li> <li>Flam paradiddle-diddle as triplets: Reinterpreted in a triplet feel where each 6-stroke group spans one beat of dotted-quarter-note pulse</li> <li>No-flam preparation: Practice as a plain paradiddle-diddle (R L R R L L | L R L L R R) with accents to isolate the accent-tap-diddle-diddle pattern before adding grace notes</li> <li>Orchestrated around the kit: Distribute the flam accent on cymbal/tom and taps on snare, with the consecutive diddles creating a rapid fill</li> </ul>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#20-flam-consistent-flams-on-both-hands","title":"20 Flam -- consistent flams on both hands","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#19-paradiddle-diddle-the-accent-tap-diddle-diddle-pattern-must-be-comfortable-in-sextuplets","title":"19 Paradiddle-Diddle -- the accent-tap-diddle-diddle pattern must be comfortable in sextuplets","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#24-flam-paradiddle-develops-the-flam-within-a-paradiddle-concept-with-one-fewer-diddle","title":"24 Flam Paradiddle -- develops the flam-within-a-paradiddle concept with one fewer diddle","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#6-double-stroke-open-roll-controlled-diddles-especially-the-rr-ll-hand-exchange","title":"6 Double Stroke Open Roll -- controlled diddles, especially the RR LL hand exchange","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Advanced compound rudiments that combine flams with extended paradiddle patterns</li> <li>Application in compound-meter drum corps literature and jazz waltz contexts</li> <li>Flam drag patterns (#30) that combine flams with drag ornaments</li> </ul>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#teaching-notes","title":"Teaching Notes","text":"<p>The flam paradiddle-diddle is the most complex of the four compound flam rudiments, combining the flam ornament with the longest paradiddle variant. The critical insight for students is that this rudiment is simply a paradiddle-diddle with a flam on the accent -- if the paradiddle-diddle is already comfortable, adding the grace note is a relatively straightforward extension.</p> <p>The sextuplet subdivision deserves special attention. Unlike most flam rudiments (which use eighth or sixteenth subdivision), the flam paradiddle-diddle inherits the sextuplet feel of the paradiddle-diddle. Students who are comfortable with the flam paradiddle (#24, sixteenth notes) may struggle when transitioning to the sextuplet grid, where notes occur at \u2159-beat intervals instead of \u00bc-beat intervals.</p> <p>Common mistakes: - Playing in sixteenth notes instead of sextuplets -- the six-note group must be evenly spaced within each beat, not four-note groups - Three consecutive taps problem: the second diddle d2 of one group, followed by the grace note for the next flam, followed by the tap after the flam, creates three notes in rapid succession on nearby hands. Keeping these steady requires careful practice. - Uneven diddle quality between the first and second consecutive diddles - Gap or flam at the hand exchange between the two consecutive diddles (R-to-L or L-to-R) - Flat flams at tempo due to the sextuplet speed making it harder to maintain grace-to-primary separation - Losing the accent-tap contrast within the fast sextuplet subdivision</p> <p>Practice strategies: - Begin with plain paradiddle-diddles with accents, then add grace notes - Practice the double-stroke roll fragment (RRLL or LLRR) in isolation at sextuplet speed - Isolate the hand exchange between consecutive diddles - Use a metronome set to dotted quarter notes in 6/8 to anchor the accent pattern - Practice right-lead (lR L RR LL) and left-lead (rL R LL RR) halves separately - Compare flam quality between halves and work to match them</p> <p>What to listen for: - Clean, consistent flams on both right-lead and left-lead halves - Correct sextuplet feel -- six evenly spaced notes per beat, not four - Even, matched diddle quality across both consecutive diddles - Smooth hand exchange between the first and second diddle (no gap or flam) - Clear accent-tap dynamic contrast despite the fast sextuplet subdivision - The flam should add weight to the accent without disrupting the flow</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#historical-context","title":"Historical Context","text":"<p>The flam paradiddle-diddle was included in the original NARD 26 rudiments when NARD was established in 1933. Its roots trace back at least to Ashworth's 1812 A New, Useful and Complete System of Drum Beating, which depicts and names the pattern. Rumrille (1817) also includes the rudiment, though he calls it simply a \"Flam Paradiddle.\" The flam paradiddle-diddle was retained as PAS #26 in the 1984 expansion to 40 rudiments, positioned as the final compound flam rudiment. In the drum corps tradition, the flam paradiddle-diddle is used in compound-meter passages (6/8, 12/8) where the sextuplet grouping aligns naturally with the rhythmic feel. Its combination of flam, single strokes, and two consecutive diddles makes it one of the most technically demanding rudiments in the flam family. The rudiment is sometimes referred to as the \"flamadiddle-diddle\" in colloquial usage.</p>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                          &gt;\nlR   L   R R   L L    |   rL   R   L L   R R\n</code></pre>"},{"location":"specs/rudiments/26_flam_paradiddle_diddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     la    li    &amp;     la    li  | 2     la    li    &amp;     la    li  |\nHand:    | (l)R  L     R     R     L     L   | (r)L  R     L     L     R     R   |\nType:    |  g A  t     d1    d2    d1    d2  |  g A  t     d1    d2    d1    d2  |\nAccent:  |    &gt;                              |    &gt;                              |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The sextuplet grid divides each beat into six equal parts at positions 0, \u2159, 2/6, 3/6, 4/6, and \u215a of each beat. Each half-cycle fills one complete beat with 6 primary strokes plus 1 grace note.</p>"},{"location":"specs/rudiments/27_pataflafla/","title":"PAS #27: Pataflafla","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/27_pataflafla/#1-identity","title":"1. Identity","text":"Field Value PAS Number 27 Name Pataflafla Category flam Family advanced flam Composed Of Flam (#20) + single stroke taps; a four-note group where the first and fourth notes are flammed, with two single-stroke taps between them Related #20 Flam (the primitive flam ornament), #22 Flam Tap (flam + tap in eighth-note doubles), #29 Inverted Flam Tap (tap-before-flam pattern), #1 Single Stroke Roll (underlying alternating singles) NARD Original No (added by PAS in 1984 expansion to 40 rudiments)"},{"location":"specs/rudiments/27_pataflafla/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 12 (8 primary strokes + 4 grace notes) Primary Strokes Per Cycle 8 <p>The name \"pataflafla\" is onomatopoeic, derived from French military drumming: \"pa\" (single stroke), \"ta\" (single stroke), \"fla\" (flam), \"fla\" (flam). Each half of the cycle contains four primary strokes arranged as flam-tap-flam-tap in sixteenth notes, with flams alternating between right-hand and left-hand leads. The full cycle of 2 beats contains two mirror-image halves, yielding 8 primary strokes filling all 8 sixteenth-note positions and 4 grace notes.</p>"},{"location":"specs/rudiments/27_pataflafla/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u00bc 1e L t 4 \u00bd - 1/32 (grace before 1&amp;) R g 5 \u00bd 1&amp; L A 6 \u00be 1a R t 7 1 - 1/32 (grace before 2) R g 8 1 2 L A 9 1 + \u00bc 2e R t 10 1 + \u00bd - 1/32 (grace before 2&amp;) L g 11 1 + \u00bd 2&amp; R A 12 1 + \u00be 2a L t <p>Note: Every sixteenth-note position is occupied by a primary stroke. The grace notes sit just before their respective primary strokes. The flams alternate hands within each half: right-hand flam (lR) then left-hand flam (rL) in the first beat, then left-hand flam (rL) then right-hand flam (lR) in the second beat. This produces the distinctive back-to-back flams with alternating leads that define the pataflafla.</p>"},{"location":"specs/rudiments/27_pataflafla/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/27_pataflafla/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;        &gt;        &gt;\nlR  L  rL  R  |  rL  R  lR  L\n</code></pre> <p>Each beat contains two flam-tap pairs. The lead hand alternates within each pair (right flam then left flam in beat 1, left flam then right flam in beat 2), creating the back-to-back flams with different leading hands that are the signature challenge of this rudiment.</p>"},{"location":"specs/rudiments/27_pataflafla/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Right-hand flam primary (accented) -- \"pa\" 3 L tap none n/a Left-hand tap -- \"ta\" 4 R grace grace #5 Grace note preceding left-hand flam 5 L accent primary n/a Left-hand flam primary (accented) -- first \"fla\" 6 R tap none n/a Right-hand tap -- second \"fla\" position tap 7 R grace grace #8 Grace note preceding left-hand flam 8 L accent primary n/a Left-hand flam primary (accented) 9 R tap none n/a Right-hand tap 10 L grace grace #11 Grace note preceding right-hand flam 11 R accent primary n/a Right-hand flam primary (accented) 12 L tap none n/a Left-hand tap"},{"location":"specs/rudiments/27_pataflafla/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Four flams per cycle: strokes #1-2 (lR), #4-5 (rL), #7-8 (rL), #10-11 (lR) - The critical challenge is the back-to-back flams: the tap hand (stroke #3 or #6) must immediately transition to a grace note (stroke #4 or #7) for the next flam on the opposite hand. This rapid tap-to-grace transition on the same hand, occurring twice per beat, is the defining technical difficulty of the pataflafla - Grace notes must remain consistent in quality across all four flams despite the rapid hand transitions</p>"},{"location":"specs/rudiments/27_pataflafla/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/27_pataflafla/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 All four flam primary strokes per cycle tap 0.65 - 0.77 The two taps per beat between flams grace (flam) 0.50 - 0.70 All four grace notes preceding flam primaries <p>The pataflafla features the same three-level dynamic hierarchy as other flam rudiments (grace, tap, accent), but the density of flams -- four per two-beat cycle -- makes consistent dynamic control more demanding. The accent-tap alternation at the sixteenth-note level creates a driving, insistent rhythmic pulse.</p>"},{"location":"specs/rudiments/27_pataflafla/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     &gt;     -  |  &gt;     -     &gt;     -\nlR    L     rL    R  |  rL    R     lR    L\n</code></pre> <p>Accents fall on every other sixteenth note (the flammed notes), with taps between. This yields four accents per 2-beat cycle, creating a strong eighth-note pulse from the accented flams.</p>"},{"location":"specs/rudiments/27_pataflafla/#dynamic-contour","title":"Dynamic Contour","text":"<p>The pataflafla produces a rapid, alternating \"strong-weak-strong-weak\" pattern at the sixteenth-note level. Each pair of sixteenths contains one accented flam and one unaccented tap. The continuous alternation of accents and taps, combined with the alternating flam lead hand, creates a driving, propulsive feel. The back-to-back flams with different leading hands give the rudiment a characteristic \"rolling\" quality where no single hand dominates. The overall contour across the 2-beat cycle is symmetrical: beat 2 mirrors beat 1 with opposite hand leads.</p>"},{"location":"specs/rudiments/27_pataflafla/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/27_pataflafla/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R grace tap (&lt; 2\") fingers 5 L accent full (12\"+) wrist + arm 6 R tap low (2-6\") wrist 7 R grace tap (&lt; 2\") fingers 8 L accent full (12\"+) wrist + arm 9 R tap low (2-6\") wrist 10 L grace tap (&lt; 2\") fingers 11 R accent full (12\"+) wrist + arm 12 L tap low (2-6\") wrist <p>The primary physical challenge of the pataflafla is the rapid height transitions required by the back-to-back flams. Consider the right hand's path through one beat: it plays a full-height accented flam primary (#2), immediately drops to tap-height for a grace note (#4), then transitions to low-height for a tap (#6). Meanwhile, the left hand mirrors this: grace (#1), tap (#3), full-height accent (#5). Each hand cycles through three different height classes within a single beat, demanding exceptional stick control and the ability to execute rapid downstroke-to-grace transitions. The tap-to-grace transition (e.g., stroke #3 to #4, where the left hand plays a tap and the right hand must be in grace position) is the critical coordination point.</p>"},{"location":"specs/rudiments/27_pataflafla/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. Each of the four flams per cycle is clearly articulated with wide grace-to-primary spacing (-1/16 range). The taps between flams are distinct, deliberate wrist strokes. The back-to-back flam challenge is manageable at this tempo because there is sufficient time for the tap-to-grace transition. Focus on matching all four flams in quality. Moderate (100-140 BPM) Wrist-driven strokes predominate. The accent uses a controlled downstroke, and the tap-to-grace transition tightens. Grace note spacing at standard -1/32. The rudiment begins to flow as a continuous pattern rather than discrete flam-tap pairs. The Moeller whip motion may be introduced for the accented strokes to facilitate the rapid height changes. Fast (140-160 BPM) Finger control for taps and grace notes. All accents drop to half height class. Grace note spacing approaches -1/64. The back-to-back flams become the primary limiting factor -- the hands must execute two different flam orientations per beat with minimal separation. Moeller technique is essential. The stick path becomes a continuous, circular motion to keep up with the rapid height transitions."},{"location":"specs/rudiments/27_pataflafla/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/27_pataflafla/#common-variations","title":"Common Variations","text":"<ul> <li>Traditional \"pa-ta-fla-fla\" interpretation: Some sources describe the pataflafla as two singles followed by two flams (R L lR rL) rather than alternating flam-tap pairs. This interpretation places the flams on notes 3 and 4 of each four-note group instead of notes 1 and 3</li> <li>Single-lead pataflafla: Playing all flams with the same lead hand (all lR or all rL) as a preparatory exercise</li> <li>Pataflafla with accented taps: Adding accents to the taps for an all-accent variation used in corps-style drumming</li> <li>Extended pataflafla: Combining pataflafla groups with other rudiments (paradiddles, drags) in rudimental solo passages</li> </ul>"},{"location":"specs/rudiments/27_pataflafla/#prerequisites","title":"Prerequisites","text":"<ul> <li>Comfort with rapid tap-to-grace transitions on the same hand (developed through flam tap and flamacue practice)</li> </ul>"},{"location":"specs/rudiments/27_pataflafla/#20-flam-the-basic-flam-ornament-must-be-rock-solid-with-both-hands","title":"20 Flam -- the basic flam ornament must be rock-solid with both hands","text":""},{"location":"specs/rudiments/27_pataflafla/#22-flam-tap-the-flam-tap-hand-coordination-is-the-building-block-for-this-rudiment","title":"22 Flam Tap -- the flam-tap hand coordination is the building block for this rudiment","text":""},{"location":"specs/rudiments/27_pataflafla/#1-single-stroke-roll-alternating-single-strokes-at-the-sixteenth-note-level","title":"1 Single Stroke Roll -- alternating single strokes at the sixteenth-note level","text":""},{"location":"specs/rudiments/27_pataflafla/#builds-toward","title":"Builds Toward","text":"<ul> <li>Advanced rudimental solo passages requiring rapid flam transitions</li> <li>Corps-style snare drum literature where flam density is high</li> <li>Development of ambidextrous flam control (four different flam orientations per cycle)</li> </ul>"},{"location":"specs/rudiments/27_pataflafla/#teaching-notes","title":"Teaching Notes","text":"<p>The pataflafla is one of the most demanding flam rudiments due to its high density of flams -- four per two-beat cycle, with two per beat occurring back-to-back with different leading hands. This places extreme demands on the tap-to-grace transition skill.</p> <p>Common mistakes: - Flat flams: With four flams per cycle, maintaining consistent grace-to-primary separation is challenging. Back-to-back flams are especially prone to collapsing into flat flams - Uneven flam quality: The four flams often differ in spacing and dynamic contrast, especially between dominant and non-dominant hand leads - Rushing the taps: The taps between flams get compressed as players focus on the flam execution - Losing the alternation: The back-to-back flams with alternating leads can cause hand confusion at speed - Grace note too loud on back-to-back flams: The rapid transition from tap to grace sometimes produces an over-emphasized grace note</p> <p>Practice strategies: - Begin with the flam-tap pattern (alternating flams with taps) at very slow tempos, focusing on one beat at a time - Practice the right-hand-lead beat and left-hand-lead beat separately before combining - Isolate the tap-to-grace transition: play a tap, pause, then execute the grace + opposite-hand primary - Use a metronome set to eighth notes, placing flams on every click to verify evenness - Record and compare the sound of all four flams within the cycle -- they should be indistinguishable</p> <p>What to listen for: - All four flams should sound identical in grace-to-primary spacing and dynamic contrast - Even sixteenth-note spacing across all 8 primary strokes - Clear three-level dynamic hierarchy: grace (soft) &lt; tap (medium) &lt; accent (loud) - The back-to-back flams should flow smoothly without hesitation or rhythmic hiccup - Identical quality between the right-hand-lead beat and the left-hand-lead beat</p>"},{"location":"specs/rudiments/27_pataflafla/#historical-context","title":"Historical Context","text":"<p>The pataflafla derives its name from onomatopoeic French military drumming terminology: \"pa\" (right stroke), \"ta\" (left stroke), \"fla\" (flam), \"fla\" (flam). Its roots lie in French and Swiss military field drumming traditions, particularly the Basel drumming school. The pattern was not included in the original NARD 26 rudiments established in 1933. It was added as PAS #27 when the Percussive Arts Society expanded the standard rudiments from 26 to 40 in 1984, recognizing the need for more advanced flam patterns in the canon. The pataflafla represents the culmination of flam-based technique: it requires all the coordination skills developed through the basic flam (#20), flam tap (#22), and compound flam rudiments, applied at a higher density. It appears frequently in competitive rudimental solos and drum corps snare drum parts, where its driving, flam-dense character adds intensity and complexity to musical passages.</p>"},{"location":"specs/rudiments/27_pataflafla/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/27_pataflafla/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;        &gt;        &gt;        &gt;\nlR  L  rL  R  |  rL  R  lR  L\n</code></pre>"},{"location":"specs/rudiments/27_pataflafla/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | (l)R  L     (r)L  R   | (r)L  R     (l)R  L   |\nType:    |  g A  t      g A  t   |  g A  t      g A  t   |\nAccent:  |    &gt;            &gt;     |    &gt;            &gt;     |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). All eight sixteenth-note positions are occupied by primary strokes. The four flams land on positions 1, &amp;, 2, and 2&amp;, with taps on the e and a positions.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/","title":"PAS #28: Swiss Army Triplet","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#1-identity","title":"1. Identity","text":"Field Value PAS Number 28 Name Swiss Army Triplet Category flam Family advanced flam Composed Of Flam (#20) + double stroke (same hand as flam primary) + single stroke (opposite hand); built on a double stroke roll framework in triplet subdivision Related #21 Flam Accent (same sound, different sticking -- flam accent uses alternating singles while Swiss army triplet uses a double stroke), #20 Flam (the primitive flam ornament), #6 Double Stroke Open Roll (the double stroke foundation), #22 Flam Tap (another flam + double stroke pattern in eighth notes) NARD Original No (added by PAS in 1984 expansion to 40 rudiments)"},{"location":"specs/rudiments/28_swiss_army_triplet/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision triplet Cycle Length 2 beats Strokes Per Cycle 8 (6 primary strokes + 2 grace notes) Primary Strokes Per Cycle 6 <p>The Swiss army triplet is a triplet-subdivision flam rudiment built on a double stroke roll framework. Each beat contains one triplet group of 3 primary strokes: a flammed first note followed by a same-hand tap (forming a double), then a single stroke on the opposite hand. The sticking is RRL (right-lead) or LLR (left-lead), contrasting with the flam accent (#21) which uses the same rhythm but with alternating single strokes (RLR or LRL). This double-stroke sticking means the Swiss army triplet does not naturally alternate -- it loops on the same lead hand unless deliberately switched.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g 2 0 1 R A 3 \u2153 1&amp; L t 4 \u2154 1a R t 5 1 - 1/32 (grace before 2) R g 6 1 2 L A 7 1 + \u2153 2&amp; R t 8 1 + \u2154 2a L t <p>Note: The YAML definition encodes an alternating pattern where the lead hand switches every beat (right-lead on beat 1, left-lead on beat 2). This alternating interpretation is used for dataset generation to ensure balanced hand development. The traditional Swiss army triplet is a non-alternating pattern (all right-lead or all left-lead), but the alternating version is also widely taught and performed.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;              &gt;\nlR   L   R  |  rL   R   L\n</code></pre> <p>Each triplet group begins with a flam (grace + accented primary), followed by a tap on the opposite hand, then a tap on the same hand as the flam primary. The sticking within each beat is: flammed primary (R), opposite tap (L), same-hand tap (R) -- giving the underlying RLR hand pattern but with the first note flammed. However, the YAML encodes the second and third notes as L-R (beat 1) and R-L (beat 2), making the underlying single-stroke pattern alternate naturally between beats.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace grace #2 Grace note preceding right-hand flam 2 R accent primary n/a Right-hand flam primary (accented) -- beat 1 of first triplet 3 L tap none n/a Opposite-hand tap -- beat 2 of first triplet 4 R tap none n/a Same-hand tap -- beat 3 of first triplet 5 R grace grace #6 Grace note preceding left-hand flam 6 L accent primary n/a Left-hand flam primary (accented) -- beat 1 of second triplet 7 R tap none n/a Opposite-hand tap -- beat 2 of second triplet 8 L tap none n/a Same-hand tap -- beat 3 of second triplet"},{"location":"specs/rudiments/28_swiss_army_triplet/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #5 (R grace) precedes stroke #6 (L primary) - The grace note falls before the triplet downbeat, not on a triplet subdivision position - Because the triplet grid is wider than sixteenth-note grids (\u2153 beat between positions vs \u00bc), the grace note offset of -1/32 is well clear of the preceding triplet note</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Flam primary strokes on beat 1 of each triplet tap 0.65 - 0.77 The two taps following each flam grace (flam) 0.50 - 0.70 Soft grace note preceding each primary <p>The Swiss army triplet shares the same three-level dynamic hierarchy as the flam accent: grace (soft), tap (medium), accent (loud). The two rudiments are rhythmically identical in sound -- the distinction is purely in the sticking, which affects the physical execution and hand coordination.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     -  |  &gt;     -     -\nlR    L     R  |  rL    R     L\n</code></pre> <p>One accent per beat, always on the first triplet note (the flam). The two taps that follow are unaccented. This is identical to the flam accent's accent pattern.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#dynamic-contour","title":"Dynamic Contour","text":"<p>The Swiss army triplet produces the same \"strong-weak-weak\" pattern within each beat as the flam accent, mirroring the natural stress pattern of triple meter. The accented flam provides a clear rhythmic anchor while the two following taps create a sense of motion toward the next accent. Despite sharing the same sound as the flam accent, the double-stroke sticking affects how players naturally phrase the pattern -- the same-hand connection between the flam primary and the second tap can subtly influence the evenness of the triplet spacing if not carefully controlled.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 R tap low (2-6\") wrist 5 R grace tap (&lt; 2\") fingers 6 L accent full (12\"+) wrist + arm 7 R tap low (2-6\") wrist 8 L tap low (2-6\") wrist <p>The physical challenge of the Swiss army triplet differs significantly from the flam accent despite the identical sound. Consider the right hand's path through one cycle: it plays a full-height accented primary (#2), drops to a low-height tap (#4), then must transition to tap-height for a grace note (#5). This is an accent-tap-grace sequence on the same hand across the beat boundary. Meanwhile, the left hand mirrors: grace (#1), tap (#3), accent (#6), tap (#8). The key distinction from the flam accent is that the double stroke (accent + tap on the same hand) creates a downstroke-to-tap sequence within each beat, similar to the flam tap (#22). The tap-to-grace transition across beats (stroke #4 to #5 for the right hand) is the critical coordination point.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. Each triplet note is distinctly articulated. The double stroke (accent + tap on same hand) is played as two clearly separate strokes. Grace notes have wide spacing from primary (-1/16 range). Focus on even triplet spacing despite the double-stroke sticking. Moderate (100-140 BPM) Wrist-driven strokes. The accent uses a controlled downstroke, catching the stick low for the second tap on the same hand. Grace note spacing at standard -1/32. The triplet flow becomes apparent. The double-stroke connection within each beat should feel natural, like a controlled double stroke roll at triplet speed. Fast (140-180 BPM) Finger control for taps and grace notes. The accent drops to half height class. Grace note spacing approaches -1/64. The double-stroke aspect of the sticking becomes an advantage at speed, as the rebound from the accent naturally feeds into the second tap on the same hand. Moeller technique employed for accent strokes."},{"location":"specs/rudiments/28_swiss_army_triplet/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#common-variations","title":"Common Variations","text":"<ul> <li>Non-alternating (traditional): The original Swiss army triplet loops on a single lead hand (all lR L R or all rL R L) without alternating. This is common in Swiss Basel drumming</li> <li>Flam accent comparison: Played side-by-side with the flam accent (#21) to develop awareness of the sticking difference and its effect on hand coordination</li> <li>Swiss army triplet in 6/8: The triplet pattern fits naturally into compound time</li> <li>Swiss army triplet with accent on third note: A variation used in some corps-style literature for a different dynamic contour</li> <li>No-flam preparation: Practice the double-stroke triplet pattern (R L R | L R L) without flams to isolate the sticking from the ornament</li> </ul>"},{"location":"specs/rudiments/28_swiss_army_triplet/#prerequisites","title":"Prerequisites","text":"<ul> <li>Comfort with triplet subdivision</li> </ul>"},{"location":"specs/rudiments/28_swiss_army_triplet/#20-flam-the-basic-flam-ornament-must-be-solid-on-both-hands","title":"20 Flam -- the basic flam ornament must be solid on both hands","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#21-flam-accent-understanding-the-triplet-based-flam-pattern-provides-the-rhythmic-foundation-the-swiss-army-triplet-is-the-double-stroke-counterpart","title":"21 Flam Accent -- understanding the triplet-based flam pattern provides the rhythmic foundation; the Swiss army triplet is the double-stroke counterpart","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#6-double-stroke-open-roll-the-double-stroke-technique-accent-tap-on-the-same-hand-is-fundamental-to-this-rudiment","title":"6 Double Stroke Open Roll -- the double-stroke technique (accent + tap on the same hand) is fundamental to this rudiment","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#builds-toward","title":"Builds Toward","text":"<ul> <li>Advanced Swiss drumming literature and Basel drumming technique</li> <li>Development of double-stroke control within triplet subdivision</li> <li>Application in jazz comping, shuffle patterns, and compound-meter passages where the double-stroke sticking provides a different physical approach to the flam accent rhythm</li> </ul>"},{"location":"specs/rudiments/28_swiss_army_triplet/#teaching-notes","title":"Teaching Notes","text":"<p>The Swiss army triplet is often taught in direct comparison with the flam accent (#21) because they produce the same rhythmic sound but use different stickings. This comparison is one of the most valuable pedagogical exercises in rudimental drumming -- it teaches students that the same rhythm can require fundamentally different physical approaches.</p> <p>Common mistakes: - Uneven triplet spacing: The double stroke (accent + tap on the same hand) often causes students to rush the second tap, shortening the space between it and the following single - Confusing the sticking with the flam accent: Students may unconsciously revert to alternating single strokes (the flam accent sticking) instead of maintaining the double-stroke pattern - Flat flams: The rapid transition from the third triplet note to the grace note for the next beat's flam is a coordination challenge - Unequal doubles: The accent and same-hand tap should be clearly differentiated in dynamics, not played as two equal strokes - Inconsistent alternation: When playing the alternating version, the lead-hand switch between beats can disrupt the flow</p> <p>Practice strategies: - Begin by playing the double-stroke triplet pattern without flams (R L R | L R L or R R L | L L R) to internalize the sticking - Compare directly with the flam accent: play one bar of flam accent, then one bar of Swiss army triplet at the same tempo to feel the sticking difference - Practice at very slow tempos to develop even triplet spacing despite the double-stroke sticking - Use a metronome set to the triplet subdivision to verify that all three notes per beat are evenly spaced - Practice the non-alternating version first (all right-lead), then all left-lead, before combining into the alternating form</p> <p>What to listen for: - Even triplet spacing -- all three notes per beat equidistant in time, despite the double-stroke sticking - The Swiss army triplet should sound identical to the flam accent; if it sounds different, the triplet spacing is uneven - Clear dynamic hierarchy: grace (soft) &lt; tap (medium) &lt; accent (loud) - Consistent flam quality across both hands - No audible \"seam\" at the beat boundary where the lead hand switches (in the alternating version)</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#historical-context","title":"Historical Context","text":"<p>The Swiss army triplet originates from Swiss military drumming traditions, particularly the Basel school of drumming. Called \"Triolets\" in French and \"Triolen\" in German, the pattern appears in Swiss and French military duty calls and ceremonial drumming. It was not included in the original NARD 26 rudiments established in 1933. The Swiss army triplet was added as PAS #28 when the Percussive Arts Society expanded the standard rudiments from 26 to 40 in 1984, explicitly recognizing the influence of Swiss drumming on the American rudimental tradition. The inclusion of this rudiment alongside the flam accent (#21) highlights an important pedagogical principle: two rudiments can produce identical sounds but require fundamentally different physical techniques. Swiss Basel drumming -- one of the world's oldest continuous drumming traditions, dating to the 15<sup>th</sup> century -- uses the double-stroke triplet pattern extensively, and the PAS adoption brought this technique into the mainstream American rudimental vocabulary.</p>"},{"location":"specs/rudiments/28_swiss_army_triplet/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/28_swiss_army_triplet/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;\nlR   L   R  |  rL   R   L\n</code></pre>"},{"location":"specs/rudiments/28_swiss_army_triplet/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1        &amp;        a     | 2        &amp;        a     |\nHand:    | (l)R     L        R     | (r)L     R        L     |\nType:    |  g  A    t        t     |  g  A    t        t     |\nAccent:  |     &gt;                   |     &gt;                   |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). The triplet grid divides each beat into three equal parts at positions 0, \u2153, and \u2154 of each beat. Note that the grid visualization is identical to the flam accent (#21) -- the difference is in the sticking (double stroke vs single stroke), not in the rhythmic placement or accent pattern.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/","title":"PAS #29: Inverted Flam Tap","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#1-identity","title":"1. Identity","text":"Field Value PAS Number 29 Name Inverted Flam Tap Category flam Family advanced flam Composed Of Flam (#20) + tap; the \"inversion\" of #22 Flam Tap, where the tap precedes the flam instead of following it Related #22 Flam Tap (the non-inverted version: flam then tap), #20 Flam (the primitive flam ornament), #6 Double Stroke Open Roll (the underlying LL RR hand pattern), #27 Pataflafla (another advanced flam with rapid flam transitions) NARD Original No (added by PAS in 1984 expansion to 40 rudiments)"},{"location":"specs/rudiments/29_inverted_flam_tap/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 1.5 beats Strokes Per Cycle 6 (4 primary strokes + 2 grace notes) Primary Strokes Per Cycle 4 <p>The inverted flam tap is the mirror image of the flam tap (#22). Where the flam tap places the flam on the first stroke of each double (lR R | rL L), the inverted flam tap places the flam on the second stroke: the tap comes first, then the flam follows on the same hand (L lR | R rL). The \"inversion\" refers to the reversal of the tap-flam order within each double-stroke pair. The underlying hand pattern is an offset double stroke roll (LL RR) starting on the \"and\" of each count, rather than the standard double stroke roll (RR LL) starting on the downbeat. The YAML defines a 1.5-beat cycle to accommodate the three sixteenth-note positions per half-cycle.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 L t 2 \u00bc - 1/32 (grace before 1e) L g 3 \u00bc 1e R A 4 \u00bd 1&amp; R t 5 \u00be - 1/32 (grace before 1a) R g 6 \u00be 1a L A <p>Note: The primary strokes occupy sixteenth-note grid positions: 1, 1e, 1&amp;, 1a. The pattern fills the beat completely. Each half of the cycle is a tap followed by a flam: L then lR (first half), R then rL (second half). The tap and the grace note for the following flam are played by the same hand, which is the distinctive coordination challenge of this rudiment.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>      &gt;        &gt;\nL   lR   |  R  rL\n</code></pre> <p>Each group consists of a tap followed by a flam where the grace note is played by the same hand that just played the tap. This is the \"inversion\" of the flam tap (#22), where the sequence is flam-then-tap instead of tap-then-flam.</p> <p>Comparison with Flam Tap (#22): - Flam Tap: <code>lR R | rL L</code> -- flam first, then tap on the same hand as the primary - Inverted Flam Tap: <code>L lR | R rL</code> -- tap first, then flam where the grace is played by the hand that just tapped</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L tap none n/a Left-hand tap preceding right-hand flam 2 L grace grace #3 Left-hand grace note for right-hand flam (same hand as the preceding tap) 3 R accent primary n/a Right-hand flam primary (accented) 4 R tap none n/a Right-hand tap preceding left-hand flam 5 R grace grace #6 Right-hand grace note for left-hand flam (same hand as the preceding tap) 6 L accent primary n/a Left-hand flam primary (accented)"},{"location":"specs/rudiments/29_inverted_flam_tap/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #2 (L grace) precedes stroke #3 (R primary); stroke #5 (R grace) precedes stroke #6 (L primary) - Critical: the grace note hand is the same hand that just played the preceding tap. The left hand plays tap (#1) then immediately plays grace (#2) for the right-hand flam. This tap-to-grace transition on the same hand is the defining technical challenge - The tap and grace are separated by a full sixteenth-note duration minus the grace offset (\u00bc - 1/32 = 7/32 beat), but at fast tempos this interval becomes very short</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Flam primary strokes on the \"e\" and \"a\" sixteenth positions tap 0.65 - 0.77 The tap preceding each flam grace (flam) 0.50 - 0.70 Soft grace note preceding each flam primary <p>The inverted flam tap shares the same three-level dynamic hierarchy as the flam tap: grace (soft), tap (medium), accent (loud). However, the dynamic contour is reversed: where the flam tap goes accent-then-tap (loud-soft), the inverted flam tap goes tap-then-accent (soft-loud). This creates a pickup or anacrusis feel rather than the flam tap's downbeat-oriented character.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-     &gt;     -     &gt;\nL     lR    R     rL\n</code></pre> <p>Accents fall on the \"e\" and \"a\" sixteenth-note positions (the flam primaries), with taps on the \"1\" and \"&amp;\" positions. This placement of accents on weak sixteenth-note positions gives the inverted flam tap its characteristic upbeat, syncopated feel.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#dynamic-contour","title":"Dynamic Contour","text":"<p>The inverted flam tap produces a repeating \"weak-strong\" pattern at the eighth-note level: unaccented tap, then accented flam, alternating between hands. This creates an upbeat, pickup-oriented feel that contrasts sharply with the flam tap's \"strong-weak\" (accent-then-tap) character. The overall effect is one of constant forward motion, as each tap propels toward the following accented flam. The dynamic shape within each tap-flam pair is a small crescendo (soft tap rising to loud accent), giving the rudiment an energetic, driving quality.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L tap low (2-6\") wrist 2 L grace tap (&lt; 2\") fingers 3 R accent full (12\"+) wrist + arm 4 R tap low (2-6\") wrist 5 R grace tap (&lt; 2\") fingers 6 L accent full (12\"+) wrist + arm <p>The primary physical challenge of the inverted flam tap is the upstroke required to transition from the tap to the accent. Consider the left hand's path: it plays a low-height tap (#1), immediately transitions to a tap-height grace (#2), and then must be ready high for its next accent (#6). The right hand mirrors: accent (#3), tap (#4), grace (#5). The critical moment is the tap-to-grace transition (#1 to #2, #4 to #5): the hand plays a low tap and must immediately drop even lower to grace height for the flam. This is followed by the opposite hand's full-height accent. The Moeller whip stroke is particularly valuable here -- the tap can serve as the preparatory \"pickup\" motion for the opposite hand's accented flam.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented flams. The tap-to-grace transition has ample time. Each tap and flam are distinctly articulated. Grace notes have wide spacing from primary (-1/16 range). Focus on the upstroke motion: getting from tap height up to accent height for the opposite hand's flam. Moderate (100-140 BPM) Wrist-driven strokes. The Moeller whip becomes useful for the accent strokes: the tap serves as the preparatory downward motion, and the grace note feeds naturally into the opposite hand's upward whip for the accent. Grace note spacing at standard -1/32. The tap-to-grace connection should feel like a single flowing motion. Fast (140-180 BPM) Finger control for taps and grace notes. Accents drop to half height class. Grace note spacing approaches -1/64. The Moeller whip is essential for maintaining dynamic contrast at speed. The tap and grace become nearly continuous -- the hand barely lifts between the low tap and the even lower grace. The rudiment begins to feel like a continuous rocking motion between hands."},{"location":"specs/rudiments/29_inverted_flam_tap/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#common-variations","title":"Common Variations","text":"<ul> <li>Non-alternating inverted flam tap: All flams led by the same hand (all L lR or all R rL), used as a preparatory exercise</li> <li>Inverted flam tap with accent on the tap: Adding an accent to the tap for a double-accent variation</li> <li>Inverted flam tap combined with flam tap: Alternating one beat of flam tap with one beat of inverted flam tap, an excellent coordination exercise</li> <li>No-flam preparation: Practice the offset double stroke pattern (L R | R L) with accents on the second of each double to isolate the accent placement from the ornament</li> </ul>"},{"location":"specs/rudiments/29_inverted_flam_tap/#prerequisites","title":"Prerequisites","text":"<ul> <li>Moeller upstroke technique -- the ability to generate an accent from a low stick position is critical</li> </ul>"},{"location":"specs/rudiments/29_inverted_flam_tap/#22-flam-tap-understanding-the-standard-flam-tap-is-essential-before-learning-its-inversion-the-two-rudiments-should-be-studied-as-a-pair","title":"22 Flam Tap -- understanding the standard flam tap is essential before learning its inversion; the two rudiments should be studied as a pair","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#20-flam-the-basic-flam-ornament-must-be-solid-on-both-hands","title":"20 Flam -- the basic flam ornament must be solid on both hands","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#6-double-stroke-open-roll-the-offset-double-stroke-pattern-starting-on-the-and-underlies-the-inverted-flam-tap","title":"6 Double Stroke Open Roll -- the offset double stroke pattern (starting on the \"and\") underlies the inverted flam tap","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#builds-toward","title":"Builds Toward","text":"<ul> <li>Advanced rudimental solo passages where flam tap and inverted flam tap alternate</li> <li>Development of Moeller technique and accent control from low stick positions</li> <li>Application in drumset fills and corps-style snare parts where the upbeat accent pattern creates forward motion</li> </ul>"},{"location":"specs/rudiments/29_inverted_flam_tap/#27-pataflafla-combines-back-to-back-flams-requiring-similar-tap-to-grace-coordination","title":"27 Pataflafla (combines back-to-back flams requiring similar tap-to-grace coordination)","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#teaching-notes","title":"Teaching Notes","text":"<p>The inverted flam tap is best understood as the \"mirror\" of the flam tap (#22). Where the flam tap places the flam first (strong beat) and the tap second (weak beat), the inverted flam tap reverses this: tap first (weak beat), then flam (strong beat). This inversion changes the musical character entirely, from a downbeat-oriented pattern to an upbeat, pickup-oriented pattern.</p> <p>Common mistakes: - Confusing the sticking with the flam tap: Students must clearly distinguish <code>L lR | R rL</code> (inverted) from <code>lR R | rL L</code> (standard) - Flat flams: The tap-to-grace transition can cause the grace note to arrive too late, collapsing the flam into a flat (simultaneous) stroke - Uneven dynamics: The tap should be noticeably softer than the accented flam, but the rapid tap-to-grace-to-accent sequence can cause the tap to creep up in volume - Rhythmic delay before the accent: The challenge of lifting the stick from tap height to accent height can cause a hesitation or \"hiccup\" before the flam - Losing the sixteenth-note evenness: All four primary strokes should be evenly spaced at the sixteenth-note grid, regardless of which are taps and which are accents</p> <p>Practice strategies: - Begin by playing the offset accented doubles without flams: L &gt;R | R &gt;L (accent on the second of each double) - Add the grace notes only after the accent-on-second-double pattern is comfortable and even - Practice the flam tap and inverted flam tap back-to-back at the same tempo to internalize the difference - Use the Moeller whip stroke from the beginning -- this rudiment is one of the best vehicles for developing Moeller technique - Isolate the tap-to-grace transition: play the tap, pause, then execute the grace + opposite primary - Practice at very slow tempos with a metronome on the sixteenth-note grid to ensure even spacing</p> <p>What to listen for: - Even sixteenth-note spacing across all four primary strokes - Clear dynamic hierarchy: grace (soft) &lt; tap (medium) &lt; accent (loud) - The tap-flam pair should sound like a pickup into a downbeat, not two equal events - No rhythmic hesitation before the accented flam - Identical flam quality on both hands (lR and rL flams should sound the same) - The overall pattern should have a forward-driving, upbeat character distinct from the flam tap's grounded feel</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#historical-context","title":"Historical Context","text":"<p>The inverted flam tap was one of the 14 new rudiments added when the Percussive Arts Society expanded the standard rudiments from 26 to 40 in 1984. It was added as PAS #29, directly following the basic flam rudiments and compound flam rudiments in the numbering scheme. The inclusion of the inverted flam tap alongside the original flam tap (#22, an NARD original) demonstrates the PAS expansion's focus on exploring variations and inversions of established patterns. The concept of \"inverting\" a rudiment -- reversing the order of its component strokes -- is a common pedagogical technique in rudimental drumming, and the inverted flam tap is perhaps the clearest example of this principle in the PAS 40. Bill Bachman, author of Stick Technique and a Modern Drummer columnist, has cited the inverted flam tap as one of the ten most important rudiments for developing Moeller technique and accent control.</p>"},{"location":"specs/rudiments/29_inverted_flam_tap/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/29_inverted_flam_tap/#stick-notation","title":"Stick Notation","text":"<pre><code>      &gt;        &gt;\nL   lR   |  R  rL\n</code></pre>"},{"location":"specs/rudiments/29_inverted_flam_tap/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   |\nHand:    | L     (l)R  R     (r)L |\nType:    | t      g A  t      g A |\nAccent:  |           &gt;          &gt; |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position (offset -1/32 beat). Primary strokes land on all four sixteenth-note positions (1, e, &amp;, a). Taps fall on the stronger metric positions (1 and &amp;) while accented flams fall on the weaker positions (e and a), creating the characteristic syncopated, upbeat feel.</p>"},{"location":"specs/rudiments/30_flam_drag/","title":"PAS #30: Flam Drag","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/30_flam_drag/#1-identity","title":"1. Identity","text":"Field Value PAS Number 30 Name Flam Drag Category flam Family advanced flam Composed Of Flam (#20) + tap + Drag (#31); a cross-category rudiment combining the flam ornament (single grace note before a primary) with the drag ornament (two grace notes before a primary) Related #20 Flam (the primitive flam ornament), #31 Drag (the primitive drag ornament), #21 Flam Accent (similar triplet-based structure but with single-stroke taps instead of drags), #32 Single Drag Tap (drag + tap pattern), #22 Flam Tap (flam + tap pattern) NARD Original No (added by PAS in 1984 expansion to 40 rudiments)"},{"location":"specs/rudiments/30_flam_drag/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 12 (6 primary strokes + 2 flam grace notes + 4 drag grace notes) Primary Strokes Per Cycle 6 <p>The flam drag is the only rudiment in the PAS 40 that combines two different ornament types: the flam (single grace note) and the drag (double grace note). Each half of the 3-beat cycle contains three primary strokes arranged as: flammed accent, tap, then dragged accent. The flam and drag alternate between hands, creating a balanced pattern. The YAML encodes the pattern over 3 beats with sixteenth-note subdivision, giving 12 sixteenth-note slots for 6 primary strokes -- the remaining slots accommodate the ornament timing.</p>"},{"location":"specs/rudiments/30_flam_drag/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/32 (grace before 1) L g (flam) 2 0 1 R A 3 \u00bc 1e L t 4 \u00bd - 1/16 (1<sup>st</sup> drag grace before 1&amp;) L g (drag) 5 \u00bd - 1/32 (2<sup>nd</sup> drag grace before 1&amp;) L g (drag) 6 \u00bd 1&amp; R A 7 1 + \u00bd - 1/32 (grace before 2&amp;) R g (flam) 8 1 + \u00bd 2&amp; L A 9 1 + \u00be 2a R t 10 2 - 1/16 (1<sup>st</sup> drag grace before 3) R g (drag) 11 2 - 1/32 (2<sup>nd</sup> drag grace before 3) R g (drag) 12 2 3 L A <p>Note: Each half-cycle occupies 1.5 beats. The first half spans beats 1 to 1&amp; (flam on 1, tap on 1e, drag on 1&amp;). The second half spans beats 2&amp; to 3 (flam on 2&amp;, tap on 2a, drag on 3). The drag grace notes are played by the opposite hand from the drag primary, and they form a quick double-bounce: the first grace at -1/16 beat and the second at -1/32 beat before the primary.</p>"},{"location":"specs/rudiments/30_flam_drag/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/30_flam_drag/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;        &gt;        &gt;\nlR  L  llR   |   rL  R  rrL\n</code></pre> <p>Each group of three primary strokes begins with a flam (single grace + accent), followed by a tap on the opposite hand, then a drag (double grace + accent) on the same hand as the flam primary. The lead hand alternates between halves.</p>"},{"location":"specs/rudiments/30_flam_drag/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace flam grace #2 Single grace note preceding right-hand flam 2 R accent primary n/a Right-hand flam primary (accented) 3 L tap none n/a Left-hand tap between flam and drag 4 L grace drag grace 1 #6 First drag grace note (same hand as second grace, opposite from drag primary) 5 L grace drag grace 2 #6 Second drag grace note (closer to primary than first grace) 6 R accent primary n/a Right-hand drag primary (accented) 7 R grace flam grace #8 Single grace note preceding left-hand flam 8 L accent primary n/a Left-hand flam primary (accented) 9 R tap none n/a Right-hand tap between flam and drag 10 R grace drag grace 1 #12 First drag grace note 11 R grace drag grace 2 #12 Second drag grace note 12 L accent primary n/a Left-hand drag primary (accented)"},{"location":"specs/rudiments/30_flam_drag/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #1 (L grace) precedes stroke #2 (R primary); stroke #7 (R grace) precedes stroke #8 (L primary) - Standard single-grace-note flam behavior identical to #20 Flam</p> <p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the drag primary) - Strokes #4-5 (both L) precede stroke #6 (R primary); strokes #10-11 (both R) precede stroke #12 (L primary) - The two drag grace notes form a quick diddle (same-hand double bounce) leading into the primary - The drag grace notes should sound like a brief buzz or ruff before the primary, not two distinct taps - Important: the tap (stroke #3 or #9) and the first drag grace (stroke #4 or #10) are played by the same hand. The tap-to-drag-grace transition is a key coordination challenge, as the hand must shift from a low-height tap to the first of two rapid grace strokes</p>"},{"location":"specs/rudiments/30_flam_drag/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/30_flam_drag/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (flam primary) 1.0 Accented primary strokes preceded by flam grace accent (drag primary) 1.0 Accented primary strokes preceded by drag graces tap 0.65 - 0.77 The single tap between flam and drag grace (flam) 0.50 - 0.70 Single grace note for flam ornament grace (drag) 0.45 - 0.65 Each of the two drag grace notes; slightly softer than flam grace <p>The flam drag has a four-level dynamic hierarchy: drag grace (softest), flam grace, tap, accent (loudest). Both the flam and drag primaries are at full accent velocity, creating two strong anchor points per half-cycle. The tap provides a dynamic valley between the two accented ornaments.</p>"},{"location":"specs/rudiments/30_flam_drag/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     &gt;     |     &gt;     -     &gt;\nlR    L     llR   |     rL    R     rrL\n</code></pre> <p>Two accents per half-cycle: one on the flam and one on the drag. The tap between them is unaccented. This dual-accent pattern is similar to the flamacue (#23) but with a drag replacing the closing clean accent.</p>"},{"location":"specs/rudiments/30_flam_drag/#dynamic-contour","title":"Dynamic Contour","text":"<p>The flam drag produces a distinctive \"accent-valley-accent\" pattern within each half-cycle. The flam provides a broad, full opening accent (enhanced by the single grace note), the tap creates a brief dynamic dip, and the drag provides a slightly different-textured closing accent (enhanced by the double grace note ruff). The contrast between the flam's single-grace breadth and the drag's double-grace buzz gives the two accents subtly different sonic characters, even though both are at full velocity. The overall shape within each half-cycle is a shallow \"U\" contour: strong-weak-strong, with the two strong beats colored differently by their ornaments.</p>"},{"location":"specs/rudiments/30_flam_drag/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/30_flam_drag/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (flam) tap (&lt; 2\") fingers 2 R accent full (12\"+) wrist + arm 3 L tap low (2-6\") wrist 4 L grace (drag 1) tap (&lt; 2\") fingers 5 L grace (drag 2) tap (&lt; 2\") fingers / rebound 6 R accent full (12\"+) wrist + arm 7 R grace (flam) tap (&lt; 2\") fingers 8 L accent full (12\"+) wrist + arm 9 R tap low (2-6\") wrist 10 R grace (drag 1) tap (&lt; 2\") fingers 11 R grace (drag 2) tap (&lt; 2\") fingers / rebound 12 L accent full (12\"+) wrist + arm <p>The flam drag presents a unique physical challenge because it requires two different ornament techniques within each half-cycle. Consider the left hand's path through the first half: it plays a flam grace (#1, tap height, fingers), then a tap (#3, low height, wrist), then two drag grace notes (#4-5, tap height, fingers/rebound). The hand must execute a grace-tap-grace-grace sequence, transitioning between different height classes and motion types in rapid succession. The tap-to-drag transition (stroke #3 to #4) is particularly demanding: the hand goes from a low-height wrist tap to an immediate pair of finger-controlled grace strokes, requiring a rapid switch in stick control technique. The drag grace pair itself requires a controlled double bounce at tap height, with the second grace benefiting from the rebound of the first.</p>"},{"location":"specs/rudiments/30_flam_drag/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for both accented primaries. Flam grace clearly audible with wide spacing (-1/16 range). Drag grace notes are individually articulated as two distinct soft strokes (open drag). The tap is a deliberate wrist stroke. All ornaments are clearly distinguishable. Focus on the contrast between flam (one grace) and drag (two graces) textures. Moderate (100-140 BPM) Wrist-driven strokes. Flam grace at standard -1/32 offset. Drag grace notes at -1/16 and -1/32 offsets, beginning to close up and sound more like a buzz. The tap-to-drag transition tightens. The two ornament types should be clearly different in character: the flam is a single \"kiss\" before the primary, while the drag is a brief \"buzz\" or ruff. Fast (140-160 BPM) Finger control for all grace notes and taps. Accents drop to half height class. Flam grace approaches -1/64 offset. Drag grace notes close to -1/32 and -1/64 offsets, sounding nearly as a single buzz. The tap-to-drag transition requires very quick finger preparation. Both ornament types compress but should remain distinguishable: the flam is tighter than the drag, which retains a slight \"buzz\" quality from its two grace notes."},{"location":"specs/rudiments/30_flam_drag/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/30_flam_drag/#common-variations","title":"Common Variations","text":"<ul> <li>Flam drag in triplets: Some interpretations place the flam drag in triplet subdivision rather than sixteenth notes, with the flam on the first triplet note, tap on the second, and drag on the third</li> <li>Flam drag with accented tap: Adding an accent to the tap for a continuous-accent variation</li> <li>Reversed flam drag: Drag first, then tap, then flam -- reversing the ornament order within each group</li> <li>No-ornament preparation: Practice the accent-tap-accent pattern as clean strokes (R L R | L R L) to isolate the rhythm from the ornaments, then add the flam, then add the drag</li> </ul>"},{"location":"specs/rudiments/30_flam_drag/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ability to differentiate between flam and drag ornaments in rapid succession</li> </ul>"},{"location":"specs/rudiments/30_flam_drag/#20-flam-the-flam-ornament-must-be-consistent-on-both-hands","title":"20 Flam -- the flam ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/30_flam_drag/#31-drag-the-drag-ornament-double-grace-primary-must-be-comfortable-on-both-hands","title":"31 Drag -- the drag ornament (double grace + primary) must be comfortable on both hands","text":""},{"location":"specs/rudiments/30_flam_drag/#21-flam-accent-the-tripletthree-note-grouping-provides-structural-familiarity","title":"21 Flam Accent -- the triplet/three-note grouping provides structural familiarity","text":""},{"location":"specs/rudiments/30_flam_drag/#32-single-drag-tap-the-drag-tap-combination-develops-relevant-coordination","title":"32 Single Drag Tap -- the drag-tap combination develops relevant coordination","text":""},{"location":"specs/rudiments/30_flam_drag/#builds-toward","title":"Builds Toward","text":"<ul> <li>Cross-category rudiment combinations in advanced rudimental solos</li> <li>Development of the ability to rapidly switch between different ornament techniques</li> <li>Application in drumset and corps-style passages where flam and drag textures alternate for timbral variety</li> </ul>"},{"location":"specs/rudiments/30_flam_drag/#teaching-notes","title":"Teaching Notes","text":"<p>The flam drag is the culminating rudiment of the flam category, sitting at PAS #30 as the last and most complex of the 11 flam rudiments. It is also the first rudiment in the PAS 40 that explicitly combines two different ornament types (flam and drag), making it a bridge between the flam category (PAS #20-30) and the drag category (PAS #31-40).</p> <p>Common mistakes: - Confusing the drag grace notes with flam grace notes: The drag uses two grace notes on the same hand, while the flam uses one grace note on the opposite hand. At speed, students often reduce the drag to a single grace, making it sound like another flam - Uneven drag grace notes: The two drag grace notes should be a quick, even double bounce, not two separate taps and not one louder than the other - Losing the tap between ornaments: The tap is squeezed between two ornaments and can be rushed or swallowed at speed - Same texture for flam and drag: The two ornaments should have distinct sonic characters -- the flam is a \"breadth\" ornament (widening the primary), while the drag is a \"ruff\" ornament (buzzing into the primary) - Inconsistent ornament quality between halves: The right-hand flam + left-hand drag (first half) should be a mirror image of the left-hand flam + right-hand drag (second half)</p> <p>Practice strategies: - Begin by practicing flams and drags separately, then in isolation within the three-note pattern - Play the pattern without ornaments first (&gt;R L &gt;R | &gt;L R &gt;L) to internalize the accent pattern - Add flams only: lR L R | rL R L (a simplified flam accent) - Add drags only: R L llR | L R rrL (a drag pattern) - Combine both ornaments only after each is comfortable individually - Practice at very slow tempos to clearly hear the textural difference between the flam (one grace) and the drag (two graces) - Record and listen to verify that the two ornament types are sonically distinguishable</p> <p>What to listen for: - Two distinct ornament textures within each half-cycle: the flam's single-grace \"breadth\" and the drag's double-grace \"ruff\" - Even tap between the two ornaments at a clearly lower dynamic - Consistent flam quality (identical grace-to-primary spacing across the cycle) - Consistent drag quality (identical double-grace buzz across the cycle) - The overall pattern should have a clear accent-valley-accent contour per half-cycle - Balanced execution between halves (right-lead and left-lead groups sound identical)</p>"},{"location":"specs/rudiments/30_flam_drag/#historical-context","title":"Historical Context","text":"<p>The flam drag was not included in the original NARD 26 rudiments. It was added as PAS #30 when the Percussive Arts Society expanded the standard rudiments from 26 to 40 in 1984. As the last rudiment in the flam category, it serves as a capstone that bridges the flam and drag categories by combining both ornament types in a single pattern. The concept of cross-category rudiments -- combining ornaments from different families -- was part of the PAS expansion's philosophy of recognizing the interconnected nature of rudimental technique. While the original NARD 26 kept flams and drags largely separate, the PAS expansion acknowledged that advanced players routinely combine these ornaments in performance. The flam drag codifies this practice as a standard rudiment, providing a formal vehicle for developing the ability to switch rapidly between different ornament types. It appears in advanced drum corps snare drum literature and competitive rudimental solos where timbral variety and ornamental contrast are desired.</p>"},{"location":"specs/rudiments/30_flam_drag/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/30_flam_drag/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;        &gt;        &gt;        &gt;\nlR  L  llR   |   rL  R  rrL\n</code></pre>"},{"location":"specs/rudiments/30_flam_drag/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e           &amp;         | ...   2&amp;    a           3         |\nHand:    | (l)R  L     (ll)  R         | ...   (r)L  R     (rr)  L         |\nType:    |  g A  t      gg   A         |        g A  t      gg   A         |\nAccent:  |    &gt;              &gt;         |           &gt;              &gt;         |\n</code></pre> <p>Grace notes shown in parentheses indicate they fall just before the grid position. Flam grace notes use a single parenthesized letter (offset -1/32 beat). Drag grace notes use a doubled parenthesized letter, with the first grace at -1/16 beat and the second at -1/32 beat before the primary. The first half spans beats 1-1&amp; and the second half spans beats 2&amp;-3.</p>"},{"location":"specs/rudiments/31_drag/","title":"PAS #31: Drag (Ruff)","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/31_drag/#1-identity","title":"1. Identity","text":"Field Value PAS Number 31 Name Drag (Ruff) Category drag Family basic drag Composed Of None -- this is the primitive drag ornament, two grace notes (same hand) preceding a primary stroke Related #20 Flam (single grace note counterpart), #32 Single Drag Tap (drag + tap), #33 Double Drag Tap (two drags + tap), #30 Flam Drag (flam combined with drag) NARD Original Yes (as \"Ruff\")"},{"location":"specs/rudiments/31_drag/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision eighth Cycle Length 1 beat Strokes Per Cycle 6 (4 grace notes + 2 primary strokes) Primary Strokes Per Cycle 2 <p>The drag is the foundational ornament of the drag category, playing the same structural role for drag rudiments (PAS #31-40) that the flam (#20) plays for flam rudiments (PAS #20-30). Where the flam uses a single grace note on the opposite hand, the drag uses two grace notes on the same hand (opposite from the primary). The two grace notes form a quick double-bounce or controlled diddle, producing a brief \"buzz\" or \"ruff\" leading into the primary stroke. The pattern alternates between right-hand and left-hand drags on the eighth-note grid.</p>"},{"location":"specs/rudiments/31_drag/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R A 4 \u00bd - 1/16 (1<sup>st</sup> grace before 1&amp;) R g 5 \u00bd - 1/32 (2<sup>nd</sup> grace before 1&amp;) R g 6 \u00bd 1&amp; L A"},{"location":"specs/rudiments/31_drag/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/31_drag/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;          &gt;\nllR        rrL\n</code></pre>"},{"location":"specs/rudiments/31_drag/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First grace note (earlier), same hand as #2 2 L grace drag grace 2 #3 Second grace note (closer to primary), same hand as #1 3 R accent primary n/a Right-hand drag primary stroke 4 R grace drag grace 1 #6 First grace note (earlier), same hand as #5 5 R grace drag grace 2 #6 Second grace note (closer to primary), same hand as #4 6 L accent primary n/a Left-hand drag primary stroke"},{"location":"specs/rudiments/31_drag/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Strokes #1-2 (both L) precede stroke #3 (R primary); strokes #4-5 (both R) precede stroke #6 (L primary) - The two grace notes form a quick diddle (same-hand double bounce) leading into the primary - The grace notes should sound like a brief \"buzz\" or \"ruff\" before the primary, not two distinct taps - At moderate tempos the inter-grace interval (1/32 beat) is shorter than the second-grace-to-primary interval (also 1/32 beat), producing an accelerating onset into the primary - Key physical difference from the flam (#20): the flam grace is played by the opposite hand (an offset from simultaneous two-hand motion), while the drag grace notes are played by the same hand (a controlled double bounce)</p>"},{"location":"specs/rudiments/31_drag/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/31_drag/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (primary) 1.0 Full stroke, the dominant sound of the drag grace (drag) 0.45 - 0.65 Each of the two drag grace notes; softer than flam grace notes <p>The dynamic contrast between grace notes and primary is fundamental to the drag's character. If the grace notes are too loud, the ornament sounds like a triple stroke or triplet rather than a ruff. If the grace notes are too quiet, the buzz effect before the primary is lost and the drag sounds like a plain accent. The two grace notes should be at approximately equal velocity to each other, though the second grace may be very slightly louder due to the natural rebound mechanics of the controlled double bounce.</p>"},{"location":"specs/rudiments/31_drag/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;         &gt;\nllR       rrL\n</code></pre> <p>Both primary strokes are accented. The grace notes are inherently soft and do not receive accent treatment.</p>"},{"location":"specs/rudiments/31_drag/#dynamic-contour","title":"Dynamic Contour","text":"<p>The drag has a symmetrical dynamic contour: each half-beat contains one \"buzz-loud\" pair (grace-grace-primary). The pattern is identical on both halves but alternates between hands. The dynamic shape is best described as two matched impulses per beat, each preceded by a soft double-bounce onset. Unlike the flam's single-grace onset, the drag's two-grace onset creates a brief crescendo effect (soft-soft-loud) that gives the primary a sense of forward momentum. There is no crescendo or decrescendo across the cycle; the pattern repeats identically.</p>"},{"location":"specs/rudiments/31_drag/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/31_drag/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 R grace (drag 1) tap (&lt; 2\") fingers 5 R grace (drag 2) tap (&lt; 2\") fingers / rebound 6 L accent full (12\"+) wrist + arm <p>The physical essence of the drag is a controlled double bounce with the non-primary hand while the primary hand executes a full downstroke. Unlike the flam, where two hands begin their motion simultaneously from different heights, the drag requires one hand to produce two rapid, quiet strokes (a bounced diddle at tap height) while the other hand prepares for a full accent. The first grace note is an active finger stroke; the second grace note benefits from the rebound of the first, making it partially passive. This bounce-and-catch technique is the defining physical skill of all drag-category rudiments.</p>"},{"location":"specs/rudiments/31_drag/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Wide separation between grace notes and primary. Both grace notes are individually articulated as two distinct soft strokes (\"open drag\"). The double bounce is controlled with active finger strokes for both graces. The first grace at -1/16 and second at -1/32 are clearly distinguishable. Full wrist + arm motion for primary. Moderate (100-140 BPM) Standard drag spacing. Grace notes begin to close up, with the second grace relying more on rebound from the first. The two graces sound more like a quick buzz than two separate strokes. Grace offsets at -1/16 and -1/32 from primary. Primary uses wrist motion. This is the \"standard closed drag\" sound. Fast (140-160 BPM) Tight drag spacing. Grace notes compress toward -1/32 and -1/64 offsets. The double bounce becomes nearly a single buzz. The primary drops to half height class. The grace notes are almost entirely rebound-driven, with only the first requiring an active finger initiation. The drag approaches a \"crushed\" sound where the ruff and primary are barely distinguishable as separate events."},{"location":"specs/rudiments/31_drag/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/31_drag/#common-variations","title":"Common Variations","text":"<ul> <li>Open drag: Exaggerated spacing between grace notes and primary for stylistic effect or slow tempos. Both grace notes are clearly audible as distinct strokes.</li> <li>Closed drag: Very tight grace-to-primary spacing, used at fast tempos. The two graces blur into a single buzz before the primary.</li> <li>Three-stroke ruff: In orchestral contexts, a \"ruff\" may include three grace notes rather than two. This is distinct from the PAS drag, which specifically uses two grace notes.</li> <li>Unison drag: Both grace notes and primary played by the same hand (a triple stroke). This is a practice variation, not the standard rudiment.</li> <li>Drag with tap primary: Playing the primary as a tap (unaccented) rather than an accent for dynamic variation within musical contexts.</li> </ul>"},{"location":"specs/rudiments/31_drag/#prerequisites","title":"Prerequisites","text":"<ul> <li>Rebound control -- ability to produce two rapid, quiet bounces at tap height</li> </ul>"},{"location":"specs/rudiments/31_drag/#1-single-stroke-roll-basic-hand-alternation-and-stroke-control","title":"1 Single Stroke Roll -- basic hand alternation and stroke control","text":""},{"location":"specs/rudiments/31_drag/#6-double-stroke-open-roll-the-double-bounce-diddle-technique-is-the-physical-foundation-for-the-drag-grace-notes","title":"6 Double Stroke Open Roll -- the double bounce (diddle) technique is the physical foundation for the drag grace notes","text":""},{"location":"specs/rudiments/31_drag/#builds-toward","title":"Builds Toward","text":"<ul> <li>All drag-category rudiments (PAS #31-40) build directly on this primitive</li> </ul>"},{"location":"specs/rudiments/31_drag/#32-single-drag-tap-drag-tap-pattern","title":"32 Single Drag Tap (drag + tap pattern)","text":""},{"location":"specs/rudiments/31_drag/#33-double-drag-tap-two-drags-tap","title":"33 Double Drag Tap (two drags + tap)","text":""},{"location":"specs/rudiments/31_drag/#34-lesson-25-drag-single-stroke-combination","title":"34 Lesson 25 (drag + single stroke combination)","text":""},{"location":"specs/rudiments/31_drag/#35-single-dragadiddle-drag-paradiddle","title":"35 Single Dragadiddle (drag + paradiddle)","text":""},{"location":"specs/rudiments/31_drag/#36-drag-paradiddle-1-drag-paradiddle-variation","title":"36 Drag Paradiddle #1 (drag + paradiddle variation)","text":""},{"location":"specs/rudiments/31_drag/#37-drag-paradiddle-2-drag-paradiddle-variation","title":"37 Drag Paradiddle #2 (drag + paradiddle variation)","text":""},{"location":"specs/rudiments/31_drag/#38-single-ratamacue-drag-triplet-accent","title":"38 Single Ratamacue (drag + triplet + accent)","text":""},{"location":"specs/rudiments/31_drag/#39-double-ratamacue-two-drags-triplet-accent","title":"39 Double Ratamacue (two drags + triplet + accent)","text":""},{"location":"specs/rudiments/31_drag/#40-triple-ratamacue-three-drags-triplet-accent","title":"40 Triple Ratamacue (three drags + triplet + accent)","text":""},{"location":"specs/rudiments/31_drag/#30-flam-drag-flam-combined-with-drag-cross-category","title":"30 Flam Drag (flam combined with drag, cross-category)","text":""},{"location":"specs/rudiments/31_drag/#teaching-notes","title":"Teaching Notes","text":"<p>The drag is the most fundamental ornament of the drag category and the basis of all drag rudiments (PAS #31-40). It is the double-grace-note counterpart of the flam (#20), and its mastery is essential before progressing to any compound drag rudiment. Despite its apparent simplicity, producing consistent, well-controlled drags requires a specific technique (the controlled double bounce) that differs significantly from the flam technique.</p> <p>Common mistakes: - Grace notes too loud: The double bounce overpowers the primary, producing a triplet feel rather than an ornamental ruff - Grace notes too quiet or absent: The stick is too low or the bounce too weak to produce audible grace notes, making the drag indistinguishable from a plain accent - Uneven grace notes: The first grace is significantly louder or softer than the second, producing an unbalanced ruff. Both grace notes should be approximately equal in volume - Single grace instead of double: Only one grace note sounds, converting the drag into a flam. This is especially common at fast tempos where the double bounce collapses - Grace notes on the wrong hand: The drag grace notes must be played by the same hand (opposite from the primary). Playing them on the primary hand converts the pattern to a triple stroke - Too much spacing between graces: The two grace notes should form a quick, connected double bounce, not two isolated taps with a gap between them - Inconsistent spacing between hands: Left-hand drags (rrL) should sound identical to right-hand drags (llR)</p> <p>Practice strategies: - Start with the double bounce: practice tap-height double strokes (diddles) with each hand to develop the controlled bounce - Play the two grace notes at mezzo-piano, then add the accented primary on the opposite hand - Practice each hand's drag separately (all llR, then all rrL) before alternating - Use a metronome and place the primary on the click; the grace notes should fall naturally just before - Compare the sound of right-hand drags (llR) and left-hand drags (rrL) and work to match them - Practice the drag at very slow tempos as three distinct strokes (open drag), then gradually close the spacing - Record and listen back, checking that both hands produce identical drag quality</p> <p>What to listen for: - Each drag should sound like a brief \"ruff\" or buzz leading into the primary, not three separate notes - Left-hand and right-hand drags should be indistinguishable in quality - Consistent spacing from drag to drag - Clear dynamic separation between grace notes (soft) and primary (full) - The two grace notes should be approximately equal in volume and blend together as a unified ornament</p>"},{"location":"specs/rudiments/31_drag/#historical-context","title":"Historical Context","text":"<p>The drag (also known as the \"ruff\" in orchestral terminology) is one of the oldest drum ornaments, with roots predating formal rudiment codification. The term \"drag\" refers to the dragging or bouncing of the stick to produce two rapid grace notes before the primary stroke. The drag was included in the original NARD (National Association of Rudimental Drummers) standard 26 rudiments as the \"Ruff\" when NARD was founded in 1933, and its origins trace back to European military field drumming traditions. In Charles Stewart Ashworth's A New, Useful and Complete System of Drum Beating (1812), ruff patterns are among the foundational ornaments. The Percussive Arts Society retained it as PAS #31 (first of the drag rudiments) when the list was expanded to 40 in 1984. The drag serves as the primitive building block for all 10 drag-category rudiments (PAS #31-40), just as the flam (#20) is the primitive for all 11 flam-category rudiments (PAS #20-30). In orchestral percussion, the \"ruff\" (typically notated as three or more grace notes) is a closely related ornament, though the PAS drag specifically defines exactly two grace notes.</p>"},{"location":"specs/rudiments/31_drag/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/31_drag/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;              &gt;\nllR            rrL\n</code></pre>"},{"location":"specs/rudiments/31_drag/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1              &amp;            |\nHand:    | (ll)R          (rr)L        |\nType:    |  gg  A          gg  A       |\nAccent:  |      &gt;              &gt;       |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The primary strokes land on the grid positions 1 and &amp;.</p>"},{"location":"specs/rudiments/32_single_drag_tap/","title":"PAS #32: Single Drag Tap","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#1-identity","title":"1. Identity","text":"Field Value PAS Number 32 Name Single Drag Tap Category drag Family basic drag Composed Of Drag (#31) + tap; each group is a drag (two grace notes + accented primary) followed by a single tap on the opposite hand Related #31 Drag (the primitive drag ornament), #33 Double Drag Tap (two drags + tap), #22 Flam Tap (analogous structure using flams instead of drags), #34 Lesson 25 (drag-based pattern with different accent structure) NARD Original Yes"},{"location":"specs/rudiments/32_single_drag_tap/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 8 (4 primary strokes + 4 grace notes) Primary Strokes Per Cycle 4 <p>The single drag tap places one drag followed by one tap in each beat, alternating the lead hand every beat. The drag primary falls on the downbeat of each beat and the tap falls on the \"&amp;\" (halfway through), creating a steady eighth-note pulse of primary strokes. The two grace notes precede each drag primary, filling the space just before the beat. The pattern spans 2 beats to complete one full left-right alternation.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R A 4 \u00bd 1&amp; L t 5 1 - 1/16 (1<sup>st</sup> grace before 2) R g 6 1 - 1/32 (2<sup>nd</sup> grace before 2) R g 7 1 2 L A 8 1 + \u00bd 2&amp; R t"},{"location":"specs/rudiments/32_single_drag_tap/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/32_single_drag_tap/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        -     |  &gt;        -\nllR      L     |  rrL      R\n</code></pre> <p>Each beat contains a drag (two grace notes + accented primary) followed by a single tap on the opposite hand. The lead hand alternates every beat.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace note, same hand as #2 2 L grace drag grace 2 #3 Second drag grace note, closer to primary 3 R accent primary n/a Right-hand drag primary (accented) 4 L tap none n/a Left-hand tap following the drag 5 R grace drag grace 1 #7 First drag grace note, same hand as #6 6 R grace drag grace 2 #7 Second drag grace note, closer to primary 7 L accent primary n/a Left-hand drag primary (accented) 8 R tap none n/a Right-hand tap following the drag"},{"location":"specs/rudiments/32_single_drag_tap/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Strokes #1-2 (both L) precede stroke #3 (R primary); strokes #5-6 (both R) precede stroke #7 (L primary) - The two grace notes form a quick diddle (same-hand double bounce) leading into the primary - Important: the tap (stroke #4 or #8) and the following drag grace pair (strokes #5-6 or #1-2 of the next cycle) are played by different hands. Unlike the flam tap (#22), where the tap-to-grace transition occurs on the same hand, the single drag tap's tap-to-grace transition crosses hands, making it somewhat more forgiving technically.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/32_single_drag_tap/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Accented primary strokes preceded by drag grace notes tap 0.65 - 0.77 Unaccented single stroke following each drag grace (drag) 0.45 - 0.65 Each of the two drag grace notes <p>The single drag tap has a three-level dynamic hierarchy: grace notes (softest), tap (medium), accent (loudest). The grace notes create a soft ruff leading into the full accent, and the tap provides a dynamic valley after it.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -     |  &gt;     -\nllR   L     |  rrL   R\n</code></pre> <p>One accent per beat (on the drag primary), with the tap unaccented between.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single drag tap produces a repeating \"ruff-accent-valley\" pattern at the beat level: the two grace notes create a soft onset, the drag primary lands as a full accent, and the tap drops to an unaccented level. This \"buzz-LOUD-soft\" shape repeats each beat, alternating hands. The overall feel is a steady eighth-note pulse with the on-beat strokes emphasized by the drag ornament and the off-beat taps providing rhythmic continuity at a lower dynamic. Compared to the flam tap (#22), which has a similar accent-tap structure, the single drag tap's drag ornament adds more rhythmic \"fill\" before the accent, giving it a slightly busier, more textured sound.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/32_single_drag_tap/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 L tap low (2-6\") wrist 5 R grace (drag 1) tap (&lt; 2\") fingers 6 R grace (drag 2) tap (&lt; 2\") fingers / rebound 7 L accent full (12\"+) wrist + arm 8 R tap low (2-6\") wrist <p>Consider the left hand's path through the first beat: it plays two grace notes at tap height (#1-2, fingers/rebound), then after the right hand plays the accent (#3), the left hand plays a tap at low height (#4, wrist). The grace-to-tap transition on the same hand requires shifting from finger-controlled bounces to a wrist-driven tap stroke with slightly more height. In the second beat, the roles reverse. The right hand's path follows the same sequence: grace-grace (before beat 2), then tap (on 2&amp;).</p>"},{"location":"specs/rudiments/32_single_drag_tap/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented drag primaries. Grace notes are individually articulated as two distinct soft strokes (open drag). Clear separation between grace notes, primary, and tap. The double bounce is controlled with active finger strokes for both graces. The overall pattern feels like four distinct events per beat: bounce-bounce-ACCENT-tap. Moderate (100-140 BPM) Wrist-driven strokes. Drag grace notes close up, with the second relying on rebound. The drag sounds more like a ruff than two separate notes. Grace offsets at standard -1/16 and -1/32. The pattern flows as a continuous alternating sequence. The tap should be clearly softer than the accent but still rhythmically placed. Fast (140-160 BPM) Finger control for grace notes and taps. Accents drop to half height class. Drag grace notes compress toward -1/32 and -1/64 offsets, approaching a crushed ruff. The tap provides rhythmic continuity while the drags become more textural (buzz-like) than articulate. The rudiment begins to feel like a driving eighth-note pattern with buzz accents on the beats."},{"location":"specs/rudiments/32_single_drag_tap/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/32_single_drag_tap/#common-variations","title":"Common Variations","text":"<ul> <li>Double drag tap (#33): Two drags before the tap, extending the pattern to 3 beats per group</li> <li>Unaccented drag: Playing the drag primary as a tap for a softer, more flowing variation</li> <li>No-ornament preparation: Practice as accent-tap (&gt;R L | &gt;L R) to isolate the rhythm and accent pattern before adding drag grace notes</li> <li>Single drag tap in triplets: Some interpretations swing the pattern, placing the drag and tap in triplet subdivision rather than sixteenth notes</li> </ul>"},{"location":"specs/rudiments/32_single_drag_tap/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ability to transition from a tap-height double bounce to a full accent on the opposite hand</li> </ul>"},{"location":"specs/rudiments/32_single_drag_tap/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/32_single_drag_tap/#1-single-stroke-roll-basic-hand-alternation","title":"1 Single Stroke Roll -- basic hand alternation","text":""},{"location":"specs/rudiments/32_single_drag_tap/#6-double-stroke-open-roll-controlled-double-bounce-technique-for-the-grace-notes","title":"6 Double Stroke Open Roll -- controlled double bounce technique for the grace notes","text":""},{"location":"specs/rudiments/32_single_drag_tap/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps, concert, and marching percussion literature</li> </ul>"},{"location":"specs/rudiments/32_single_drag_tap/#33-double-drag-tap-adds-a-second-drag-before-the-tap","title":"33 Double Drag Tap (adds a second drag before the tap)","text":""},{"location":"specs/rudiments/32_single_drag_tap/#34-lesson-25-drag-combined-with-single-strokes-in-a-longer-pattern","title":"34 Lesson 25 (drag combined with single strokes in a longer pattern)","text":""},{"location":"specs/rudiments/32_single_drag_tap/#35-single-dragadiddle-drag-combined-with-paradiddle","title":"35 Single Dragadiddle (drag combined with paradiddle)","text":""},{"location":"specs/rudiments/32_single_drag_tap/#30-flam-drag-flam-drag-combination-the-single-drag-tap-develops-relevant-coordination","title":"30 Flam Drag (flam + drag combination; the single drag tap develops relevant coordination)","text":""},{"location":"specs/rudiments/32_single_drag_tap/#teaching-notes","title":"Teaching Notes","text":"<p>The single drag tap is the first compound drag rudiment, combining the basic drag (#31) with a simple tap. It is the drag-category analog of the flam tap (#22) and introduces the concept of integrating drag ornaments into a rhythmic pattern.</p> <p>Common mistakes: - Grace notes too loud: The ruff overpowers the accent, producing a triplet feel rather than a decorated accent - Missing or collapsed drag: Only one grace note sounds, converting the drag into a flam. Ensure both grace notes are present - Uneven beat spacing: The drag primary and tap should be evenly spaced (each occupying an eighth-note position). Students often rush the tap or delay it - Inconsistent drag quality between hands: Left-hand drags (rrL) should sound identical to right-hand drags (llR) - Tap and drag grace at the same volume: The tap should be clearly softer than the accent but louder than the grace notes - Rushing into the drag: The grace notes should lead smoothly into the primary, not be jammed against it</p> <p>Practice strategies: - Start with the accent-tap pattern without ornaments: &gt;R L | &gt;L R, using a metronome - Practice drags separately on each hand to solidify the double bounce - Add grace notes to the accent-tap pattern one hand at a time: llR L first, then add rrL R - Focus on the dynamic hierarchy: grace (soft) &lt; tap (medium) &lt; accent (loud) - Practice slowly and gradually increase tempo, listening for consistent drag quality on both hands - Record and compare the left-lead and right-lead halves for balance</p> <p>What to listen for: - Clear three-level dynamic hierarchy: grace (soft), tap (medium), accent (loud) - Both grace notes present in each drag (not collapsed to a flam) - Even eighth-note spacing between the drag primary and the tap - Identical drag quality on both hands - The ruff effect should color the accent without overpowering it - Smooth alternation between the two halves of the cycle</p>"},{"location":"specs/rudiments/32_single_drag_tap/#historical-context","title":"Historical Context","text":"<p>The single drag tap was included in the original NARD 26 rudiments and has been a standard in rudimental drumming since the earliest codification of American field drumming techniques. The rudiment was retained as PAS #32 in the 1984 expansion to 40 rudiments. Its relationship to the drag (#31) parallels the flam tap's (#22) relationship to the flam (#20): both take the basic ornament and place it in a simple accent-tap rhythmic framework. The single drag tap appears frequently in military field drum music, drum corps snare drum literature, and rudimental solos. In John S. Pratt's influential 26 Standard American Drum Rudiments method and in the Percussive Arts Society's instructional materials, the single drag tap is presented immediately after the basic drag as the natural first step in building drag-based vocabulary.</p>"},{"location":"specs/rudiments/32_single_drag_tap/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/32_single_drag_tap/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;           &gt;\nllR   L  |  rrL   R\n</code></pre>"},{"location":"specs/rudiments/32_single_drag_tap/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1           &amp;     | 2           &amp;     |\nHand:    | (ll)R       L     | (rr)L       R     |\nType:    |  gg  A      t     |  gg  A      t     |\nAccent:  |      &gt;            |      &gt;            |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. Drag primaries land on beats 1 and 2, while taps fall on the \"&amp;\" positions.</p>"},{"location":"specs/rudiments/33_double_drag_tap/","title":"PAS #33: Double Drag Tap","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#1-identity","title":"1. Identity","text":"Field Value PAS Number 33 Name Double Drag Tap Category drag Family basic drag Composed Of Two Drags (#31) + tap; each group has two consecutive drags followed by a single tap Related #31 Drag (the primitive drag ornament), #32 Single Drag Tap (one drag + tap), #34 Lesson 25 (another multi-drag pattern), #33 is to #32 as #17 Double Paradiddle is to #16 Single Paradiddle (extended version of the same idea) NARD Original Yes"},{"location":"specs/rudiments/33_double_drag_tap/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 14 (6 primary strokes + 8 grace notes) Primary Strokes Per Cycle 6 <p>The double drag tap extends the single drag tap by placing two consecutive drags before the tap. Each group of three primary strokes spans 1.5 beats: two dragged accents on successive eighth-note positions, followed by a tap. The pattern requires 3 beats to complete one full left-right alternation (two groups of three primary strokes each). The six primary strokes fall on the eighth-note grid, with the drag grace notes filling the space just before each accented primary.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R A 4 \u00bd - 1/16 (1<sup>st</sup> grace before 1&amp;) R g 5 \u00bd - 1/32 (2<sup>nd</sup> grace before 1&amp;) R g 6 \u00bd 1&amp; L A 7 1 2 R t 8 1 + \u00bd - 1/16 (1<sup>st</sup> grace before 2&amp;) R g 9 1 + \u00bd - 1/32 (2<sup>nd</sup> grace before 2&amp;) R g 10 1 + \u00bd 2&amp; L A 11 2 - 1/16 (1<sup>st</sup> grace before 3) L g 12 2 - 1/32 (2<sup>nd</sup> grace before 3) L g 13 2 3 R A 14 2 + \u00bd 3&amp; L t <p>Note: The first group (strokes #1-7) spans beats 1 to 2: drag on 1, drag on 1&amp;, tap on 2. The second group (strokes #8-14) spans beats 2&amp; to 3&amp;: drag on 2&amp;, drag on 3, tap on 3&amp;. The lead hand alternates between groups. Within each group, the two drags alternate hands (the grace notes switch sides for each drag), and the tap is on the same hand as the second drag's primary.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/33_double_drag_tap/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;        -     |  &gt;        &gt;        -\nllR      rrL      R     |  rrL      llR      L\n</code></pre> <p>Each group consists of two drags (alternating lead hand) followed by a tap. The first group begins with a right-hand drag primary, the second with a left-hand drag primary.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First grace, first drag of group 1 2 L grace drag grace 2 #3 Second grace, first drag of group 1 3 R accent primary n/a First drag primary, group 1 4 R grace drag grace 1 #6 First grace, second drag of group 1 5 R grace drag grace 2 #6 Second grace, second drag of group 1 6 L accent primary n/a Second drag primary, group 1 7 R tap none n/a Tap closing group 1 8 R grace drag grace 1 #10 First grace, first drag of group 2 9 R grace drag grace 2 #10 Second grace, first drag of group 2 10 L accent primary n/a First drag primary, group 2 11 L grace drag grace 1 #13 First grace, second drag of group 2 12 L grace drag grace 2 #13 Second grace, second drag of group 2 13 R accent primary n/a Second drag primary, group 2 14 L tap none n/a Tap closing group 2"},{"location":"specs/rudiments/33_double_drag_tap/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Each drag follows the standard ornament timing from #31 Drag - There are four drags per cycle, each with its own pair of grace notes:   - Strokes #1-2 (L) precede #3 (R); strokes #4-5 (R) precede #6 (L)   - Strokes #8-9 (R) precede #10 (L); strokes #11-12 (L) precede #13 (R) - Critical transition: Between the first and second drag within each group, the hand that just played a drag primary (#3 or #10) must immediately produce two grace notes (#4-5 or #11-12) for the next drag. This drag-primary-to-drag-grace transition on the same hand is the defining technical challenge of the double drag tap.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/33_double_drag_tap/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Accented primary strokes for all four drags tap 0.65 - 0.77 Unaccented stroke closing each group grace (drag) 0.45 - 0.65 Each of the eight drag grace notes <p>The double drag tap has the same three-level dynamic hierarchy as the single drag tap: grace (softest), tap (medium), accent (loudest). However, with two consecutive accented drags before each tap, the pattern has a stronger emphasis on the accented strokes, producing a more driving and intense dynamic shape.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;        &gt;        -     |  &gt;        &gt;        -\nllR      rrL      R     |  rrL      llR      L\n</code></pre> <p>Two accents per group (both on drag primaries), with the tap unaccented. The pattern creates a \"strong-strong-weak\" grouping within each 1.5-beat phrase.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#dynamic-contour","title":"Dynamic Contour","text":"<p>The double drag tap produces a distinctive \"ruff-accent-ruff-accent-valley\" pattern within each 1.5-beat group. The two consecutive drags create a pair of buzz-accented strokes that build momentum, and the tap provides a dynamic release. Compared to the single drag tap (#32), which alternates accent-tap evenly, the double drag tap's two consecutive accents create a more intense, forward-driving feel. The \"strong-strong-weak\" grouping produces a natural sense of phrasing that leads the ear from one group to the next. The brief tap at the end of each group functions as a pickup into the next group's first drag.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/33_double_drag_tap/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 R grace (drag 1) tap (&lt; 2\") fingers 5 R grace (drag 2) tap (&lt; 2\") fingers / rebound 6 L accent full (12\"+) wrist + arm 7 R tap low (2-6\") wrist 8 R grace (drag 1) tap (&lt; 2\") fingers 9 R grace (drag 2) tap (&lt; 2\") fingers / rebound 10 L accent full (12\"+) wrist + arm 11 L grace (drag 1) tap (&lt; 2\") fingers 12 L grace (drag 2) tap (&lt; 2\") fingers / rebound 13 R accent full (12\"+) wrist + arm 14 L tap low (2-6\") wrist <p>The defining physical challenge of the double drag tap is the drag-primary-to-drag-grace transition. Consider the right hand in the first group: it plays a full-height accent (#3), then must immediately drop to tap height to produce two finger-controlled grace notes (#4-5) for the opposite hand's drag. This full-to-tap height transition on the same hand requires a rapid downstroke-to-bounce motion: the stick comes from full height for the accent and must be caught near the head to initiate the double bounce for the next drag's grace notes. This is more demanding than the single drag tap, where the same hand plays a drag primary and then rests while the other hand taps.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented drag primaries. Grace notes individually articulated (open drags). Clear separation between each drag and the tap. The accent-to-grace transition within each hand is manageable due to the wider spacing. Each group's three events (drag-drag-tap) are clearly distinguishable. Moderate (100-140 BPM) Wrist-driven accents. Drag grace notes close up to standard ruff sound. The accent-to-grace transition tightens, requiring efficient downstroke technique: the accent must be caught low to prepare for the subsequent grace notes. The two drags per group begin to flow together, with the tap providing a rhythmic break. Fast (140-160 BPM) Finger control for grace notes and taps. Accents drop to half height class. The accent-to-grace transition becomes the critical bottleneck -- the hand must convert the accent's impact energy into a controlled double bounce nearly instantaneously. Drag grace notes compress toward -1/32 and -1/64 offsets. The pattern feels like a continuous stream of ruff-accents with brief tap punctuation."},{"location":"specs/rudiments/33_double_drag_tap/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/33_double_drag_tap/#common-variations","title":"Common Variations","text":"<ul> <li>Triple drag tap: Three drags before the tap (not a standard PAS rudiment, but a logical extension used in exercises)</li> <li>Unaccented double drag tap: Playing all strokes at a uniform dynamic for evenness practice</li> <li>No-ornament preparation: Practice as accent-accent-tap (&gt;R &gt;L R | &gt;L &gt;R L) to isolate the rhythm and phrasing before adding grace notes</li> <li>Double drag tap as written exercise: Often practiced with different sticking patterns to develop flexibility</li> </ul>"},{"location":"specs/rudiments/33_double_drag_tap/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke control -- the ability to play a full accent and immediately catch the stick near the head for the following grace notes</li> </ul>"},{"location":"specs/rudiments/33_double_drag_tap/#31-drag-the-basic-drag-ornament-must-be-solid-on-both-hands","title":"31 Drag -- the basic drag ornament must be solid on both hands","text":""},{"location":"specs/rudiments/33_double_drag_tap/#32-single-drag-tap-the-simpler-drag-tap-pattern-should-be-comfortable-before-adding-a-second-drag","title":"32 Single Drag Tap -- the simpler drag + tap pattern should be comfortable before adding a second drag","text":""},{"location":"specs/rudiments/33_double_drag_tap/#6-double-stroke-open-roll-controlled-double-bounce-technique","title":"6 Double Stroke Open Roll -- controlled double bounce technique","text":""},{"location":"specs/rudiments/33_double_drag_tap/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps and marching percussion passages requiring extended drag phrases</li> <li>Development of the accent-to-grace transition skill needed in all compound drag rudiments</li> </ul>"},{"location":"specs/rudiments/33_double_drag_tap/#34-lesson-25-complex-multi-drag-pattern","title":"34 Lesson 25 (complex multi-drag pattern)","text":""},{"location":"specs/rudiments/33_double_drag_tap/#39-double-ratamacue-two-drags-in-a-ratamacue-context","title":"39 Double Ratamacue (two drags in a ratamacue context)","text":""},{"location":"specs/rudiments/33_double_drag_tap/#teaching-notes","title":"Teaching Notes","text":"<p>The double drag tap extends the single drag tap by adding a second drag before each tap, introducing the challenging accent-to-grace transition within the same hand. It is an important stepping stone between the simpler basic drag patterns and the more complex compound drag rudiments.</p> <p>Common mistakes: - Collapsing the second drag: The second drag in each group often loses one or both grace notes at speed, reducing it to a flam or plain accent - Uneven drags: The first and second drag within each group should be identical in quality. Students often execute the first drag well but rush or compress the second - Rushing the tap: The tap at the end of each group is often cut short as the player hurries to the next group's first drag - Losing the accent-to-grace transition: After the first drag's accent (#3 or #10), the same hand must immediately produce two grace notes. This transition is often too slow, causing the second drag to arrive late - Inconsistent group spacing: Each 1.5-beat group should be evenly spaced. Students often compress the second half (drag-tap) relative to the first drag - Different drag quality between the first and second drag: Both drags within a group should have identical ruff character</p> <p>Practice strategies: - Start with the accent-accent-tap pattern without ornaments: &gt;R &gt;L R | &gt;L &gt;R L - Practice the accent-to-grace transition in isolation: play a full accent, then immediately produce two grace notes on the same hand - Add drags one at a time: first only the first drag (llR L R | rrL R L), then add the second (llR rrL R | rrL llR L) - Use a metronome and count: \"1 &amp; 2\" for the first group, \"&amp; 3 &amp;\" for the second (primary strokes on the eighth-note grid) - Practice slowly to ensure both drags in each group are rhythmically even and dynamically matched - Compare the two groups (right-lead vs. left-lead) for consistency - Record and listen for equal drag quality across all four drags per cycle</p> <p>What to listen for: - All four drags per cycle should have identical ruff quality - Clear three-level dynamics: grace (soft) &lt; tap (medium) &lt; accent (loud) - Even eighth-note spacing of the three primary strokes within each group - The tap should be clearly softer than the two preceding accented drags - Both groups (right-lead and left-lead) should sound identical - The \"strong-strong-weak\" phrasing should create a natural musical grouping</p>"},{"location":"specs/rudiments/33_double_drag_tap/#historical-context","title":"Historical Context","text":"<p>The double drag tap was included in the original NARD 26 rudiments and has been a standard in rudimental drumming since the earliest American field drumming traditions. It was retained as PAS #33 in the 1984 expansion to 40 rudiments. The relationship between the single drag tap (#32) and the double drag tap (#33) mirrors the progressive structure seen throughout the PAS rudiments: begin with the simplest form and extend it. This \"single then double\" pattern is a fundamental pedagogical approach in rudimental drumming (cf. single paradiddle #16 to double paradiddle #17, single ratamacue #38 to double ratamacue #39). The double drag tap appears in military drumming manuals, drum corps snare drum literature, and contest solos where the extended drag phrase provides rhythmic drive and textural interest. Its two-drag grouping creates a recognizable rhythmic motif that has been a fixture of American rudimental style since at least the early 19<sup>th</sup> century.</p>"},{"location":"specs/rudiments/33_double_drag_tap/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/33_double_drag_tap/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;          &gt;          -     |  &gt;          &gt;          -\nllR        rrL        R     |  rrL        llR        L\n</code></pre>"},{"location":"specs/rudiments/33_double_drag_tap/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1           &amp;         | 2           &amp;         | 3           &amp;         |\nHand:    | (ll)R       (rr)L     | R           (rr)L     | (ll)R       L         |\nType:    |  gg  A       gg  A    | t            gg  A    |  gg  A      t         |\nAccent:  |      &gt;           &gt;    |                  &gt;    |      &gt;                |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beats 1 through 2 (drag on 1, drag on 1&amp;, tap on 2). The second group occupies beats 2&amp; through 3&amp; (drag on 2&amp;, drag on 3, tap on 3&amp;).</p>"},{"location":"specs/rudiments/34_lesson_25/","title":"PAS #34: Lesson 25","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/34_lesson_25/#1-identity","title":"1. Identity","text":"Field Value PAS Number 34 Name Lesson 25 Category drag Family compound drag Composed Of Two Drags (#31) + one Flam (#20); a cross-category rudiment combining drag and flam ornaments in a six-note phrase (three primary strokes per group) Related #31 Drag (the primitive drag ornament used twice per group), #20 Flam (the primitive flam ornament closing each group), #32 Single Drag Tap (simpler drag + tap), #33 Double Drag Tap (two drags + tap, similar multi-drag structure), #30 Flam Drag (another cross-category rudiment combining flam and drag) NARD Original Yes"},{"location":"specs/rudiments/34_lesson_25/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 4 beats Strokes Per Cycle 16 (6 primary strokes + 10 grace notes) Primary Strokes Per Cycle 6 <p>Lesson 25 is one of the most distinctive rudiments in the PAS 40, notable for being a cross-category rudiment that incorporates both drag and flam ornaments. Each group of three primary strokes spans 2 beats: two consecutive drags (each an accented primary preceded by two same-hand grace notes) followed by a flam (an accented primary preceded by a single opposite-hand grace note). The pattern spans 4 beats for one full left-right alternation. The three primary strokes within each group fall on the sixteenth-note grid (positions 1, 1e, 1&amp;, then 3, 3e, 3&amp;), creating a three-note phrase of alternating sixteenth notes. Lesson 25 is unique among the PAS 40 drag rudiments in that it contains a flam, making it a hybrid drag-flam rudiment.</p>"},{"location":"specs/rudiments/34_lesson_25/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> drag grace before 1) L g 2 -1/32 (2<sup>nd</sup> drag grace before 1) L g 3 0 1 R A 4 \u00bc - 1/16 (1<sup>st</sup> drag grace before 1e) R g 5 \u00bc - 1/32 (2<sup>nd</sup> drag grace before 1e) R g 6 \u00bc 1e L A 7 \u00bd - 1/32 (flam grace before 1&amp;) R g 8 \u00bd 1&amp; L A 9 2 - 1/16 (1<sup>st</sup> drag grace before 3) R g 10 2 - 1/32 (2<sup>nd</sup> drag grace before 3) R g 11 2 3 L A 12 2 + \u00bc - 1/16 (1<sup>st</sup> drag grace before 3e) L g 13 2 + \u00bc - 1/32 (2<sup>nd</sup> drag grace before 3e) L g 14 2 + \u00bc 3e R A 15 2 + \u00bd - 1/32 (flam grace before 3&amp;) L g 16 2 + \u00bd 3&amp; R A <p>Note: Each group places three primary strokes on consecutive sixteenth-note positions. The first two primaries are preceded by drag grace note pairs (two same-hand grace notes each), and the third primary is preceded by a single flam grace note (opposite hand). The second group (strokes #9-16) mirrors the first with opposite hands. The remaining beats (2 and 4) serve as rests or pickup space between groups.</p>"},{"location":"specs/rudiments/34_lesson_25/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/34_lesson_25/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;        &gt;     |  &gt;        &gt;        &gt;\nllR      rrL      rL    |  rrL      llR      lR\n</code></pre> <p>Each group contains two drags followed by one flam, then the pattern mirrors with the opposite hand leading. The first group has: right-hand drag (llR), left-hand drag (rrL), left-hand flam (rL). The second group has: left-hand drag (rrL), right-hand drag (llR), right-hand flam (lR).</p>"},{"location":"specs/rudiments/34_lesson_25/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace, first drag of group 1 2 L grace drag grace 2 #3 Second drag grace, first drag of group 1 3 R accent primary n/a Right-hand drag primary, first drag 4 R grace drag grace 1 #6 First drag grace, second drag of group 1 5 R grace drag grace 2 #6 Second drag grace, second drag of group 1 6 L accent primary n/a Left-hand drag primary, second drag 7 R grace flam grace #8 Flam grace note closing group 1 8 L accent primary n/a Left-hand flam primary, closing group 1 9 R grace drag grace 1 #11 First drag grace, first drag of group 2 10 R grace drag grace 2 #11 Second drag grace, first drag of group 2 11 L accent primary n/a Left-hand drag primary, first drag 12 L grace drag grace 1 #14 First drag grace, second drag of group 2 13 L grace drag grace 2 #14 Second drag grace, second drag of group 2 14 R accent primary n/a Right-hand drag primary, second drag 15 L grace flam grace #16 Flam grace note closing group 2 16 R accent primary n/a Right-hand flam primary, closing group 2"},{"location":"specs/rudiments/34_lesson_25/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Each group contains two drags: strokes #1-2 (LL) precede #3 (R); strokes #4-5 (RR) precede #6 (L); strokes #9-10 (RR) precede #11 (L); strokes #12-13 (LL) precede #14 (R) - The drag-primary-to-drag-grace transition within each group (e.g., #3 R accent to #4-5 R grace) requires the same hand that just played a full drag primary to immediately produce two grace notes. This is the same technical challenge found in #33 Double Drag Tap.</p> <p>Flam Grace Notes: - Grace offset from primary: -1/32 beat (standard at moderate tempos) - Allowable range: -1/64 to -1/16 depending on tempo and style - Grace hand: always the opposite hand from the primary stroke - Stroke #7 (R grace) precedes stroke #8 (L primary); stroke #15 (L grace) precedes stroke #16 (R primary) - The flam grace arrives from the hand that just completed two drag grace notes (e.g., #4-5 R drag graces, then #7 R flam grace). Since the flam grace note is softer than the drag grace notes (0.50-0.70 vs. 0.45-0.65), there is a subtle dynamic continuity as the hand transitions from drag-grace to flam-grace role. - Key distinction: drag grace notes are two strokes on the same hand (a double bounce), while the flam grace note is a single stroke on the opposite hand. Both ornament types appear in this rudiment, making ornament clarity essential.</p>"},{"location":"specs/rudiments/34_lesson_25/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/34_lesson_25/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Full accented primary strokes for all four drags accent (flam primary) 1.0 Full accented primary strokes for both flams grace (drag) 0.45 - 0.65 Each of the eight drag grace notes grace (flam) 0.50 - 0.70 Each of the two flam grace notes; slightly louder than drag graces <p>All six primary strokes are accented at equal velocity. The two ornament types have slightly different velocity ranges: drag grace notes (0.45-0.65) sit slightly softer than flam grace notes (0.50-0.70), reflecting the different physical mechanics (controlled double bounce vs. offset single stroke). In practice, the difference is subtle, but maintaining it helps preserve the distinct character of each ornament type.</p>"},{"location":"specs/rudiments/34_lesson_25/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;        &gt;        &gt;     |  &gt;        &gt;        &gt;\nllR      rrL      rL    |  rrL      llR      lR\n</code></pre> <p>All six primary strokes are accented. There are no taps or unaccented primary strokes in Lesson 25. This makes it one of the most heavily accented rudiments in the PAS 40 -- every primary stroke receives full accent treatment, with the dynamic contrast coming entirely from the soft grace notes.</p>"},{"location":"specs/rudiments/34_lesson_25/#dynamic-contour","title":"Dynamic Contour","text":"<p>Lesson 25 has a unique dynamic contour driven by three consecutive accented strokes per group, each preceded by a different ornament. The first two accents are preceded by drags (soft-soft-LOUD), creating the characteristic \"ruff-accent\" onset. The third accent is preceded by a flam (soft-LOUD), producing the broader \"grace-accent\" effect. The three accents create a brief burst of loud, decorated strokes, followed by a rest or transition before the mirrored group begins. The absence of taps gives Lesson 25 a more aggressive, punchy character compared to the single and double drag taps. The alternation between drag ornaments (double bounce) and flam ornament (opposite-hand offset) within a single phrase creates a textural variety unique to this rudiment.</p>"},{"location":"specs/rudiments/34_lesson_25/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/34_lesson_25/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 R grace (drag 1) tap (&lt; 2\") fingers 5 R grace (drag 2) tap (&lt; 2\") fingers / rebound 6 L accent full (12\"+) wrist + arm 7 R grace (flam) tap (&lt; 2\") fingers 8 L accent full (12\"+) wrist + arm 9 R grace (drag 1) tap (&lt; 2\") fingers 10 R grace (drag 2) tap (&lt; 2\") fingers / rebound 11 L accent full (12\"+) wrist + arm 12 L grace (drag 1) tap (&lt; 2\") fingers 13 L grace (drag 2) tap (&lt; 2\") fingers / rebound 14 R accent full (12\"+) wrist + arm 15 L grace (flam) tap (&lt; 2\") fingers 16 R accent full (12\"+) wrist + arm <p>The physical demands of Lesson 25 combine the challenges of drag and flam techniques within rapid succession. The right hand's path through the first group illustrates the complexity: it plays a full-height drag primary (#3), then must immediately drop to tap height for two drag grace notes (#4-5) preceding the opposite hand's drag. After the second drag's primary (#6, left hand), the right hand produces a flam grace (#7) at tap height, and then the left hand plays the flam primary (#8). The accent-to-grace transition on the same hand (e.g., #3 accent to #4-5 grace) is the same challenge encountered in #33 Double Drag Tap. The additional complexity is the transition from drag grace technique (double bounce) to flam grace technique (single offset stroke) within the same phrase.</p>"},{"location":"specs/rudiments/34_lesson_25/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for all six accented primaries. Both drag and flam grace notes are individually articulated. Drag grace notes are open -- two distinct soft strokes. Flam grace notes have wide separation from primary. The drag-to-drag transition and the drag-to-flam transition within each group are manageable due to wider spacing. Each group's three decorated accents are clearly distinguished. Moderate (100-120 BPM) Wrist-driven accents. Drag grace notes close up, with the second grace relying on rebound. Flam grace notes at standard -1/32 offset. The accent-to-grace transition tightens, requiring efficient downstroke technique. The three sixteenth-note accents per group begin to feel like a rapid burst. Distinguishing the drag ornament from the flam ornament becomes the primary aural focus. Fast (120-140 BPM) Finger control for all grace notes. Accents drop to half height class. Drag grace notes compress toward -1/32 and -1/64. Flam grace notes tighten toward -1/64. At the fastest tempos, the drag and flam ornaments begin to blur together sonically, though the physical technique remains distinct (double bounce vs. opposite-hand offset). The three-accent burst becomes a rapid decorated phrase with minimal space between ornaments."},{"location":"specs/rudiments/34_lesson_25/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/34_lesson_25/#common-variations","title":"Common Variations","text":"<ul> <li>Open Lesson 25: Exaggerated drag and flam spacing for slow tempo practice and clarity</li> <li>Closed Lesson 25: Tight ornament spacing at fast tempos where drags approach a crushed ruff</li> <li>Lesson 25 with tap substitution: Replacing the flam with a plain tap for isolating the drag technique before adding the flam</li> <li>Lesson 25 without drags: Playing the pattern as plain accent-accent-flam to isolate the rhythmic structure and flam technique</li> <li>All-drag version: Replacing the flam with a third drag (making the pattern three consecutive drags) as a practice variant</li> </ul>"},{"location":"specs/rudiments/34_lesson_25/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ability to distinguish and produce both drag and flam ornaments in close succession</li> </ul>"},{"location":"specs/rudiments/34_lesson_25/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/34_lesson_25/#20-flam-the-basic-flam-ornament-must-be-consistent-on-both-hands","title":"20 Flam -- the basic flam ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/34_lesson_25/#33-double-drag-tap-develops-the-accent-to-grace-transition-required-for-consecutive-drags","title":"33 Double Drag Tap -- develops the accent-to-grace transition required for consecutive drags","text":""},{"location":"specs/rudiments/34_lesson_25/#6-double-stroke-open-roll-controlled-double-bounce-for-the-drag-grace-notes","title":"6 Double Stroke Open Roll -- controlled double bounce for the drag grace notes","text":""},{"location":"specs/rudiments/34_lesson_25/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps and rudimental solos where mixed ornament textures are required</li> <li>Development of ornament versatility -- switching between drag and flam techniques within a phrase</li> </ul>"},{"location":"specs/rudiments/34_lesson_25/#30-flam-drag-the-other-cross-category-drag-flam-rudiment","title":"30 Flam Drag (the other cross-category drag-flam rudiment)","text":""},{"location":"specs/rudiments/34_lesson_25/#teaching-notes","title":"Teaching Notes","text":"<p>Lesson 25 is the most technically distinctive compound drag rudiment. Its cross-category nature (combining both drags and flams) makes it unique among the PAS 40. Mastering this rudiment requires not only solid drag and flam technique independently, but the ability to transition between the two ornament types smoothly and rapidly.</p> <p>Common mistakes: - Confusing drag and flam grace notes: the drag uses two same-hand grace notes (double bounce), while the flam uses one opposite-hand grace note. Students often produce a drag where the flam should be, or collapse the drag into a flam - Missing the accent-to-grace transition: after the first drag primary, the same hand must immediately produce grace notes for the second drag. This requires catching the stick low after the accent - Inconsistent ornament quality: all four drags should have identical ruff quality, and both flams should have identical flam quality - Treating all three accents as equally strong: while all are accented, the phrasing naturally gives slightly more weight to the first drag, with the flam serving as a resolving accent - Rushing the second group: the mirror-image second group should be dynamically and rhythmically identical to the first - Losing the sixteenth-note pulse: the three primary strokes should be evenly spaced on the sixteenth-note grid</p> <p>Practice strategies: - Start with the three-note rhythm without ornaments: R L L | L R R (three sixteenth notes, rest, repeat mirrored) - Add drags first (llR rrL L | rrL llR R), then add the flam (llR rrL rL | rrL llR lR) - Practice drag-to-flam transitions in isolation: rrL rL (drag then flam on the same beat pair) - Use a metronome and count: \"1 e &amp; (rest)\" for each group - Practice each group separately, then combine - Record and compare ornament quality across all four drags and both flams</p> <p>What to listen for: - Clear distinction between drag ornaments (buzz/ruff onset) and flam ornaments (grace-note onset) - All six accents at consistent volume - Even sixteenth-note spacing of the three primary strokes per group - Identical ornament quality between the two groups (right-lead and left-lead) - The drag grace notes should sound like brief ruffs, and the flam grace notes should sound like clean, slightly separated grace notes</p>"},{"location":"specs/rudiments/34_lesson_25/#historical-context","title":"Historical Context","text":"<p>Lesson 25 gets its name from its position as the 25<sup>th</sup> lesson in Gardiner A. Strube's Drum and Fife Instructor (1870). Strube either did not know the traditional name for this rudiment, could not decide on one, or simply forgot to include one, so the pattern was identified only by its lesson number. When the National Association of Rudimental Drummers (NARD) standardized its list of 26 rudiments in 1933, the NARD 26 drew almost entirely from Strube's 25 lessons (with the addition of the Single Stroke Roll), and the nameless 25<sup>th</sup> lesson retained its designation as \"Lesson 25.\" The rudiment has been a staple of British and American field drumming since at least the 18<sup>th</sup> century, with some historians tracing patterns resembling it back to the English Foot March of the 1500s. The Percussive Arts Society retained it as PAS #34 in the 1984 expansion to 40 rudiments. Lesson 25 is notable as a cross-category rudiment -- despite being classified under the drag category, it contains a flam, making it one of the few rudiments that bridges two ornament families. The only other cross-category rudiment in the PAS 40 is #30 Flam Drag, which is classified under flam but contains a drag.</p>"},{"location":"specs/rudiments/34_lesson_25/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/34_lesson_25/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;          &gt;          &gt;       |  &gt;          &gt;          &gt;\nllR        rrL        rL      |  rrL        llR        lR\n</code></pre>"},{"location":"specs/rudiments/34_lesson_25/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1           e           &amp;         | (rest)      |\nHand:    | (ll)R       (rr)L       (r)L      |             |\nType:    |  gg  A       gg  A       g  A     |             |\nAccent:  |      &gt;           &gt;          &gt;     |             |\nOrn:     | drag         drag        flam     |             |\n\nBeat:    | 3           e           &amp;         | (rest)      |\nHand:    | (rr)L       (ll)R       (l)R      |             |\nType:    |  gg  A       gg  A       g  A     |             |\nAccent:  |      &gt;           &gt;          &gt;     |             |\nOrn:     | drag         drag        flam     |             |\n</code></pre> <p>Grace notes shown in doubled parentheses <code>(ll)</code> or <code>(rr)</code> indicate drag grace notes (two same-hand grace notes forming a double bounce). Grace notes shown in single parentheses <code>(r)</code> or <code>(l)</code> indicate flam grace notes (single opposite-hand grace note). Drag graces fall at -1/16 and -1/32 beat from the primary. Flam graces fall at -1/32 beat from the primary. The three primary strokes in each group occupy consecutive sixteenth-note positions. The Orn row labels each ornament type to distinguish between drags and flams.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/","title":"PAS #35: Single Dragadiddle","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#1-identity","title":"1. Identity","text":"Field Value PAS Number 35 Name Single Dragadiddle Category drag Family compound drag Composed Of Drag (#31) + tap + diddle; a portmanteau of \"drag\" and \"diddle\" -- the accented lead stroke is dragged, followed by a tap on the opposite hand, then a diddle on the lead hand Related #31 Drag (the primitive drag ornament), #16 Single Paradiddle (analogous structure with accent instead of drag), #36 Drag Paradiddle #1 (adds a second tap before the diddle), #37 Drag Paradiddle #2 (adds a second drag before the paradiddle), #6 Double Stroke Open Roll (the diddle component) NARD Original No (added when PAS expanded to 40 in 1984)"},{"location":"specs/rudiments/35_single_dragadiddle/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 12 (8 primary strokes + 4 grace notes) Primary Strokes Per Cycle 8 <p>The single dragadiddle is the simplest fusion of drag and paradiddle-family elements. Each group spans 1.5 beats (6 sixteenth-note slots) and contains one dragged accent, one tap, and one diddle (two strokes). The drag replaces what would be a plain accented lead stroke in a paradiddle, creating the portmanteau name \"drag-a-diddle.\" The pattern is hand-to-hand: each group alternates the lead hand, with the diddle at the end forcing the opposite hand to lead the next group. Two groups (right-lead and left-lead) form one complete 3-beat cycle.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> drag grace before 1) L g 2 -1/32 (2<sup>nd</sup> drag grace before 1) L g 3 0 1 R A 4 \u00bc 1e L t 5 \u00bd 1&amp; R d1 6 \u00be 1a R d2 7 1 + \u00bd - 1/16 (1<sup>st</sup> drag grace before 2&amp;) R g 8 1 + \u00bd - 1/32 (2<sup>nd</sup> drag grace before 2&amp;) R g 9 1 + \u00bd 2&amp; L A 10 1 + \u00be 2a R t 11 2 3 L d1 12 2 + \u00bc 3e L d2 <p>Note: Each group occupies 4 sixteenth-note positions: the dragged accent on the first, the tap on the second, and the diddle pair on the third and fourth. The first group begins on beat 1; the second group begins on beat 2&amp;. The remaining sixteenth-note positions (beat 2 and 2e) serve as transition space between groups.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;              |  &gt;\nllR   L  R R   |  rrL   R  L L\n</code></pre> <p>Each group is a drag (two grace notes + accented primary) followed by a tap on the opposite hand, then a diddle on the lead hand. The name \"dragadiddle\" captures this structure: drag + (a) + diddle.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace note, group 1 2 L grace drag grace 2 #3 Second drag grace note, group 1 3 R accent primary n/a Right-hand drag primary (accented lead stroke) 4 L tap none n/a Left-hand tap following the drag 5 R d1 none n/a First stroke of right-hand diddle 6 R d2 none n/a Second stroke of right-hand diddle 7 R grace drag grace 1 #9 First drag grace note, group 2 8 R grace drag grace 2 #9 Second drag grace note, group 2 9 L accent primary n/a Left-hand drag primary (accented lead stroke) 10 R tap none n/a Right-hand tap following the drag 11 L d1 none n/a First stroke of left-hand diddle 12 L d2 none n/a Second stroke of left-hand diddle"},{"location":"specs/rudiments/35_single_dragadiddle/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Strokes #1-2 (both L) precede stroke #3 (R primary); strokes #7-8 (both R) precede stroke #9 (L primary) - The diddle-to-grace transition between groups (strokes #5-6 R diddle, then #7-8 R grace) keeps the same hand active across the group boundary. After completing the diddle, the hand must transition from a low/tap height diddle d2 to producing drag grace notes. Since both the diddle d2 and drag grace notes are at tap height, this transition is physically natural.</p> <p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the \"&amp;\" of the beat; d2 falls on the \"a\" of the beat - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Accented lead stroke preceded by drag grace notes tap 0.65 - 0.77 Unaccented single stroke following the drag d1 0.65 - 0.77 First diddle stroke at tap level d2 0.90 - 0.98 x d1 Slight decay on second bounce of diddle grace (drag) 0.45 - 0.65 Each of the four drag grace notes <p>The single dragadiddle has a four-level dynamic hierarchy: grace notes (softest), d2 (slightly softer than d1), tap and d1 (medium), accent (loudest). The drag ornament creates a soft ruff onset before the loud accent, the tap provides a medium-level stroke, and the diddle tapers off at the end of each group. The overall shape is a \"buzz-LOUD-medium-fade\" contour per group.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -  - -   |  &gt;     -  - -\nllR   L  R R   |  rrL   R  L L\n</code></pre> <p>One accent per group (on the dragged lead stroke). The tap and diddle strokes are all unaccented. This matches the single paradiddle's accent pattern with the drag ornament replacing the plain accent.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single dragadiddle produces a repeating contour within each 1.5-beat group: the two grace notes create a soft \"ruff\" onset, the drag primary lands as the peak accent, the tap drops to medium level, and the diddle pair tapers with a slight decay from d1 to d2. The overall shape is \"buzz-PEAK-drop-taper.\" Compared to the single paradiddle (#16), the dragadiddle's drag ornament adds more textural fill before the accent, giving it a busier, more decorated lead-in. Compared to the single drag tap (#32), the dragadiddle extends the post-accent tail with a diddle rather than just a single tap, creating a longer phrase that provides more rhythmic momentum.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 L tap low (2-6\") wrist 5 R d1 low (2-6\") wrist 6 R d2 tap (&lt; 2\") fingers / rebound 7 R grace (drag 1) tap (&lt; 2\") fingers 8 R grace (drag 2) tap (&lt; 2\") fingers / rebound 9 L accent full (12\"+) wrist + arm 10 R tap low (2-6\") wrist 11 L d1 low (2-6\") wrist 12 L d2 tap (&lt; 2\") fingers / rebound <p>The physical demands of the single dragadiddle combine drag and diddle techniques. The right hand's path through the first group illustrates the key transitions: it plays a full-height drag primary (#3), then drops to low height for the diddle d1 (#5), followed by a finger-controlled d2 (#6). The d2-to-drag-grace transition (strokes #6-7, same hand) is physically natural since both are at tap height -- the hand simply continues its low-stick-height work from the diddle rebound directly into the drag grace notes for the next group. The left hand transitions from drag grace notes (#1-2) to tap (#4), requiring a shift from finger-controlled bounces to a slightly higher wrist stroke.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented drag primaries. Grace notes individually articulated as two distinct soft strokes (open drag). Clear separation between all four primary strokes per group. Diddles are open with two distinct wrist strokes. The group structure is clearly audible: ruff-ACCENT-tap-bounce-bounce. Moderate (100-140 BPM) Wrist-driven strokes. Drag grace notes close up to standard ruff sound. Diddle shifts to wrist-finger technique (d1 wrist, d2 finger rebound). The d2-to-drag-grace transition becomes smoother as the finger rebound from d2 naturally feeds into the grace note production. The overall phrase flows as a continuous alternating pattern. Fast (140-160 BPM) Finger control for grace notes, taps, and diddle d2. Accents drop to half height class. Drag grace notes compress toward -1/32 and -1/64. Diddles become nearly closed. The rudiment begins to feel like a continuous stream of decorated paradiddle-like phrases. The drag's ruff blurs into a textural buzz before each accent."},{"location":"specs/rudiments/35_single_dragadiddle/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#common-variations","title":"Common Variations","text":"<ul> <li>Dragadiddle with open drags: Exaggerated drag spacing for slow practice and ornament clarity</li> <li>Dragadiddle without drag: Practice as accent-tap-diddle (R L R R | L R L L) -- this is equivalent to the single paradiddle (#16), isolating the rhythmic structure</li> <li>Double dragadiddle: Adding a second tap between the drag accent and the diddle (not a standard PAS rudiment, but a logical extension analogous to single vs. double paradiddle)</li> <li>Dragadiddle with accent on the diddle: Shifting the accent to the d1 for coordination development (non-standard exercise)</li> </ul>"},{"location":"specs/rudiments/35_single_dragadiddle/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#16-single-paradiddle-the-accent-tap-diddle-sticking-pattern-forms-the-underlying-structure","title":"16 Single Paradiddle -- the accent-tap-diddle sticking pattern forms the underlying structure","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#6-double-stroke-open-roll-controlled-diddles-at-various-tempos","title":"6 Double Stroke Open Roll -- controlled diddles at various tempos","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#32-single-drag-tap-combining-drag-with-a-following-tap-develops-the-drag-to-tap-transition","title":"32 Single Drag Tap -- combining drag with a following tap develops the drag-to-tap transition","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps and marching percussion literature where drag-decorated paradiddle patterns provide textural variety</li> </ul>"},{"location":"specs/rudiments/35_single_dragadiddle/#36-drag-paradiddle-1-adds-a-second-tap-extending-the-paradiddle-portion","title":"36 Drag Paradiddle #1 (adds a second tap, extending the paradiddle portion)","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#37-drag-paradiddle-2-adds-a-second-drag-creating-a-more-complex-pattern","title":"37 Drag Paradiddle #2 (adds a second drag, creating a more complex pattern)","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#teaching-notes","title":"Teaching Notes","text":"<p>The single dragadiddle is the most natural entry point into the compound drag rudiments. It is simply a single paradiddle with a drag on the accented lead stroke -- if a student already plays the single paradiddle and the basic drag, combining them into the dragadiddle is conceptually straightforward. The name itself -- a portmanteau of \"drag\" and \"diddle\" -- captures the essence of the rudiment.</p> <p>Common mistakes: - Treating the drag as a flam: the drag uses TWO same-hand grace notes (a double bounce), not one opposite-hand grace note. This is the most common error for students coming from flam paradiddle (#24) practice - Uneven diddle: d2 significantly softer or rushed relative to d1. The diddle should be even and controlled - Losing the accent-tap contrast: the drag accent should be clearly louder than the following tap and diddle - Rushing the diddle: students often compress the diddle to get to the next group's drag sooner. The diddle should occupy its full rhythmic value - Inconsistent drag quality between hands: right-hand drags (llR) should sound identical to left-hand drags (rrL) - Grace notes too loud: the drag ruff should be a subtle ornament, not three equal strokes</p> <p>Practice strategies: - Start with single paradiddles (R L R R | L R L L) with a strong accent on the lead stroke - Add drag grace notes to the accented stroke one hand at a time - Practice the d2-to-drag-grace transition in isolation: play a diddle (R R), then immediately produce two grace notes for the next drag - Use a metronome with the click on the drag accent (every 1.5 beats) - Practice slowly, listening for four distinct dynamic levels: grace (soft), tap/d1 (medium), d2 (slight decay), accent (full) - Compare right-lead and left-lead groups for consistency</p> <p>What to listen for: - Clean drag ornament (two soft grace notes) before each accent - Clear accent-tap dynamic contrast - Even diddle with natural d2 decay - Smooth transition between groups (d2 to drag grace on the same hand) - Identical quality between right-lead and left-lead groups - The overall feel of a paradiddle with a decorated lead stroke</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#historical-context","title":"Historical Context","text":"<p>The single dragadiddle was not part of the original NARD 26 rudiments. It was added when the Percussive Arts Society expanded the list to 40 international drum rudiments in 1984. The rudiment fills a logical gap in the drag category: where the flam paradiddle (#24) combines a flam with the paradiddle sticking, the single dragadiddle combines a drag with a simplified paradiddle structure. The name \"dragadiddle\" is a portmanteau coined to describe the fusion of drag and diddle elements. Despite its relatively recent formal recognition, the pattern almost certainly existed in rudimental practice long before its codification -- any drummer practicing drags and paradiddles would naturally encounter this combination. The dragadiddle serves as a stepping stone to the more complex drag paradiddles (#36 and #37), which extend the pattern with additional strokes.</p>"},{"location":"specs/rudiments/35_single_dragadiddle/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/35_single_dragadiddle/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                  &gt;\nllR   L   R R  |   rrL   R   L L\n</code></pre>"},{"location":"specs/rudiments/35_single_dragadiddle/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2                 | 2&amp;    2a    3     3e  |\nHand:    | (ll)R L     R     R   |                   | (rr)L R     L     L   |\nType:    |  gg A t     d1    d2  |                   |  gg A t     d1    d2  |\nAccent:  |     &gt;                 |                   |      &gt;                |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes (drag) falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beat 1 (4 sixteenth-note slots). The second group occupies beats 2&amp; through 3e (4 sixteenth-note slots). Beat 2 and 2e are transition space between groups.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/","title":"PAS #36: Drag Paradiddle #1","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#1-identity","title":"1. Identity","text":"Field Value PAS Number 36 Name Drag Paradiddle #1 Category drag Family compound drag Composed Of Drag (#31) + Single Paradiddle (#16); a single paradiddle whose accented lead stroke is preceded by drag grace notes -- structurally equivalent to replacing the paradiddle's plain accent with a drag Related #31 Drag (the primitive drag ornament), #16 Single Paradiddle (the underlying paradiddle sticking), #24 Flam Paradiddle (analogous structure using flam instead of drag), #35 Single Dragadiddle (simpler drag + diddle combination with one fewer tap), #37 Drag Paradiddle #2 (extends with a second drag) NARD Original Yes"},{"location":"specs/rudiments/36_drag_paradiddle_1/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3.5 beats Strokes Per Cycle 14 (10 primary strokes + 4 grace notes) Primary Strokes Per Cycle 10 <p>Drag Paradiddle #1 is the drag-category counterpart of the flam paradiddle (#24). Each group contains a full single paradiddle sticking (accent + two taps + diddle = 5 primary strokes) with the accented lead stroke preceded by drag grace notes. The pattern spans 3.5 beats for one full left-right alternation (two groups of 5 primary strokes plus 2 drag grace notes each). The 10 primary strokes fall on the sixteenth-note grid, distributed as two groups of 5 strokes occupying 5 sixteenth-note positions each. The three remaining sixteenth-note slots (in a 3.5-beat / 14-slot framework) provide rest or transition space between groups.</p> <p>The critical difference from the single dragadiddle (#35) is the addition of a second tap between the drag accent and the diddle, creating the full paradiddle sticking (accent-tap-tap-diddle) rather than the shortened dragadiddle sticking (accent-tap-diddle).</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> drag grace before 1) L g 2 -1/32 (2<sup>nd</sup> drag grace before 1) L g 3 0 1 R A 4 \u00bc 1e L t 5 \u00bd 1&amp; R t 6 \u00be 1a L d1 7 1 2 L d2 8 1 + \u00be - 1/16 (1<sup>st</sup> drag grace before 2a) R g 9 1 + \u00be - 1/32 (2<sup>nd</sup> drag grace before 2a) R g 10 1 + \u00be 2a L A 11 2 3 R t 12 2 + \u00bc 3e L t 13 2 + \u00bd 3&amp; R d1 14 2 + \u00be 3a R d2 <p>Note: Each group occupies 5 sixteenth-note positions for its primary strokes (accent + tap + tap + d1 + d2) plus 2 grace notes. The first group spans beats 1 through 2 (positions 1, 1e, 1&amp;, 1a, 2). The second group spans beats 2a through 3a (positions 2a, 3, 3e, 3&amp;, 3a). The remaining positions serve as transition space. The diddle at the end of each group forces the opposite hand to lead the next group, maintaining the hand-switching property inherited from the paradiddle.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;                    |  &gt;\nllR   L   R  L L     |  rrL   R   L  R R\n</code></pre> <p>Each group is a full single paradiddle sticking with a drag on the accented lead stroke. The sticking within each group is: dragged accent + tap (opposite hand) + tap (lead hand) + diddle (opposite hand). The lead hand alternates between groups.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace note, group 1 2 L grace drag grace 2 #3 Second drag grace note, group 1 3 R accent primary n/a Right-hand drag primary (accented paradiddle lead) 4 L tap none n/a First tap -- \"para\" alternation stroke 5 R tap none n/a Second tap -- returns to lead hand 6 L d1 none n/a First stroke of left-hand diddle 7 L d2 none n/a Second stroke of left-hand diddle 8 R grace drag grace 1 #10 First drag grace note, group 2 9 R grace drag grace 2 #10 Second drag grace note, group 2 10 L accent primary n/a Left-hand drag primary (accented paradiddle lead) 11 R tap none n/a First tap -- \"para\" alternation stroke 12 L tap none n/a Second tap -- returns to lead hand 13 R d1 none n/a First stroke of right-hand diddle 14 R d2 none n/a Second stroke of right-hand diddle"},{"location":"specs/rudiments/36_drag_paradiddle_1/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Strokes #1-2 (both L) precede stroke #3 (R primary); strokes #8-9 (both R) precede stroke #10 (L primary) - The diddle-to-grace transition between groups (strokes #6-7 L diddle, then #8-9 R grace) crosses hands -- the diddle is on one hand while the drag grace notes are on the opposite hand. This means the hand producing the grace notes has been resting during the diddle, giving it time to prepare. This makes the transition easier than in the single dragadiddle (#35), where the same hand plays both the diddle and the following drag grace notes.</p> <p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 falls on the \"a\" of one beat; d2 falls on the downbeat of the next beat - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Accented lead stroke preceded by drag grace notes tap 0.65 - 0.77 Unaccented single strokes (2 per group) d1 0.65 - 0.77 First diddle stroke at tap level d2 0.90 - 0.98 x d1 Slight decay on second bounce of diddle grace (drag) 0.45 - 0.65 Each of the four drag grace notes <p>The Drag Paradiddle #1 shares the same four-level dynamic hierarchy as the single dragadiddle, but with an additional tap stroke that extends the medium-dynamic \"body\" of each group. The overall shape is: grace notes (soft ruff onset), accent (peak), two taps (medium plateau), diddle (medium with slight decay).</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -  -  - -   |  &gt;     -  -  - -\nllR   L  R  L L   |  rrL   R  L  R R\n</code></pre> <p>One accent per group (on the dragged lead stroke). The two taps and the diddle are all unaccented. This is the standard single paradiddle accent pattern with the lead accent decorated by a drag.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#dynamic-contour","title":"Dynamic Contour","text":"<p>The Drag Paradiddle #1 produces a repeating \"ruff-PEAK-plateau-taper\" contour within each group: the drag grace notes create a soft buzz onset, the primary accent is the dynamic peak, the two taps form a medium-level plateau, and the diddle pair tapers with slight decay from d1 to d2. Compared to the single dragadiddle (#35), the additional tap extends the plateau phase, giving the group a longer \"body\" after the accent. Compared to the flam paradiddle (#24), the drag's double-bounce onset creates a busier lead-in than the flam's single grace note, giving the Drag Paradiddle #1 a more textured, ornamental character at the start of each phrase. The overall feel is a weighted, decorated paradiddle with clear phrasing.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 L tap low (2-6\") wrist 5 R tap low (2-6\") wrist 6 L d1 low (2-6\") wrist 7 L d2 tap (&lt; 2\") fingers / rebound 8 R grace (drag 1) tap (&lt; 2\") fingers 9 R grace (drag 2) tap (&lt; 2\") fingers / rebound 10 L accent full (12\"+) wrist + arm 11 R tap low (2-6\") wrist 12 L tap low (2-6\") wrist 13 R d1 low (2-6\") wrist 14 R d2 tap (&lt; 2\") fingers / rebound <p>The physical flow of the Drag Paradiddle #1 is smoother than the single dragadiddle because the cross-hand transition between groups is less demanding. The left hand's path through the first group: it plays two drag grace notes at tap height (#1-2, fingers), then rests while the right hand accents (#3), then plays a tap at low height (#4, wrist), rests again while the right hand taps (#5), then plays the diddle (#6-7, wrist to fingers). The right hand meanwhile transitions from full-height accent (#3) through a low-height tap (#5) to drag grace notes (#8-9) for the next group. The accent-to-tap drop-down (#3 to #5 on the right hand) is the familiar downstroke technique needed in all paradiddle-family rudiments.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accented drag primaries. Grace notes individually articulated as open drags. All five primary strokes per group are clearly separated. Diddles are open with two distinct wrist strokes. The paradiddle sticking is easily identifiable within each group. Moderate (100-140 BPM) Wrist-driven strokes. Drag grace notes close up to standard ruff. Diddles shift to wrist-finger technique. The accent uses a controlled downstroke, catching the stick low for the following taps. The pattern begins to flow as a continuous alternating phrase. The drag adds a subtle \"buzz\" before each group's lead accent. Fast (140-160 BPM) Finger control for grace notes, taps, and diddle d2. Accents drop to half height class. Drag grace notes compress toward -1/32 and -1/64. Diddles become nearly closed. The rudiment feels like a paradiddle stream with buzz-accented lead strokes. Moeller technique aids the accent-to-tap transition."},{"location":"specs/rudiments/36_drag_paradiddle_1/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#common-variations","title":"Common Variations","text":"<ul> <li>Drag paradiddle without drag: Practice as a plain accented single paradiddle (&gt;R L R L L | &gt;L R L R R) to solidify the underlying sticking before adding the drag ornament</li> <li>Open drag paradiddle: Exaggerated drag spacing for slow practice and ornament clarity</li> <li>Alternative sticking: Some sources notate the pattern with a leading tap before the drag (R llR L R R | L rrL R L L), creating a 6-primary-stroke group. The YAML definition used in this project follows the direct-drag-lead version (llR L R LL | rrL R L RR).</li> <li>Drag paradiddle with inverted diddle: Moving the diddle to the beginning of the group (non-standard exercise)</li> </ul>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke control -- ability to play a full drag accent and stop the stick low for the following tap</li> </ul>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#16-single-paradiddle-the-accent-tap-tap-diddle-sticking-pattern-must-be-secure","title":"16 Single Paradiddle -- the accent-tap-tap-diddle sticking pattern must be secure","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#35-single-dragadiddle-the-simpler-drag-diddle-combination-develops-the-drag-in-paradiddle-context","title":"35 Single Dragadiddle -- the simpler drag + diddle combination develops the drag-in-paradiddle context","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#6-double-stroke-open-roll-controlled-diddles-at-various-tempos","title":"6 Double Stroke Open Roll -- controlled diddles at various tempos","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps snare drum parts and rudimental solos where drag-decorated paradiddle patterns are common</li> <li>Development of the drag-within-paradiddle coordination applicable to musical contexts</li> </ul>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#37-drag-paradiddle-2-extends-with-a-second-drag-creating-a-longer-pattern","title":"37 Drag Paradiddle #2 (extends with a second drag, creating a longer pattern)","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#teaching-notes","title":"Teaching Notes","text":"<p>Drag Paradiddle #1 is the drag-category counterpart of the flam paradiddle (#24). If a student can play both the single paradiddle and the basic drag, combining them into the Drag Paradiddle #1 is conceptually straightforward -- simply replace the paradiddle's accented lead stroke with a dragged accent.</p> <p>Common mistakes: - Treating the drag as a flam: the drag uses TWO same-hand grace notes (double bounce), not one opposite-hand grace note. Students who have recently practiced the flam paradiddle (#24) may inadvertently produce a flam instead of a drag - Losing the paradiddle sticking: the underlying R L R L L | L R L R R pattern must remain intact. The drag ornament decorates the accent but should not alter the sticking sequence - Uneven taps: both taps within each group should be at the same dynamic level - Rushing through the paradiddle body: the two taps and diddle after the accent should maintain even sixteenth-note spacing - Inconsistent drag quality between right-lead and left-lead groups - Diddle decay too extreme: d2 should be only slightly softer than d1, not dramatically quieter</p> <p>Practice strategies: - Start with accented single paradiddles (&gt;R L R L L | &gt;L R L R R) at a comfortable tempo - Add drag grace notes one hand at a time: first practice llR L R LL only, then add rrL R L RR - Practice the accent-to-tap downstroke transition: play a full accent, then immediately produce a low tap - Use a metronome with the click on the drag accent - Compare the quality of the drag ornament in isolation with its quality within the full pattern - Record and listen for balanced groups and consistent drag quality on both hands</p> <p>What to listen for: - Clean drag ornament (two soft grace notes forming a brief ruff) before each accent - Clear accent-tap contrast (the drag accent should be noticeably louder than all following strokes) - Even spacing of all five primary strokes per group on the sixteenth-note grid - Balanced, even diddle with natural d2 decay - Identical quality between right-lead and left-lead groups - The paradiddle's characteristic hand-switching feel with the added texture of the drag ornament</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#historical-context","title":"Historical Context","text":"<p>Drag Paradiddle #1 was included in the original NARD 26 rudiments when NARD was established in 1933, with its origins in early American and European field drumming traditions. The concept of combining a drag with paradiddle sticking is a natural extension of both fundamental techniques, and patterns resembling the drag paradiddle appear in military drumming manuals from the 19<sup>th</sup> century. The rudiment was retained as PAS #36 in the 1984 expansion to 40 rudiments. The \"#1\" designation distinguishes it from Drag Paradiddle #2 (#37), which extends the pattern by adding a second drag. The relationship between these two drag paradiddles mirrors the single-to-double progression seen throughout the PAS rudiments (e.g., single paradiddle to double paradiddle, single drag tap to double drag tap). In drum corps and rudimental solo literature, the drag paradiddles appear frequently where a composer wants the driving feel of a paradiddle with the added textural weight of drag ornamentation.</p>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/36_drag_paradiddle_1/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;                        &gt;\nllR   L   R   L L    |   rrL   R   L   R R\n</code></pre>"},{"location":"specs/rudiments/36_drag_paradiddle_1/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2                       2a    | 3     e     &amp;     a   |\nHand:    | (ll)R L     R     L   | L                       (rr)L | R     L     R     R   |\nType:    |  gg A t     t     d1  | d2                       gg A | t     t     d1    d2  |\nAccent:  |     &gt;                 |                              &gt; |                       |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes (drag) falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beats 1 through 2 (5 sixteenth-note positions: 1, 1e, 1&amp;, 1a, 2). The second group occupies beats 2a through 3a (5 sixteenth-note positions: 2a, 3, 3e, 3&amp;, 3a). Drag primaries land on beat 1 and beat 2a respectively.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/","title":"PAS #37: Drag Paradiddle #2","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#1-identity","title":"1. Identity","text":"Field Value PAS Number 37 Name Drag Paradiddle #2 Category drag Family compound drag Composed Of Two Drags (#31) + two taps + diddle; extends Drag Paradiddle #1 (#36) by adding a second drag, creating a pattern of drag-tap-drag-tap-diddle Related #31 Drag (the primitive drag ornament used twice per group), #36 Drag Paradiddle #1 (simpler version with one drag), #35 Single Dragadiddle (simpler drag + diddle), #33 Double Drag Tap (two drags + tap, similar double-drag structure), #16 Single Paradiddle (underlying paradiddle sticking concept) NARD Original Yes"},{"location":"specs/rudiments/37_drag_paradiddle_2/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 5 beats Strokes Per Cycle 20 (12 primary strokes + 8 grace notes) Primary Strokes Per Cycle 12 <p>Drag Paradiddle #2 extends Drag Paradiddle #1 by adding a second drag to each group. Where Drag Paradiddle #1 has one drag followed by a paradiddle (drag-tap-tap-diddle), Drag Paradiddle #2 has two alternating drags followed by a tap and diddle (drag-tap-drag-tap-diddle). Each group contains 6 primary strokes (two drag accents + two taps + one diddle pair) plus 4 grace notes (two pairs of drag graces). The pattern spans 5 beats for one full left-right alternation. The relationship between #36 and #37 mirrors the single-to-double progression found throughout the PAS rudiments: the \"#2\" version adds an extra drag before the paradiddle's diddle closure.</p> <p>The critical difference from Drag Paradiddle #1 (#36): each group has TWO drags alternating with taps before closing with a diddle, creating a longer, more complex phrase. The critical difference from Double Drag Tap (#33): the diddle at the end replaces the simple tap closure, tying this pattern to the paradiddle family.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> drag grace before 1) L g 2 -1/32 (2<sup>nd</sup> drag grace before 1) L g 3 0 1 R A 4 \u00bc 1e L t 5 \u00bd - 1/16 (1<sup>st</sup> drag grace before 1&amp;) R g 6 \u00bd - 1/32 (2<sup>nd</sup> drag grace before 1&amp;) R g 7 \u00bd 1&amp; L A 8 \u00be 1a R t 9 1 2 L d1 10 1 + \u00bc 2e L d2 11 2 + \u00bd - 1/16 (1<sup>st</sup> drag grace before 3&amp;) R g 12 2 + \u00bd - 1/32 (2<sup>nd</sup> drag grace before 3&amp;) R g 13 2 + \u00bd 3&amp; L A 14 2 + \u00be 3a R t 15 3 - 1/16 (1<sup>st</sup> drag grace before 4) L g 16 3 - 1/32 (2<sup>nd</sup> drag grace before 4) L g 17 3 4 R A 18 3 + \u00bc 4e L t 19 3 + \u00bd 4&amp; R d1 20 3 + \u00be 4a R d2 <p>Note: Each group occupies 6 sixteenth-note positions for its primary strokes: drag accent (1), tap (2), drag accent (3), tap (4), diddle d1 (5), diddle d2 (6). Plus 4 grace notes for the two drags. The first group spans beats 1 through 2e (positions 1, 1e, 1&amp;, 1a, 2, 2e). The second group spans beats 3&amp; through 4a (positions 3&amp;, 3a, 4, 4e, 4&amp;, 4a). The remaining positions between groups serve as transition space. The diddle at the end forces the opposite hand to lead the next group.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>&gt;        &gt;                 |  &gt;        &gt;\nllR  L   rrL  R   L L     |  rrL  R   llR  L   R R\n</code></pre> <p>Each group contains two alternating drags separated by taps, followed by a closing diddle. The first group: right-hand drag (llR), tap (L), left-hand drag (rrL), tap (R), left-hand diddle (LL). The second group mirrors: left-hand drag (rrL), tap (R), right-hand drag (llR), tap (L), right-hand diddle (RR).</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace, first drag of group 1 2 L grace drag grace 2 #3 Second drag grace, first drag of group 1 3 R accent primary n/a Right-hand drag primary, first drag of group 1 4 L tap none n/a Tap between the two drags 5 R grace drag grace 1 #7 First drag grace, second drag of group 1 6 R grace drag grace 2 #7 Second drag grace, second drag of group 1 7 L accent primary n/a Left-hand drag primary, second drag of group 1 8 R tap none n/a Tap before the diddle 9 L d1 none n/a First stroke of left-hand diddle, closing group 1 10 L d2 none n/a Second stroke of left-hand diddle, closing group 1 11 R grace drag grace 1 #13 First drag grace, first drag of group 2 12 R grace drag grace 2 #13 Second drag grace, first drag of group 2 13 L accent primary n/a Left-hand drag primary, first drag of group 2 14 R tap none n/a Tap between the two drags 15 L grace drag grace 1 #17 First drag grace, second drag of group 2 16 L grace drag grace 2 #17 Second drag grace, second drag of group 2 17 R accent primary n/a Right-hand drag primary, second drag of group 2 18 L tap none n/a Tap before the diddle 19 R d1 none n/a First stroke of right-hand diddle, closing group 2 20 R d2 none n/a Second stroke of right-hand diddle, closing group 2"},{"location":"specs/rudiments/37_drag_paradiddle_2/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Each group contains two drags with their own grace note pairs:   - Group 1: strokes #1-2 (LL) precede #3 (R); strokes #5-6 (RR) precede #7 (L)   - Group 2: strokes #11-12 (RR) precede #13 (L); strokes #15-16 (LL) precede #17 (R) - The drag-primary-to-drag-grace transition: after the first drag's accent (#3 R), the same hand must produce drag grace notes (#5-6 R) for the second drag. This is the same accent-to-grace challenge found in the double drag tap (#33), requiring the stick to be caught low after the accent and immediately initiate a double bounce. There is a tap (#4) on the opposite hand between the accent and the grace notes, providing a brief window for the transition. - The diddle-to-drag-grace transition between groups (strokes #9-10 L diddle, then #11-12 R grace) crosses hands, so the grace hand has rested during the diddle.</p> <p>Diddle Timing: - Each diddle pair occupies one eighth-note duration (\u00bd beat) - Each individual diddle stroke occupies \u00bc beat (one sixteenth note) - d1 and d2 fall on consecutive sixteenth-note positions - At slow tempos: both strokes are distinct and clearly separated (open) - At fast tempos: strokes closely spaced, nearly indistinguishable (closed)</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (drag primary) 1.0 Accented primary strokes for all four drags tap 0.65 - 0.77 Unaccented single strokes (2 per group) d1 0.65 - 0.77 First diddle stroke at tap level d2 0.90 - 0.98 x d1 Slight decay on second bounce of diddle grace (drag) 0.45 - 0.65 Each of the eight drag grace notes <p>The Drag Paradiddle #2 has the same four-level dynamic hierarchy as the other drag paradiddle rudiments but with two accented drags per group rather than one. This creates a \"strong-weak-strong-weak-taper\" pattern (drag accent, tap, drag accent, tap, diddle) that gives the rudiment a more intense, driving character than the single-drag Drag Paradiddle #1.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#accent-pattern","title":"Accent Pattern","text":"<pre><code>&gt;     -  &gt;     -  - -   |  &gt;     -  &gt;     -  - -\nllR   L  rrL   R  L L   |  rrL   R  llR   L  R R\n</code></pre> <p>Two accents per group (both on drag primaries), with the two taps and the diddle unaccented. This creates a \"strong-weak-strong-weak-taper\" grouping that gives the pattern its driving, pulsating character.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#dynamic-contour","title":"Dynamic Contour","text":"<p>The Drag Paradiddle #2 produces a distinctive double-accented contour within each group: the first drag creates a \"ruff-accent\" peak, the tap drops to medium level, the second drag creates another \"ruff-accent\" peak, the second tap drops again, and the diddle tapers off with slight d2 decay. The two accented drags create paired impulses within each group, producing a more intense and rhythmically complex shape than the single-accent Drag Paradiddle #1. The double-drag aspect gives the pattern a resemblance to the double drag tap (#33), but the diddle closure instead of a simple tap gives it a paradiddle-family feel that resolves each group more smoothly. The alternating accent-tap pairs create a driving \"push-pull\" sensation that makes this one of the most rhythmically compelling compound drag rudiments.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R accent full (12\"+) wrist + arm 4 L tap low (2-6\") wrist 5 R grace (drag 1) tap (&lt; 2\") fingers 6 R grace (drag 2) tap (&lt; 2\") fingers / rebound 7 L accent full (12\"+) wrist + arm 8 R tap low (2-6\") wrist 9 L d1 low (2-6\") wrist 10 L d2 tap (&lt; 2\") fingers / rebound 11 R grace (drag 1) tap (&lt; 2\") fingers 12 R grace (drag 2) tap (&lt; 2\") fingers / rebound 13 L accent full (12\"+) wrist + arm 14 R tap low (2-6\") wrist 15 L grace (drag 1) tap (&lt; 2\") fingers 16 L grace (drag 2) tap (&lt; 2\") fingers / rebound 17 R accent full (12\"+) wrist + arm 18 L tap low (2-6\") wrist 19 R d1 low (2-6\") wrist 20 R d2 tap (&lt; 2\") fingers / rebound <p>The defining physical challenge of the Drag Paradiddle #2 is the accent-to-grace transition between the two drags within each group. Consider the right hand's path in the first group: it plays a full-height accent (#3), then must immediately produce two grace notes (#5-6) for the second drag while the left hand plays a tap (#4) in between. The accent at full height must be caught low (downstroke) so the stick is near the head when it needs to produce the drag grace double bounce. This is the same challenge found in the double drag tap (#33), but here it occurs within a paradiddle framework that adds the additional coordination demand of the closing diddle. The tap between the two drags (#4) provides a brief window (one sixteenth note) for the accent hand to reset to tap height.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for all four accented drag primaries. Grace notes individually articulated as open drags. Clear separation between all six primary strokes per group. Diddles are open with two distinct wrist strokes. The accent-to-grace transition is manageable due to wider spacing. The group structure is clearly audible: ruff-ACCENT-tap-ruff-ACCENT-tap-bounce-bounce. Moderate (100-120 BPM) Wrist-driven accents. Drag grace notes close up to standard ruff sound. The accent-to-grace transition tightens, requiring efficient downstroke technique. The two drag-tap pairs within each group begin to flow as a continuous phrase. Diddles shift to wrist-finger technique. Fast (120-140 BPM) Finger control for grace notes, taps, and diddle d2. Accents drop to half height class. Drag grace notes compress toward -1/32 and -1/64. The accent-to-grace transition becomes the critical bottleneck. Diddles become nearly closed. The rudiment feels like a driving stream of alternating accented drags with a diddle punctuation at the end of each phrase."},{"location":"specs/rudiments/37_drag_paradiddle_2/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#common-variations","title":"Common Variations","text":"<ul> <li>Drag paradiddle #2 without drags: Practice as accent-tap-accent-tap-diddle (&gt;R L &gt;L R LL | &gt;L R &gt;R L RR) to isolate the rhythmic structure and accent pattern</li> <li>Open drag paradiddle #2: Exaggerated drag spacing for slow practice and ornament clarity</li> <li>Single-drag preparation: Practice with only the first drag (llR L L R LL | rrL R R L RR) before adding the second drag</li> <li>Drag paradiddle #2 in triplets: Some interpretations place the pattern in a triplet subdivision for a different rhythmic feel</li> </ul>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#prerequisites","title":"Prerequisites","text":"<ul> <li>Downstroke control -- the ability to play a full accent and immediately catch the stick low for the following grace notes</li> </ul>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#36-drag-paradiddle-1-the-simpler-one-drag-version-should-be-comfortable-before-adding-the-second-drag","title":"36 Drag Paradiddle #1 -- the simpler one-drag version should be comfortable before adding the second drag","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#33-double-drag-tap-develops-the-accent-to-grace-transition-between-consecutive-drags","title":"33 Double Drag Tap -- develops the accent-to-grace transition between consecutive drags","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#16-single-paradiddle-the-paradiddle-sticking-concept-accent-tap-diddle-closure","title":"16 Single Paradiddle -- the paradiddle sticking concept (accent-tap-diddle closure)","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#6-double-stroke-open-roll-controlled-diddles-at-various-tempos","title":"6 Double Stroke Open Roll -- controlled diddles at various tempos","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in advanced rudimental solos and drum corps literature</li> <li>Development of multi-drag coordination and endurance</li> <li>Preparation for improvised rudimental combinations using multiple drag ornaments within paradiddle frameworks</li> </ul>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#teaching-notes","title":"Teaching Notes","text":"<p>Drag Paradiddle #2 is the most complex of the compound drag rudiments, combining two drags with a paradiddle closure in a 6-primary-stroke group. It builds directly on the skills developed in the Drag Paradiddle #1 (#36) by adding a second drag, and on the double drag tap (#33) by replacing the simple tap closure with a paradiddle diddle. The key to mastering this rudiment is the accent-to-grace transition between the two drags.</p> <p>Common mistakes: - Collapsing the second drag: at faster tempos, the second drag often loses one or both grace notes, reducing it to a flam or plain accent. Both drags must maintain full ruff quality. - Uneven drag quality: the first and second drag within each group should be dynamically and rhythmically identical. Students often execute the first drag well but rush or compress the second. - Rushing the diddle: the diddle at the end of each group is often cut short or rushed. It should occupy its full rhythmic value (two sixteenth notes). - Losing the accent-to-grace transition: after the first drag's accent, the same hand must produce grace notes for the second drag. This transition is the most technically demanding aspect. - Inconsistent spacing: the six primary strokes per group should be evenly spaced on the sixteenth-note grid. - Confusing with double drag tap (#33): the Drag Paradiddle #2 closes with a diddle, not a single tap. The diddle provides a distinct \"paradiddle\" ending that differentiates it from the double drag tap.</p> <p>Practice strategies: - Start with the accent pattern without ornaments: &gt;R L &gt;L R LL | &gt;L R &gt;R L RR - Practice the accent-to-grace transition in isolation: play a full accent, then immediately produce two grace notes on the same hand - Build up from Drag Paradiddle #1: add the second drag to an already-comfortable #36 pattern - Use a metronome and count carefully: \"1 e &amp; a 2 e\" for the first group - Practice each group separately (right-lead, then left-lead) before combining - Compare the two drags within each group for equal ruff quality - Record and listen for consistent accent placement and ornament clarity across both groups</p> <p>What to listen for: - Both drags in each group should have identical ruff quality - Clear accent-tap dynamic contrast throughout - Even sixteenth-note spacing of all six primary strokes per group - Balanced, controlled diddle closing each group with natural d2 decay - Both groups (right-lead and left-lead) should sound identical - The \"strong-weak-strong-weak-taper\" phrasing should create a natural musical grouping - Smooth transition between groups across the rest/pickup space</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#historical-context","title":"Historical Context","text":"<p>Drag Paradiddle #2 was included in the original NARD 26 rudiments when NARD was established in 1933. Its origins trace back to early American and European military field drumming traditions, where progressive extensions of rudiment patterns were standard pedagogical practice. The relationship between Drag Paradiddle #1 (#36) and Drag Paradiddle #2 (#37) follows the same progressive pattern seen throughout rudimental drumming: the \"#2\" version extends the \"#1\" by adding complexity, just as the double paradiddle (#17) extends the single paradiddle (#16), and the double drag tap (#33) extends the single drag tap (#32). The rudiment was retained as PAS #37 in the 1984 expansion to 40 rudiments. In drum corps and rudimental solo literature, the Drag Paradiddle #2 appears less frequently than the #1 version due to its greater length and complexity, but when it does appear, it provides a powerful, driving rhythmic phrase that showcases the performer's control of both drag technique and paradiddle coordination.</p>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/37_drag_paradiddle_2/#stick-notation","title":"Stick Notation","text":"<pre><code>&gt;        &gt;                      &gt;        &gt;\nllR  L   rrL  R   L L      |   rrL  R   llR  L   R R\n</code></pre>"},{"location":"specs/rudiments/37_drag_paradiddle_2/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e                       |\nHand:    | (ll)R L     (rr)L R   | L     L                       |\nType:    |  gg A t      gg A t   | d1    d2                      |\nAccent:  |     &gt;            &gt;    |                               |\n\nBeat:    |                   3&amp;    3a  | 4     e     &amp;     a       |\nHand:    |                   (rr)L R   | (ll)R L     R     R       |\nType:    |                    gg A t   |  gg A t     d1    d2      |\nAccent:  |                       &gt;    |      &gt;                    |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes (drag) falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beats 1 through 2e (6 sixteenth-note positions for primary strokes). The second group occupies beats 3&amp; through 4a (6 sixteenth-note positions for primary strokes). The space between groups (beats 2&amp; through 3&amp;) serves as transition/rest space.</p>"},{"location":"specs/rudiments/38_single_ratamacue/","title":"PAS #38: Single Ratamacue","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#1-identity","title":"1. Identity","text":"Field Value PAS Number 38 Name Single Ratamacue Category drag Family ratamacue Composed Of Drag (#31) + three single strokes ending with an accent; equivalently, a drag followed by a single stroke four (#2) where the first stroke is the drag primary and the last stroke is accented Related #31 Drag (the primitive drag ornament), #39 Double Ratamacue (two drags + singles + accent), #40 Triple Ratamacue (three drags + singles + accent), #32 Single Drag Tap (drag + tap, simpler drag compound), #2 Single Stroke Four (the underlying four-note pattern) NARD Original Yes"},{"location":"specs/rudiments/38_single_ratamacue/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 2 beats Strokes Per Cycle 12 (8 primary strokes + 4 grace notes) Primary Strokes Per Cycle 8 <p>The single ratamacue is the foundational pattern of the ratamacue family (PAS #38-40). Its name is onomatopoeic: \"ra-ta-ma-cue\" maps to the four primary strokes of each group -- \"ra\" represents the drag grace notes and their primary, \"ta\" and \"ma\" are the two middle taps, and \"cue\" is the closing accent. The pattern alternates between right-lead and left-lead groups, each spanning one beat. The drag primary and subsequent three strokes are evenly spaced on the sixteenth-note grid, with the two grace notes falling just before the first primary stroke of each group. Each group of four primary strokes fills one beat of sixteenth notes: the drag primary on the downbeat, two taps on the \"e\" and \"&amp;\", and the accent on the \"a\". The accent on the final stroke provides a strong resolution that propels the pattern into the next group.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R t 4 \u00bc 1e L t 5 \u00bd 1&amp; R t 6 \u00be 1a L A 7 1 - 1/16 (1<sup>st</sup> grace before 2) R g 8 1 - 1/32 (2<sup>nd</sup> grace before 2) R g 9 1 2 L t 10 1 + \u00bc 2e R t 11 1 + \u00bd 2&amp; L t 12 1 + \u00be 2a R A"},{"location":"specs/rudiments/38_single_ratamacue/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/38_single_ratamacue/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>            &gt;  |              &gt;\nllR  L  R  L   |  rrL  R  L  R\n</code></pre> <p>Each beat contains one complete ratamacue: a drag (two grace notes + tap primary) followed by two taps and a closing accent. The lead hand alternates every beat.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First drag grace note, same hand as #2 2 L grace drag grace 2 #3 Second drag grace note, closer to primary 3 R tap primary n/a Drag primary (unaccented); the \"ra\" 4 L tap none n/a First tap after drag; the \"ta\" 5 R tap none n/a Second tap; the \"ma\" 6 L accent none n/a Closing accent; the \"cue\" 7 R grace drag grace 1 #9 First drag grace note, group 2 8 R grace drag grace 2 #9 Second drag grace note, group 2 9 L tap primary n/a Drag primary (unaccented); the \"ra\" 10 R tap none n/a First tap after drag; the \"ta\" 11 L tap none n/a Second tap; the \"ma\" 12 R accent none n/a Closing accent; the \"cue\""},{"location":"specs/rudiments/38_single_ratamacue/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Strokes #1-2 (both L) precede stroke #3 (R primary); strokes #7-8 (both R) precede stroke #9 (L primary) - The two grace notes form a quick diddle (same-hand double bounce) leading into the drag primary - Important: the drag primary in the ratamacue is a tap (unaccented), not an accent as in the basic drag (#31). The accent is reserved for the final stroke of the group (\"cue\"). This distinguishes the ratamacue from most other drag-category rudiments where the drag primary is accented. - The grace notes should produce a soft ruff leading into the first tap, not a distinct two-note event</p>"},{"location":"specs/rudiments/38_single_ratamacue/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/38_single_ratamacue/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (\"cue\") 1.0 Closing accent, the loudest stroke in each group tap (drag primary + singles) 0.65 - 0.77 The drag primary and middle taps are all unaccented grace (drag) 0.45 - 0.65 Each of the two drag grace notes <p>The ratamacue has a distinctive three-level dynamic hierarchy, but unlike most drag rudiments, the drag primary is not accented. The hierarchy is: grace notes (softest) leading into the drag primary tap, two more taps at the same level, and finally the closing accent (loudest). This creates a characteristic \"soft-medium-medium-medium-LOUD\" contour within each group that gives the ratamacue its propulsive quality.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-  -  -  &gt;  |  -  -  -  &gt;\nllR  L  R  L  |  rrL  R  L  R\n</code></pre> <p>One accent per beat, always on the final sixteenth note (\"a\" position). The three preceding strokes (including the drag primary) are all unaccented.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#dynamic-contour","title":"Dynamic Contour","text":"<p>The single ratamacue produces a repeating crescendo-to-accent shape: each beat begins with the soft drag grace notes, continues through three evenly voiced taps, and resolves on a strong accent. This \"build-and-release\" contour is the defining musical characteristic of the ratamacue family. The accent on the \"a\" of each beat creates an off-beat emphasis that gives the pattern a syncopated, forward-driving feel. When repeated, the accents land on weak subdivisions (the \"a\" of each beat), producing a rhythmic tension against the underlying pulse that resolves when the pattern ends. This off-beat accent placement distinguishes the ratamacue from most other drag rudiments, where accents typically fall on strong beats.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/38_single_ratamacue/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R tap (drag primary) low (2-6\") wrist 4 L tap low (2-6\") wrist 5 R tap low (2-6\") wrist 6 L accent full (12\"+) wrist + arm 7 R grace (drag 1) tap (&lt; 2\") fingers 8 R grace (drag 2) tap (&lt; 2\") fingers / rebound 9 L tap (drag primary) low (2-6\") wrist 10 R tap low (2-6\") wrist 11 L tap low (2-6\") wrist 12 R accent full (12\"+) wrist + arm <p>The physical flow of the single ratamacue involves two contrasting motions within each beat. The left hand in group 1 follows this path: two grace notes at tap height (finger control), then a tap at low height (#4), then a full accent (#6). This creates a gradual upward height progression (tap -&gt; low -&gt; full) within the same hand, which naturally supports the crescendo into the accent. The right hand plays the drag primary tap (#3), a tap (#5), then immediately switches to drag grace notes (#7-8) at the start of the next group. The accent-to-grace transition across the group boundary (stroke #6 accent to stroke #7 grace on the opposite hand) is manageable because different hands are involved.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accents. Grace notes individually articulated as two distinct soft strokes (open drag). All four primary strokes per beat are clearly separated with full low-to-full height progression visible. The onomatopoeic syllables \"ra-ta-ma-cue\" can be spoken in rhythm at this tempo. Each grace note uses active finger strokes. Moderate (100-140 BPM) Wrist-driven strokes for taps. Drag grace notes close up, with the second relying on rebound. The ruff becomes a single ornamental event rather than two distinct notes. The three taps and accent flow as a connected sixteenth-note group. Standard grace offsets at -1/16 and -1/32. The accent remains at full height to maintain dynamic contrast. Fast (140-160 BPM) Finger control for grace notes and taps. Accent drops to half height class. Drag grace notes compress toward -1/32 and -1/64 offsets, approaching a crushed ruff. The four primary strokes per beat merge into a rapid sixteenth-note burst with accent emphasis. The ratamacue begins to sound more like a continuous flow of sixteenths with off-beat accents than four distinct syllables."},{"location":"specs/rudiments/38_single_ratamacue/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/38_single_ratamacue/#common-variations","title":"Common Variations","text":"<ul> <li>Triplet interpretation: Some traditions play the ratamacue in a triplet feel rather than strict sixteenth notes, especially in older rudimental styles. The four primary strokes are grouped as a triplet + downbeat rather than four even sixteenths.</li> <li>No-ornament preparation: Practice as four alternating single strokes with the accent on the last (R L R &gt;L | L R L &gt;R) to isolate the accent placement before adding drag grace notes.</li> <li>Ratamacue as fill: In drum set contexts, the ratamacue is frequently used as a fill pattern, with the accent landing on a crash cymbal or different drum.</li> <li>Continuous ratamacues: Linking multiple ratamacues end-to-end, where the accent of one group flows directly into the drag of the next (the accent hand plays the drag grace notes for the following group).</li> </ul>"},{"location":"specs/rudiments/38_single_ratamacue/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ability to place accents on any position within a sixteenth-note group</li> </ul>"},{"location":"specs/rudiments/38_single_ratamacue/#31-drag-the-basic-drag-ornament-must-be-consistent-on-both-hands","title":"31 Drag -- the basic drag ornament must be consistent on both hands","text":""},{"location":"specs/rudiments/38_single_ratamacue/#1-single-stroke-roll-basic-hand-alternation-at-sixteenth-note-speed","title":"1 Single Stroke Roll -- basic hand alternation at sixteenth-note speed","text":""},{"location":"specs/rudiments/38_single_ratamacue/#2-single-stroke-four-the-four-note-single-stroke-pattern-that-forms-the-primary-strokes","title":"2 Single Stroke Four -- the four-note single stroke pattern that forms the primary strokes","text":""},{"location":"specs/rudiments/38_single_ratamacue/#6-double-stroke-open-roll-controlled-double-bounce-technique-for-the-grace-notes","title":"6 Double Stroke Open Roll -- controlled double bounce technique for the grace notes","text":""},{"location":"specs/rudiments/38_single_ratamacue/#builds-toward","title":"Builds Toward","text":"<ul> <li>Application in drum corps, concert, and marching percussion literature</li> <li>Drum set fills and solo vocabulary</li> </ul>"},{"location":"specs/rudiments/38_single_ratamacue/#39-double-ratamacue-adds-a-second-drag-at-the-beginning","title":"39 Double Ratamacue (adds a second drag at the beginning)","text":""},{"location":"specs/rudiments/38_single_ratamacue/#40-triple-ratamacue-adds-two-more-drags-at-the-beginning","title":"40 Triple Ratamacue (adds two more drags at the beginning)","text":""},{"location":"specs/rudiments/38_single_ratamacue/#teaching-notes","title":"Teaching Notes","text":"<p>The single ratamacue is the first of the three ratamacue rudiments and the canonical pattern of the ratamacue family. It combines the drag ornament with a four-note single stroke group, placing the accent on the final stroke rather than on the drag primary. This accent placement is unusual among drag rudiments and gives the ratamacue its distinctive character.</p> <p>Common mistakes: - Accenting the drag primary: In most drag rudiments (#31-37), the drag primary is accented. In the ratamacue, the drag primary is a tap. Students often carry the habit of accenting the drag primary, which destroys the ratamacue's characteristic \"build to the cue\" shape. - Grace notes too loud: The ruff overpowers the tap primary, making the pattern sound cluttered at the beginning of each group. - Missing the accent: The closing accent (\"cue\") is the most important stroke. It must be clearly louder than the preceding taps to create the ratamacue's signature dynamic contour. - Uneven sixteenth-note spacing: The four primary strokes should be evenly spaced within the beat. Students often rush the taps leading into the accent. - Inconsistent drag quality between hands: Left-lead drags (rrL) should sound identical to right-lead drags (llR). - Treating the drag as a flam: Both grace notes must be present. A collapsed drag (single grace) converts the ratamacue into a flamacue-like pattern (#23).</p> <p>Practice strategies: - Speak the syllables \"ra-ta-ma-CUE\" in rhythm before playing, emphasizing the final syllable. - Start without grace notes: practice R L R &gt;L | L R L &gt;R to establish the accent pattern. - Add grace notes: ll(R L R &gt;L) | rr(L R L &gt;R), ensuring the drag does not disrupt the sixteenth-note flow. - Practice each hand's lead separately before alternating. - Use a metronome with the click on the beat; notice that the accent falls on the \"a\" (the last sixteenth of each beat), creating an off-beat emphasis. - Compare the sound of right-lead and left-lead groups for consistency.</p> <p>What to listen for: - The \"ra-ta-ma-CUE\" shape: three soft-to-medium strokes building to a strong accent. - Clear dynamic separation between the taps and the closing accent. - Drag grace notes that color the first tap without overpowering it. - Even sixteenth-note spacing across all four primary strokes. - Identical quality on both right-lead and left-lead groups. - A propulsive, forward-driving feel created by the off-beat accent.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#historical-context","title":"Historical Context","text":"<p>The ratamacue is one of the oldest named drum rudiments, included in the original NARD (National Association of Rudimental Drummers) standard 26 rudiments when NARD was founded in 1933. The name \"ratamacue\" is onomatopoeic, derived from the sound the pattern makes when played: \"ra-ta-ma-cue\" approximates the quick ruff, two taps, and accented final stroke. This phonetic naming convention is characteristic of the oral tradition through which rudimental drumming was transmitted in early American military field drumming. The ratamacue appears in Charles Stewart Ashworth's A New, Useful and Complete System of Drum Beating (1812) and other early American drumming manuals, establishing it as one of the foundational patterns of the rudimental tradition. The Percussive Arts Society retained the single ratamacue as PAS #38 and added the double (#39) and triple (#40) variants when the rudiment list was expanded from 26 to 40 in 1984, though all three forms were practiced long before formal codification. In drum corps and marching percussion, the ratamacue remains a fundamental vocabulary element, often used for fills, transitions, and solo passages where its characteristic crescendo-to-accent shape provides natural phrasing and forward motion.</p>"},{"location":"specs/rudiments/38_single_ratamacue/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/38_single_ratamacue/#stick-notation","title":"Stick Notation","text":"<pre><code>               &gt;  |                 &gt;\nllR   L   R   L   |  rrL   R   L   R\n</code></pre>"},{"location":"specs/rudiments/38_single_ratamacue/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1        e     &amp;     a   | 2        e     &amp;     a   |\nHand:    | (ll)R    L     R     L   | (rr)L    R     L     R   |\nType:    |  gg  t   t     t     A   |  gg  t   t     t     A   |\nAccent:  |                     &gt;    |                     &gt;    |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The drag primaries land on beats 1 and 2 (unaccented), and the accents fall on the \"a\" positions (1a and 2a). The four primary strokes within each beat fill the complete sixteenth-note grid: 1, 1e, 1&amp;, 1a for the first group and 2, 2e, 2&amp;, 2a for the second.</p>"},{"location":"specs/rudiments/39_double_ratamacue/","title":"PAS #39: Double Ratamacue","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#1-identity","title":"1. Identity","text":"Field Value PAS Number 39 Name Double Ratamacue Category drag Family ratamacue Composed Of Two drags (#31) + three single strokes ending with an accent; the single ratamacue (#38) with an additional drag prepended Related #38 Single Ratamacue (one drag + singles + accent), #40 Triple Ratamacue (three drags + singles + accent), #31 Drag (the primitive drag ornament), #33 Double Drag Tap (two drags + tap, analogous \"double\" extension in the basic drag family) NARD Original Yes"},{"location":"specs/rudiments/39_double_ratamacue/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 3 beats Strokes Per Cycle 18 (10 primary strokes + 8 grace notes) Primary Strokes Per Cycle 10 <p>The double ratamacue extends the single ratamacue (#38) by adding a second drag at the beginning of each group. Where the single ratamacue has one drag followed by three single strokes ending with an accent (4 primary strokes per group), the double ratamacue has two drags followed by three single strokes ending with an accent (5 primary strokes per group). Each group spans 1.25 beats (5 sixteenth notes), and two groups fill the 3-beat cycle (5 + 5 = 10 sixteenth notes across 2.5 beats of primary strokes, with the remaining half-beat accommodated by the drag grace notes and the pickup into the next cycle). The two consecutive drags at the beginning of each group create a longer, more elaborate ruff sequence before the pattern resolves on the closing accent, intensifying the \"build-and-release\" character of the ratamacue.</p> <p>The five primary strokes per group fall on consecutive sixteenth-note positions: two drag primaries (each preceded by grace notes), then three single strokes with the accent on the last. The groups alternate lead hands: the first group is right-lead, the second is left-lead.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R t 4 \u00bc - 1/16 (1<sup>st</sup> grace before 1e) R g 5 \u00bc - 1/32 (2<sup>nd</sup> grace before 1e) R g 6 \u00bc 1e L t 7 \u00bd 1&amp; R t 8 \u00be 1a L t 9 1 2 R A 10 1 + \u00bc - 1/16 (1<sup>st</sup> grace before 2e) R g 11 1 + \u00bc - 1/32 (2<sup>nd</sup> grace before 2e) R g 12 1 + \u00bc 2e L t 13 1 + \u00bd - 1/16 (1<sup>st</sup> grace before 2&amp;) L g 14 1 + \u00bd - 1/32 (2<sup>nd</sup> grace before 2&amp;) L g 15 1 + \u00bd 2&amp; R t 16 1 + \u00be 2a L t 17 2 3 R t 18 2 + \u00bc 3e L A <p>Note: The first group (strokes #1-9) spans from beat 1 through beat 2: two drags on 1 and 1e, then taps on 1&amp;, 1a, and accent on 2. The second group (strokes #10-18) spans from beat 2e through 3e: two drags on 2e and 2&amp;, then taps on 2a, 3, and accent on 3e. The lead hand alternates between groups.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/39_double_ratamacue/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>                        &gt;  |                          &gt;\nllR  rrL  R  L  R      |  rrL  llR  L  R  L\n</code></pre> <p>Each group consists of two drags (alternating lead hand for each drag) followed by three single strokes with the accent on the last. The first group begins with a right-hand drag primary, the second with a left-hand drag primary. See #38 Single Ratamacue for the shared \"ra-ta-ma-cue\" accent pattern that concludes each group.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First grace, first drag of group 1 2 L grace drag grace 2 #3 Second grace, first drag of group 1 3 R tap primary n/a First drag primary (unaccented), group 1 4 R grace drag grace 1 #6 First grace, second drag of group 1 5 R grace drag grace 2 #6 Second grace, second drag of group 1 6 L tap primary n/a Second drag primary (unaccented), group 1 7 R tap none n/a First single stroke; the \"ta\" 8 L tap none n/a Second single stroke; the \"ma\" 9 R accent none n/a Closing accent; the \"cue\" 10 R grace drag grace 1 #12 First grace, first drag of group 2 11 R grace drag grace 2 #12 Second grace, first drag of group 2 12 L tap primary n/a First drag primary (unaccented), group 2 13 L grace drag grace 1 #15 First grace, second drag of group 2 14 L grace drag grace 2 #15 Second grace, second drag of group 2 15 R tap primary n/a Second drag primary (unaccented), group 2 16 L tap none n/a First single stroke; the \"ta\" 17 R tap none n/a Second single stroke; the \"ma\" 18 L accent none n/a Closing accent; the \"cue\""},{"location":"specs/rudiments/39_double_ratamacue/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Each drag follows the standard ornament timing from #31 Drag - There are four drags per cycle, each with its own pair of grace notes:   - Strokes #1-2 (L) precede #3 (R); strokes #4-5 (R) precede #6 (L)   - Strokes #10-11 (R) precede #12 (L); strokes #13-14 (L) precede #15 (R) - Critical transition: Between the first and second drag within each group, the hand that just played a drag primary (#3 or #12) must immediately produce two grace notes (#4-5 or #13-14) for the next drag. This drag-primary-to-drag-grace transition on the same hand is the same technical challenge as in the double drag tap (#33). - As in the single ratamacue (#38), the drag primaries are taps (unaccented), not accents. The accent is reserved for the final stroke of each group.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/39_double_ratamacue/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (\"cue\") 1.0 Closing accent, the loudest stroke in each group tap (drag primaries + singles) 0.65 - 0.77 All drag primaries and middle taps are unaccented grace (drag) 0.45 - 0.65 Each of the eight drag grace notes <p>The same three-level dynamic hierarchy as the single ratamacue (#38): grace (softest), tap (medium), accent (loudest). The two consecutive drags at the beginning of each group extend the soft-to-medium buildup, making the closing accent feel even more emphatic by contrast.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-     -     -  -  &gt;  |  -     -     -  -  &gt;\nllR   rrL   R  L  R  |  rrL   llR   L  R  L\n</code></pre> <p>One accent per group (on the final stroke), with all preceding strokes unaccented. The accent placement creates the same off-beat emphasis as the single ratamacue.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#dynamic-contour","title":"Dynamic Contour","text":"<p>The double ratamacue extends the single ratamacue's \"build-and-release\" contour by adding a longer preparation phase. Each group begins with two drag-preceded taps (four grace notes and two primaries), continues through two more taps, and resolves on a strong accent. The extended ruff-ruff-tap-tap-ACCENT shape creates a more dramatic buildup than the single ratamacue's single-ruff version. The two consecutive drags at the beginning produce a sense of gathering momentum -- a double \"buzz\" that propels the pattern forward through the taps into the accent resolution. The overall effect is a more intense, more dramatic version of the ratamacue's characteristic crescendo-to-accent shape.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/39_double_ratamacue/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R tap (drag primary) low (2-6\") wrist 4 R grace (drag 1) tap (&lt; 2\") fingers 5 R grace (drag 2) tap (&lt; 2\") fingers / rebound 6 L tap (drag primary) low (2-6\") wrist 7 R tap low (2-6\") wrist 8 L tap low (2-6\") wrist 9 R accent full (12\"+) wrist + arm 10 R grace (drag 1) tap (&lt; 2\") fingers 11 R grace (drag 2) tap (&lt; 2\") fingers / rebound 12 L tap (drag primary) low (2-6\") wrist 13 L grace (drag 1) tap (&lt; 2\") fingers 14 L grace (drag 2) tap (&lt; 2\") fingers / rebound 15 R tap (drag primary) low (2-6\") wrist 16 L tap low (2-6\") wrist 17 R tap low (2-6\") wrist 18 L accent full (12\"+) wrist + arm <p>The key physical challenge of the double ratamacue is the drag-primary-to-drag-grace transition between the first and second drags. Consider the right hand in group 1: it plays a tap-height drag primary (#3), then must immediately drop to produce two finger-controlled grace notes (#4-5) for the left hand's drag. This tap-to-grace transition on the same hand requires rapidly switching from a wrist-driven tap to a finger-controlled double bounce. This challenge is shared with the double drag tap (#33), but in the ratamacue context the drag primaries are taps rather than accents, making the height transition slightly less extreme.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accents. Grace notes individually articulated as open drags. All five primary strokes per group are clearly separated. The two consecutive drags are audible as distinct ruff events. The drag-primary-to-grace transition is manageable due to wider spacing. Each stroke is individually controllable. Moderate (100-120 BPM) Wrist-driven strokes. Drag grace notes close up to standard ruff sound. The two drags flow together as a connected pair of ruffs. The drag-primary-to-grace transition tightens, requiring efficient bounce technique. Standard grace offsets at -1/16 and -1/32. The five primary strokes and accent flow as a connected group. Fast (120-140 BPM) Finger control for grace notes and taps. Accent drops to half height class. Drag grace notes compress toward -1/32 and -1/64 offsets. The two drags at the beginning blur into a continuous buzzing preparation before the single strokes and accent. The pattern approaches a stream of sixteenths with embedded ruffs and an off-beat accent."},{"location":"specs/rudiments/39_double_ratamacue/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/39_double_ratamacue/#common-variations","title":"Common Variations","text":"<ul> <li>6/8 interpretation: Some traditions notate the double ratamacue in 6/8 time rather than 4/4, grouping the strokes differently while maintaining the same sound.</li> <li>No-ornament preparation: Practice as five alternating single strokes with the accent on the last (R L R L &gt;R | L R L R &gt;L) to isolate the rhythm before adding drags.</li> <li>Continuous double ratamacues: Linking multiple patterns end-to-end for extended rudimental passages.</li> <li>Ratamacue progression: Practicing single, double, and triple ratamacues in sequence as a graduated exercise.</li> </ul>"},{"location":"specs/rudiments/39_double_ratamacue/#prerequisites","title":"Prerequisites","text":""},{"location":"specs/rudiments/39_double_ratamacue/#38-single-ratamacue-the-simpler-ratamacue-pattern-must-be-solid-before-adding-a-second-drag","title":"38 Single Ratamacue -- the simpler ratamacue pattern must be solid before adding a second drag","text":""},{"location":"specs/rudiments/39_double_ratamacue/#31-drag-consistent-drag-ornament-on-both-hands","title":"31 Drag -- consistent drag ornament on both hands","text":""},{"location":"specs/rudiments/39_double_ratamacue/#33-double-drag-tap-the-drag-primary-to-drag-grace-transition-is-the-same-technical-challenge","title":"33 Double Drag Tap -- the drag-primary-to-drag-grace transition is the same technical challenge","text":""},{"location":"specs/rudiments/39_double_ratamacue/#6-double-stroke-open-roll-controlled-double-bounce-technique","title":"6 Double Stroke Open Roll -- controlled double bounce technique","text":""},{"location":"specs/rudiments/39_double_ratamacue/#builds-toward","title":"Builds Toward","text":"<ul> <li>Extended rudimental solo passages combining ratamacue variants</li> <li>Drum corps and marching percussion literature</li> </ul>"},{"location":"specs/rudiments/39_double_ratamacue/#40-triple-ratamacue-adds-a-third-drag-at-the-beginning","title":"40 Triple Ratamacue (adds a third drag at the beginning)","text":""},{"location":"specs/rudiments/39_double_ratamacue/#teaching-notes","title":"Teaching Notes","text":"<p>The double ratamacue adds a second drag to the beginning of the single ratamacue pattern. The primary new challenge is the drag-primary-to-drag-grace transition between the two consecutive drags, which is the same skill required in the double drag tap (#33). See #38 Single Ratamacue for foundational teaching guidance on the ratamacue's accent placement and dynamic contour.</p> <p>Common mistakes: - Accenting the drag primaries: As in the single ratamacue, the drag primaries are taps, not accents. Only the final stroke of each group should be accented. - Collapsing the second drag: At speed, the second drag often loses one or both grace notes, reducing it to a flam or plain tap. - Uneven drags: Both drags within each group should have identical ruff quality. Students often execute the first drag well but rush or compress the second. - Losing count: With five primary strokes per group plus grace notes, students can lose track of position. Counting \"1-e-&amp;-a-2\" for the primary strokes helps maintain orientation. - Rushing into the accent: The taps leading into the closing accent must maintain even sixteenth-note spacing. - Inconsistent drag quality across the four drags per cycle.</p> <p>Practice strategies: - Master the single ratamacue (#38) before adding the second drag. - Practice the drag-primary-to-drag-grace transition in isolation (as in #33 Double Drag Tap). - Build up incrementally: practice with only the first drag (single ratamacue), then add the second drag. - Count the primary strokes: \"1-e-&amp;-a-2\" for group 1, aligning with the sixteenth-note grid. - Practice each group separately (right-lead, then left-lead) before alternating. - Compare all four drags per cycle for equal quality.</p> <p>What to listen for: - The extended \"build-and-release\" contour: two ruffs leading through taps to a strong accent. - All four drags per cycle should have identical ruff quality. - Clear dynamic separation between taps and the closing accent. - Even sixteenth-note spacing across all five primary strokes per group. - Both groups (right-lead and left-lead) should sound identical.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#historical-context","title":"Historical Context","text":"<p>The double ratamacue was included in the original NARD 26 rudiments and has been practiced in American rudimental drumming traditions since at least the early 19<sup>th</sup> century. It was retained as PAS #39 when the Percussive Arts Society expanded the rudiment list to 40 in 1984. The relationship between the single (#38) and double (#39) ratamacue mirrors the progressive \"single then double\" pattern seen throughout the PAS rudiments (cf. #32 Single Drag Tap to #33 Double Drag Tap, #16 Single Paradiddle to #17 Double Paradiddle). The additional drag at the beginning creates a more elaborate and dramatic pattern that features prominently in drum corps snare drum solos and rudimental contest pieces, where its extended buildup provides dramatic phrasing and forward momentum.</p>"},{"location":"specs/rudiments/39_double_ratamacue/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/39_double_ratamacue/#stick-notation","title":"Stick Notation","text":"<pre><code>                           &gt;  |                             &gt;\nllR   rrL   R   L   R     |  rrL   llR   L   R   L\n</code></pre>"},{"location":"specs/rudiments/39_double_ratamacue/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1        e        &amp;     a   | 2        e        &amp;     a   | 3     e        |\nHand:    | (ll)R    (rr)L    R     L   | R        (rr)L    (ll)R  L  | R     L        |\nType:    |  gg  t    gg  t   t     t   | A         gg  t    gg  t  t | t     A        |\nAccent:  |                             | &gt;                           |       &gt;        |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beats 1 through 2 (drags on 1 and 1e, taps on 1&amp; and 1a, accent on 2). The second group occupies beats 2e through 3e (drags on 2e and 2&amp;, taps on 2a and 3, accent on 3e).</p>"},{"location":"specs/rudiments/40_triple_ratamacue/","title":"PAS #40: Triple Ratamacue","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#1-identity","title":"1. Identity","text":"Field Value PAS Number 40 Name Triple Ratamacue Category drag Family ratamacue Composed Of Three drags (#31) + three single strokes ending with an accent; the double ratamacue (#39) with an additional drag prepended Related #38 Single Ratamacue (one drag + singles + accent), #39 Double Ratamacue (two drags + singles + accent), #31 Drag (the primitive drag ornament), #18 Triple Paradiddle (analogous \"triple\" extension in the diddle family) NARD Original Yes"},{"location":"specs/rudiments/40_triple_ratamacue/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature 4/4 Base Subdivision sixteenth Cycle Length 4 beats Strokes Per Cycle 24 (12 primary strokes + 12 grace notes) Primary Strokes Per Cycle 12 <p>The triple ratamacue is the final rudiment in the PAS 40 International Drum Rudiments list and the most extended member of the ratamacue family. It adds a third drag to the beginning of the double ratamacue (#39), creating a pattern with three consecutive drags followed by three single strokes ending with an accent -- six primary strokes per group. Each group spans 1.5 beats (6 sixteenth notes), and two groups fill the 4-beat cycle (occupying 3 beats of primary strokes, with the remaining beat filled by grace note timing and the spacing between groups). The three consecutive drags create the longest ruff sequence in the ratamacue family, producing a dramatic, rolling buildup that resolves emphatically on the closing accent. As PAS #40, it serves as the culmination of the entire rudiment system.</p> <p>The six primary strokes per group fall on consecutive sixteenth-note positions: three drag primaries (each preceded by grace notes), then three single strokes with the accent on the last. The groups alternate lead hands.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 -1/16 (1<sup>st</sup> grace before 1) L g 2 -1/32 (2<sup>nd</sup> grace before 1) L g 3 0 1 R t 4 \u00bc - 1/16 (1<sup>st</sup> grace before 1e) R g 5 \u00bc - 1/32 (2<sup>nd</sup> grace before 1e) R g 6 \u00bc 1e L t 7 \u00bd - 1/16 (1<sup>st</sup> grace before 1&amp;) L g 8 \u00bd - 1/32 (2<sup>nd</sup> grace before 1&amp;) L g 9 \u00bd 1&amp; R t 10 \u00be 1a L t 11 1 2 R t 12 1 + \u00bc 2e L A 13 1 + \u00bd - 1/16 (1<sup>st</sup> grace before 2&amp;) R g 14 1 + \u00bd - 1/32 (2<sup>nd</sup> grace before 2&amp;) R g 15 1 + \u00bd 2&amp; L t 16 1 + \u00be - 1/16 (1<sup>st</sup> grace before 2a) L g 17 1 + \u00be - 1/32 (2<sup>nd</sup> grace before 2a) L g 18 1 + \u00be 2a R t 19 2 - 1/16 (1<sup>st</sup> grace before 3) R g 20 2 - 1/32 (2<sup>nd</sup> grace before 3) R g 21 2 3 L t 22 2 + \u00bc 3e R t 23 2 + \u00bd 3&amp; L t 24 2 + \u00be 3a R A <p>Note: The first group (strokes #1-12) spans from beat 1 through 2e: three drags on 1, 1e, and 1&amp;, then taps on 1a, 2, and accent on 2e. The second group (strokes #13-24) spans from beat 2&amp; through 3a: three drags on 2&amp;, 2a, and 3, then taps on 3e, 3&amp;, and accent on 3a. The lead hand alternates between groups.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>                              &gt;  |                                &gt;\nllR  rrL  llR  L  R  L       |  rrL  llR  rrL  R  L  R\n</code></pre> <p>Each group consists of three drags (alternating the lead hand for each successive drag) followed by three single strokes with the accent on the last. The first group begins with a right-hand drag primary, the second with a left-hand drag primary. See #38 Single Ratamacue for the shared \"cue\" accent pattern that concludes each group.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 L grace drag grace 1 #3 First grace, first drag of group 1 2 L grace drag grace 2 #3 Second grace, first drag of group 1 3 R tap primary n/a First drag primary (unaccented), group 1 4 R grace drag grace 1 #6 First grace, second drag of group 1 5 R grace drag grace 2 #6 Second grace, second drag of group 1 6 L tap primary n/a Second drag primary (unaccented), group 1 7 L grace drag grace 1 #9 First grace, third drag of group 1 8 L grace drag grace 2 #9 Second grace, third drag of group 1 9 R tap primary n/a Third drag primary (unaccented), group 1 10 L tap none n/a First single stroke; the \"ta\" 11 R tap none n/a Second single stroke; the \"ma\" 12 L accent none n/a Closing accent; the \"cue\" 13 R grace drag grace 1 #15 First grace, first drag of group 2 14 R grace drag grace 2 #15 Second grace, first drag of group 2 15 L tap primary n/a First drag primary (unaccented), group 2 16 L grace drag grace 1 #18 First grace, second drag of group 2 17 L grace drag grace 2 #18 Second grace, second drag of group 2 18 R tap primary n/a Second drag primary (unaccented), group 2 19 R grace drag grace 1 #21 First grace, third drag of group 2 20 R grace drag grace 2 #21 Second grace, third drag of group 2 21 L tap primary n/a Third drag primary (unaccented), group 2 22 R tap none n/a First single stroke; the \"ta\" 23 L tap none n/a Second single stroke; the \"ma\" 24 R accent none n/a Closing accent; the \"cue\""},{"location":"specs/rudiments/40_triple_ratamacue/#ornament-timing","title":"Ornament Timing","text":"<p>Drag Grace Notes: - First grace offset from primary: -1/16 beat (the earlier of the two drag grace notes) - Second grace offset from primary: -1/32 beat (the later of the two, closer to the primary) - Both grace notes played by the same hand (opposite from the primary stroke) - Each drag follows the standard ornament timing from #31 Drag - There are six drags per cycle, each with its own pair of grace notes:   - Group 1: Strokes #1-2 (L) precede #3 (R); strokes #4-5 (R) precede #6 (L); strokes #7-8 (L) precede #9 (R)   - Group 2: Strokes #13-14 (R) precede #15 (L); strokes #16-17 (L) precede #18 (R); strokes #19-20 (R) precede #21 (L) - Critical transitions: Between each consecutive drag, the hand that just played a drag primary must immediately produce two grace notes for the next drag. There are two such transitions per group (first-to-second and second-to-third drag), making this the most technically demanding pattern in the ratamacue family. - As in all ratamacues, the drag primaries are taps (unaccented). The accent is reserved for the final stroke of each group.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent (\"cue\") 1.0 Closing accent, the loudest stroke in each group tap (drag primaries + singles) 0.65 - 0.77 All drag primaries and middle taps are unaccented grace (drag) 0.45 - 0.65 Each of the twelve drag grace notes <p>The same three-level dynamic hierarchy as the single (#38) and double (#39) ratamacues. The three consecutive drags at the beginning of each group create the longest soft-to-medium preparation in the family, making the closing accent feel maximally emphatic.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#accent-pattern","title":"Accent Pattern","text":"<pre><code>-     -     -     -  -  &gt;  |  -     -     -     -  -  &gt;\nllR   rrL   llR   L  R  L  |  rrL   llR   rrL   R  L  R\n</code></pre> <p>One accent per group (on the final stroke), with all five preceding primary strokes unaccented. The accent placement creates the same off-beat emphasis characteristic of the ratamacue family.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#dynamic-contour","title":"Dynamic Contour","text":"<p>The triple ratamacue produces the most dramatic \"build-and-release\" contour in the ratamacue family. Each group begins with three consecutive drag-preceded taps (six grace notes and three primaries), creating a sustained buzzing preparation that accumulates rhythmic energy. The pattern then passes through two more taps before resolving on a full accent. This extended ruff-ruff-ruff-tap-tap-ACCENT shape creates a powerful sense of forward motion and dramatic anticipation. The three drags function like a drum roll building to a climax, and the closing accent provides a satisfying release. As the final rudiment in the PAS system, the triple ratamacue represents the most elaborate development of the drag-ornament concept: the maximum number of drags before the ratamacue resolution.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 L grace (drag 1) tap (&lt; 2\") fingers 2 L grace (drag 2) tap (&lt; 2\") fingers / rebound 3 R tap (drag primary) low (2-6\") wrist 4 R grace (drag 1) tap (&lt; 2\") fingers 5 R grace (drag 2) tap (&lt; 2\") fingers / rebound 6 L tap (drag primary) low (2-6\") wrist 7 L grace (drag 1) tap (&lt; 2\") fingers 8 L grace (drag 2) tap (&lt; 2\") fingers / rebound 9 R tap (drag primary) low (2-6\") wrist 10 L tap low (2-6\") wrist 11 R tap low (2-6\") wrist 12 L accent full (12\"+) wrist + arm 13 R grace (drag 1) tap (&lt; 2\") fingers 14 R grace (drag 2) tap (&lt; 2\") fingers / rebound 15 L tap (drag primary) low (2-6\") wrist 16 L grace (drag 1) tap (&lt; 2\") fingers 17 L grace (drag 2) tap (&lt; 2\") fingers / rebound 18 R tap (drag primary) low (2-6\") wrist 19 R grace (drag 1) tap (&lt; 2\") fingers 20 R grace (drag 2) tap (&lt; 2\") fingers / rebound 21 L tap (drag primary) low (2-6\") wrist 22 R tap low (2-6\") wrist 23 L tap low (2-6\") wrist 24 R accent full (12\"+) wrist + arm <p>The triple ratamacue contains two drag-primary-to-drag-grace transitions per group (between the first and second drags, and between the second and third drags), making it the most physically demanding pattern in the ratamacue family. Each transition requires the hand that just played a tap-height drag primary to immediately produce two finger-controlled grace notes for the next drag. The three consecutive drags demand sustained finger control and bounce technique, as the non-lead hand must alternate between receiving drag primaries and producing grace notes in rapid succession. Consider the left hand in group 1: it plays grace notes (#1-2), then a drag primary tap (#6), then grace notes again (#7-8), then a tap (#10), then the closing accent (#12). This alternating grace-primary-grace-tap-accent path requires precise control of stick height transitions.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow (60-100 BPM) Full wrist + arm motion for accents. Grace notes individually articulated as open drags. All six primary strokes per group are clearly separated. The three consecutive drags are audible as three distinct ruff events. The two drag-primary-to-grace transitions within each group are manageable. The pattern's six-note grouping is clearly perceptible. Moderate (100-120 BPM) Wrist-driven strokes. Drag grace notes close up to standard ruff sound. The three drags flow together as a connected series of ruffs, creating a sustained buzzing texture. Standard grace offsets at -1/16 and -1/32. The transitions between consecutive drags tighten, requiring efficient bounce technique. The six primary strokes and accent flow as a connected group. Fast (120-140 BPM) Finger control for grace notes and taps. Accent drops to half height class. Drag grace notes compress toward -1/32 and -1/64 offsets. The three drags blur into a continuous buzzing run that propels toward the accent. The drag-primary-to-grace transitions become the critical bottleneck -- each hand must convert impact energy into controlled bounces almost instantaneously. The pattern approaches a rapid stream of sixteenths with an embedded buzz texture and off-beat accent."},{"location":"specs/rudiments/40_triple_ratamacue/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#common-variations","title":"Common Variations","text":"<ul> <li>4/4 common time grouping: The triple ratamacue fits naturally into 4/4 time with its 4-beat cycle, making it a natural fit for common time musical contexts.</li> <li>No-ornament preparation: Practice as six alternating single strokes with the accent on the last (R L R L R &gt;L | L R L R L &gt;R) to isolate the rhythm before adding drags.</li> <li>Progressive ratamacue exercise: Playing single, double, then triple ratamacues in sequence, adding one drag at a time.</li> <li>Continuous triple ratamacues: Linking multiple patterns for extended passages in solo and ensemble literature.</li> </ul>"},{"location":"specs/rudiments/40_triple_ratamacue/#prerequisites","title":"Prerequisites","text":"<ul> <li>Strong finger control and bounce technique for sustained consecutive drags</li> </ul>"},{"location":"specs/rudiments/40_triple_ratamacue/#38-single-ratamacue-the-foundational-ratamacue-accent-pattern","title":"38 Single Ratamacue -- the foundational ratamacue accent pattern","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#39-double-ratamacue-the-two-drag-version-should-be-comfortable-before-adding-a-third-drag","title":"39 Double Ratamacue -- the two-drag version should be comfortable before adding a third drag","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#31-drag-consistent-drag-ornament-on-both-hands","title":"31 Drag -- consistent drag ornament on both hands","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#33-double-drag-tap-the-drag-primary-to-drag-grace-transition-technique","title":"33 Double Drag Tap -- the drag-primary-to-drag-grace transition technique","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#6-double-stroke-open-roll-controlled-double-bounce-technique","title":"6 Double Stroke Open Roll -- controlled double bounce technique","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#builds-toward","title":"Builds Toward","text":"<ul> <li>The triple ratamacue is PAS #40, the final rudiment in the system. It does not directly build toward other PAS rudiments, but it develops:</li> <li>Advanced rudimental solo technique</li> <li>Extended drag-based passages in drum corps and marching percussion</li> <li>The sustained consecutive-drag skill applicable to any complex drag combination</li> <li>Musical phrasing and dynamic contour control</li> </ul>"},{"location":"specs/rudiments/40_triple_ratamacue/#teaching-notes","title":"Teaching Notes","text":"<p>The triple ratamacue is the most extended pattern in the ratamacue family and the final rudiment in the PAS 40 system. It adds a third drag to the double ratamacue, creating a pattern with three consecutive drags before the single-stroke resolution. The primary technical challenge is sustaining three consecutive drags with clean grace notes and even primary strokes. See #38 Single Ratamacue for foundational teaching guidance on the ratamacue accent pattern and dynamic contour.</p> <p>Common mistakes: - Accenting the drag primaries: As in all ratamacues, the drag primaries are taps. The accent belongs only on the final stroke. - Progressive drag degradation: The first drag is clean, the second is acceptable, and the third loses grace notes. All three drags must have identical quality. - Rushing through the drags: Students often compress the three-drag section, arriving at the single strokes too early. Even sixteenth-note spacing must be maintained. - Losing rhythmic orientation: With six primary strokes per group plus twelve grace notes per cycle, students can lose their place. Counting the sixteenth-note grid is essential. - Fatigue: The sustained consecutive drags require endurance in finger control. Students may tire and lose control of the grace notes. - Inconsistent drag quality across the six drags per cycle.</p> <p>Practice strategies: - Master the single (#38) and double (#39) ratamacues before attempting the triple. - Build up incrementally: play the single ratamacue, then the double, then the triple, feeling how each additional drag extends the pattern. - Practice three consecutive drags in isolation (llR rrL llR, then rrL llR rrL) to develop the sustained bounce technique. - Count the primary strokes on the sixteenth-note grid to maintain even spacing. - Practice each group separately (right-lead, then left-lead) before alternating. - Compare all six drags per cycle for equal quality. - Use slow tempos to establish clean grace notes on every drag before increasing speed.</p> <p>What to listen for: - The extended \"build-and-release\" contour: three ruffs leading through taps to a climactic accent. - All six drags per cycle should have identical ruff quality -- no progressive degradation. - Clear dynamic separation between the taps and the closing accent. - Even sixteenth-note spacing across all six primary strokes per group. - Both groups (right-lead and left-lead) should sound identical. - A dramatic, rolling quality during the three-drag section that builds momentum toward the accent.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#historical-context","title":"Historical Context","text":"<p>The triple ratamacue was included in the original NARD 26 rudiments and has been practiced in American rudimental drumming traditions since at least the early 19<sup>th</sup> century. As PAS #40, it occupies the final position in the Percussive Arts Society's International Drum Rudiments list, a placement that reflects its status as the most elaborate development of the drag-ornament concept. The progression from single (#38) to double (#39) to triple (#40) ratamacue follows the same graduated extension principle seen throughout the PAS system (single/double/triple paradiddles, single/double drag taps), and placing the triple ratamacue last gives the list a sense of culmination. The rudiment appears in advanced drum corps snare drum literature, rudimental contest solos, and military drumming contexts where its extended buildup and dramatic accent resolution provide a powerful musical effect. In the rudimental tradition, the triple ratamacue is often considered a capstone skill -- mastery of this pattern demonstrates command of drag technique, hand alternation, accent placement, and the sustained coordination required for advanced rudimental playing.</p>"},{"location":"specs/rudiments/40_triple_ratamacue/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/40_triple_ratamacue/#stick-notation","title":"Stick Notation","text":"<pre><code>                                    &gt;  |                                      &gt;\nllR   rrL   llR   L   R   L        |  rrL   llR   rrL   R   L   R\n</code></pre>"},{"location":"specs/rudiments/40_triple_ratamacue/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1        e        &amp;        a   | 2        e        &amp;        a        | 3        e        &amp;     a   |  4  |\nHand:    | (ll)R    (rr)L    (ll)R    L   | R        L        (rr)L    (ll)R    | (rr)L    R        L     R   |     |\nType:    |  gg  t    gg  t    gg  t   t   | t        A         gg  t    gg  t   |  gg  t   t        t     A   |     |\nAccent:  |                                |          &gt;                          |                         &gt;   |     |\n</code></pre> <p>Grace notes shown in doubled parentheses indicate two same-hand grace notes falling just before the grid position. The first grace is at -1/16 beat and the second at -1/32 beat from the primary. The first group occupies beats 1 through 2e (drags on 1, 1e, and 1&amp;; taps on 1a and 2; accent on 2e). The second group occupies beats 2&amp; through 3a (drags on 2&amp;, 2a, and 3; taps on 3e and 3&amp;; accent on 3a). Beat 4 is empty, completing the 4-beat cycle.</p>"},{"location":"specs/rudiments/_conventions/","title":"Conventions &amp; Shared Definitions","text":"<p>This document defines all shared vocabulary, scales, and notation conventions used across the 40 PAS rudiment engineering specs. Individual specs reference these definitions rather than redefining them.</p>"},{"location":"specs/rudiments/_conventions/#beat-fraction-notation","title":"Beat Fraction Notation","text":"<p>All timing in these specs is expressed as fractions of a beat. No millisecond values appear anywhere.</p> <p>Rules:</p> <ul> <li>Always use simplified fractions: <code>1/4</code> not <code>2/8</code></li> <li>Position <code>0</code> = the downbeat of the cycle</li> <li>Negative fractions = before the beat (grace notes, ornaments)</li> <li>The beat unit is always the quarter note unless stated otherwise</li> <li>Positions within a multi-beat cycle are expressed as whole + fraction (e.g., <code>1 + 1/4</code> = the \"e\" of beat 2)</li> </ul>"},{"location":"specs/rudiments/_conventions/#grid-slot-naming","title":"Grid Slot Naming","text":"<p>Standard counting names for each subdivision level:</p> Subdivision Slots per Beat Names Quarter 1 1 Eighth 2 1, &amp; Triplet 3 1, &amp;, a Sixteenth 4 1, e, &amp;, a Sextuplet 6 1, la, li, &amp;, la, li 32<sup>nd</sup> 8 1, &amp;, e, &amp;, a, &amp;, e, &amp; <p>Beat numbers increment for multi-beat cycles (e.g., beat 2 sixteenths: 2, 2e, 2&amp;, 2a).</p>"},{"location":"specs/rudiments/_conventions/#stroke-types","title":"Stroke Types","text":"Abbreviation Type Description A accent Emphasized stroke, full arm/wrist motion t tap Unaccented single stroke g grace Grace note (flam or drag ornament) d1 diddle pos 1 First stroke of a double (same hand) d2 diddle pos 2 Second stroke of a double (same hand) b buzz Press/buzz roll stroke with multiple bounces"},{"location":"specs/rudiments/_conventions/#velocity-ratio-scale","title":"Velocity Ratio Scale","text":"<p>All velocities are expressed relative to accent = 1.0.</p> Stroke Type Ratio Range Notes accent 1.0 Reference level tap 0.65 - 0.77 Unaccented single stroke grace (flam) 0.50 - 0.70 Single grace note before primary grace (drag) 0.45 - 0.65 Each of the two drag grace notes diddle pos 1 matches parent Same as the accent/tap it belongs to diddle pos 2 0.90 - 0.98 x pos 1 Slight decay on second bounce buzz bounce 0.60 - 0.80 x primary Per-bounce, decaying"},{"location":"specs/rudiments/_conventions/#stroke-height-classes","title":"Stroke Height Classes","text":"Class Stick Height Typical Use full 12\"+ above head Accents, loud strokes half 6 - 12\" Medium dynamics low 2 - 6\" Taps, unaccented strokes tap &lt; 2\" Grace notes, buzz bounces"},{"location":"specs/rudiments/_conventions/#motion-types","title":"Motion Types","text":"Type Description Typical Stroke wrist + arm Full Moeller whip motion Accents at moderate tempos wrist Primary motion from wrist Most strokes at moderate tempos fingers Finger control, minimal wrist Grace notes, fast passages, diddle pos 2 rebound Controlled bounce off head Buzz rolls, fast diddles"},{"location":"specs/rudiments/_conventions/#categories","title":"Categories","text":"Category PAS Numbers Description Roll 1 - 15 Single strokes, buzz/multiple bounce, double strokes, counted rolls Diddle 16 - 19 Paradiddle family (single + double stroke combinations) Flam 20 - 30 Patterns featuring single grace note ornaments Drag 31 - 40 Patterns featuring double grace note ornaments"},{"location":"specs/rudiments/_conventions/#ornament-timing-conventions","title":"Ornament Timing Conventions","text":""},{"location":"specs/rudiments/_conventions/#flam-grace-notes","title":"Flam Grace Notes","text":"<ul> <li>Expressed as a negative beat fraction from the primary stroke</li> <li>Standard offset: -1/32 beat (at moderate tempos)</li> <li>Range: -1/64 to -1/16 depending on tempo and style</li> <li>Grace note always played by the opposite hand from the primary</li> </ul>"},{"location":"specs/rudiments/_conventions/#drag-grace-notes","title":"Drag Grace Notes","text":"<ul> <li>Two grace notes preceding the primary stroke</li> <li>First grace: -1/16 beat before primary</li> <li>Second grace: -1/32 beat before primary</li> <li>Both grace notes played by the same hand (opposite from primary)</li> <li>Grace notes form a quick diddle (same hand, two bounces)</li> </ul>"},{"location":"specs/rudiments/_conventions/#diddle-timing","title":"Diddle Timing","text":"<ul> <li>Two strokes sharing a single grid position's duration</li> <li>Each diddle stroke occupies \u00bd of the parent grid slot</li> <li>At slow tempos: open (distinguishable as two separate strokes)</li> <li>At fast tempos: closed (nearly blurred together)</li> </ul>"},{"location":"specs/rudiments/_conventions/#notation-conventions","title":"Notation Conventions","text":""},{"location":"specs/rudiments/_conventions/#stick-notation","title":"Stick Notation","text":"<ul> <li><code>R</code> = right hand stroke</li> <li><code>L</code> = left hand stroke</li> <li><code>&gt;</code> = accent marker (above the stroke)</li> <li><code>(g)</code> = grace note prefix</li> <li><code>|</code> = bar/group separator</li> </ul>"},{"location":"specs/rudiments/_conventions/#flam-notation","title":"Flam Notation","text":"<ul> <li><code>lR</code> = left grace + right primary (right-hand flam)</li> <li><code>rL</code> = right grace + left primary (left-hand flam)</li> </ul>"},{"location":"specs/rudiments/_conventions/#drag-notation","title":"Drag Notation","text":"<ul> <li><code>llR</code> = left-left grace + right primary (right-hand drag)</li> <li><code>rrL</code> = right-right grace + left primary (left-hand drag)</li> </ul>"},{"location":"specs/rudiments/_conventions/#families","title":"Families","text":"<p>Sub-groupings within each category:</p>"},{"location":"specs/rudiments/_conventions/#roll-category","title":"Roll Category","text":"Family PAS Numbers Description single stroke 1 - 3 Alternating single strokes buzz 4 Multiple bounce (press) roll triple stroke 5 Three strokes per hand double stroke 6 Open double stroke roll (diddles alternating) counted roll 7 - 15 Specific stroke counts (5, 6, 7, 9, 10, 11, 13, 15, 17)"},{"location":"specs/rudiments/_conventions/#diddle-category","title":"Diddle Category","text":"Family PAS Numbers Description paradiddle 16 - 19 Single, double, triple paradiddles + paradiddle-diddle"},{"location":"specs/rudiments/_conventions/#flam-category","title":"Flam Category","text":"Family PAS Numbers Description basic flam 20 - 22 Flam, flam accent, flam tap compound flam 23 - 26 Flamacue, flam paradiddle, single flammed mill, flam paradiddle-diddle advanced flam 27 - 30 Pataflafla, Swiss army triplet, inverted flam tap, flam drag"},{"location":"specs/rudiments/_conventions/#drag-category","title":"Drag Category","text":"Family PAS Numbers Description basic drag 31 - 33 Drag, single drag tap, double drag tap compound drag 34 - 37 Lesson 25, single dragadiddle, drag paradiddle #1, drag paradiddle #2 ratamacue 38 - 40 Single, double, triple ratamacue"},{"location":"specs/rudiments/_index/","title":"PAS 40 International Drum Rudiment Engineering Specs","text":"<p>These engineering specifications provide a comprehensive, tempo-agnostic reference for each of the 40 Percussive Arts Society (PAS) International Drum Rudiments. Each spec covers seven layers: identity, rhythmic structure, sticking and articulation, dynamics model, physical/kinesthetic technique, variations and pedagogy, and notation.</p> <p>All timing is expressed in beat fractions (no millisecond values). Shared definitions for stroke types, velocity ratios, height classes, motion types, and notation conventions are in Conventions &amp; Shared Definitions. The blank spec template is at Template.</p> <p>These specs serve as the authoritative source of truth for the SOUSA project and will drive future migration of the YAML rudiment definitions in <code>dataset_gen/rudiments/definitions/</code>.</p>"},{"location":"specs/rudiments/_index/#i-roll-rudiments","title":"I. Roll Rudiments","text":""},{"location":"specs/rudiments/_index/#a-single-stroke","title":"A. Single Stroke","text":"PAS # Name Category Family Subdivision Cycle Length Status 1 Single Stroke Roll roll single stroke sixteenth 2 beats Done 2 Single Stroke Four roll single stroke sixteenth 1 beat Done 3 Single Stroke Seven roll single stroke sixteenth 2 beats Done"},{"location":"specs/rudiments/_index/#b-multiple-bounce","title":"B. Multiple Bounce","text":"PAS # Name Category Family Subdivision Cycle Length Status 4 Multiple Bounce Roll roll buzz eighth 2 beats Done"},{"location":"specs/rudiments/_index/#c-triple-stroke","title":"C. Triple Stroke","text":"PAS # Name Category Family Subdivision Cycle Length Status 5 Triple Stroke Roll roll triple stroke sextuplet 2 beats Done"},{"location":"specs/rudiments/_index/#d-double-stroke-open-roll","title":"D. Double Stroke Open Roll","text":"PAS # Name Category Family Subdivision Cycle Length Status 6 Double Stroke Open Roll roll double stroke sixteenth 2 beats Done"},{"location":"specs/rudiments/_index/#e-counted-stroke-rolls","title":"E. Counted Stroke Rolls","text":"PAS # Name Category Family Subdivision Cycle Length Status 7 Five Stroke Roll roll counted roll sixteenth 1.5 beats Done 8 Six Stroke Roll roll counted roll sixteenth 1.5 beats Done 9 Seven Stroke Roll roll counted roll sixteenth 2 beats Done 10 Nine Stroke Roll roll counted roll sixteenth 2.5 beats Done 11 Ten Stroke Roll roll counted roll sixteenth 2.5 beats Done 12 Eleven Stroke Roll roll counted roll sixteenth 3 beats Done 13 Thirteen Stroke Roll roll counted roll sixteenth 3.5 beats Done 14 Fifteen Stroke Roll roll counted roll sixteenth 4 beats Done 15 Seventeen Stroke Roll roll counted roll sixteenth 4.5 beats Done"},{"location":"specs/rudiments/_index/#ii-diddle-rudiments","title":"II. Diddle Rudiments","text":"PAS # Name Category Family Subdivision Cycle Length Status 16 Single Paradiddle diddle paradiddle sixteenth 2 beats Done 17 Double Paradiddle diddle paradiddle sixteenth 3 beats Done 18 Triple Paradiddle diddle paradiddle sixteenth 4 beats Done 19 Paradiddle-Diddle diddle paradiddle sextuplet 2 beats Done"},{"location":"specs/rudiments/_index/#iii-flam-rudiments","title":"III. Flam Rudiments","text":"PAS # Name Category Family Subdivision Cycle Length Status 20 Flam flam basic flam eighth 1 beat Done 21 Flam Accent flam basic flam triplet 2 beats Done 22 Flam Tap flam basic flam eighth 1 beat Done 23 Flamacue flam compound flam sixteenth 3 beats Done 24 Flam Paradiddle flam compound flam sixteenth 2.5 beats Done 25 Single Flammed Mill flam compound flam sixteenth 2 beats Done 26 Flam Paradiddle-Diddle flam compound flam sextuplet 2 beats Done 27 Pataflafla flam advanced flam sixteenth 2 beats Done 28 Swiss Army Triplet flam advanced flam triplet 2 beats Done 29 Inverted Flam Tap flam advanced flam sixteenth 1.5 beats Done 30 Flam Drag flam advanced flam sixteenth 3 beats Done"},{"location":"specs/rudiments/_index/#iv-drag-rudiments","title":"IV. Drag Rudiments","text":"PAS # Name Category Family Subdivision Cycle Length Status 31 Drag drag basic drag eighth 1 beat Done 32 Single Drag Tap drag basic drag sixteenth 2 beats Done 33 Double Drag Tap drag basic drag sixteenth 3 beats Done 34 Lesson 25 drag compound drag sixteenth 4 beats Done 35 Single Dragadiddle drag compound drag sixteenth 3 beats Done 36 Drag Paradiddle #1 drag compound drag sixteenth 3.5 beats Done 37 Drag Paradiddle #2 drag compound drag sixteenth 5 beats Done 38 Single Ratamacue drag ratamacue sixteenth 2 beats Done 39 Double Ratamacue drag ratamacue sixteenth 3 beats Done 40 Triple Ratamacue drag ratamacue sixteenth 4 beats Done"},{"location":"specs/rudiments/_template/","title":"PAS #{NUMBER}:","text":"<p>See Conventions &amp; Shared Definitions for stroke types, velocity ratios, height classes, motion types, and notation rules.</p>"},{"location":"specs/rudiments/_template/#1-identity","title":"1. Identity","text":"Field Value PAS Number {1-40} Name {Official PAS name} Category {roll / diddle / flam / drag} Family {e.g., single stroke, paradiddle, basic flam, ratamacue} Composed Of {Primitive components, e.g., \"singles + diddle\", \"flam + paradiddle\"} Related {Links to related rudiments by PAS number and name} NARD Original {Yes / No}"},{"location":"specs/rudiments/_template/#2-rhythmic-structure","title":"2. Rhythmic Structure","text":"Field Value Time Signature {e.g., 4/4} Base Subdivision {quarter / eighth / triplet / sixteenth / sextuplet / 32<sup>nd</sup>} Cycle Length {N beats} Strokes Per Cycle {Total count including grace notes} Primary Strokes Per Cycle {Count excluding grace notes}"},{"location":"specs/rudiments/_template/#stroke-grid","title":"Stroke Grid","text":"# Position (beats) Grid Slot Hand Type 1 0 1 {R/L} {A/t/g/d1/d2/b} 2 {fraction} {slot name} {R/L} {type} ... ... ... ... ..."},{"location":"specs/rudiments/_template/#3-sticking-articulation","title":"3. Sticking &amp; Articulation","text":""},{"location":"specs/rudiments/_template/#sticking-sequence","title":"Sticking Sequence","text":"<pre><code>{e.g., R L R R | L R L L}\n</code></pre>"},{"location":"specs/rudiments/_template/#stroke-detail-table","title":"Stroke Detail Table","text":"# Hand Stroke Type Ornament Role Parent Stroke Notes 1 {R/L} {accent/tap/grace/d1/d2/buzz} {primary / grace / none} {# or n/a} {Any special notes} ... ... ... ... ... ..."},{"location":"specs/rudiments/_template/#ornament-timing","title":"Ornament Timing","text":"<p>Flam Grace Notes (if applicable): - Grace offset from primary: {negative beat fraction, e.g., -1/32} - Grace hand: {opposite of primary}</p> <p>Drag Grace Notes (if applicable): - First grace offset: {e.g., -1/16} - Second grace offset: {e.g., -1/32} - Grace hand: {same hand for both, opposite of primary}</p> <p>Diddle Timing (if applicable): - Each diddle stroke: {fraction of parent grid slot, e.g., \u00bd of \u00bc beat = \u215b beat each}</p>"},{"location":"specs/rudiments/_template/#4-dynamics-model","title":"4. Dynamics Model","text":""},{"location":"specs/rudiments/_template/#velocity-ratios","title":"Velocity Ratios","text":"Stroke Type Velocity Ratio Notes accent 1.0 {Reference level} tap {0.65 - 0.77} {Context-specific value or range} {other types} {ratio} {notes}"},{"location":"specs/rudiments/_template/#accent-pattern","title":"Accent Pattern","text":"<pre><code>{e.g., &gt;  -  -  &gt;  |  &gt;  -  -  &gt;}\n</code></pre>"},{"location":"specs/rudiments/_template/#dynamic-contour","title":"Dynamic Contour","text":"<p>{Description of the dynamic shape and character}</p>"},{"location":"specs/rudiments/_template/#5-physical-kinesthetic","title":"5. Physical / Kinesthetic","text":""},{"location":"specs/rudiments/_template/#stroke-map","title":"Stroke Map","text":"# Hand Stroke Type Height Class Motion Type 1 {R/L} {type} {full/half/low/tap} {wrist + arm / wrist / fingers / rebound} ... ... ... ... ..."},{"location":"specs/rudiments/_template/#tempo-dependent-behavior","title":"Tempo-Dependent Behavior","text":"Tempo Range Technique Changes Slow ({BPM range}) {Description of technique at slow tempos} Moderate ({BPM range}) {Description of technique at moderate tempos} Fast ({BPM range}) {Description of technique at fast tempos}"},{"location":"specs/rudiments/_template/#6-variations-pedagogy","title":"6. Variations &amp; Pedagogy","text":""},{"location":"specs/rudiments/_template/#common-variations","title":"Common Variations","text":"<ul> <li>{Variation 1}</li> <li>{Variation 2}</li> </ul>"},{"location":"specs/rudiments/_template/#prerequisites","title":"Prerequisites","text":"<ul> <li>{PAS #N: Rudiment Name}</li> </ul>"},{"location":"specs/rudiments/_template/#builds-toward","title":"Builds Toward","text":"<ul> <li>{PAS #N: Rudiment Name}</li> </ul>"},{"location":"specs/rudiments/_template/#teaching-notes","title":"Teaching Notes","text":"<p>{Teaching guidance}</p>"},{"location":"specs/rudiments/_template/#historical-context","title":"Historical Context","text":"<p>{Historical notes}</p>"},{"location":"specs/rudiments/_template/#7-notation","title":"7. Notation","text":""},{"location":"specs/rudiments/_template/#stick-notation","title":"Stick Notation","text":"<pre><code>{e.g., &gt;       &gt;\n       lR  L  rL  R\n</code></pre>"},{"location":"specs/rudiments/_template/#grid-visualization","title":"Grid Visualization","text":"<pre><code>Beat:    | 1     e     &amp;     a   | 2     e     &amp;     a   |\nHand:    | R     L     R     R   | L     R     L     L   |\nType:    | A     t     A     d1  | A     t     A     d1  |\nAccent:  | &gt;           &gt;         | &gt;           &gt;         |\n</code></pre>"},{"location":"user-guide/","title":"User Guide","text":"<p>This guide covers everything you need to use the SOUSA dataset effectively, from generation to ML training.</p>"},{"location":"user-guide/#quick-start","title":"Quick Start","text":"<pre><code># Install SOUSA\npip install -e .\n\n# Generate a small test dataset\npython scripts/generate_dataset.py --preset small\n\n# Generate with audio (requires soundfonts)\npython scripts/setup_soundfonts.py\npython scripts/generate_dataset.py --preset medium --with-audio\n</code></pre>"},{"location":"user-guide/#guide-sections","title":"Guide Sections","text":""},{"location":"user-guide/#dataset-generation","title":"Dataset Generation","text":"<p>Learn how to generate SOUSA datasets with different configurations:</p> <ul> <li>Generation presets - small, medium, and full configurations with storage estimates</li> <li>Command line options - customize profiles, tempos, augmentations, and more</li> <li>Reproducibility - seeding for deterministic generation</li> <li>Parallel generation - multi-worker support for faster generation</li> <li>Checkpoints - resumable generation for large datasets</li> </ul>"},{"location":"user-guide/#audio-augmentation","title":"Audio Augmentation","text":"<p>Understand the audio augmentation pipeline:</p> <ul> <li>Augmentation presets - 10+ presets from clean studio to lo-fi</li> <li>Signal chain - room simulation, mic modeling, compression, degradation</li> <li>Training impact - how augmentation affects model robustness</li> <li>Custom configurations - create your own augmentation profiles</li> </ul>"},{"location":"user-guide/#filtering-and-preprocessing","title":"Filtering and Preprocessing","text":"<p>Filter and prepare data for your specific use case:</p> <ul> <li>Skill tier filtering - beginner, intermediate, advanced, professional</li> <li>Rudiment selection - 40 PAS rudiments across 4 categories</li> <li>Score-based filtering - filter by timing accuracy, overall score, etc.</li> <li>Dataset statistics - understand your data distribution</li> </ul>"},{"location":"user-guide/#ml-training-recommendations","title":"ML Training Recommendations","text":"<p>Best practices for training models on SOUSA:</p> <ul> <li>Skill classification - binary vs 4-class, handling class imbalance</li> <li>Score regression - overall_score as primary target</li> <li>Multi-task learning - minimal orthogonal score sets</li> <li>Audio preprocessing - mel spectrograms, resampling, normalization</li> <li>PyTorch examples - DataLoader and training code</li> </ul>"},{"location":"user-guide/#validation","title":"Validation","text":"<p>Validate your generated datasets:</p> <ul> <li>Running validation reports - comprehensive quality checks</li> <li>Data integrity - 13 verification checks</li> <li>Realism validation - comparison to literature benchmarks</li> <li>Test suite - 26 test cases for validation infrastructure</li> </ul>"},{"location":"user-guide/#dataset-splits","title":"Dataset Splits","text":"<p>SOUSA uses profile-based splits to prevent data leakage:</p> Split Profiles Samples (~100K) Train 70% ~70,000 Validation 15% ~15,000 Test 15% ~15,000 <p>Why profile-based splits?</p> <p>All samples from a single player profile stay in the same split. This tests generalization to \"new players\" not seen during training, which is more realistic for deployment scenarios.</p>"},{"location":"user-guide/#skill-tier-distribution","title":"Skill Tier Distribution","text":"Tier Proportion Description Beginner 25% Learning basics, high timing variance Intermediate 35% Developing consistency Advanced 25% Strong technique, minor errors Professional 15% Near-perfect execution"},{"location":"user-guide/#loading-the-dataset","title":"Loading the Dataset","text":"HuggingFace HubLocal Files <pre><code>from datasets import load_dataset\n\n# Load full dataset\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Load specific split\ntrain = load_dataset(\"zkeown/sousa\", split=\"train\")\n\n# Stream for memory efficiency\ndataset = load_dataset(\"zkeown/sousa\", streaming=True)\n</code></pre> <pre><code>from datasets import load_dataset\n\n# From local parquet files\ndataset = load_dataset(\n    \"parquet\",\n    data_dir=\"./output/dataset/hf_staging/data\"\n)\n</code></pre>"},{"location":"user-guide/#related-documentation","title":"Related Documentation","text":"<ul> <li>Data Format Reference - Complete schema documentation</li> <li>Limitations - Known limitations and biases</li> <li>Validation Guide - Validation infrastructure details</li> </ul>"},{"location":"user-guide/augmentation/","title":"Audio Augmentation","text":"<p>SOUSA includes a comprehensive audio augmentation pipeline that simulates various recording environments, microphone characteristics, and signal processing chains. This guide covers the available presets and how to configure custom augmentations.</p>"},{"location":"user-guide/augmentation/#augmentation-pipeline","title":"Augmentation Pipeline","text":"<p>The augmentation pipeline processes audio through four stages in sequence:</p> <pre><code>Raw Audio \u2192 Room Simulation \u2192 Mic Modeling \u2192 Recording Chain \u2192 Degradation \u2192 Output\n</code></pre> Stage Purpose Components Room Simulation Spatial acoustics Impulse response convolution, wet/dry mix Mic Modeling Microphone characteristics Frequency response, proximity effect, position Recording Chain Signal processing Preamp coloration, compression, EQ Degradation Quality reduction Noise, bit depth, wow/flutter"},{"location":"user-guide/augmentation/#augmentation-presets","title":"Augmentation Presets","text":"<p>SOUSA provides 10+ presets covering a range of recording scenarios:</p>"},{"location":"user-guide/augmentation/#clean-presets","title":"Clean Presets","text":""},{"location":"user-guide/augmentation/#clean_studio","title":"clean_studio","text":"<p>Professional studio recording with minimal coloration.</p> Parameter Value Room Studio, 20% wet Mic Condenser, 0.4m distance Preamp Clean Compression 3:1, -15dB threshold Noise -60dB <pre><code>from dataset_gen.audio_aug.pipeline import AugmentationPreset, augment_audio\n\naudio = augment_audio(raw_audio, preset=AugmentationPreset.CLEAN_STUDIO)\n</code></pre> <p>Use case</p> <p>Baseline recordings for controlled experiments, high-quality training data.</p>"},{"location":"user-guide/augmentation/#practice_dry","title":"practice_dry","text":"<p>Close-miked with minimal room sound.</p> Parameter Value Room Disabled Mic Dynamic, 0.15m distance Preamp Clean Compression 2:1 Noise -70dB <p>Use case</p> <p>Practice pad recordings, isolated snare captures.</p>"},{"location":"user-guide/augmentation/#room-variation-presets","title":"Room Variation Presets","text":""},{"location":"user-guide/augmentation/#studio_warm","title":"studio_warm","text":"<p>Warm studio sound with character.</p> Parameter Value Room Studio, 25% wet Mic Ribbon, 0.6m distance Preamp Warm, 30% drive Compression 6:1, -10dB threshold"},{"location":"user-guide/augmentation/#live_room","title":"live_room","text":"<p>Large reverberant space.</p> Parameter Value Room Concert hall, 40% wet Mic Condenser, 3.0m distance Position Distant Compression Disabled <p>Use case</p> <p>Simulating orchestral or ensemble recordings.</p>"},{"location":"user-guide/augmentation/#gym","title":"gym","text":"<p>Gymnasium acoustics (common for marching band).</p> Parameter Value Room Gym, 35% wet Mic Dynamic, 2.0m overhead Noise HVAC, -40dB"},{"location":"user-guide/augmentation/#degraded-presets","title":"Degraded Presets","text":""},{"location":"user-guide/augmentation/#lo_fi","title":"lo_fi","text":"<p>Low fidelity recording with significant artifacts.</p> Parameter Value Room Bedroom, 10% wet Mic Piezo, 0.3m Preamp Aggressive, 40% drive Compression 8:1, -8dB threshold Bit depth 12-bit High-pass 200 Hz Low-pass 6000 Hz Noise -25dB <p>Use case</p> <p>Training models to be robust to poor recording quality.</p>"},{"location":"user-guide/augmentation/#preset-comparison-table","title":"Preset Comparison Table","text":"Preset Room Mic Type Distance Noise (dB) Character <code>clean_studio</code> Studio Condenser 0.4m -60 Pristine <code>clean_close</code> None Dynamic 0.15m -70 Tight <code>practice_room</code> Practice Dynamic 0.5m -45 Natural <code>concert_hall</code> Hall Condenser 3.0m Low Spacious <code>gym</code> Gym Dynamic 2.0m -40 Reverberant <code>garage</code> Garage Dynamic 0.8m -35 Gritty <code>vintage_tape</code> Studio Ribbon 0.6m -35 Warm <code>lo_fi</code> Bedroom Piezo 0.3m -25 Degraded <code>phone_recording</code> Bedroom Piezo 1.5m -30 Phone quality <code>marching_field</code> Outdoor Dynamic 5.0m -35 Distant <code>indoor_competition</code> Gym Condenser 2.5m -40 Competition"},{"location":"user-guide/augmentation/#how-augmentation-affects-training","title":"How Augmentation Affects Training","text":""},{"location":"user-guide/augmentation/#domain-robustness","title":"Domain Robustness","text":"<p>Training on augmented data improves model robustness to real-world recording conditions:</p> <pre><code># Example: Training with mixed augmentation\ntrain_presets = [\n    AugmentationPreset.CLEAN_STUDIO,\n    AugmentationPreset.PRACTICE_ROOM,\n    AugmentationPreset.GYM,\n    AugmentationPreset.LO_FI,\n]\n\n# Filter dataset by augmentation preset\nclean_only = dataset.filter(lambda x: x[\"augmentation_preset\"] == \"clean_studio\")\nmixed = dataset.filter(lambda x: x[\"augmentation_preset\"] in [p.value for p in train_presets])\n</code></pre>"},{"location":"user-guide/augmentation/#augmentation-impact-on-metrics","title":"Augmentation Impact on Metrics","text":"Training Data Clean Test Acc Degraded Test Acc Clean only 95% 72% Mixed augmentation 93% 89% All presets 91% 91% <p>Trade-off</p> <p>Training on clean data only yields highest clean-test accuracy but poor generalization. Mixed augmentation balances both.</p>"},{"location":"user-guide/augmentation/#recommended-augmentation-strategy","title":"Recommended Augmentation Strategy","text":"<p>For most applications:</p> <ol> <li>Training: Use mixed augmentation (clean + moderate degradation)</li> <li>Validation: Use clean data for consistent metrics</li> <li>Test: Use held-out presets to test generalization</li> </ol> <pre><code># Split by augmentation for robust evaluation\ntrain = dataset.filter(\n    lambda x: x[\"augmentation_preset\"] in [\"clean_studio\", \"practice_room\", \"gym\"]\n)\nval = dataset.filter(lambda x: x[\"augmentation_preset\"] == \"clean_studio\")\ntest = dataset.filter(lambda x: x[\"augmentation_preset\"] in [\"lo_fi\", \"phone_recording\"])\n</code></pre>"},{"location":"user-guide/augmentation/#custom-augmentation-configuration","title":"Custom Augmentation Configuration","text":"<p>Create custom augmentation configurations for specific needs:</p> <pre><code>from dataset_gen.audio_aug.pipeline import (\n    AugmentationConfig,\n    AugmentationPipeline,\n)\nfrom dataset_gen.audio_aug.room import RoomType\nfrom dataset_gen.audio_aug.mic import MicType, MicPosition\nfrom dataset_gen.audio_aug.chain import PreampType\nfrom dataset_gen.audio_aug.degradation import NoiseType\n\n# Custom configuration\nconfig = AugmentationConfig(\n    # Room settings\n    room_enabled=True,\n    room_type=RoomType.PRACTICE_ROOM,\n    room_wet_dry=0.2,\n\n    # Mic settings\n    mic_enabled=True,\n    mic_type=MicType.DYNAMIC,\n    mic_position=MicPosition.CENTER,\n    mic_distance=0.3,\n\n    # Recording chain\n    chain_enabled=True,\n    preamp_type=PreampType.CLEAN,\n    preamp_drive=0.0,\n    compression_enabled=True,\n    compression_ratio=4.0,\n    compression_threshold_db=-12.0,\n\n    # EQ\n    eq_enabled=True,\n    highpass_freq=60.0,\n    lowpass_freq=16000.0,\n\n    # Degradation\n    degradation_enabled=True,\n    noise_type=NoiseType.PINK,\n    noise_level_db=-45.0,\n    bit_depth=None,  # No bit reduction\n    wow_flutter=0.0,\n\n    # Output\n    normalize=True,\n    target_peak_db=-1.0,\n)\n\n# Apply custom augmentation\npipeline = AugmentationPipeline(config=config, sample_rate=44100)\naugmented = pipeline.process(audio)\n</code></pre>"},{"location":"user-guide/augmentation/#configuration-parameters","title":"Configuration Parameters","text":""},{"location":"user-guide/augmentation/#room-configuration","title":"Room Configuration","text":"Parameter Type Range Description <code>room_enabled</code> bool - Enable room simulation <code>room_type</code> RoomType Enum Room acoustic type <code>room_wet_dry</code> float 0.0-1.0 Reverb wet/dry mix <code>ir_path</code> Path - Custom impulse response file <p>Available Room Types:</p> <ul> <li><code>STUDIO</code> - Recording studio</li> <li><code>PRACTICE_ROOM</code> - Small practice space</li> <li><code>BEDROOM</code> - Bedroom/home studio</li> <li><code>GARAGE</code> - Garage rehearsal space</li> <li><code>GYM</code> - Gymnasium</li> <li><code>CONCERT_HALL</code> - Large hall</li> <li><code>OUTDOOR</code> - Outdoor (minimal reverb)</li> </ul>"},{"location":"user-guide/augmentation/#mic-configuration","title":"Mic Configuration","text":"Parameter Type Range Description <code>mic_enabled</code> bool - Enable mic simulation <code>mic_type</code> MicType Enum Microphone type <code>mic_position</code> MicPosition Enum Mic placement <code>mic_distance</code> float 0.1-10.0m Distance from source <p>Available Mic Types:</p> <ul> <li><code>CONDENSER</code> - Large diaphragm condenser</li> <li><code>DYNAMIC</code> - Dynamic (SM57-style)</li> <li><code>RIBBON</code> - Ribbon microphone</li> <li><code>PIEZO</code> - Piezo contact mic</li> </ul> <p>Available Positions:</p> <ul> <li><code>CENTER</code> - On-axis, center</li> <li><code>EDGE</code> - Off-axis, edge</li> <li><code>OVERHEAD</code> - Above source</li> <li><code>DISTANT</code> - Far field</li> </ul>"},{"location":"user-guide/augmentation/#recording-chain-configuration","title":"Recording Chain Configuration","text":"Parameter Type Range Description <code>preamp_type</code> PreampType Enum Preamp character <code>preamp_drive</code> float 0.0-1.0 Saturation amount <code>compression_enabled</code> bool - Enable compression <code>compression_ratio</code> float 1.0-20.0 Compression ratio <code>compression_threshold_db</code> float -40 to 0 Threshold in dB <code>highpass_freq</code> float 20-500 Hz High-pass filter <code>lowpass_freq</code> float 4000-20000 Hz Low-pass filter <p>Available Preamp Types:</p> <ul> <li><code>CLEAN</code> - Transparent</li> <li><code>WARM</code> - Tube-style warmth</li> <li><code>AGGRESSIVE</code> - Solid-state edge</li> </ul>"},{"location":"user-guide/augmentation/#degradation-configuration","title":"Degradation Configuration","text":"Parameter Type Range Description <code>degradation_enabled</code> bool - Enable degradation <code>noise_type</code> NoiseType Enum Background noise type <code>noise_level_db</code> float -80 to -20 Noise level in dB <code>bit_depth</code> int 8-24 Output bit depth <code>wow_flutter</code> float 0.0-1.0 Tape-style pitch variation <p>Available Noise Types:</p> <ul> <li><code>PINK</code> - Pink noise</li> <li><code>TAPE_HISS</code> - Tape hiss</li> <li><code>HVAC</code> - HVAC/air conditioning</li> <li><code>ROOM_TONE</code> - General room tone</li> </ul>"},{"location":"user-guide/augmentation/#random-augmentation","title":"Random Augmentation","text":"<p>For data augmentation during training, use random augmentation:</p> <pre><code>from dataset_gen.audio_aug.pipeline import random_augmentation\n\n# Apply random preset with slight parameter variation\naugmented, config_used = random_augmentation(audio, seed=42)\n\nprint(f\"Applied preset: {config_used.preset_name}\")\nprint(f\"Room wet/dry: {config_used.room_wet_dry}\")\n</code></pre>"},{"location":"user-guide/augmentation/#filtering-by-augmentation","title":"Filtering by Augmentation","text":"<p>Filter datasets by augmentation characteristics:</p> <pre><code># By preset name\nclean = dataset.filter(lambda x: x[\"augmentation_preset\"] == \"clean_studio\")\n\n# By soundfont\nmarching = dataset.filter(lambda x: x[\"aug_soundfont\"] == \"marching\")\n\n# By noise level\nlow_noise = dataset.filter(lambda x: x[\"aug_noise_level_db\"] &lt; -50)\n\n# Link clean and augmented variants (same MIDI, different audio)\n# Group by the base sample (before augmentation)\nfrom collections import defaultdict\ngroups = defaultdict(list)\nfor sample in dataset:\n    base_id = sample[\"augmentation_group_id\"]\n    groups[base_id].append(sample)\n</code></pre>"},{"location":"user-guide/augmentation/#best-practices","title":"Best Practices","text":"<p>Recommended</p> <ul> <li>Train on diverse augmentation presets for robustness</li> <li>Use clean validation data for consistent metrics</li> <li>Document which presets were used in experiments</li> </ul> <p>Avoid</p> <ul> <li>Training only on clean data (poor generalization)</li> <li>Using extreme degradation for all samples (hurts clean performance)</li> <li>Mixing augmentation presets in validation set (inconsistent metrics)</li> </ul>"},{"location":"user-guide/filtering/","title":"Filtering and Preprocessing","text":"<p>This guide covers filtering SOUSA data by various criteria and understanding the dataset distribution for effective preprocessing.</p>"},{"location":"user-guide/filtering/#filtering-by-skill-tier","title":"Filtering by Skill Tier","text":""},{"location":"user-guide/filtering/#basic-skill-filtering","title":"Basic Skill Filtering","text":"<pre><code>from datasets import load_dataset\n\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Filter by single skill tier\nbeginners = dataset[\"train\"].filter(lambda x: x[\"skill_tier\"] == \"beginner\")\nadvanced = dataset[\"train\"].filter(lambda x: x[\"skill_tier\"] == \"advanced\")\n\n# Multiple skill tiers\nnovice_players = dataset[\"train\"].filter(\n    lambda x: x[\"skill_tier\"] in [\"beginner\", \"intermediate\"]\n)\n</code></pre>"},{"location":"user-guide/filtering/#skill-tier-distribution","title":"Skill Tier Distribution","text":"Tier Proportion Full Dataset (~100K) Characteristics Beginner 25% ~25,000 High timing variance (50ms std), learning basics Intermediate 35% ~35,000 Moderate consistency, developing technique Advanced 25% ~25,000 Strong technique, minor timing errors Professional 15% ~15,000 Near-perfect (7ms std), consistent execution <p>Class imbalance</p> <p>Professional samples are ~2.3x less frequent than intermediate. Use class weights for classification tasks.</p>"},{"location":"user-guide/filtering/#binary-skill-labels","title":"Binary Skill Labels","text":"<p>For reduced overlap between classes:</p> <pre><code># Use binary labels (novice vs skilled)\nnovice = dataset[\"train\"].filter(lambda x: x[\"skill_tier_binary\"] == \"novice\")\nskilled = dataset[\"train\"].filter(lambda x: x[\"skill_tier_binary\"] == \"skilled\")\n\n# Binary mapping:\n# novice = beginner + intermediate\n# skilled = advanced + professional\n</code></pre>"},{"location":"user-guide/filtering/#filtering-by-tier-confidence","title":"Filtering by Tier Confidence","text":"<p>High-confidence samples are more clearly representative of their tier:</p> <pre><code># Filter for clear tier assignments (reduces overlap)\nconfident = dataset[\"train\"].filter(lambda x: x[\"tier_confidence\"] &gt; 0.5)\n\n# Very confident samples only\nvery_confident = dataset[\"train\"].filter(lambda x: x[\"tier_confidence\"] &gt; 0.7)\n</code></pre> Tier Confidence Description Use Case &gt; 0.7 Clear tier assignment Classification with clean labels 0.5 - 0.7 Moderate confidence General training &lt; 0.5 Borderline cases May hurt classification accuracy"},{"location":"user-guide/filtering/#filtering-by-rudiment","title":"Filtering by Rudiment","text":""},{"location":"user-guide/filtering/#single-rudiment","title":"Single Rudiment","text":"<pre><code># Specific rudiment\nparadiddles = dataset[\"train\"].filter(\n    lambda x: x[\"rudiment_slug\"] == \"single_paradiddle\"\n)\n\n# By rudiment name pattern\nflams = dataset[\"train\"].filter(lambda x: \"flam\" in x[\"rudiment_slug\"])\nrolls = dataset[\"train\"].filter(lambda x: \"roll\" in x[\"rudiment_slug\"])\n</code></pre>"},{"location":"user-guide/filtering/#rudiment-categories","title":"Rudiment Categories","text":"<p>All 40 PAS rudiments organized by category:</p> Roll Rudiments (15)Paradiddle Rudiments (5)Flam Rudiments (11)Drag Rudiments (9) Slug Name <code>single_stroke_roll</code> Single Stroke Roll <code>single_stroke_four</code> Single Stroke Four <code>single_stroke_seven</code> Single Stroke Seven <code>multiple_bounce_roll</code> Multiple Bounce Roll <code>triple_stroke_roll</code> Triple Stroke Roll <code>double_stroke_roll</code> Double Stroke Open Roll <code>five_stroke_roll</code> Five Stroke Roll <code>six_stroke_roll</code> Six Stroke Roll <code>seven_stroke_roll</code> Seven Stroke Roll <code>nine_stroke_roll</code> Nine Stroke Roll <code>ten_stroke_roll</code> Ten Stroke Roll <code>eleven_stroke_roll</code> Eleven Stroke Roll <code>thirteen_stroke_roll</code> Thirteen Stroke Roll <code>fifteen_stroke_roll</code> Fifteen Stroke Roll <code>seventeen_stroke_roll</code> Seventeen Stroke Roll Slug Name <code>single_paradiddle</code> Single Paradiddle <code>double_paradiddle</code> Double Paradiddle <code>triple_paradiddle</code> Triple Paradiddle <code>paradiddle_diddle</code> Paradiddle-Diddle <code>single_paradiddle_diddle</code> Single Paradiddle-Diddle Slug Name <code>flam</code> Flam <code>flam_accent</code> Flam Accent <code>flam_tap</code> Flam Tap <code>flamacue</code> Flamacue <code>flam_paradiddle</code> Flam Paradiddle <code>single_flammed_mill</code> Single Flammed Mill <code>flam_paradiddle_diddle</code> Flam Paradiddle-Diddle <code>pataflafla</code> Pataflafla <code>swiss_army_triplet</code> Swiss Army Triplet <code>inverted_flam_tap</code> Inverted Flam Tap <code>flam_drag</code> Flam Drag Slug Name <code>drag</code> Drag <code>single_drag_tap</code> Single Drag Tap <code>double_drag_tap</code> Double Drag Tap <code>lesson_25</code> Lesson 25 <code>single_dragadiddle</code> Single Dragadiddle <code>drag_paradiddle_1</code> Drag Paradiddle #1 <code>drag_paradiddle_2</code> Drag Paradiddle #2 <code>single_ratamacue</code> Single Ratamacue <code>double_ratamacue</code> Double Ratamacue <code>triple_ratamacue</code> Triple Ratamacue"},{"location":"user-guide/filtering/#filter-by-rudiment-category","title":"Filter by Rudiment Category","text":"<pre><code># Define category sets\nROLL_RUDIMENTS = [\n    \"single_stroke_roll\", \"single_stroke_four\", \"single_stroke_seven\",\n    \"multiple_bounce_roll\", \"triple_stroke_roll\", \"double_stroke_roll\",\n    \"five_stroke_roll\", \"six_stroke_roll\", \"seven_stroke_roll\",\n    \"nine_stroke_roll\", \"ten_stroke_roll\", \"eleven_stroke_roll\",\n    \"thirteen_stroke_roll\", \"fifteen_stroke_roll\", \"seventeen_stroke_roll\",\n]\n\nFLAM_RUDIMENTS = [\n    \"flam\", \"flam_accent\", \"flam_tap\", \"flamacue\", \"flam_paradiddle\",\n    \"single_flammed_mill\", \"flam_paradiddle_diddle\", \"pataflafla\",\n    \"swiss_army_triplet\", \"inverted_flam_tap\", \"flam_drag\",\n]\n\n# Filter by category\nrolls_only = dataset[\"train\"].filter(lambda x: x[\"rudiment_slug\"] in ROLL_RUDIMENTS)\nflams_only = dataset[\"train\"].filter(lambda x: x[\"rudiment_slug\"] in FLAM_RUDIMENTS)\n</code></pre>"},{"location":"user-guide/filtering/#filtering-by-tempo","title":"Filtering by Tempo","text":"<pre><code># Slow tempos (beginner-friendly)\nslow = dataset[\"train\"].filter(lambda x: x[\"tempo_bpm\"] &lt; 90)\n\n# Medium tempos\nmedium = dataset[\"train\"].filter(lambda x: 90 &lt;= x[\"tempo_bpm\"] &lt;= 130)\n\n# Fast tempos\nfast = dataset[\"train\"].filter(lambda x: x[\"tempo_bpm\"] &gt; 140)\n\n# Specific tempo range\ntarget_tempo = dataset[\"train\"].filter(lambda x: 100 &lt;= x[\"tempo_bpm\"] &lt;= 120)\n</code></pre>"},{"location":"user-guide/filtering/#tempo-distribution","title":"Tempo Distribution","text":"Tempo Range BPM Typical Skill Level Slow 60-90 All levels Medium 90-130 Intermediate+ Fast 130-160 Advanced+ Very Fast 160-180 Professional"},{"location":"user-guide/filtering/#filtering-by-score","title":"Filtering by Score","text":""},{"location":"user-guide/filtering/#overall-score","title":"Overall Score","text":"<pre><code># High performers (strong technique)\nhigh_score = dataset[\"train\"].filter(lambda x: x[\"overall_score\"] &gt; 80)\n\n# Low performers (beginners)\nlow_score = dataset[\"train\"].filter(lambda x: x[\"overall_score\"] &lt; 40)\n\n# Score range\nmid_range = dataset[\"train\"].filter(\n    lambda x: 40 &lt;= x[\"overall_score\"] &lt;= 70\n)\n</code></pre>"},{"location":"user-guide/filtering/#specific-score-metrics","title":"Specific Score Metrics","text":"<pre><code># By timing accuracy\ngood_timing = dataset[\"train\"].filter(lambda x: x[\"timing_accuracy\"] &gt; 70)\n\n# By hand balance\nbalanced = dataset[\"train\"].filter(lambda x: x[\"hand_balance\"] &gt; 90)\n\n# By velocity control\ncontrolled = dataset[\"train\"].filter(lambda x: x[\"velocity_control\"] &gt; 75)\n\n# Combined criteria\nelite = dataset[\"train\"].filter(\n    lambda x: x[\"timing_accuracy\"] &gt; 80\n    and x[\"hand_balance\"] &gt; 95\n    and x[\"overall_score\"] &gt; 85\n)\n</code></pre>"},{"location":"user-guide/filtering/#available-scores","title":"Available Scores","text":"Score Range Description <code>overall_score</code> 0-100 Weighted composite score <code>timing_accuracy</code> 0-100 How close to intended timing <code>timing_consistency</code> 0-100 Variance in timing errors <code>tempo_stability</code> 0-100 Consistency throughout exercise <code>velocity_control</code> 0-100 Control over stroke dynamics <code>hand_balance</code> 0-100 Evenness between L/R hands <code>accent_differentiation</code> 0-100 Clarity of accented strokes <code>accent_accuracy</code> 0-100 Correct accent placement"},{"location":"user-guide/filtering/#rudiment-specific-scores","title":"Rudiment-Specific Scores","text":"<p>These scores are only available for applicable rudiments:</p> <pre><code># Flam quality (flam rudiments only)\nflam_samples = dataset[\"train\"].filter(\n    lambda x: x.get(\"flam_quality\") is not None\n)\ngood_flams = flam_samples.filter(lambda x: x[\"flam_quality\"] &gt; 80)\n\n# Diddle quality (paradiddles, rolls with diddles)\ndiddle_samples = dataset[\"train\"].filter(\n    lambda x: x.get(\"diddle_quality\") is not None\n)\n\n# Roll sustain (roll rudiments)\nroll_samples = dataset[\"train\"].filter(\n    lambda x: x.get(\"roll_sustain\") is not None\n)\n</code></pre>"},{"location":"user-guide/filtering/#dataset-statistics","title":"Dataset Statistics","text":""},{"location":"user-guide/filtering/#computing-statistics","title":"Computing Statistics","text":"<pre><code>import pandas as pd\nfrom collections import Counter\n\n# Convert to pandas for analysis\ndf = dataset[\"train\"].to_pandas()\n\n# Basic counts\nprint(f\"Total samples: {len(df)}\")\nprint(f\"Unique profiles: {df['profile_id'].nunique()}\")\nprint(f\"Unique rudiments: {df['rudiment_slug'].nunique()}\")\n\n# Skill tier distribution\nskill_counts = Counter(df[\"skill_tier\"])\nfor tier, count in skill_counts.items():\n    print(f\"{tier}: {count} ({count/len(df)*100:.1f}%)\")\n\n# Score statistics\nprint(f\"\\nOverall Score: mean={df['overall_score'].mean():.1f}, \"\n      f\"std={df['overall_score'].std():.1f}\")\nprint(f\"Timing Accuracy: mean={df['timing_accuracy'].mean():.1f}, \"\n      f\"std={df['timing_accuracy'].std():.1f}\")\n</code></pre>"},{"location":"user-guide/filtering/#expected-statistics-full-dataset","title":"Expected Statistics (Full Dataset)","text":"Metric Mean Std Min Max Tempo (BPM) 118 34 60 180 Duration (sec) 5.9 2.9 1.6 20 Strokes/Sample 42 18 16 96 Overall Score 37 31 0 95 Timing Accuracy 37 31 0 95 Hand Balance 88 11 35 100"},{"location":"user-guide/filtering/#score-distribution-by-skill-tier","title":"Score Distribution by Skill Tier","text":"Tier Overall Score Timing Accuracy Hand Balance Beginner 15-45 5-35 75-85 Intermediate 35-65 30-60 85-92 Advanced 60-85 55-85 92-96 Professional 80-95 75-95 95-100"},{"location":"user-guide/filtering/#preprocessing-recommendations","title":"Preprocessing Recommendations","text":""},{"location":"user-guide/filtering/#for-classification-tasks","title":"For Classification Tasks","text":"<pre><code># Recommended preprocessing for skill classification\nfrom sklearn.model_selection import train_test_split\n\n# Filter for confident tier assignments\ndf_confident = df[df[\"tier_confidence\"] &gt; 0.5]\n\n# Ensure balanced classes with stratification\nX = df_confident[\"sample_id\"].values\ny = df_confident[\"skill_tier\"].values\n\n# Note: SOUSA already has profile-based splits\n# Use the provided splits rather than random splitting\ntrain_ids = set(splits[\"train_profile_ids\"])\nval_ids = set(splits[\"val_profile_ids\"])\ntest_ids = set(splits[\"test_profile_ids\"])\n</code></pre>"},{"location":"user-guide/filtering/#for-regression-tasks","title":"For Regression Tasks","text":"<pre><code># Normalize scores to 0-1 range\ndf[\"overall_score_norm\"] = df[\"overall_score\"] / 100.0\ndf[\"timing_accuracy_norm\"] = df[\"timing_accuracy\"] / 100.0\n\n# Remove outliers (optional)\nq_low = df[\"overall_score\"].quantile(0.01)\nq_high = df[\"overall_score\"].quantile(0.99)\ndf_filtered = df[(df[\"overall_score\"] &gt;= q_low) &amp; (df[\"overall_score\"] &lt;= q_high)]\n</code></pre>"},{"location":"user-guide/filtering/#handling-null-values","title":"Handling Null Values","text":"<p>Some scores are null for non-applicable rudiments:</p> <pre><code># Option 1: Filter to non-null\nflam_data = df[df[\"flam_quality\"].notna()]\n\n# Option 2: Fill with sentinel value (for masking)\ndf[\"flam_quality_filled\"] = df[\"flam_quality\"].fillna(-1)\n\n# Option 3: Separate handling by rudiment type\nhas_flams = df[\"rudiment_slug\"].isin(FLAM_RUDIMENTS)\nhas_diddles = df[\"rudiment_slug\"].isin(DIDDLE_RUDIMENTS)\n</code></pre>"},{"location":"user-guide/filtering/#common-filter-combinations","title":"Common Filter Combinations","text":""},{"location":"user-guide/filtering/#clean-high-quality-training-data","title":"Clean High-Quality Training Data","text":"<pre><code># High quality + clean augmentation + confident labels\nquality_data = dataset[\"train\"].filter(\n    lambda x: x[\"overall_score\"] &gt; 60\n    and x[\"augmentation_preset\"] == \"clean_studio\"\n    and x[\"tier_confidence\"] &gt; 0.6\n)\n</code></pre>"},{"location":"user-guide/filtering/#beginner-focused-subset","title":"Beginner-Focused Subset","text":"<pre><code># Beginner samples at slow tempos\nbeginner_practice = dataset[\"train\"].filter(\n    lambda x: x[\"skill_tier\"] == \"beginner\"\n    and x[\"tempo_bpm\"] &lt; 100\n)\n</code></pre>"},{"location":"user-guide/filtering/#specific-rudiment-study","title":"Specific Rudiment Study","text":"<pre><code># All paradiddles across skill levels\nparadiddle_study = dataset[\"train\"].filter(\n    lambda x: \"paradiddle\" in x[\"rudiment_slug\"]\n    and x[\"diddle_quality\"] is not None\n)\n</code></pre>"},{"location":"user-guide/filtering/#cross-soundfont-generalization","title":"Cross-Soundfont Generalization","text":"<pre><code># Train on some soundfonts, test on others\ntrain_soundfonts = [\"generalu\", \"marching\", \"mtpowerd\"]\ntest_soundfonts = [\"douglasn\", \"fluidr3\"]\n\ntrain_data = dataset[\"train\"].filter(\n    lambda x: x[\"aug_soundfont\"] in train_soundfonts\n)\ntest_data = dataset[\"test\"].filter(\n    lambda x: x[\"aug_soundfont\"] in test_soundfonts\n)\n</code></pre>"},{"location":"user-guide/filtering/#data-export","title":"Data Export","text":""},{"location":"user-guide/filtering/#export-filtered-data","title":"Export Filtered Data","text":"<pre><code># Export to CSV\nfiltered_df = df[df[\"skill_tier\"] == \"professional\"]\nfiltered_df.to_csv(\"professional_samples.csv\", index=False)\n\n# Export to Parquet (recommended for large datasets)\nfiltered_df.to_parquet(\"professional_samples.parquet\")\n\n# Export sample IDs for reproducibility\nwith open(\"filtered_ids.txt\", \"w\") as f:\n    for sample_id in filtered_df[\"sample_id\"]:\n        f.write(f\"{sample_id}\\n\")\n</code></pre>"},{"location":"user-guide/filtering/#creating-subsets","title":"Creating Subsets","text":"<pre><code>from datasets import Dataset\n\n# Create a HuggingFace dataset from filtered data\nsubset_df = df[df[\"skill_tier\"].isin([\"advanced\", \"professional\"])]\nsubset_dataset = Dataset.from_pandas(subset_df)\n\n# Push to Hub (optional)\nsubset_dataset.push_to_hub(\"username/sousa-advanced-only\")\n</code></pre>"},{"location":"user-guide/generation/","title":"Dataset Generation","text":"<p>This guide covers generating SOUSA datasets with different configurations for testing, development, and production use.</p>"},{"location":"user-guide/generation/#generation-presets","title":"Generation Presets","text":"<p>SOUSA provides three presets optimized for different use cases:</p>"},{"location":"user-guide/generation/#small-preset-testing","title":"Small Preset (Testing)","text":"<pre><code>python scripts/generate_dataset.py --preset small\n</code></pre> Parameter Value Profiles 10 Tempos per rudiment 3 Augmentations per sample 1 Total samples ~1,200 <p>Storage estimates:</p> Component Size MIDI files ~2.4 MB Labels (Parquet) ~0.6 MB Audio (if enabled) ~1.8 GB Total (MIDI only) ~3 MB <p>Use case</p> <p>Quick testing of pipeline changes, CI/CD workflows, and development iteration.</p>"},{"location":"user-guide/generation/#medium-preset-development","title":"Medium Preset (Development)","text":"<pre><code>python scripts/generate_dataset.py --preset medium\n</code></pre> Parameter Value Profiles 50 Tempos per rudiment 3 Augmentations per sample 2 Total samples ~12,000 <p>Storage estimates:</p> Component Size MIDI files ~24 MB Labels (Parquet) ~6 MB Audio (if enabled) ~18 GB Total (MIDI only) ~30 MB <p>Use case</p> <p>Model development, hyperparameter tuning, and ablation studies.</p>"},{"location":"user-guide/generation/#full-preset-production","title":"Full Preset (Production)","text":"<pre><code>python scripts/generate_dataset.py --preset full\n</code></pre> Parameter Value Profiles 100 Tempos per rudiment 5 Augmentations per sample 5 Total samples ~100,000 <p>Storage estimates:</p> Component Size MIDI files ~200 MB Labels (Parquet) ~50 MB Audio (if enabled) ~150 GB Total (MIDI only) ~250 MB <p>Use case</p> <p>Final model training, benchmark evaluation, and dataset releases.</p>"},{"location":"user-guide/generation/#command-line-options","title":"Command Line Options","text":""},{"location":"user-guide/generation/#basic-options","title":"Basic Options","text":"<pre><code>python scripts/generate_dataset.py [OPTIONS]\n</code></pre> Option Short Default Description <code>--output</code> <code>-o</code> <code>output/dataset</code> Output directory <code>--preset</code> None Use preset (small/medium/full) <code>--profiles</code> <code>-p</code> 100 Number of player profiles <code>--tempos</code> <code>-t</code> 5 Tempos per rudiment <code>--augmentations</code> <code>-a</code> 5 Augmented versions per sample <code>--seed</code> 42 Random seed for reproducibility <code>--quiet</code> <code>-q</code> False Reduce output verbosity"},{"location":"user-guide/generation/#audio-options","title":"Audio Options","text":"<pre><code>python scripts/generate_dataset.py --with-audio --soundfont path/to/soundfonts\n</code></pre> Option Description <code>--with-audio</code> Generate audio files (requires soundfonts) <code>--soundfont</code> Path to .sf2 file or directory <p>Soundfont setup</p> <p>Audio generation requires soundfonts. Run <code>python scripts/setup_soundfonts.py</code> first.</p>"},{"location":"user-guide/generation/#parallel-processing","title":"Parallel Processing","text":"<pre><code>python scripts/generate_dataset.py --workers 8\n</code></pre> Option Short Default Description <code>--workers</code> <code>-w</code> 1 Number of parallel workers <p>Set <code>--workers 0</code> to auto-detect CPU count.</p>"},{"location":"user-guide/generation/#validation","title":"Validation","text":"<pre><code>python scripts/generate_dataset.py --skip-validation\n</code></pre> Option Description <code>--skip-validation</code> Skip validation report generation"},{"location":"user-guide/generation/#examples","title":"Examples","text":""},{"location":"user-guide/generation/#quick-test-generation","title":"Quick Test Generation","text":"<pre><code># Minimal dataset for testing\npython scripts/generate_dataset.py --preset small -o output/test_dataset\n</code></pre>"},{"location":"user-guide/generation/#development-with-audio","title":"Development with Audio","text":"<pre><code># Medium dataset with audio for model development\npython scripts/generate_dataset.py \\\n    --preset medium \\\n    --with-audio \\\n    --workers 4 \\\n    -o output/dev_dataset\n</code></pre>"},{"location":"user-guide/generation/#production-generation","title":"Production Generation","text":"<pre><code># Full dataset with parallel processing\npython scripts/generate_dataset.py \\\n    --preset full \\\n    --with-audio \\\n    --workers 0 \\\n    --seed 42 \\\n    -o output/production_dataset\n</code></pre>"},{"location":"user-guide/generation/#custom-configuration","title":"Custom Configuration","text":"<pre><code># Override preset values\npython scripts/generate_dataset.py \\\n    --preset medium \\\n    --profiles 30 \\\n    --tempos 4 \\\n    --augmentations 3\n</code></pre>"},{"location":"user-guide/generation/#reproducibility-and-seeding","title":"Reproducibility and Seeding","text":"<p>SOUSA supports deterministic generation through seeding:</p> <pre><code># Both commands produce identical datasets\npython scripts/generate_dataset.py --seed 42 --preset small\npython scripts/generate_dataset.py --seed 42 --preset small\n</code></pre>"},{"location":"user-guide/generation/#seed-behavior","title":"Seed Behavior","text":"<ul> <li>Profile generation: Same seed produces identical player profiles</li> <li>MIDI generation: Timing/velocity variations are deterministic per seed</li> <li>Audio synthesis: FluidSynth rendering is deterministic</li> <li>Augmentation: Random augmentations use seed-derived values</li> </ul> <p>Parallel generation seeds</p> <p>When using multiple workers, each worker uses <code>seed + worker_id</code> to ensure reproducibility while avoiding identical samples across workers.</p>"},{"location":"user-guide/generation/#recommended-seeds","title":"Recommended Seeds","text":"<p>For benchmarking and reproducibility, document your seed:</p> <pre><code># In your experiment config\nDATASET_CONFIG = {\n    \"seed\": 42,\n    \"preset\": \"full\",\n    \"version\": \"1.0.0\",\n}\n</code></pre>"},{"location":"user-guide/generation/#generation-pipeline","title":"Generation Pipeline","text":"<p>The generation process follows this flow:</p> <pre><code>1. Load Rudiments (40 YAML definitions)\n         \u2193\n2. Generate Player Profiles\n         \u2193\n3. Assign Train/Val/Test Splits\n         \u2193\n4. For each Profile \u00d7 Rudiment \u00d7 Tempo:\n   a. Generate base MIDI performance\n   b. Apply profile-based timing/velocity variations\n   c. Compute hierarchical labels (stroke \u2192 measure \u2192 exercise)\n   d. For each augmentation variant:\n      - Synthesize audio (if enabled)\n      - Apply augmentation preset\n      - Write to storage\n         \u2193\n5. Write Parquet files (samples, exercises, measures, strokes)\n         \u2193\n6. Run validation (unless skipped)\n</code></pre>"},{"location":"user-guide/generation/#output-structure","title":"Output Structure","text":"<pre><code>output/dataset/\n\u251c\u2500\u2500 audio/                    # FLAC audio files (if --with-audio)\n\u2502   \u2514\u2500\u2500 {sample_id}.flac\n\u251c\u2500\u2500 midi/                     # Standard MIDI files\n\u2502   \u2514\u2500\u2500 {sample_id}.mid\n\u251c\u2500\u2500 labels/                   # Parquet files\n\u2502   \u251c\u2500\u2500 samples.parquet       # Sample metadata\n\u2502   \u251c\u2500\u2500 exercises.parquet     # Exercise-level scores\n\u2502   \u251c\u2500\u2500 measures.parquet      # Measure-level statistics\n\u2502   \u2514\u2500\u2500 strokes.parquet       # Stroke-level events\n\u251c\u2500\u2500 splits.json               # Train/val/test assignments\n\u2514\u2500\u2500 validation_report.json    # Validation results\n</code></pre>"},{"location":"user-guide/generation/#resumable-generation","title":"Resumable Generation","text":"<p>Coming soon</p> <p>Checkpoint-based resumable generation is planned for a future release.</p> <p>For now, if generation is interrupted:</p> <ol> <li>Check the <code>output/dataset/labels/</code> directory for partially written parquet files</li> <li>Delete the incomplete output directory</li> <li>Re-run generation with the same seed</li> </ol>"},{"location":"user-guide/generation/#performance-tips","title":"Performance Tips","text":""},{"location":"user-guide/generation/#memory-usage","title":"Memory Usage","text":"<p>For large datasets, consider:</p> <pre><code># Use more workers with smaller batches\npython scripts/generate_dataset.py --preset full --workers 8\n</code></pre>"},{"location":"user-guide/generation/#disk-io","title":"Disk I/O","text":"<ul> <li>Use an SSD for the output directory</li> <li>Audio generation is I/O intensive; consider generating MIDI-only first</li> </ul>"},{"location":"user-guide/generation/#parallel-scaling","title":"Parallel Scaling","text":"Workers Speedup (approx) Notes 1 1x Baseline 4 3.5x Good for most systems 8 6x Diminishing returns 16+ 7-8x Limited by I/O"},{"location":"user-guide/generation/#validation-after-generation","title":"Validation After Generation","text":"<p>By default, validation runs automatically after generation:</p> <pre><code>=== SOUSA Validation Report ===\nDataset: output/dataset\nGenerated: 2026-01-25T21:18:35\n\nSamples: 99,770\nProfiles: 100\nRudiments: 40\n\nVerification: 13/13 checks passed\nLiterature validation: 100% pass rate\nCorrelation checks: 80% pass rate\n</code></pre> <p>See Validation Guide for details on interpreting results.</p>"},{"location":"user-guide/ml-training/","title":"ML Training Recommendations","text":"<p>This guide provides best practices for training machine learning models on SOUSA, including task-specific recommendations, audio preprocessing, and code examples.</p>"},{"location":"user-guide/ml-training/#task-overview","title":"Task Overview","text":"Task Target Difficulty Recommended Approach Skill Classification (4-class) <code>skill_tier</code> Medium Filter by <code>tier_confidence</code>, use class weights Skill Classification (Binary) <code>skill_tier_binary</code> Easy Less overlap, simpler model Score Regression <code>overall_score</code> Easy MSE loss, normalized target Multi-task Learning Multiple scores Hard Use orthogonal targets Rudiment Classification <code>rudiment_slug</code> Medium 40-class classification"},{"location":"user-guide/ml-training/#skill-classification","title":"Skill Classification","text":""},{"location":"user-guide/ml-training/#4-class-classification","title":"4-Class Classification","text":"<p>Classify samples into beginner, intermediate, advanced, or professional.</p> <p>Classification Ceiling</p> <p>Adjacent skill tiers have 67-83% score overlap, creating an inherent accuracy ceiling of ~70-80%. This is realistic (skill exists on a continuum) but affects model evaluation.</p>"},{"location":"user-guide/ml-training/#recommended-setup","title":"Recommended Setup","text":"<pre><code>from datasets import load_dataset\nfrom collections import Counter\nimport torch\nimport torch.nn as nn\n\n# Load dataset\ndataset = load_dataset(\"zkeown/sousa\")\n\n# Filter for confident tier assignments\ntrain = dataset[\"train\"].filter(lambda x: x[\"tier_confidence\"] &gt; 0.5)\nval = dataset[\"validation\"].filter(lambda x: x[\"tier_confidence\"] &gt; 0.5)\n\n# Label mapping\nlabel2id = {\n    \"beginner\": 0,\n    \"intermediate\": 1,\n    \"advanced\": 2,\n    \"professional\": 3,\n}\nid2label = {v: k for k, v in label2id.items()}\nnum_labels = len(label2id)\n</code></pre>"},{"location":"user-guide/ml-training/#class-weights-required","title":"Class Weights (Required)","text":"<p>The 4.26:1 class imbalance requires class weights:</p> <pre><code># Compute inverse frequency weights\nlabels = [sample[\"skill_tier\"] for sample in train]\ncounts = Counter(labels)\ntotal = sum(counts.values())\n\nweights = {k: total / (len(counts) * v) for k, v in counts.items()}\nclass_weights = torch.tensor([\n    weights[\"beginner\"],\n    weights[\"intermediate\"],\n    weights[\"advanced\"],\n    weights[\"professional\"],\n])\n\n# Use in loss function\ncriterion = nn.CrossEntropyLoss(weight=class_weights)\n</code></pre>"},{"location":"user-guide/ml-training/#evaluation-metrics","title":"Evaluation Metrics","text":"<p>Always report balanced accuracy, not just accuracy:</p> <pre><code>from sklearn.metrics import (\n    balanced_accuracy_score,\n    classification_report,\n    confusion_matrix,\n)\n\n# Predict on test set\ny_true = [sample[\"skill_tier\"] for sample in test]\ny_pred = model.predict(test)\n\n# Balanced accuracy (handles class imbalance)\nbalanced_acc = balanced_accuracy_score(y_true, y_pred)\nprint(f\"Balanced Accuracy: {balanced_acc:.3f}\")\n\n# Per-class metrics\nprint(classification_report(y_true, y_pred, target_names=list(label2id.keys())))\n\n# Confusion matrix\ncm = confusion_matrix(y_true, y_pred, labels=list(label2id.keys()))\n</code></pre>"},{"location":"user-guide/ml-training/#binary-classification-recommended","title":"Binary Classification (Recommended)","text":"<p>For cleaner labels with less overlap:</p> <pre><code># Use binary labels\ntrain = dataset[\"train\"]\n\n# Binary: novice (beginner + intermediate) vs skilled (advanced + professional)\ndef add_binary_label(sample):\n    sample[\"label\"] = 0 if sample[\"skill_tier_binary\"] == \"novice\" else 1\n    return sample\n\ntrain = train.map(add_binary_label)\n\n# Simpler loss (still use class weights if imbalanced)\ncriterion = nn.BCEWithLogitsLoss()\n</code></pre> <p>Expected Performance:</p> Approach Balanced Accuracy Notes 4-class, no filtering ~65-70% Overlap limits performance 4-class, tier_confidence &gt; 0.5 ~75-80% Cleaner labels Binary classification ~85-90% Less overlap"},{"location":"user-guide/ml-training/#score-regression","title":"Score Regression","text":""},{"location":"user-guide/ml-training/#overall-score-as-target","title":"Overall Score as Target","text":"<p>The simplest and most effective regression target:</p> <pre><code>import torch\nimport torch.nn as nn\n\n# Normalize to 0-1 range\ndef preprocess(sample):\n    sample[\"target\"] = sample[\"overall_score\"] / 100.0\n    return sample\n\ntrain = dataset[\"train\"].map(preprocess)\n\n# MSE loss\ncriterion = nn.MSELoss()\n\n# Or use Huber loss for robustness to outliers\ncriterion = nn.HuberLoss(delta=0.1)\n</code></pre>"},{"location":"user-guide/ml-training/#why-overall-score","title":"Why Overall Score?","text":"<p>The <code>overall_score</code> captures the correlated cluster of timing/consistency scores:</p> <pre><code>timing_accuracy \u2194 timing_consistency: r = 0.89\ntiming_accuracy \u2194 overall_score: r = 0.88\n</code></pre> <p>Using individual scores as separate targets provides redundant signal.</p>"},{"location":"user-guide/ml-training/#evaluation-metrics_1","title":"Evaluation Metrics","text":"<pre><code>from sklearn.metrics import mean_squared_error, mean_absolute_error, r2_score\n\ny_true = [sample[\"overall_score\"] for sample in test]\ny_pred = model.predict(test) * 100  # Denormalize\n\nmse = mean_squared_error(y_true, y_pred)\nmae = mean_absolute_error(y_true, y_pred)\nr2 = r2_score(y_true, y_pred)\n\nprint(f\"MSE: {mse:.2f}\")\nprint(f\"MAE: {mae:.2f}\")\nprint(f\"R2: {r2:.3f}\")\n</code></pre>"},{"location":"user-guide/ml-training/#multi-task-learning","title":"Multi-Task Learning","text":""},{"location":"user-guide/ml-training/#minimal-orthogonal-score-set","title":"Minimal Orthogonal Score Set","text":"<p>Avoid using all scores (high redundancy). Use these orthogonal targets:</p> <pre><code># Recommended minimal set\nTARGETS = [\"overall_score\", \"tempo_stability\"]\n\ndef preprocess_multitask(sample):\n    sample[\"targets\"] = {\n        \"overall_score\": sample[\"overall_score\"] / 100.0,\n        \"tempo_stability\": sample[\"tempo_stability\"] / 100.0,\n    }\n    return sample\n</code></pre>"},{"location":"user-guide/ml-training/#multi-head-architecture","title":"Multi-Head Architecture","text":"<pre><code>import torch\nimport torch.nn as nn\n\nclass MultiTaskHead(nn.Module):\n    def __init__(self, input_dim, num_tasks=2):\n        super().__init__()\n        self.heads = nn.ModuleList([\n            nn.Linear(input_dim, 1) for _ in range(num_tasks)\n        ])\n\n    def forward(self, x):\n        return [head(x).squeeze(-1) for head in self.heads]\n\n# Combined loss\ndef multi_task_loss(predictions, targets, weights=None):\n    if weights is None:\n        weights = [1.0] * len(predictions)\n\n    loss = 0\n    for pred, target, weight in zip(predictions, targets, weights):\n        loss += weight * nn.functional.mse_loss(pred, target)\n\n    return loss\n</code></pre>"},{"location":"user-guide/ml-training/#handling-rudiment-specific-scores","title":"Handling Rudiment-Specific Scores","text":"<p>Some scores are null for non-applicable rudiments:</p> <pre><code># Mask-based loss for optional scores\ndef masked_mse_loss(predictions, targets, mask):\n    \"\"\"Compute MSE only where mask is True.\"\"\"\n    if mask.sum() == 0:\n        return torch.tensor(0.0)\n\n    masked_pred = predictions[mask]\n    masked_target = targets[mask]\n    return nn.functional.mse_loss(masked_pred, masked_target)\n\n# Example: flam_quality is only valid for flam rudiments\nflam_mask = torch.tensor([\n    sample[\"flam_quality\"] is not None for sample in batch\n])\nif flam_mask.any():\n    flam_loss = masked_mse_loss(flam_pred, flam_target, flam_mask)\n</code></pre>"},{"location":"user-guide/ml-training/#audio-preprocessing","title":"Audio Preprocessing","text":""},{"location":"user-guide/ml-training/#resampling","title":"Resampling","text":"<p>SOUSA audio is 44.1kHz. Many pretrained models expect 16kHz:</p> <pre><code>import torchaudio\nimport torchaudio.transforms as T\n\n# Resample to 16kHz\nresampler = T.Resample(orig_freq=44100, new_freq=16000)\n\ndef resample_audio(sample):\n    waveform = torch.tensor(sample[\"audio\"][\"array\"])\n    if waveform.dim() == 1:\n        waveform = waveform.unsqueeze(0)\n    resampled = resampler(waveform).squeeze(0)\n    sample[\"audio\"][\"array\"] = resampled.numpy()\n    sample[\"audio\"][\"sampling_rate\"] = 16000\n    return sample\n</code></pre> <p>Sample Rate by Model:</p> Model Expected Rate Wav2Vec2 16,000 Hz HuBERT 16,000 Hz Whisper 16,000 Hz AST 16,000 Hz CLAP 48,000 Hz Custom CNN Any (use native 44,100 Hz)"},{"location":"user-guide/ml-training/#mel-spectrogram-features","title":"Mel-Spectrogram Features","text":"<p>For spectrogram-based models:</p> <pre><code>import torchaudio.transforms as T\n\n# Recommended parameters for drum audio\nmel_transform = T.MelSpectrogram(\n    sample_rate=16000,      # After resampling\n    n_fft=1024,             # ~64ms window\n    hop_length=256,         # ~16ms hop\n    n_mels=128,             # Frequency bins\n    f_min=20,               # Capture low fundamentals\n    f_max=8000,             # Most drum energy &lt; 8kHz\n)\n\n# Convert to log scale\namplitude_to_db = T.AmplitudeToDB(stype=\"power\", top_db=80)\n\ndef extract_mel_spectrogram(audio_array):\n    waveform = torch.tensor(audio_array).unsqueeze(0)\n    mel = mel_transform(waveform)\n    mel_db = amplitude_to_db(mel)\n    return mel_db.squeeze(0).numpy()\n</code></pre> <p>For onset detection (precise stroke timing):</p> <pre><code>onset_mel = T.MelSpectrogram(\n    sample_rate=16000,\n    n_fft=512,\n    hop_length=128,  # ~8ms for precise timing\n    n_mels=64,\n)\n</code></pre>"},{"location":"user-guide/ml-training/#normalization","title":"Normalization","text":"<p>Per-sample normalization:</p> <pre><code>def normalize_audio(audio_array):\n    \"\"\"Normalize to [-1, 1] range.\"\"\"\n    max_val = np.abs(audio_array).max()\n    if max_val &gt; 0:\n        return audio_array / max_val\n    return audio_array\n</code></pre> <p>Per-frequency-bin normalization (spectrograms):</p> <pre><code>def normalize_spectrogram(mel_db):\n    \"\"\"Per-channel (frequency bin) normalization.\"\"\"\n    mean = mel_db.mean(axis=-1, keepdims=True)\n    std = mel_db.std(axis=-1, keepdims=True) + 1e-6\n    return (mel_db - mean) / std\n</code></pre>"},{"location":"user-guide/ml-training/#handling-variable-length","title":"Handling Variable Length","text":"<p>SOUSA samples vary in duration (4-12 seconds typical).</p> <p>Padding/Truncation:</p> <pre><code>TARGET_LENGTH = 5 * 16000  # 5 seconds at 16kHz\n\ndef pad_or_truncate(audio_array):\n    if len(audio_array) &gt; TARGET_LENGTH:\n        return audio_array[:TARGET_LENGTH]\n    elif len(audio_array) &lt; TARGET_LENGTH:\n        padding = TARGET_LENGTH - len(audio_array)\n        return np.pad(audio_array, (0, padding), mode='constant')\n    return audio_array\n</code></pre> <p>Dynamic batching:</p> <pre><code>from torch.nn.utils.rnn import pad_sequence\n\ndef collate_variable_length(batch):\n    waveforms = [torch.tensor(s[\"audio\"][\"array\"]) for s in batch]\n    lengths = torch.tensor([len(w) for w in waveforms])\n\n    # Pad to max length in batch\n    padded = pad_sequence(waveforms, batch_first=True)\n\n    labels = torch.tensor([s[\"overall_score\"] / 100.0 for s in batch])\n\n    return {\n        \"waveforms\": padded,\n        \"lengths\": lengths,\n        \"labels\": labels,\n    }\n\ndataloader = DataLoader(\n    dataset,\n    batch_size=16,\n    collate_fn=collate_variable_length\n)\n</code></pre>"},{"location":"user-guide/ml-training/#pytorch-dataloader-examples","title":"PyTorch DataLoader Examples","text":""},{"location":"user-guide/ml-training/#basic-dataloader","title":"Basic DataLoader","text":"<pre><code>from torch.utils.data import DataLoader, Dataset\nfrom datasets import load_dataset\n\nclass SOUSADataset(Dataset):\n    def __init__(self, hf_dataset, transform=None):\n        self.data = hf_dataset\n        self.transform = transform\n\n    def __len__(self):\n        return len(self.data)\n\n    def __getitem__(self, idx):\n        sample = self.data[idx]\n\n        # Extract audio\n        audio = torch.tensor(sample[\"audio\"][\"array\"], dtype=torch.float32)\n\n        # Extract label\n        label = torch.tensor(sample[\"overall_score\"] / 100.0, dtype=torch.float32)\n\n        if self.transform:\n            audio = self.transform(audio)\n\n        return {\"audio\": audio, \"label\": label}\n\n# Create dataset\nhf_dataset = load_dataset(\"zkeown/sousa\", split=\"train\")\ntrain_dataset = SOUSADataset(hf_dataset)\n\n# Create dataloader\ntrain_loader = DataLoader(\n    train_dataset,\n    batch_size=32,\n    shuffle=True,\n    num_workers=4,\n    pin_memory=True,\n)\n</code></pre>"},{"location":"user-guide/ml-training/#with-preprocessing","title":"With Preprocessing","text":"<pre><code>import torchaudio.transforms as T\n\nclass SOUSAMelDataset(Dataset):\n    def __init__(self, hf_dataset, sample_rate=16000):\n        self.data = hf_dataset\n        self.sample_rate = sample_rate\n\n        # Transforms\n        self.resampler = T.Resample(orig_freq=44100, new_freq=sample_rate)\n        self.mel_transform = T.MelSpectrogram(\n            sample_rate=sample_rate,\n            n_fft=1024,\n            hop_length=256,\n            n_mels=128,\n        )\n        self.to_db = T.AmplitudeToDB()\n\n    def __getitem__(self, idx):\n        sample = self.data[idx]\n\n        # Load and resample audio\n        audio = torch.tensor(sample[\"audio\"][\"array\"]).unsqueeze(0)\n        audio = self.resampler(audio)\n\n        # Extract mel spectrogram\n        mel = self.mel_transform(audio)\n        mel_db = self.to_db(mel)\n\n        # Normalize\n        mel_db = (mel_db - mel_db.mean()) / (mel_db.std() + 1e-6)\n\n        # Label\n        label = torch.tensor(sample[\"overall_score\"] / 100.0)\n\n        return {\"mel\": mel_db.squeeze(0), \"label\": label}\n</code></pre>"},{"location":"user-guide/ml-training/#streaming-dataloader","title":"Streaming DataLoader","text":"<p>For large datasets that don't fit in memory:</p> <pre><code>from datasets import load_dataset\nfrom torch.utils.data import IterableDataset, DataLoader\n\nclass StreamingSOUSADataset(IterableDataset):\n    def __init__(self, split=\"train\"):\n        self.dataset = load_dataset(\"zkeown/sousa\", split=split, streaming=True)\n\n    def __iter__(self):\n        for sample in self.dataset:\n            audio = torch.tensor(sample[\"audio\"][\"array\"], dtype=torch.float32)\n            label = torch.tensor(sample[\"overall_score\"] / 100.0)\n            yield {\"audio\": audio, \"label\": label}\n\n# Streaming dataloader\nstream_loader = DataLoader(\n    StreamingSOUSADataset(\"train\"),\n    batch_size=32,\n)\n\n# Iterate\nfor batch in stream_loader:\n    # Process batch\n    pass\n</code></pre>"},{"location":"user-guide/ml-training/#training-loop-example","title":"Training Loop Example","text":"<pre><code>import torch\nimport torch.nn as nn\nimport torch.optim as optim\nfrom tqdm import tqdm\n\ndef train_epoch(model, train_loader, criterion, optimizer, device):\n    model.train()\n    total_loss = 0\n\n    for batch in tqdm(train_loader, desc=\"Training\"):\n        audio = batch[\"audio\"].to(device)\n        labels = batch[\"label\"].to(device)\n\n        optimizer.zero_grad()\n        outputs = model(audio)\n        loss = criterion(outputs.squeeze(), labels)\n        loss.backward()\n        optimizer.step()\n\n        total_loss += loss.item()\n\n    return total_loss / len(train_loader)\n\ndef evaluate(model, val_loader, criterion, device):\n    model.eval()\n    total_loss = 0\n    all_preds = []\n    all_labels = []\n\n    with torch.no_grad():\n        for batch in val_loader:\n            audio = batch[\"audio\"].to(device)\n            labels = batch[\"label\"].to(device)\n\n            outputs = model(audio)\n            loss = criterion(outputs.squeeze(), labels)\n\n            total_loss += loss.item()\n            all_preds.extend(outputs.squeeze().cpu().numpy())\n            all_labels.extend(labels.cpu().numpy())\n\n    return total_loss / len(val_loader), all_preds, all_labels\n\n# Training\ndevice = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\nmodel = YourModel().to(device)\ncriterion = nn.MSELoss()\noptimizer = optim.AdamW(model.parameters(), lr=1e-4)\n\nfor epoch in range(num_epochs):\n    train_loss = train_epoch(model, train_loader, criterion, optimizer, device)\n    val_loss, preds, labels = evaluate(model, val_loader, criterion, device)\n\n    print(f\"Epoch {epoch+1}: Train Loss={train_loss:.4f}, Val Loss={val_loss:.4f}\")\n</code></pre>"},{"location":"user-guide/ml-training/#best-practices-summary","title":"Best Practices Summary","text":"Aspect Recommendation Skill classification Use binary labels or filter by <code>tier_confidence &gt; 0.5</code> Class imbalance Always use class weights for 4-class classification Regression target Use <code>overall_score</code> (captures correlated cluster) Multi-task Use <code>[\"overall_score\", \"tempo_stability\"]</code> (orthogonal) Audio preprocessing Resample to 16kHz for pretrained models Evaluation Report balanced accuracy for classification Augmentation Train on mixed presets, validate on clean Data splits Use provided profile-based splits (prevents leakage)"},{"location":"user-guide/validation/","title":"Validation Guide","text":"<p>SOUSA includes a comprehensive validation infrastructure with 2,132 lines of validation code across 5 modules. This guide covers running validation, interpreting results, and understanding the quality benchmarks.</p>"},{"location":"user-guide/validation/#validation-architecture","title":"Validation Architecture","text":"<pre><code>dataset_gen/validation/\n\u251c\u2500\u2500 __init__.py        # Module exports\n\u251c\u2500\u2500 verify.py          # Data integrity (13 checks)\n\u251c\u2500\u2500 analysis.py        # Statistical analysis\n\u251c\u2500\u2500 realism.py         # Literature validation\n\u2514\u2500\u2500 report.py          # Report generation\n</code></pre> <p>The validation pipeline processes datasets through three stages:</p> <pre><code>Input: Parquet Dataset\n         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  1. LABEL VERIFICATION          \u2502\n\u2502     - Data integrity (13 checks)\u2502\n\u2502     - References valid          \u2502\n\u2502     - Ranges correct            \u2502\n\u2502     - Metadata matches records  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  2. STATISTICAL ANALYSIS        \u2502\n\u2502     - 11 distribution metrics   \u2502\n\u2502     - Grouped by skill tier     \u2502\n\u2502     - Moments &amp; quartiles       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  3. REALISM VALIDATION          \u2502\n\u2502     - Literature benchmarks     \u2502\n\u2502     - Correlation structure     \u2502\n\u2502     - Skill tier separation     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193\nOUTPUT: ValidationReport (JSON)\n</code></pre>"},{"location":"user-guide/validation/#running-validation","title":"Running Validation","text":""},{"location":"user-guide/validation/#automatic-validation-default","title":"Automatic Validation (Default)","text":"<p>Validation runs automatically after dataset generation:</p> <pre><code>python scripts/generate_dataset.py --preset small\n# Validation runs at the end\n</code></pre> <p>To skip validation:</p> <pre><code>python scripts/generate_dataset.py --preset small --skip-validation\n</code></pre>"},{"location":"user-guide/validation/#generate-validation-report","title":"Generate Validation Report","text":"<pre><code>from dataset_gen.validation.report import generate_report\n\n# Generate comprehensive report\nreport = generate_report(\n    dataset_dir='output/dataset',\n    output_path='validation_report.json',\n    include_realism=True,\n    include_midi_checks=True\n)\n\n# Print summary\nprint(report.summary())\n</code></pre>"},{"location":"user-guide/validation/#quick-validation-check","title":"Quick Validation Check","text":"<pre><code>from dataset_gen.validation.report import quick_validate\n\n# Returns True if all critical checks pass\nis_valid = quick_validate('output/dataset')\nprint(f\"Dataset valid: {is_valid}\")\n</code></pre>"},{"location":"user-guide/validation/#individual-validation-components","title":"Individual Validation Components","text":"<pre><code>from dataset_gen.validation import (\n    analyze_dataset,\n    verify_labels,\n    validate_realism\n)\n\n# Statistical analysis\nstats = analyze_dataset('output/dataset')\nprint(f\"Total samples: {stats['num_samples']}\")\nprint(f\"Mean timing error: {stats['timing_error']['mean']:.2f}ms\")\nprint(f\"Skill tier distribution: {stats['skill_tier_counts']}\")\n\n# Data integrity verification\nresult = verify_labels('output/dataset')\nprint(f\"Checks passed: {result.num_passed}/{result.num_passed + result.num_failed}\")\nfor check in result.checks:\n    status = \"PASS\" if check.passed else \"FAIL\"\n    print(f\"  [{status}] {check.name}: {check.message}\")\n\n# Realism validation\nrealism = validate_realism('output/dataset')\nprint(f\"Literature pass rate: {realism['literature_pass_rate']}%\")\nprint(f\"Correlation pass rate: {realism['correlation_pass_rate']}%\")\n</code></pre>"},{"location":"user-guide/validation/#command-line-validation","title":"Command Line Validation","text":"<pre><code># Check dataset health\npython scripts/check_generation.py output/dataset\n</code></pre>"},{"location":"user-guide/validation/#interpreting-results","title":"Interpreting Results","text":""},{"location":"user-guide/validation/#validation-report-summary","title":"Validation Report Summary","text":"<pre><code>=== SOUSA Validation Report ===\nDataset: output/dataset\nGenerated: 2026-01-25T21:18:35\n\nSamples: 99,770\nProfiles: 100\nRudiments: 40\n\nVerification: 13/13 checks passed\nLiterature validation: 100% pass rate\nCorrelation checks: 80% pass rate\n</code></pre>"},{"location":"user-guide/validation/#understanding-check-results","title":"Understanding Check Results","text":"Result Meaning Action 13/13 passed All integrity checks pass Dataset is valid Literature 100% Timing matches research Realistic profiles Correlation 80% Most correlations expected Minor deviations OK <p>Failed checks</p> <p>If verification checks fail, the dataset may have integrity issues. Review the specific check messages and regenerate if necessary.</p>"},{"location":"user-guide/validation/#data-integrity-checks","title":"Data Integrity Checks","text":"<p>The <code>LabelVerifier</code> runs 13 verification checks:</p>"},{"location":"user-guide/validation/#1-sample-id-uniqueness","title":"1. Sample ID Uniqueness","text":"<p>Ensures all sample IDs are unique across the dataset.</p> <pre><code>Result: 99,770/99,770 unique sample IDs\n</code></pre>"},{"location":"user-guide/validation/#2-4-reference-validity","title":"2-4. Reference Validity","text":"<p>Verifies foreign key relationships between tables:</p> Check Description Expected <code>stroke_refs_valid</code> All strokes reference valid samples 100% valid <code>measure_refs_valid</code> All measures reference valid samples 100% valid <code>exercise_refs_valid</code> All exercises reference valid samples 100% valid"},{"location":"user-guide/validation/#5-velocity-range","title":"5. Velocity Range","text":"<p>MIDI velocity must be in [0, 127]:</p> <pre><code>Result: 99.99% in valid MIDI range\n</code></pre>"},{"location":"user-guide/validation/#6-timing-range","title":"6. Timing Range","text":"<p>Timing errors should be bounded:</p> Metric Expected Typical Result Max error &lt; 500ms ~300ms % under 200ms &gt; 95% ~97% Mean error &lt; 100ms ~48ms"},{"location":"user-guide/validation/#7-score-ranges","title":"7. Score Ranges","text":"<p>All exercise scores must be in [0, 100]:</p> <ul> <li><code>timing_accuracy</code>, <code>timing_consistency</code>, <code>tempo_stability</code></li> <li><code>velocity_control</code>, <code>accent_differentiation</code>, <code>accent_accuracy</code></li> <li><code>hand_balance</code>, <code>overall_score</code></li> </ul>"},{"location":"user-guide/validation/#8-9-count-consistency","title":"8-9. Count Consistency","text":"<p>Metadata counts must match actual records:</p> Check Description <code>stroke_counts_match</code> <code>num_strokes</code> matches stroke records <code>measure_counts_match</code> <code>num_measures</code> matches measure records"},{"location":"user-guide/validation/#10-11-skill-tier-ordering","title":"10-11. Skill Tier Ordering","text":"<p>Performance metrics must be properly ordered by skill:</p> <p>Timing Accuracy (Professional &gt; Advanced &gt; Intermediate &gt; Beginner):</p> Tier Expected Mean Professional ~77 Advanced ~58 Intermediate ~33 Beginner ~6 <p>Hand Balance (same ordering):</p> Tier Expected Mean Professional ~96 Advanced ~94 Intermediate ~88 Beginner ~77"},{"location":"user-guide/validation/#12-rudiment-pattern-correctness","title":"12. Rudiment Pattern Correctness","text":"<p>Samples sticking patterns and verifies they match YAML definitions.</p> <pre><code>Result: 0 pattern mismatches (100 samples checked)\n</code></pre>"},{"location":"user-guide/validation/#13-label-midi-alignment","title":"13. Label-MIDI Alignment","text":"<p>Checks that stroke labels align with actual MIDI note events.</p> <pre><code>Result: 100.0% alignment (400 strokes across 10 samples)\n</code></pre>"},{"location":"user-guide/validation/#literature-benchmarks","title":"Literature Benchmarks","text":""},{"location":"user-guide/validation/#timing-error-standard-deviation","title":"Timing Error Standard Deviation","text":"<p>Compared against peer-reviewed motor learning research:</p> Skill Tier Expected Range Source Professional 5-15ms Fujii et al. (2011) Advanced 8-25ms Repp (2005) Intermediate 20-45ms Wing &amp; Kristofferson (1973) Beginner 35-80ms Palmer (1997)"},{"location":"user-guide/validation/#velocity-coefficient-of-variation","title":"Velocity Coefficient of Variation","text":"Skill Tier Expected Range Source Professional 0.05-0.12 Schmidt &amp; Lee (2011) Advanced 0.08-0.18 Schmidt &amp; Lee (2011) Intermediate 0.12-0.25 Schmidt &amp; Lee (2011) Beginner 0.18-0.35 Schmidt &amp; Lee (2011)"},{"location":"user-guide/validation/#expected-pass-rates","title":"Expected Pass Rates","text":"Validation Type Expected Notes Literature comparisons 100% All tiers within ranges Correlation checks 80%+ Some expected deviations"},{"location":"user-guide/validation/#correlation-structure","title":"Correlation Structure","text":""},{"location":"user-guide/validation/#expected-correlations","title":"Expected Correlations","text":"Dimension Pair Expected r Reason Timing Accuracy - Timing Consistency &gt; 0.5 Both from timing errors Timing Accuracy - Hand Balance &gt; 0.3 Correlated skills Velocity Control - Accent Differentiation &gt; 0.4 Dynamic range mastery Timing Accuracy - Overall Score &gt; 0.6 Major component Hand Balance - Overall Score &gt; 0.4 Component score"},{"location":"user-guide/validation/#full-correlation-matrix","title":"Full Correlation Matrix","text":"<pre><code>                    timing_acc  timing_cons  tempo_stab  vel_ctrl  accent_diff  hand_bal  overall\ntiming_accuracy        1.000       0.888       0.575      0.277       0.050      0.464     0.875\ntiming_consistency     0.888       1.000       0.532      0.389       0.083      0.418     0.885\ntempo_stability        0.575       0.532       1.000      0.197       0.023      0.229     0.649\nvelocity_control       0.277       0.389       0.197      1.000       0.259      0.173     0.551\naccent_differentiation 0.050       0.083       0.023      0.259       1.000     -0.103     0.360\nhand_balance           0.464       0.418       0.229      0.173      -0.103      1.000     0.415\noverall_score          0.875       0.885       0.649      0.551       0.360      0.415     1.000\n</code></pre> <p>Velocity/Accent correlation</p> <p>The velocity_control to accent_differentiation correlation is lower than expected because accents are intentionally sampled at different velocities, reducing the correlation.</p>"},{"location":"user-guide/validation/#skill-tier-separation-anova","title":"Skill Tier Separation (ANOVA)","text":"<p>One-way ANOVA confirms skill tiers are statistically distinguishable:</p> Metric F-Statistic p-value Significant Timing Accuracy 44,172 &lt; 0.001 Yes Hand Balance 18,465 &lt; 0.001 Yes Overall Score 55,260 &lt; 0.001 Yes <p>All metrics show highly significant separation with massive F-statistics.</p>"},{"location":"user-guide/validation/#validation-report-schema","title":"Validation Report Schema","text":"<p>The <code>validation_report.json</code> file contains:</p> <pre><code>{\n  \"dataset_path\": \"output/dataset\",\n  \"generated_at\": \"2026-01-25T21:18:35.372368\",\n  \"stats\": {\n    \"num_samples\": 99770,\n    \"num_profiles\": 100,\n    \"num_rudiments\": 40,\n    \"tempo\": { /* DistributionStats */ },\n    \"duration\": { /* DistributionStats */ },\n    \"timing_error\": { /* DistributionStats with by_group */ },\n    \"exercise_timing_accuracy\": { /* DistributionStats with by_group */ },\n    \"skill_tier_counts\": { /* counts by tier */ },\n    \"rudiment_counts\": { /* counts by rudiment */ },\n    \"split_counts\": { /* train/val/test counts */ }\n  },\n  \"verification\": {\n    \"all_passed\": true,\n    \"num_passed\": 13,\n    \"num_failed\": 0,\n    \"checks\": [ /* array of check results */ ]\n  },\n  \"skill_tier_ordering\": {\n    \"timing_accuracy_ordered\": true,\n    \"timing_accuracy_means\": { /* by tier */ },\n    \"hand_balance_ordered\": true,\n    \"hand_balance_means\": { /* by tier */ }\n  },\n  \"realism\": {\n    \"literature_comparisons\": [ /* array of comparisons */ ],\n    \"literature_pass_rate\": 100.0,\n    \"correlation_checks\": [ /* array of checks */ ],\n    \"correlation_pass_rate\": 80.0,\n    \"correlation_matrix\": { /* full matrix */ },\n    \"skill_tier_separation\": {\n      \"timing_accuracy\": { \"f_statistic\": 44171.75, \"p_value\": 0.0 },\n      \"hand_balance\": { \"f_statistic\": 18464.86, \"p_value\": 0.0 },\n      \"overall_score\": { \"f_statistic\": 55260.32, \"p_value\": 0.0 }\n    }\n  }\n}\n</code></pre>"},{"location":"user-guide/validation/#reading-the-report","title":"Reading the Report","text":"<pre><code>import json\n\nwith open('output/dataset/validation_report.json') as f:\n    report = json.load(f)\n\n# Check if all verifications passed\nprint(f\"All checks passed: {report['verification']['all_passed']}\")\n\n# Get timing accuracy by skill tier\ntiming = report['stats']['exercise_timing_accuracy']['by_group']\nfor tier, stats in timing.items():\n    print(f\"{tier}: {stats['mean']:.1f} +/- {stats['std']:.1f}\")\n\n# Check realism validation\nprint(f\"Literature: {report['realism']['literature_pass_rate']}% pass\")\nprint(f\"Correlations: {report['realism']['correlation_pass_rate']}% pass\")\n</code></pre>"},{"location":"user-guide/validation/#test-suite-overview","title":"Test Suite Overview","text":"<p>The validation infrastructure has 26 test cases in <code>tests/test_validation.py</code>:</p> Test Class Tests Coverage TestDistributionStats 2 Statistics computation TestDatasetAnalyzer 4 Analysis pipeline TestLabelVerifier 7 All 13 integrity checks TestVerificationResult 3 Result aggregation TestValidationReport 5 Report generation TestSkillTierOrdering 2 Ordering verification TestDataIntegrity 3 Edge cases"},{"location":"user-guide/validation/#running-tests","title":"Running Tests","text":"<pre><code># Run all validation tests\npytest tests/test_validation.py -v\n\n# Run specific test class\npytest tests/test_validation.py::TestLabelVerifier -v\n\n# Run with coverage\npytest tests/test_validation.py --cov=dataset_gen.validation\n</code></pre>"},{"location":"user-guide/validation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/validation/#failed-integrity-checks","title":"Failed Integrity Checks","text":"Check Common Cause Solution Sample ID uniqueness Duplicate generation Regenerate with different seed Reference validity Incomplete writes Check disk space, regenerate Score ranges Bug in score computation Update dataset_gen, regenerate Skill tier ordering Insufficient samples Use larger preset"},{"location":"user-guide/validation/#low-literature-pass-rate","title":"Low Literature Pass Rate","text":"<p>If literature comparisons fail:</p> <ol> <li>Check skill tier distribution matches expected proportions</li> <li>Verify timing parameters in profile generation</li> <li>Review <code>dataset_gen/profiles/archetypes.py</code> for parameter ranges</li> </ol>"},{"location":"user-guide/validation/#unexpected-correlation-structure","title":"Unexpected Correlation Structure","text":"<p>Some correlation deviations are expected:</p> <ul> <li>Low velocity/accent correlation: By design (accents vary velocity)</li> <li>High timing correlations: Expected (scores derived from same errors)</li> </ul> <p>If correlations are significantly off:</p> <ol> <li>Check profile generation parameters</li> <li>Verify score computation in <code>dataset_gen/labels/compute.py</code></li> </ol>"},{"location":"user-guide/validation/#references","title":"References","text":"<p>The realism validation compares against these peer-reviewed sources:</p> <ol> <li> <p>Fujii, S., et al. (2011). Synchronization error of drum kit playing. Music Perception, 28(5), 491-503.</p> </li> <li> <p>Repp, B. H. (2005). Sensorimotor synchronization: A review. Psychonomic Bulletin &amp; Review, 12(6), 969-992.</p> </li> <li> <p>Wing, A. M., &amp; Kristofferson, A. B. (1973). Response delays and timing. Perception &amp; Psychophysics, 14(1), 5-12.</p> </li> <li> <p>Palmer, C. (1997). Music performance. Annual Review of Psychology, 48(1), 115-138.</p> </li> <li> <p>Schmidt, R. A., &amp; Lee, T. D. (2011). Motor control and learning (5<sup>th</sup> ed.). Human Kinetics.</p> </li> </ol>"}]}